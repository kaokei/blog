(window.webpackJsonp=window.webpackJsonp||[]).push([[0],[]]);!function(e){function n(n){for(var r,a,s=n[0],c=n[1],u=n[2],p=0,d=[];p<s.length;p++)a=s[p],Object.prototype.hasOwnProperty.call(o,a)&&o[a]&&d.push(o[a][0]),o[a]=0;for(r in c)Object.prototype.hasOwnProperty.call(c,r)&&(e[r]=c[r]);for(l&&l(n);d.length;)d.shift()();return i.push.apply(i,u||[]),t()}function t(){for(var e,n=0;n<i.length;n++){for(var t=i[n],r=!0,s=1;s<t.length;s++){var c=t[s];0!==o[c]&&(r=!1)}r&&(i.splice(n--,1),e=a(a.s=t[0]))}return e}var r={},o={1:0},i=[];function a(n){if(r[n])return r[n].exports;var t=r[n]={i:n,l:!1,exports:{}};return e[n].call(t.exports,t,t.exports,a),t.l=!0,t.exports}a.e=function(e){var n=[],t=o[e];if(0!==t)if(t)n.push(t[2]);else{var r=new Promise((function(n,r){t=o[e]=[n,r]}));n.push(t[2]=r);var i,s=document.createElement("script");s.charset="utf-8",s.timeout=120,a.nc&&s.setAttribute("nonce",a.nc),s.src=function(e){return a.p+"assets/js/"+({}[e]||e)+"."+{2:"542569c2",3:"95cbc00b",4:"cf2d1da2",5:"92d13530",6:"9fd0b89c",7:"552502a3",8:"3bf7e174",9:"b9d8930d",10:"1eb7c680",11:"258acee6",12:"fb2ab540",13:"697f5dfd",14:"b331bf4f",15:"fcd9f026",16:"b719c520",17:"ee9b93ca",18:"fe205c36",19:"60f05b5c",20:"bd4c40cd",21:"84090e52",22:"64f3eeca",23:"3c792051",24:"298d486e",25:"dff5abc7",26:"f502a437",27:"3fab2c51",28:"f0da5c06",29:"b547495c",30:"105158c8",31:"898adb4c",32:"bf74dfb6",33:"8b646047",34:"406000ef",35:"89dc7f20",36:"c2f614e6",37:"0e150efc",38:"014e789b",39:"0ff6f3ad",40:"d513cb21",41:"7e354214",42:"208ade19",43:"01c9614a",44:"f389d6ae",45:"ba4481f1",46:"17d366bf",47:"1fce5103"}[e]+".js"}(e);var c=new Error;i=function(n){s.onerror=s.onload=null,clearTimeout(u);var t=o[e];if(0!==t){if(t){var r=n&&("load"===n.type?"missing":n.type),i=n&&n.target&&n.target.src;c.message="Loading chunk "+e+" failed.\n("+r+": "+i+")",c.name="ChunkLoadError",c.type=r,c.request=i,t[1](c)}o[e]=void 0}};var u=setTimeout((function(){i({type:"timeout",target:s})}),12e4);s.onerror=s.onload=i,document.head.appendChild(s)}return Promise.all(n)},a.m=e,a.c=r,a.d=function(e,n,t){a.o(e,n)||Object.defineProperty(e,n,{enumerable:!0,get:t})},a.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},a.t=function(e,n){if(1&n&&(e=a(e)),8&n)return e;if(4&n&&"object"==typeof e&&e&&e.__esModule)return e;var t=Object.create(null);if(a.r(t),Object.defineProperty(t,"default",{enumerable:!0,value:e}),2&n&&"string"!=typeof e)for(var r in e)a.d(t,r,function(n){return e[n]}.bind(null,r));return t},a.n=function(e){var n=e&&e.__esModule?function(){return e.default}:function(){return e};return a.d(n,"a",n),n},a.o=function(e,n){return Object.prototype.hasOwnProperty.call(e,n)},a.p="/",a.oe=function(e){throw console.error(e),e};var s=window.webpackJsonp=window.webpackJsonp||[],c=s.push.bind(s);s.push=n,s=s.slice();for(var u=0;u<s.length;u++)n(s[u]);var l=c;i.push([230,0]),t()}([function(e,n){var t=function(e){return e&&e.Math==Math&&e};e.exports=t("object"==typeof globalThis&&globalThis)||t("object"==typeof window&&window)||t("object"==typeof self&&self)||t("object"==typeof global&&global)||function(){return this}()||Function("return this")()},function(e,n,t){var r=t(0),o=t(33).f,i=t(37),a=t(14),s=t(110),c=t(155),u=t(103);e.exports=function(e,n){var t,l,p,d,f,v=e.target,h=e.global,m=e.stat;if(t=h?r:m?r[v]||s(v,{}):(r[v]||{}).prototype)for(l in n){if(d=n[l],p=e.noTargetGet?(f=o(t,l))&&f.value:t[l],!u(h?l:v+(m?".":"#")+l,e.forced)&&void 0!==p){if(typeof d==typeof p)continue;c(d,p)}(e.sham||p&&p.sham)&&i(d,"sham",!0),a(t,l,d,e)}}},function(e,n){var t=Function.prototype,r=t.bind,o=t.call,i=r&&r.bind(o);e.exports=r?function(e){return e&&i(o,e)}:function(e){return e&&function(){return o.apply(e,arguments)}}},function(e,n){e.exports=function(e){try{return!!e()}catch(e){return!0}}},function(e,n,t){var r=t(119),o=t(14),i=t(246);r||o(Object.prototype,"toString",i,{unsafe:!0})},function(e,n){e.exports=function(e){return"function"==typeof e}},function(e,n,t){var r=t(0),o=t(76),i=t(11),a=t(77),s=t(111),c=t(148),u=o("wks"),l=r.Symbol,p=l&&l.for,d=c?l:l&&l.withoutSetter||a;e.exports=function(e){if(!i(u,e)||!s&&"string"!=typeof u[e]){var n="Symbol."+e;s&&i(l,e)?u[e]=l[e]:u[e]=c&&p?p(n):d(n)}return u[e]}},function(e,n,t){var r=t(0),o=t(9),i=r.String,a=r.TypeError;e.exports=function(e){if(o(e))return e;throw a(i(e)+" is not an object")}},function(e,n,t){var r=t(3);e.exports=!r((function(){return 7!=Object.defineProperty({},1,{get:function(){return 7}})[1]}))},function(e,n,t){var r=t(5);e.exports=function(e){return"object"==typeof e?null!==e:r(e)}},function(e,n){var t=Function.prototype.call;e.exports=t.bind?t.bind(t):function(){return t.apply(t,arguments)}},function(e,n,t){var r=t(2),o=t(15),i=r({}.hasOwnProperty);e.exports=Object.hasOwn||function(e,n){return i(o(e),n)}},function(e,n,t){var r=t(0),o=t(8),i=t(150),a=t(7),s=t(79),c=r.TypeError,u=Object.defineProperty;n.f=o?u:function(e,n,t){if(a(e),n=s(n),a(t),i)try{return u(e,n,t)}catch(e){}if("get"in t||"set"in t)throw c("Accessors not supported");return"value"in t&&(e[n]=t.value),e}},function(e,n,t){var r=t(0),o=t(72),i=r.String;e.exports=function(e){if("Symbol"===o(e))throw TypeError("Cannot convert a Symbol value to a string");return i(e)}},function(e,n,t){var r=t(0),o=t(5),i=t(11),a=t(37),s=t(110),c=t(84),u=t(34),l=t(63).CONFIGURABLE,p=u.get,d=u.enforce,f=String(String).split("String");(e.exports=function(e,n,t,c){var u,p=!!c&&!!c.unsafe,v=!!c&&!!c.enumerable,h=!!c&&!!c.noTargetGet,m=c&&void 0!==c.name?c.name:n;o(t)&&("Symbol("===String(m).slice(0,7)&&(m="["+String(m).replace(/^Symbol\(([^)]*)\)/,"$1")+"]"),(!i(t,"name")||l&&t.name!==m)&&a(t,"name",m),(u=d(t)).source||(u.source=f.join("string"==typeof m?m:""))),e!==r?(p?!h&&e[n]&&(v=!0):delete e[n],v?e[n]=t:a(e,n,t)):v?e[n]=t:s(n,t)})(Function.prototype,"toString",(function(){return o(this)&&p(this).source||c(this)}))},function(e,n,t){var r=t(0),o=t(17),i=r.Object;e.exports=function(e){return i(o(e))}},function(e,n,t){"use strict";var r=t(1),o=t(91);r({target:"RegExp",proto:!0,forced:/./.exec!==o},{exec:o})},function(e,n,t){var r=t(0).TypeError;e.exports=function(e){if(null==e)throw r("Can't call method on "+e);return e}},function(e,n,t){var r=t(60),o=t(17);e.exports=function(e){return r(o(e))}},function(e,n,t){var r=t(0),o=t(5),i=function(e){return o(e)?e:void 0};e.exports=function(e,n){return arguments.length<2?i(r[e]):r[e]&&r[e][n]}},function(e,n,t){"use strict";function r(e,n,t,r,o,i,a,s){var c,u="function"==typeof e?e.options:e;if(n&&(u.render=n,u.staticRenderFns=t,u._compiled=!0),r&&(u.functional=!0),i&&(u._scopeId="data-v-"+i),a?(c=function(e){(e=e||this.$vnode&&this.$vnode.ssrContext||this.parent&&this.parent.$vnode&&this.parent.$vnode.ssrContext)||"undefined"==typeof __VUE_SSR_CONTEXT__||(e=__VUE_SSR_CONTEXT__),o&&o.call(this,e),e&&e._registeredComponents&&e._registeredComponents.add(a)},u._ssrRegister=c):o&&(c=s?function(){o.call(this,(u.functional?this.parent:this).$root.$options.shadowRoot)}:o),c)if(u.functional){u._injectStyles=c;var l=u.render;u.render=function(e,n){return c.call(n),l(e,n)}}else{var p=u.beforeCreate;u.beforeCreate=p?[].concat(p,c):[c]}return{exports:e,options:u}}t.d(n,"a",(function(){return r}))},function(e,n,t){"use strict";var r=t(1),o=t(54).filter;r({target:"Array",proto:!0,forced:!t(89)("filter")},{filter:function(e){return o(this,e,arguments.length>1?arguments[1]:void 0)}})},function(e,n,t){"use strict";var r=t(167).charAt,o=t(13),i=t(34),a=t(154),s=i.set,c=i.getterFor("String Iterator");a(String,"String",(function(e){s(this,{type:"String Iterator",string:o(e),index:0})}),(function(){var e,n=c(this),t=n.string,o=n.index;return o>=t.length?{value:void 0,done:!0}:(e=r(t,o),n.index+=e.length,{value:e,done:!1})}))},function(e,n,t){var r=t(49);e.exports=function(e){return r(e.length)}},function(e,n,t){var r=t(0),o=t(168),i=t(169),a=t(139),s=t(37),c=t(6),u=c("iterator"),l=c("toStringTag"),p=a.values,d=function(e,n){if(e){if(e[u]!==p)try{s(e,u,p)}catch(n){e[u]=p}if(e[l]||s(e,l,n),o[n])for(var t in a)if(e[t]!==a[t])try{s(e,t,a[t])}catch(n){e[t]=a[t]}}};for(var f in o)d(r[f]&&r[f].prototype,f);d(i,"DOMTokenList")},function(e,n,t){var r=t(2),o=r({}.toString),i=r("".slice);e.exports=function(e){return i(o(e),8,-1)}},function(e,n){var t=Array.isArray;e.exports=t},function(e,n,t){var r=t(19);e.exports=r("navigator","userAgent")||""},function(e,n,t){"use strict";var r=t(1),o=t(175);r({target:"Array",proto:!0,forced:[].forEach!=o},{forEach:o})},function(e,n,t){var r=t(0),o=t(168),i=t(169),a=t(175),s=t(37),c=function(e){if(e&&e.forEach!==a)try{s(e,"forEach",a)}catch(n){e.forEach=a}};for(var u in o)o[u]&&c(r[u]&&r[u].prototype);c(i)},function(e,n,t){var r=t(184),o="object"==typeof self&&self&&self.Object===Object&&self,i=r||o||Function("return this")();e.exports=i},function(e,n){e.exports=!1},function(e,n,t){var r=t(0),o=t(5),i=t(81),a=r.TypeError;e.exports=function(e){if(o(e))return e;throw a(i(e)+" is not a function")}},function(e,n,t){var r=t(8),o=t(10),i=t(115),a=t(55),s=t(18),c=t(79),u=t(11),l=t(150),p=Object.getOwnPropertyDescriptor;n.f=r?p:function(e,n){if(e=s(e),n=c(n),l)try{return p(e,n)}catch(e){}if(u(e,n))return a(!o(i.f,e,n),e[n])}},function(e,n,t){var r,o,i,a=t(232),s=t(0),c=t(2),u=t(9),l=t(37),p=t(11),d=t(109),f=t(83),v=t(61),h=s.TypeError,m=s.WeakMap;if(a||d.state){var g=d.state||(d.state=new m),b=c(g.get),y=c(g.has),x=c(g.set);r=function(e,n){if(y(g,e))throw new h("Object already initialized");return n.facade=e,x(g,e,n),n},o=function(e){return b(g,e)||{}},i=function(e){return y(g,e)}}else{var j=f("state");v[j]=!0,r=function(e,n){if(p(e,j))throw new h("Object already initialized");return n.facade=e,l(e,j,n),n},o=function(e){return p(e,j)?e[j]:{}},i=function(e){return p(e,j)}}e.exports={set:r,get:o,has:i,enforce:function(e){return i(e)?o(e):r(e,{})},getterFor:function(e){return function(n){var t;if(!u(n)||(t=o(n)).type!==e)throw h("Incompatible receiver, "+e+" required");return t}}}},function(e,n,t){var r,o=t(7),i=t(149),a=t(114),s=t(61),c=t(153),u=t(78),l=t(83),p=l("IE_PROTO"),d=function(){},f=function(e){return"<script>"+e+"<\/script>"},v=function(e){e.write(f("")),e.close();var n=e.parentWindow.Object;return e=null,n},h=function(){try{r=new ActiveXObject("htmlfile")}catch(e){}var e,n;h="undefined"!=typeof document?document.domain&&r?v(r):((n=u("iframe")).style.display="none",c.appendChild(n),n.src=String("javascript:"),(e=n.contentWindow.document).open(),e.write(f("document.F=Object")),e.close(),e.F):v(r);for(var t=a.length;t--;)delete h.prototype[a[t]];return h()};s[p]=!0,e.exports=Object.create||function(e,n){var t;return null!==e?(d.prototype=o(e),t=new d,d.prototype=null,t[p]=e):t=h(),void 0===n?t:i(t,n)}},function(e,n,t){var r=t(2);e.exports=r({}.isPrototypeOf)},function(e,n,t){var r=t(8),o=t(12),i=t(55);e.exports=r?function(e,n,t){return o.f(e,n,i(1,t))}:function(e,n,t){return e[n]=t,e}},function(e,n){var t=Function.prototype,r=t.apply,o=t.bind,i=t.call;e.exports="object"==typeof Reflect&&Reflect.apply||(o?i.bind(r):function(){return i.apply(r,arguments)})},function(e,n,t){var r=t(276),o=t(279);e.exports=function(e,n){var t=o(e,n);return r(t)?t:void 0}},function(e,n,t){"use strict";var r=t(1),o=t(0),i=t(58),a=t(86),s=t(9),c=t(113),u=t(23),l=t(18),p=t(65),d=t(6),f=t(89),v=t(64),h=f("slice"),m=d("species"),g=o.Array,b=Math.max;r({target:"Array",proto:!0,forced:!h},{slice:function(e,n){var t,r,o,d=l(this),f=u(d),h=c(e,f),y=c(void 0===n?f:n,f);if(i(d)&&(t=d.constructor,(a(t)&&(t===g||i(t.prototype))||s(t)&&null===(t=t[m]))&&(t=void 0),t===g||void 0===t))return v(d,h,y);for(r=new(void 0===t?g:t)(b(y-h,0)),o=0;h<y;h++,o++)h in d&&p(r,o,d[h]);return r.length=o,r}})},function(e,n,t){"use strict";t.d(n,"e",(function(){return r})),t.d(n,"b",(function(){return i})),t.d(n,"j",(function(){return a})),t.d(n,"g",(function(){return c})),t.d(n,"h",(function(){return u})),t.d(n,"i",(function(){return l})),t.d(n,"c",(function(){return p})),t.d(n,"f",(function(){return d})),t.d(n,"l",(function(){return f})),t.d(n,"m",(function(){return v})),t.d(n,"d",(function(){return m})),t.d(n,"k",(function(){return g})),t.d(n,"n",(function(){return b})),t.d(n,"a",(function(){return x}));t(16),t(43),t(135),t(70),t(101),t(108),t(42),t(28),t(4),t(29),t(21),t(73),t(102),t(75),t(51),t(204),t(138);var r=/#.*$/,o=/\.(md|html)$/,i=/\/$/,a=/^[a-z]+:/i;function s(e){return decodeURI(e).replace(r,"").replace(o,"")}function c(e){return a.test(e)}function u(e){return/^mailto:/.test(e)}function l(e){return/^tel:/.test(e)}function p(e){if(c(e))return e;var n=e.match(r),t=n?n[0]:"",o=s(e);return i.test(o)?e:o+".html"+t}function d(e,n){var t=e.hash,o=function(e){var n=e.match(r);if(n)return n[0]}(n);return(!o||t===o)&&s(e.path)===s(n)}function f(e,n,t){if(c(n))return{type:"external",path:n};t&&(n=function(e,n,t){var r=e.charAt(0);if("/"===r)return e;if("?"===r||"#"===r)return n+e;var o=n.split("/");t&&o[o.length-1]||o.pop();for(var i=e.replace(/^\//,"").split("/"),a=0;a<i.length;a++){var s=i[a];".."===s?o.pop():"."!==s&&o.push(s)}""!==o[0]&&o.unshift("");return o.join("/")}(n,t));for(var r=s(n),o=0;o<e.length;o++)if(s(e[o].regularPath)===r)return Object.assign({},e[o],{type:"page",path:p(e[o].path)});return console.error('[vuepress] No matching page found for sidebar item "'.concat(n,'"')),{}}function v(e,n,t,r){var o=t.pages,i=t.themeConfig,a=r&&i.locales&&i.locales[r]||i;if("auto"===(e.frontmatter.sidebar||a.sidebar||i.sidebar))return h(e);var s=a.sidebar||i.sidebar;if(s){var c=function(e,n){if(Array.isArray(n))return{base:"/",config:n};for(var t in n)if(0===(r=e,/(\.html|\/)$/.test(r)?r:r+"/").indexOf(encodeURI(t)))return{base:t,config:n[t]};var r;return{}}(n,s),u=c.base,l=c.config;return"auto"===l?h(e):l?l.map((function(e){return function e(n,t,r){var o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1;if("string"==typeof n)return f(t,n,r);if(Array.isArray(n))return Object.assign(f(t,n[0],r),{title:n[1]});o>3&&console.error("[vuepress] detected a too deep nested sidebar group.");var i=n.children||[];return 0===i.length&&n.path?Object.assign(f(t,n.path,r),{title:n.title}):{type:"group",path:n.path,title:n.title,sidebarDepth:n.sidebarDepth,initialOpenGroupIndex:n.initialOpenGroupIndex,children:i.map((function(n){return e(n,t,r,o+1)})),collapsable:!1!==n.collapsable}}(e,o,u)})):[]}return[]}function h(e){var n=m(e.headers||[]);return[{type:"group",collapsable:!1,title:e.title,path:null,children:n.map((function(n){return{type:"auto",title:n.title,basePath:e.path,path:e.path+"#"+n.slug,children:n.children||[]}}))}]}function m(e){var n;return(e=e.map((function(e){return Object.assign({},e)}))).forEach((function(e){2===e.level?n=e:n&&(n.children||(n.children=[])).push(e)})),e.filter((function(e){return 2===e.level}))}function g(e){return Object.assign(e,{type:e.items&&e.items.length?"links":"link"})}function b(e){return Object.prototype.toString.call(e).match(/\[object (.*?)\]/)[1].toLowerCase()}function y(e){var n=e.frontmatter.date||e.lastUpdated||new Date,t=new Date(n);return"Invalid Date"==t&&n&&(t=new Date(n.replace(/-/g,"/"))),t.getTime()}function x(e,n){return y(n)-y(e)}},function(e,n,t){"use strict";var r=t(1),o=t(54).map;r({target:"Array",proto:!0,forced:!t(89)("map")},{map:function(e){return o(this,e,arguments.length>1?arguments[1]:void 0)}})},function(e,n,t){"use strict";var r=t(38),o=t(10),i=t(2),a=t(106),s=t(3),c=t(7),u=t(5),l=t(52),p=t(49),d=t(13),f=t(17),v=t(123),h=t(45),m=t(257),g=t(107),b=t(6)("replace"),y=Math.max,x=Math.min,j=i([].concat),k=i([].push),w=i("".indexOf),_=i("".slice),S="$0"==="a".replace(/./,"$0"),E=!!/./[b]&&""===/./[b]("a","$0");a("replace",(function(e,n,t){var i=E?"$":"$0";return[function(e,t){var r=f(this),i=null==e?void 0:h(e,b);return i?o(i,e,r,t):o(n,d(r),e,t)},function(e,o){var a=c(this),s=d(e);if("string"==typeof o&&-1===w(o,i)&&-1===w(o,"$<")){var f=t(n,a,s,o);if(f.done)return f.value}var h=u(o);h||(o=d(o));var b=a.global;if(b){var S=a.unicode;a.lastIndex=0}for(var E=[];;){var C=g(a,s);if(null===C)break;if(k(E,C),!b)break;""===d(C[0])&&(a.lastIndex=v(s,p(a.lastIndex),S))}for(var I,O="",A=0,T=0;T<E.length;T++){for(var P=d((C=E[T])[0]),$=y(x(l(C.index),s.length),0),L=[],R=1;R<C.length;R++)k(L,void 0===(I=C[R])?I:String(I));var z=C.groups;if(h){var B=j([P],L,$,s);void 0!==z&&k(B,z);var D=d(r(o,void 0,B))}else D=m(P,s,$,L,z,o);$>=A&&(O+=_(s,A,$)+D,A=$+P.length)}return O+_(s,A)}]}),!!s((function(){var e=/./;return e.exec=function(){var e=[];return e.groups={a:"7"},e},"7"!=="".replace(e,"$<a>")}))||!S||E)},function(e,n,t){"use strict";var r=t(3);e.exports=function(e,n){var t=[][e];return!!t&&r((function(){t.call(null,n||function(){throw 1},1)}))}},function(e,n,t){var r=t(32);e.exports=function(e,n){var t=e[n];return null==t?void 0:r(t)}},function(e,n){e.exports=function(e){return null!=e&&"object"==typeof e}},function(e,n,t){"use strict";t.d(n,"a",(function(){return i}));t(71),t(66),t(21),t(4),t(368),t(28),t(29),t(170),t(369),t(97);function r(e,n,t){return n in e?Object.defineProperty(e,n,{value:t,enumerable:!0,configurable:!0,writable:!0}):e[n]=t,e}function o(e,n){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);n&&(r=r.filter((function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable}))),t.push.apply(t,r)}return t}function i(e){for(var n=1;n<arguments.length;n++){var t=null!=arguments[n]?arguments[n]:{};n%2?o(Object(t),!0).forEach((function(n){r(e,n,t[n])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):o(Object(t)).forEach((function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(t,n))}))}return e}},function(e,n,t){var r,o,i=t(0),a=t(27),s=i.process,c=i.Deno,u=s&&s.versions||c&&c.version,l=u&&u.v8;l&&(o=(r=l.split("."))[0]>0&&r[0]<4?1:+(r[0]+r[1])),!o&&a&&(!(r=a.match(/Edge\/(\d+)/))||r[1]>=74)&&(r=a.match(/Chrome\/(\d+)/))&&(o=+r[1]),e.exports=o},function(e,n,t){var r=t(52),o=Math.min;e.exports=function(e){return e>0?o(r(e),9007199254740991):0}},function(e,n,t){var r=t(1),o=t(0),i=t(38),a=t(5),s=t(27),c=t(64),u=/MSIE .\./.test(s),l=o.Function,p=function(e){return function(n,t){var r=arguments.length>2,o=r?c(arguments,2):void 0;return e(r?function(){i(a(n)?n:l(n),this,o)}:n,t)}};r({global:!0,bind:!0,forced:u},{setTimeout:p(o.setTimeout),setInterval:p(o.setInterval)})},function(e,n,t){"use strict";var r=t(1),o=t(0),i=t(3),a=t(58),s=t(9),c=t(15),u=t(23),l=t(65),p=t(141),d=t(89),f=t(6),v=t(48),h=f("isConcatSpreadable"),m=o.TypeError,g=v>=51||!i((function(){var e=[];return e[h]=!1,e.concat()[0]!==e})),b=d("concat"),y=function(e){if(!s(e))return!1;var n=e[h];return void 0!==n?!!n:a(e)};r({target:"Array",proto:!0,forced:!g||!b},{concat:function(e){var n,t,r,o,i,a=c(this),s=p(a,0),d=0;for(n=-1,r=arguments.length;n<r;n++)if(y(i=-1===n?a:arguments[n])){if(d+(o=u(i))>9007199254740991)throw m("Maximum allowed index exceeded");for(t=0;t<o;t++,d++)t in i&&l(s,d,i[t])}else{if(d>=9007199254740991)throw m("Maximum allowed index exceeded");l(s,d++,i)}return s.length=d,s}})},function(e,n){var t=Math.ceil,r=Math.floor;e.exports=function(e){var n=+e;return n!=n||0===n?0:(n>0?r:t)(n)}},function(e,n,t){var r=t(2),o=t(32),i=r(r.bind);e.exports=function(e,n){return o(e),void 0===n?e:i?i(e,n):function(){return e.apply(n,arguments)}}},function(e,n,t){var r=t(53),o=t(2),i=t(60),a=t(15),s=t(23),c=t(141),u=o([].push),l=function(e){var n=1==e,t=2==e,o=3==e,l=4==e,p=6==e,d=7==e,f=5==e||p;return function(v,h,m,g){for(var b,y,x=a(v),j=i(x),k=r(h,m),w=s(j),_=0,S=g||c,E=n?S(v,w):t||d?S(v,0):void 0;w>_;_++)if((f||_ in j)&&(y=k(b=j[_],_,x),e))if(n)E[_]=y;else if(y)switch(e){case 3:return!0;case 5:return b;case 6:return _;case 2:u(E,b)}else switch(e){case 4:return!1;case 7:u(E,b)}return p?-1:o||l?l:E}};e.exports={forEach:l(0),map:l(1),filter:l(2),some:l(3),every:l(4),find:l(5),findIndex:l(6),filterReject:l(7)}},function(e,n){e.exports=function(e,n){return{enumerable:!(1&e),configurable:!(2&e),writable:!(4&e),value:n}}},function(e,n,t){var r=t(152),o=t(114).concat("length","prototype");n.f=Object.getOwnPropertyNames||function(e){return r(e,o)}},function(e,n,t){var r=t(12).f,o=t(11),i=t(6)("toStringTag");e.exports=function(e,n,t){e&&!t&&(e=e.prototype),e&&!o(e,i)&&r(e,i,{configurable:!0,value:n})}},function(e,n,t){var r=t(25);e.exports=Array.isArray||function(e){return"Array"==r(e)}},function(e,n,t){var r=t(67),o=t(261),i=t(262),a=r?r.toStringTag:void 0;e.exports=function(e){return null==e?void 0===e?"[object Undefined]":"[object Null]":a&&a in Object(e)?o(e):i(e)}},function(e,n,t){var r=t(0),o=t(2),i=t(3),a=t(25),s=r.Object,c=o("".split);e.exports=i((function(){return!s("z").propertyIsEnumerable(0)}))?function(e){return"String"==a(e)?c(e,""):s(e)}:s},function(e,n){e.exports={}},function(e,n){e.exports={}},function(e,n,t){var r=t(8),o=t(11),i=Function.prototype,a=r&&Object.getOwnPropertyDescriptor,s=o(i,"name"),c=s&&"something"===function(){}.name,u=s&&(!r||r&&a(i,"name").configurable);e.exports={EXISTS:s,PROPER:c,CONFIGURABLE:u}},function(e,n,t){var r=t(2);e.exports=r([].slice)},function(e,n,t){"use strict";var r=t(79),o=t(12),i=t(55);e.exports=function(e,n,t){var a=r(n);a in e?o.f(e,a,i(0,t)):e[a]=t}},function(e,n,t){"use strict";var r=t(1),o=t(0),i=t(19),a=t(38),s=t(10),c=t(2),u=t(31),l=t(8),p=t(111),d=t(3),f=t(11),v=t(58),h=t(5),m=t(9),g=t(36),b=t(80),y=t(7),x=t(15),j=t(18),k=t(79),w=t(13),_=t(55),S=t(35),E=t(82),C=t(56),I=t(177),O=t(117),A=t(33),T=t(12),P=t(115),$=t(64),L=t(14),R=t(76),z=t(83),B=t(61),D=t(77),N=t(6),M=t(178),U=t(179),F=t(57),V=t(34),q=t(54).forEach,H=z("hidden"),K=N("toPrimitive"),W=V.set,G=V.getterFor("Symbol"),Z=Object.prototype,J=o.Symbol,X=J&&J.prototype,Y=o.TypeError,Q=o.QObject,ee=i("JSON","stringify"),ne=A.f,te=T.f,re=I.f,oe=P.f,ie=c([].push),ae=R("symbols"),se=R("op-symbols"),ce=R("string-to-symbol-registry"),ue=R("symbol-to-string-registry"),le=R("wks"),pe=!Q||!Q.prototype||!Q.prototype.findChild,de=l&&d((function(){return 7!=S(te({},"a",{get:function(){return te(this,"a",{value:7}).a}})).a}))?function(e,n,t){var r=ne(Z,n);r&&delete Z[n],te(e,n,t),r&&e!==Z&&te(Z,n,r)}:te,fe=function(e,n){var t=ae[e]=S(X);return W(t,{type:"Symbol",tag:e,description:n}),l||(t.description=n),t},ve=function(e,n,t){e===Z&&ve(se,n,t),y(e);var r=k(n);return y(t),f(ae,r)?(t.enumerable?(f(e,H)&&e[H][r]&&(e[H][r]=!1),t=S(t,{enumerable:_(0,!1)})):(f(e,H)||te(e,H,_(1,{})),e[H][r]=!0),de(e,r,t)):te(e,r,t)},he=function(e,n){y(e);var t=j(n),r=E(t).concat(ye(t));return q(r,(function(n){l&&!s(me,t,n)||ve(e,n,t[n])})),e},me=function(e){var n=k(e),t=s(oe,this,n);return!(this===Z&&f(ae,n)&&!f(se,n))&&(!(t||!f(this,n)||!f(ae,n)||f(this,H)&&this[H][n])||t)},ge=function(e,n){var t=j(e),r=k(n);if(t!==Z||!f(ae,r)||f(se,r)){var o=ne(t,r);return!o||!f(ae,r)||f(t,H)&&t[H][r]||(o.enumerable=!0),o}},be=function(e){var n=re(j(e)),t=[];return q(n,(function(e){f(ae,e)||f(B,e)||ie(t,e)})),t},ye=function(e){var n=e===Z,t=re(n?se:j(e)),r=[];return q(t,(function(e){!f(ae,e)||n&&!f(Z,e)||ie(r,ae[e])})),r};(p||(L(X=(J=function(){if(g(X,this))throw Y("Symbol is not a constructor");var e=arguments.length&&void 0!==arguments[0]?w(arguments[0]):void 0,n=D(e),t=function(e){this===Z&&s(t,se,e),f(this,H)&&f(this[H],n)&&(this[H][n]=!1),de(this,n,_(1,e))};return l&&pe&&de(Z,n,{configurable:!0,set:t}),fe(n,e)}).prototype,"toString",(function(){return G(this).tag})),L(J,"withoutSetter",(function(e){return fe(D(e),e)})),P.f=me,T.f=ve,A.f=ge,C.f=I.f=be,O.f=ye,M.f=function(e){return fe(N(e),e)},l&&(te(X,"description",{configurable:!0,get:function(){return G(this).description}}),u||L(Z,"propertyIsEnumerable",me,{unsafe:!0}))),r({global:!0,wrap:!0,forced:!p,sham:!p},{Symbol:J}),q(E(le),(function(e){U(e)})),r({target:"Symbol",stat:!0,forced:!p},{for:function(e){var n=w(e);if(f(ce,n))return ce[n];var t=J(n);return ce[n]=t,ue[t]=n,t},keyFor:function(e){if(!b(e))throw Y(e+" is not a symbol");if(f(ue,e))return ue[e]},useSetter:function(){pe=!0},useSimple:function(){pe=!1}}),r({target:"Object",stat:!0,forced:!p,sham:!l},{create:function(e,n){return void 0===n?S(e):he(S(e),n)},defineProperty:ve,defineProperties:he,getOwnPropertyDescriptor:ge}),r({target:"Object",stat:!0,forced:!p},{getOwnPropertyNames:be,getOwnPropertySymbols:ye}),r({target:"Object",stat:!0,forced:d((function(){O.f(1)}))},{getOwnPropertySymbols:function(e){return O.f(x(e))}}),ee)&&r({target:"JSON",stat:!0,forced:!p||d((function(){var e=J();return"[null]"!=ee([e])||"{}"!=ee({a:e})||"{}"!=ee(Object(e))}))},{stringify:function(e,n,t){var r=$(arguments),o=n;if((m(n)||void 0!==e)&&!b(e))return v(n)||(n=function(e,n){if(h(o)&&(n=s(o,this,e,n)),!b(n))return n}),r[1]=n,a(ee,null,r)}});if(!X[K]){var xe=X.valueOf;L(X,K,(function(e){return s(xe,this)}))}F(J,"Symbol"),B[H]=!0},function(e,n,t){var r=t(30).Symbol;e.exports=r},function(e,n,t){"use strict";t.d(n,"a",(function(){return i}));t(73);var r=t(69);t(66),t(90),t(4),t(122),t(22),t(24),t(180);var o=t(98);function i(e){return function(e){if(Array.isArray(e))return Object(r.a)(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||Object(o.a)(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}},function(e,n,t){"use strict";function r(e,n){(null==n||n>e.length)&&(n=e.length);for(var t=0,r=new Array(n);t<n;t++)r[t]=e[t];return r}t.d(n,"a",(function(){return r}))},function(e,n,t){"use strict";t(16);var r,o,i=t(1),a=t(0),s=t(10),c=t(2),u=t(5),l=t(9),p=(r=!1,(o=/[ac]/).exec=function(){return r=!0,/./.exec.apply(this,arguments)},!0===o.test("abc")&&r),d=a.Error,f=c(/./.test);i({target:"RegExp",proto:!0,forced:!p},{test:function(e){var n=this.exec;if(!u(n))return f(this,e);var t=s(n,this,e);if(null!==t&&!l(t))throw new d("RegExp exec method returned something other than an Object or null");return!!t}})},function(e,n,t){var r=t(1),o=t(15),i=t(82);r({target:"Object",stat:!0,forced:t(3)((function(){i(1)}))},{keys:function(e){return i(o(e))}})},function(e,n,t){var r=t(0),o=t(119),i=t(5),a=t(25),s=t(6)("toStringTag"),c=r.Object,u="Arguments"==a(function(){return arguments}());e.exports=o?a:function(e){var n,t,r;return void 0===e?"Undefined":null===e?"Null":"string"==typeof(t=function(e,n){try{return e[n]}catch(e){}}(n=c(e),s))?t:u?a(n):"Object"==(r=a(n))&&i(n.callee)?"Arguments":r}},function(e,n,t){t(1)({target:"Array",stat:!0},{isArray:t(58)})},function(e,n,t){var r=t(8),o=t(63).EXISTS,i=t(2),a=t(12).f,s=Function.prototype,c=i(s.toString),u=/function\b(?:\s|\/\*[\S\s]*?\*\/|\/\/[^\n\r]*[\n\r]+)*([^\s(/]*)/,l=i(u.exec);r&&!o&&a(s,"name",{configurable:!0,get:function(){try{return l(u,c(this))[1]}catch(e){return""}}})},function(e,n,t){var r=t(2),o=t(14),i=Date.prototype,a=r(i.toString),s=r(i.getTime);"Invalid Date"!=String(new Date(NaN))&&o(i,"toString",(function(){var e=s(this);return e==e?a(this):"Invalid Date"}))},function(e,n,t){var r=t(31),o=t(109);(e.exports=function(e,n){return o[e]||(o[e]=void 0!==n?n:{})})("versions",[]).push({version:"3.20.1",mode:r?"pure":"global",copyright:"© 2021 Denis Pushkarev (zloirock.ru)"})},function(e,n,t){var r=t(2),o=0,i=Math.random(),a=r(1..toString);e.exports=function(e){return"Symbol("+(void 0===e?"":e)+")_"+a(++o+i,36)}},function(e,n,t){var r=t(0),o=t(9),i=r.document,a=o(i)&&o(i.createElement);e.exports=function(e){return a?i.createElement(e):{}}},function(e,n,t){var r=t(151),o=t(80);e.exports=function(e){var n=r(e,"string");return o(n)?n:n+""}},function(e,n,t){var r=t(0),o=t(19),i=t(5),a=t(36),s=t(148),c=r.Object;e.exports=s?function(e){return"symbol"==typeof e}:function(e){var n=o("Symbol");return i(n)&&a(n.prototype,c(e))}},function(e,n,t){var r=t(0).String;e.exports=function(e){try{return r(e)}catch(e){return"Object"}}},function(e,n,t){var r=t(152),o=t(114);e.exports=Object.keys||function(e){return r(e,o)}},function(e,n,t){var r=t(76),o=t(77),i=r("keys");e.exports=function(e){return i[e]||(i[e]=o(e))}},function(e,n,t){var r=t(2),o=t(5),i=t(109),a=r(Function.toString);o(i.inspectSource)||(i.inspectSource=function(e){return a(e)}),e.exports=i.inspectSource},function(e,n,t){var r=t(2),o=t(7),i=t(233);e.exports=Object.setPrototypeOf||("__proto__"in{}?function(){var e,n=!1,t={};try{(e=r(Object.getOwnPropertyDescriptor(Object.prototype,"__proto__").set))(t,[]),n=t instanceof Array}catch(e){}return function(t,r){return o(t),i(r),n?e(t,r):t.__proto__=r,t}}():void 0)},function(e,n,t){var r=t(2),o=t(3),i=t(5),a=t(72),s=t(19),c=t(84),u=function(){},l=[],p=s("Reflect","construct"),d=/^\s*(?:class|function)\b/,f=r(d.exec),v=!d.exec(u),h=function(e){if(!i(e))return!1;try{return p(u,l,e),!0}catch(e){return!1}},m=function(e){if(!i(e))return!1;switch(a(e)){case"AsyncFunction":case"GeneratorFunction":case"AsyncGeneratorFunction":return!1}try{return v||!!f(d,c(e))}catch(e){return!0}};m.sham=!0,e.exports=!p||o((function(){var e;return h(h.call)||!h(Object)||!h((function(){e=!0}))||e}))?m:h},function(e,n,t){var r=t(25),o=t(0);e.exports="process"==r(o.process)},function(e,n,t){"use strict";t.d(n,"a",(function(){return o}));t(4);function r(e,n,t,r,o,i,a){try{var s=e[i](a),c=s.value}catch(e){return void t(e)}s.done?n(c):Promise.resolve(c).then(r,o)}function o(e){return function(){var n=this,t=arguments;return new Promise((function(o,i){var a=e.apply(n,t);function s(e){r(a,o,i,s,c,"next",e)}function c(e){r(a,o,i,s,c,"throw",e)}s(void 0)}))}}},function(e,n,t){var r=t(3),o=t(6),i=t(48),a=o("species");e.exports=function(e){return i>=51||!r((function(){var n=[];return(n.constructor={})[a]=function(){return{foo:1}},1!==n[e](Boolean).foo}))}},function(e,n,t){"use strict";var r=t(1),o=t(8),i=t(0),a=t(2),s=t(11),c=t(5),u=t(36),l=t(13),p=t(12).f,d=t(155),f=i.Symbol,v=f&&f.prototype;if(o&&c(f)&&(!("description"in v)||void 0!==f().description)){var h={},m=function(){var e=arguments.length<1||void 0===arguments[0]?void 0:l(arguments[0]),n=u(v,this)?new f(e):void 0===e?f():f(e);return""===e&&(h[n]=!0),n};d(m,f),m.prototype=v,v.constructor=m;var g="Symbol(test)"==String(f("test")),b=a(v.toString),y=a(v.valueOf),x=/^Symbol\((.*)\)[^)]+$/,j=a("".replace),k=a("".slice);p(v,"description",{configurable:!0,get:function(){var e=y(this),n=b(e);if(s(h,e))return"";var t=g?k(n,7,-1):j(n,x,"$1");return""===t?void 0:t}}),r({global:!0,forced:!0},{Symbol:m})}},function(e,n,t){"use strict";var r,o,i=t(10),a=t(2),s=t(13),c=t(143),u=t(105),l=t(76),p=t(35),d=t(34).get,f=t(217),v=t(222),h=l("native-string-replace",String.prototype.replace),m=RegExp.prototype.exec,g=m,b=a("".charAt),y=a("".indexOf),x=a("".replace),j=a("".slice),k=(o=/b*/g,i(m,r=/a/,"a"),i(m,o,"a"),0!==r.lastIndex||0!==o.lastIndex),w=u.BROKEN_CARET,_=void 0!==/()??/.exec("")[1];(k||_||w||f||v)&&(g=function(e){var n,t,r,o,a,u,l,f=this,v=d(f),S=s(e),E=v.raw;if(E)return E.lastIndex=f.lastIndex,n=i(g,E,S),f.lastIndex=E.lastIndex,n;var C=v.groups,I=w&&f.sticky,O=i(c,f),A=f.source,T=0,P=S;if(I&&(O=x(O,"y",""),-1===y(O,"g")&&(O+="g"),P=j(S,f.lastIndex),f.lastIndex>0&&(!f.multiline||f.multiline&&"\n"!==b(S,f.lastIndex-1))&&(A="(?: "+A+")",P=" "+P,T++),t=new RegExp("^(?:"+A+")",O)),_&&(t=new RegExp("^"+A+"$(?!\\s)",O)),k&&(r=f.lastIndex),o=i(m,I?t:f,P),I?o?(o.input=j(o.input,T),o[0]=j(o[0],T),o.index=f.lastIndex,f.lastIndex+=o[0].length):f.lastIndex=0:k&&o&&(f.lastIndex=f.global?o.index+o[0].length:r),_&&o&&o.length>1&&i(h,o[0],t,(function(){for(a=1;a<arguments.length-2;a++)void 0===arguments[a]&&(o[a]=void 0)})),o&&C)for(o.groups=u=p(null),a=0;a<C.length;a++)u[(l=C[a])[0]]=o[l[1]];return o}),e.exports=g},function(e,n,t){var r=t(266),o=t(267),i=t(268),a=t(269),s=t(270);function c(e){var n=-1,t=null==e?0:e.length;for(this.clear();++n<t;){var r=e[n];this.set(r[0],r[1])}}c.prototype.clear=r,c.prototype.delete=o,c.prototype.get=i,c.prototype.has=a,c.prototype.set=s,e.exports=c},function(e,n,t){var r=t(186);e.exports=function(e,n){for(var t=e.length;t--;)if(r(e[t][0],n))return t;return-1}},function(e,n,t){var r=t(39)(Object,"create");e.exports=r},function(e,n,t){var r=t(288);e.exports=function(e,n){var t=e.__data__;return r(n)?t["string"==typeof n?"string":"hash"]:t.map}},function(e,n,t){var r=t(131);e.exports=function(e){if("string"==typeof e||r(e))return e;var n=e+"";return"0"==n&&1/e==-1/0?"-0":n}},function(e,n,t){var r=t(1),o=t(8);r({target:"Object",stat:!0,forced:!o,sham:!o},{defineProperty:t(12).f})},function(e,n,t){"use strict";t.d(n,"a",(function(){return o}));t(40),t(4),t(74),t(180),t(22),t(16),t(70);var r=t(69);function o(e,n){if(e){if("string"==typeof e)return Object(r.a)(e,n);var t=Object.prototype.toString.call(e).slice(8,-1);return"Object"===t&&e.constructor&&(t=e.constructor.name),"Map"===t||"Set"===t?Array.from(e):"Arguments"===t||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t)?Object(r.a)(e,n):void 0}}},function(e,n,t){var r,o;
/* NProgress, (c) 2013, 2014 Rico Sta. Cruz - http://ricostacruz.com/nprogress
 * @license MIT */void 0===(o="function"==typeof(r=function(){var e,n,t={version:"0.2.0"},r=t.settings={minimum:.08,easing:"ease",positionUsing:"",speed:200,trickle:!0,trickleRate:.02,trickleSpeed:800,showSpinner:!0,barSelector:'[role="bar"]',spinnerSelector:'[role="spinner"]',parent:"body",template:'<div class="bar" role="bar"><div class="peg"></div></div><div class="spinner" role="spinner"><div class="spinner-icon"></div></div>'};function o(e,n,t){return e<n?n:e>t?t:e}function i(e){return 100*(-1+e)}t.configure=function(e){var n,t;for(n in e)void 0!==(t=e[n])&&e.hasOwnProperty(n)&&(r[n]=t);return this},t.status=null,t.set=function(e){var n=t.isStarted();e=o(e,r.minimum,1),t.status=1===e?null:e;var c=t.render(!n),u=c.querySelector(r.barSelector),l=r.speed,p=r.easing;return c.offsetWidth,a((function(n){""===r.positionUsing&&(r.positionUsing=t.getPositioningCSS()),s(u,function(e,n,t){var o;return(o="translate3d"===r.positionUsing?{transform:"translate3d("+i(e)+"%,0,0)"}:"translate"===r.positionUsing?{transform:"translate("+i(e)+"%,0)"}:{"margin-left":i(e)+"%"}).transition="all "+n+"ms "+t,o}(e,l,p)),1===e?(s(c,{transition:"none",opacity:1}),c.offsetWidth,setTimeout((function(){s(c,{transition:"all "+l+"ms linear",opacity:0}),setTimeout((function(){t.remove(),n()}),l)}),l)):setTimeout(n,l)})),this},t.isStarted=function(){return"number"==typeof t.status},t.start=function(){t.status||t.set(0);var e=function(){setTimeout((function(){t.status&&(t.trickle(),e())}),r.trickleSpeed)};return r.trickle&&e(),this},t.done=function(e){return e||t.status?t.inc(.3+.5*Math.random()).set(1):this},t.inc=function(e){var n=t.status;return n?("number"!=typeof e&&(e=(1-n)*o(Math.random()*n,.1,.95)),n=o(n+e,0,.994),t.set(n)):t.start()},t.trickle=function(){return t.inc(Math.random()*r.trickleRate)},e=0,n=0,t.promise=function(r){return r&&"resolved"!==r.state()?(0===n&&t.start(),e++,n++,r.always((function(){0==--n?(e=0,t.done()):t.set((e-n)/e)})),this):this},t.render=function(e){if(t.isRendered())return document.getElementById("nprogress");u(document.documentElement,"nprogress-busy");var n=document.createElement("div");n.id="nprogress",n.innerHTML=r.template;var o,a=n.querySelector(r.barSelector),c=e?"-100":i(t.status||0),l=document.querySelector(r.parent);return s(a,{transition:"all 0 linear",transform:"translate3d("+c+"%,0,0)"}),r.showSpinner||(o=n.querySelector(r.spinnerSelector))&&d(o),l!=document.body&&u(l,"nprogress-custom-parent"),l.appendChild(n),n},t.remove=function(){l(document.documentElement,"nprogress-busy"),l(document.querySelector(r.parent),"nprogress-custom-parent");var e=document.getElementById("nprogress");e&&d(e)},t.isRendered=function(){return!!document.getElementById("nprogress")},t.getPositioningCSS=function(){var e=document.body.style,n="WebkitTransform"in e?"Webkit":"MozTransform"in e?"Moz":"msTransform"in e?"ms":"OTransform"in e?"O":"";return n+"Perspective"in e?"translate3d":n+"Transform"in e?"translate":"margin"};var a=function(){var e=[];function n(){var t=e.shift();t&&t(n)}return function(t){e.push(t),1==e.length&&n()}}(),s=function(){var e=["Webkit","O","Moz","ms"],n={};function t(t){return t=t.replace(/^-ms-/,"ms-").replace(/-([\da-z])/gi,(function(e,n){return n.toUpperCase()})),n[t]||(n[t]=function(n){var t=document.body.style;if(n in t)return n;for(var r,o=e.length,i=n.charAt(0).toUpperCase()+n.slice(1);o--;)if((r=e[o]+i)in t)return r;return n}(t))}function r(e,n,r){n=t(n),e.style[n]=r}return function(e,n){var t,o,i=arguments;if(2==i.length)for(t in n)void 0!==(o=n[t])&&n.hasOwnProperty(t)&&r(e,t,o);else r(e,i[1],i[2])}}();function c(e,n){return("string"==typeof e?e:p(e)).indexOf(" "+n+" ")>=0}function u(e,n){var t=p(e),r=t+n;c(t,n)||(e.className=r.substring(1))}function l(e,n){var t,r=p(e);c(e,n)&&(t=r.replace(" "+n+" "," "),e.className=t.substring(1,t.length-1))}function p(e){return(" "+(e.className||"")+" ").replace(/\s+/gi," ")}function d(e){e&&e.parentNode&&e.parentNode.removeChild(e)}return t})?r.call(n,t,n,e):r)||(e.exports=o)},function(e){e.exports=JSON.parse('{"name":"vuepress-plugin-comment","version":"0.7.3","description":"Comment plugin in vuepress, such as Gitalk, Valine...","main":"index.js","scripts":{"test":"echo \\"Error: no test specified\\" && exit 1"},"repository":{"type":"git","url":"git+ssh://git@github.com/dongyuanxin/vuepress-plugin-comment.git"},"keywords":["vuepress","comment","plugin","vue","gitalk","valine"],"author":"dongyuanxin","license":"MIT","bugs":{"url":"https://github.com/dongyuanxin/vuepress-plugin-comment/issues"},"homepage":"https://github.com/dongyuanxin/vuepress-plugin-comment#readme","dependencies":{"ejs":"^2.6.1","gitalk":"^1.5.0","gitalk-fix":"^1.5.2","i":"^0.3.6","npm":"^6.9.0","valine":"^1.3.9"}}')},function(e,n,t){"use strict";var r=t(38),o=t(10),i=t(2),a=t(106),s=t(142),c=t(7),u=t(17),l=t(120),p=t(123),d=t(49),f=t(13),v=t(45),h=t(121),m=t(107),g=t(91),b=t(105),y=t(3),x=b.UNSUPPORTED_Y,j=Math.min,k=[].push,w=i(/./.exec),_=i(k),S=i("".slice);a("split",(function(e,n,t){var i;return i="c"=="abbc".split(/(b)*/)[1]||4!="test".split(/(?:)/,-1).length||2!="ab".split(/(?:ab)*/).length||4!=".".split(/(.?)(.?)/).length||".".split(/()()/).length>1||"".split(/.?/).length?function(e,t){var i=f(u(this)),a=void 0===t?4294967295:t>>>0;if(0===a)return[];if(void 0===e)return[i];if(!s(e))return o(n,i,e,a);for(var c,l,p,d=[],v=(e.ignoreCase?"i":"")+(e.multiline?"m":"")+(e.unicode?"u":"")+(e.sticky?"y":""),m=0,b=new RegExp(e.source,v+"g");(c=o(g,b,i))&&!((l=b.lastIndex)>m&&(_(d,S(i,m,c.index)),c.length>1&&c.index<i.length&&r(k,d,h(c,1)),p=c[0].length,m=l,d.length>=a));)b.lastIndex===c.index&&b.lastIndex++;return m===i.length?!p&&w(b,"")||_(d,""):_(d,S(i,m)),d.length>a?h(d,0,a):d}:"0".split(void 0,0).length?function(e,t){return void 0===e&&0===t?[]:o(n,this,e,t)}:n,[function(n,t){var r=u(this),a=null==n?void 0:v(n,e);return a?o(a,n,r,t):o(i,f(r),n,t)},function(e,r){var o=c(this),a=f(e),s=t(i,o,a,r,i!==n);if(s.done)return s.value;var u=l(o,RegExp),v=o.unicode,h=(o.ignoreCase?"i":"")+(o.multiline?"m":"")+(o.unicode?"u":"")+(x?"g":"y"),g=new u(x?"^(?:"+o.source+")":o,h),b=void 0===r?4294967295:r>>>0;if(0===b)return[];if(0===a.length)return null===m(g,a)?[a]:[];for(var y=0,k=0,w=[];k<a.length;){g.lastIndex=x?0:k;var E,C=m(g,x?S(a,k):a);if(null===C||(E=j(d(g.lastIndex+(x?k:0)),a.length))===y)k=p(a,k,v);else{if(_(w,S(a,y,k)),w.length===b)return w;for(var I=1;I<=C.length-1;I++)if(_(w,C[I]),w.length===b)return w;k=y=E}}return _(w,S(a,y)),w}]}),!!y((function(){var e=/(?:)/,n=e.exec;e.exec=function(){return n.apply(this,arguments)};var t="ab".split(e);return 2!==t.length||"a"!==t[0]||"b"!==t[1]})),x)},function(e,n,t){"use strict";var r=t(1),o=t(2),i=t(112).indexOf,a=t(44),s=o([].indexOf),c=!!s&&1/s([1],1,-0)<0,u=a("indexOf");r({target:"Array",proto:!0,forced:c||!u},{indexOf:function(e){var n=arguments.length>1?arguments[1]:void 0;return c?s(this,e,n)||0:i(this,e,n)}})},function(e,n,t){var r=t(3),o=t(5),i=/#|\.prototype\./,a=function(e,n){var t=c[s(e)];return t==l||t!=u&&(o(n)?r(n):!!n)},s=a.normalize=function(e){return String(e).replace(i,".").toLowerCase()},c=a.data={},u=a.NATIVE="N",l=a.POLYFILL="P";e.exports=a},function(e,n,t){var r=t(72),o=t(45),i=t(62),a=t(6)("iterator");e.exports=function(e){if(null!=e)return o(e,a)||o(e,"@@iterator")||i[r(e)]}},function(e,n,t){var r=t(3),o=t(0).RegExp,i=r((function(){var e=o("a","y");return e.lastIndex=2,null!=e.exec("abcd")})),a=i||r((function(){return!o("a","y").sticky})),s=i||r((function(){var e=o("^r","gy");return e.lastIndex=2,null!=e.exec("str")}));e.exports={BROKEN_CARET:s,MISSED_STICKY:a,UNSUPPORTED_Y:i}},function(e,n,t){"use strict";t(16);var r=t(2),o=t(14),i=t(91),a=t(3),s=t(6),c=t(37),u=s("species"),l=RegExp.prototype;e.exports=function(e,n,t,p){var d=s(e),f=!a((function(){var n={};return n[d]=function(){return 7},7!=""[e](n)})),v=f&&!a((function(){var n=!1,t=/a/;return"split"===e&&((t={}).constructor={},t.constructor[u]=function(){return t},t.flags="",t[d]=/./[d]),t.exec=function(){return n=!0,null},t[d](""),!n}));if(!f||!v||t){var h=r(/./[d]),m=n(d,""[e],(function(e,n,t,o,a){var s=r(e),c=n.exec;return c===i||c===l.exec?f&&!a?{done:!0,value:h(n,t,o)}:{done:!0,value:s(t,n,o)}:{done:!1}}));o(String.prototype,e,m[0]),o(l,d,m[1])}p&&c(l[d],"sham",!0)}},function(e,n,t){var r=t(0),o=t(10),i=t(7),a=t(5),s=t(25),c=t(91),u=r.TypeError;e.exports=function(e,n){var t=e.exec;if(a(t)){var r=o(t,e,n);return null!==r&&i(r),r}if("RegExp"===s(e))return o(c,e,n);throw u("RegExp#exec called on incompatible receiver")}},function(e,n,t){"use strict";var r=t(1),o=t(2),i=t(60),a=t(18),s=t(44),c=o([].join),u=i!=Object,l=s("join",",");r({target:"Array",proto:!0,forced:u||!l},{join:function(e){return c(a(this),void 0===e?",":e)}})},function(e,n,t){var r=t(0),o=t(110),i=r["__core-js_shared__"]||o("__core-js_shared__",{});e.exports=i},function(e,n,t){var r=t(0),o=Object.defineProperty;e.exports=function(e,n){try{o(r,e,{value:n,configurable:!0,writable:!0})}catch(t){r[e]=n}return n}},function(e,n,t){var r=t(48),o=t(3);e.exports=!!Object.getOwnPropertySymbols&&!o((function(){var e=Symbol();return!String(e)||!(Object(e)instanceof Symbol)||!Symbol.sham&&r&&r<41}))},function(e,n,t){var r=t(18),o=t(113),i=t(23),a=function(e){return function(n,t,a){var s,c=r(n),u=i(c),l=o(a,u);if(e&&t!=t){for(;u>l;)if((s=c[l++])!=s)return!0}else for(;u>l;l++)if((e||l in c)&&c[l]===t)return e||l||0;return!e&&-1}};e.exports={includes:a(!0),indexOf:a(!1)}},function(e,n,t){var r=t(52),o=Math.max,i=Math.min;e.exports=function(e,n){var t=r(e);return t<0?o(t+n,0):i(t,n)}},function(e,n){e.exports=["constructor","hasOwnProperty","isPrototypeOf","propertyIsEnumerable","toLocaleString","toString","valueOf"]},function(e,n,t){"use strict";var r={}.propertyIsEnumerable,o=Object.getOwnPropertyDescriptor,i=o&&!r.call({1:2},1);n.f=i?function(e){var n=o(this,e);return!!n&&n.enumerable}:r},function(e,n,t){var r=t(19),o=t(2),i=t(56),a=t(117),s=t(7),c=o([].concat);e.exports=r("Reflect","ownKeys")||function(e){var n=i.f(s(e)),t=a.f;return t?c(n,t(e)):n}},function(e,n){n.f=Object.getOwnPropertySymbols},function(e,n,t){var r=t(0),o=t(11),i=t(5),a=t(15),s=t(83),c=t(157),u=s("IE_PROTO"),l=r.Object,p=l.prototype;e.exports=c?l.getPrototypeOf:function(e){var n=a(e);if(o(n,u))return n[u];var t=n.constructor;return i(t)&&n instanceof t?t.prototype:n instanceof l?p:null}},function(e,n,t){var r={};r[t(6)("toStringTag")]="z",e.exports="[object z]"===String(r)},function(e,n,t){var r=t(7),o=t(162),i=t(6)("species");e.exports=function(e,n){var t,a=r(e).constructor;return void 0===a||null==(t=r(a)[i])?n:o(t)}},function(e,n,t){var r=t(0),o=t(113),i=t(23),a=t(65),s=r.Array,c=Math.max;e.exports=function(e,n,t){for(var r=i(e),u=o(n,r),l=o(void 0===t?r:t,r),p=s(c(l-u,0)),d=0;u<l;u++,d++)a(p,d,e[u]);return p.length=d,p}},function(e,n,t){t(179)("iterator")},function(e,n,t){"use strict";var r=t(167).charAt;e.exports=function(e,n,t){return n+(t?r(e,n).length:1)}},function(e,n,t){var r=t(260),o=t(46),i=Object.prototype,a=i.hasOwnProperty,s=i.propertyIsEnumerable,c=r(function(){return arguments}())?r:function(e){return o(e)&&a.call(e,"callee")&&!s.call(e,"callee")};e.exports=c},function(e,n,t){var r=t(39)(t(30),"Map");e.exports=r},function(e,n){e.exports=function(e){var n=typeof e;return null!=e&&("object"==n||"function"==n)}},function(e,n,t){var r=t(280),o=t(287),i=t(289),a=t(290),s=t(291);function c(e){var n=-1,t=null==e?0:e.length;for(this.clear();++n<t;){var r=e[n];this.set(r[0],r[1])}}c.prototype.clear=r,c.prototype.delete=o,c.prototype.get=i,c.prototype.has=a,c.prototype.set=s,e.exports=c},function(e,n){e.exports=function(e){var n=-1,t=Array(e.size);return e.forEach((function(e){t[++n]=e})),t}},function(e,n){e.exports=function(e){return"number"==typeof e&&e>-1&&e%1==0&&e<=9007199254740991}},function(e,n,t){var r=t(26),o=t(131),i=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,a=/^\w*$/;e.exports=function(e,n){if(r(e))return!1;var t=typeof e;return!("number"!=t&&"symbol"!=t&&"boolean"!=t&&null!=e&&!o(e))||(a.test(e)||!i.test(e)||null!=n&&e in Object(n))}},function(e,n,t){var r=t(59),o=t(46);e.exports=function(e){return"symbol"==typeof e||o(e)&&"[object Symbol]"==r(e)}},function(e,n){e.exports=function(e){return e}},function(e,n,t){var r=t(1),o=t(0),i=t(57);r({global:!0},{Reflect:{}}),i(o.Reflect,"Reflect",!0)},function(e,n,t){"use strict";t.d(n,"a",(function(){return o}));t(73);t(66),t(90),t(4),t(122),t(22),t(24);var r=t(98);function o(e,n){return function(e){if(Array.isArray(e))return e}(e)||function(e,n){var t=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=t){var r,o,i=[],a=!0,s=!1;try{for(t=t.call(e);!(a=(r=t.next()).done)&&(i.push(r.value),!n||i.length!==n);a=!0);}catch(e){s=!0,o=e}finally{try{a||null==t.return||t.return()}finally{if(s)throw o}}return i}}(e,n)||Object(r.a)(e,n)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}},function(e,n,t){"use strict";var r=t(10),o=t(106),i=t(7),a=t(49),s=t(13),c=t(17),u=t(45),l=t(123),p=t(107);o("match",(function(e,n,t){return[function(n){var t=c(this),o=null==n?void 0:u(n,e);return o?r(o,n,t):new RegExp(n)[e](s(t))},function(e){var r=i(this),o=s(e),c=t(n,r,o);if(c.done)return c.value;if(!r.global)return p(r,o);var u=r.unicode;r.lastIndex=0;for(var d,f=[],v=0;null!==(d=p(r,o));){var h=s(d[0]);f[v]=h,""===h&&(r.lastIndex=l(o,a(r.lastIndex),u)),v++}return 0===v?null:f}]}))},function(e,n,t){var r=t(6),o=t(35),i=t(12),a=r("unscopables"),s=Array.prototype;null==s[a]&&i.f(s,a,{configurable:!0,value:o(null)}),e.exports=function(e){s[a][e]=!0}},function(e,n,t){var r=function(e){"use strict";var n=Object.prototype,t=n.hasOwnProperty,r="function"==typeof Symbol?Symbol:{},o=r.iterator||"@@iterator",i=r.asyncIterator||"@@asyncIterator",a=r.toStringTag||"@@toStringTag";function s(e,n,t){return Object.defineProperty(e,n,{value:t,enumerable:!0,configurable:!0,writable:!0}),e[n]}try{s({},"")}catch(e){s=function(e,n,t){return e[n]=t}}function c(e,n,t,r){var o=n&&n.prototype instanceof p?n:p,i=Object.create(o.prototype),a=new w(r||[]);return i._invoke=function(e,n,t){var r="suspendedStart";return function(o,i){if("executing"===r)throw new Error("Generator is already running");if("completed"===r){if("throw"===o)throw i;return S()}for(t.method=o,t.arg=i;;){var a=t.delegate;if(a){var s=x(a,t);if(s){if(s===l)continue;return s}}if("next"===t.method)t.sent=t._sent=t.arg;else if("throw"===t.method){if("suspendedStart"===r)throw r="completed",t.arg;t.dispatchException(t.arg)}else"return"===t.method&&t.abrupt("return",t.arg);r="executing";var c=u(e,n,t);if("normal"===c.type){if(r=t.done?"completed":"suspendedYield",c.arg===l)continue;return{value:c.arg,done:t.done}}"throw"===c.type&&(r="completed",t.method="throw",t.arg=c.arg)}}}(e,t,a),i}function u(e,n,t){try{return{type:"normal",arg:e.call(n,t)}}catch(e){return{type:"throw",arg:e}}}e.wrap=c;var l={};function p(){}function d(){}function f(){}var v={};s(v,o,(function(){return this}));var h=Object.getPrototypeOf,m=h&&h(h(_([])));m&&m!==n&&t.call(m,o)&&(v=m);var g=f.prototype=p.prototype=Object.create(v);function b(e){["next","throw","return"].forEach((function(n){s(e,n,(function(e){return this._invoke(n,e)}))}))}function y(e,n){var r;this._invoke=function(o,i){function a(){return new n((function(r,a){!function r(o,i,a,s){var c=u(e[o],e,i);if("throw"!==c.type){var l=c.arg,p=l.value;return p&&"object"==typeof p&&t.call(p,"__await")?n.resolve(p.__await).then((function(e){r("next",e,a,s)}),(function(e){r("throw",e,a,s)})):n.resolve(p).then((function(e){l.value=e,a(l)}),(function(e){return r("throw",e,a,s)}))}s(c.arg)}(o,i,r,a)}))}return r=r?r.then(a,a):a()}}function x(e,n){var t=e.iterator[n.method];if(void 0===t){if(n.delegate=null,"throw"===n.method){if(e.iterator.return&&(n.method="return",n.arg=void 0,x(e,n),"throw"===n.method))return l;n.method="throw",n.arg=new TypeError("The iterator does not provide a 'throw' method")}return l}var r=u(t,e.iterator,n.arg);if("throw"===r.type)return n.method="throw",n.arg=r.arg,n.delegate=null,l;var o=r.arg;return o?o.done?(n[e.resultName]=o.value,n.next=e.nextLoc,"return"!==n.method&&(n.method="next",n.arg=void 0),n.delegate=null,l):o:(n.method="throw",n.arg=new TypeError("iterator result is not an object"),n.delegate=null,l)}function j(e){var n={tryLoc:e[0]};1 in e&&(n.catchLoc=e[1]),2 in e&&(n.finallyLoc=e[2],n.afterLoc=e[3]),this.tryEntries.push(n)}function k(e){var n=e.completion||{};n.type="normal",delete n.arg,e.completion=n}function w(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(j,this),this.reset(!0)}function _(e){if(e){var n=e[o];if(n)return n.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var r=-1,i=function n(){for(;++r<e.length;)if(t.call(e,r))return n.value=e[r],n.done=!1,n;return n.value=void 0,n.done=!0,n};return i.next=i}}return{next:S}}function S(){return{value:void 0,done:!0}}return d.prototype=f,s(g,"constructor",f),s(f,"constructor",d),d.displayName=s(f,a,"GeneratorFunction"),e.isGeneratorFunction=function(e){var n="function"==typeof e&&e.constructor;return!!n&&(n===d||"GeneratorFunction"===(n.displayName||n.name))},e.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,f):(e.__proto__=f,s(e,a,"GeneratorFunction")),e.prototype=Object.create(g),e},e.awrap=function(e){return{__await:e}},b(y.prototype),s(y.prototype,i,(function(){return this})),e.AsyncIterator=y,e.async=function(n,t,r,o,i){void 0===i&&(i=Promise);var a=new y(c(n,t,r,o),i);return e.isGeneratorFunction(t)?a:a.next().then((function(e){return e.done?e.value:a.next()}))},b(g),s(g,a,"Generator"),s(g,o,(function(){return this})),s(g,"toString",(function(){return"[object Generator]"})),e.keys=function(e){var n=[];for(var t in e)n.push(t);return n.reverse(),function t(){for(;n.length;){var r=n.pop();if(r in e)return t.value=r,t.done=!1,t}return t.done=!0,t}},e.values=_,w.prototype={constructor:w,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(k),!e)for(var n in this)"t"===n.charAt(0)&&t.call(this,n)&&!isNaN(+n.slice(1))&&(this[n]=void 0)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var n=this;function r(t,r){return a.type="throw",a.arg=e,n.next=t,r&&(n.method="next",n.arg=void 0),!!r}for(var o=this.tryEntries.length-1;o>=0;--o){var i=this.tryEntries[o],a=i.completion;if("root"===i.tryLoc)return r("end");if(i.tryLoc<=this.prev){var s=t.call(i,"catchLoc"),c=t.call(i,"finallyLoc");if(s&&c){if(this.prev<i.catchLoc)return r(i.catchLoc,!0);if(this.prev<i.finallyLoc)return r(i.finallyLoc)}else if(s){if(this.prev<i.catchLoc)return r(i.catchLoc,!0)}else{if(!c)throw new Error("try statement without catch or finally");if(this.prev<i.finallyLoc)return r(i.finallyLoc)}}}},abrupt:function(e,n){for(var r=this.tryEntries.length-1;r>=0;--r){var o=this.tryEntries[r];if(o.tryLoc<=this.prev&&t.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var i=o;break}}i&&("break"===e||"continue"===e)&&i.tryLoc<=n&&n<=i.finallyLoc&&(i=null);var a=i?i.completion:{};return a.type=e,a.arg=n,i?(this.method="next",this.next=i.finallyLoc,l):this.complete(a)},complete:function(e,n){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&n&&(this.next=n),l},finish:function(e){for(var n=this.tryEntries.length-1;n>=0;--n){var t=this.tryEntries[n];if(t.finallyLoc===e)return this.complete(t.completion,t.afterLoc),k(t),l}},catch:function(e){for(var n=this.tryEntries.length-1;n>=0;--n){var t=this.tryEntries[n];if(t.tryLoc===e){var r=t.completion;if("throw"===r.type){var o=r.arg;k(t)}return o}}throw new Error("illegal catch attempt")},delegateYield:function(e,n,t){return this.delegate={iterator:_(e),resultName:n,nextLoc:t},"next"===this.method&&(this.arg=void 0),l}},e}(e.exports);try{regeneratorRuntime=r}catch(e){"object"==typeof globalThis?globalThis.regeneratorRuntime=r:Function("r","regeneratorRuntime = r")(r)}},function(e,n,t){"use strict";var r=t(2),o=t(63).PROPER,i=t(14),a=t(7),s=t(36),c=t(13),u=t(3),l=t(143),p=RegExp.prototype,d=p.toString,f=r(l),v=u((function(){return"/a/b"!=d.call({source:"a",flags:"b"})})),h=o&&"toString"!=d.name;(v||h)&&i(RegExp.prototype,"toString",(function(){var e=a(this),n=c(e.source),t=e.flags;return"/"+n+"/"+c(void 0===t&&s(p,e)&&!("flags"in p)?f(e):t)}),{unsafe:!0})},function(e,n,t){"use strict";var r=t(18),o=t(136),i=t(62),a=t(34),s=t(12).f,c=t(154),u=t(31),l=t(8),p=a.set,d=a.getterFor("Array Iterator");e.exports=c(Array,"Array",(function(e,n){p(this,{type:"Array Iterator",target:r(e),index:0,kind:n})}),(function(){var e=d(this),n=e.target,t=e.kind,r=e.index++;return!n||r>=n.length?(e.target=void 0,{value:void 0,done:!0}):"keys"==t?{value:r,done:!1}:"values"==t?{value:n[r],done:!1}:{value:[r,n[r]],done:!1}}),"values");var f=i.Arguments=i.Array;if(o("keys"),o("values"),o("entries"),!u&&l&&"values"!==f.name)try{s(f,"name",{value:"values"})}catch(e){}},function(e,n,t){var r=t(0),o=t(10),i=t(32),a=t(7),s=t(81),c=t(104),u=r.TypeError;e.exports=function(e,n){var t=arguments.length<2?c(e):n;if(i(t))return a(o(t,e));throw u(s(e)+" is not iterable")}},function(e,n,t){var r=t(247);e.exports=function(e,n){return new(r(e))(0===n?0:n)}},function(e,n,t){var r=t(9),o=t(25),i=t(6)("match");e.exports=function(e){var n;return r(e)&&(void 0!==(n=e[i])?!!n:"RegExp"==o(e))}},function(e,n,t){"use strict";var r=t(7);e.exports=function(){var e=r(this),n="";return e.global&&(n+="g"),e.ignoreCase&&(n+="i"),e.multiline&&(n+="m"),e.dotAll&&(n+="s"),e.unicode&&(n+="u"),e.sticky&&(n+="y"),n}},function(e,n){e.exports=function(e){return e.webpackPolyfill||(e.deprecate=function(){},e.paths=[],e.children||(e.children=[]),Object.defineProperty(e,"loaded",{enumerable:!0,get:function(){return e.l}}),Object.defineProperty(e,"id",{enumerable:!0,get:function(){return e.i}}),e.webpackPolyfill=1),e}},function(e,n){var t=/^\s+|\s+$/g,r=/^[-+]0x[0-9a-f]+$/i,o=/^0b[01]+$/i,i=/^0o[0-7]+$/i,a=parseInt,s="object"==typeof global&&global&&global.Object===Object&&global,c="object"==typeof self&&self&&self.Object===Object&&self,u=s||c||Function("return this")(),l=Object.prototype.toString,p=Math.max,d=Math.min,f=function(){return u.Date.now()};function v(e){var n=typeof e;return!!e&&("object"==n||"function"==n)}function h(e){if("number"==typeof e)return e;if(function(e){return"symbol"==typeof e||function(e){return!!e&&"object"==typeof e}(e)&&"[object Symbol]"==l.call(e)}(e))return NaN;if(v(e)){var n="function"==typeof e.valueOf?e.valueOf():e;e=v(n)?n+"":n}if("string"!=typeof e)return 0===e?e:+e;e=e.replace(t,"");var s=o.test(e);return s||i.test(e)?a(e.slice(2),s?2:8):r.test(e)?NaN:+e}e.exports=function(e,n,t){var r,o,i,a,s,c,u=0,l=!1,m=!1,g=!0;if("function"!=typeof e)throw new TypeError("Expected a function");function b(n){var t=r,i=o;return r=o=void 0,u=n,a=e.apply(i,t)}function y(e){return u=e,s=setTimeout(j,n),l?b(e):a}function x(e){var t=e-c;return void 0===c||t>=n||t<0||m&&e-u>=i}function j(){var e=f();if(x(e))return k(e);s=setTimeout(j,function(e){var t=n-(e-c);return m?d(t,i-(e-u)):t}(e))}function k(e){return s=void 0,g&&r?b(e):(r=o=void 0,a)}function w(){var e=f(),t=x(e);if(r=arguments,o=this,c=e,t){if(void 0===s)return y(c);if(m)return s=setTimeout(j,n),b(c)}return void 0===s&&(s=setTimeout(j,n)),a}return n=h(n)||0,v(t)&&(l=!!t.leading,i=(m="maxWait"in t)?p(h(t.maxWait)||0,n):i,g="trailing"in t?!!t.trailing:g),w.cancel=function(){void 0!==s&&clearTimeout(s),u=0,r=c=o=s=void 0},w.flush=function(){return void 0===s?a:k(f())},w}},function(e,n,t){var r=t(2),o=t(17),i=t(13),a=t(147),s=r("".replace),c="["+a+"]",u=RegExp("^"+c+c+"*"),l=RegExp(c+c+"*$"),p=function(e){return function(n){var t=i(o(n));return 1&e&&(t=s(t,u,"")),2&e&&(t=s(t,l,"")),t}};e.exports={start:p(1),end:p(2),trim:p(3)}},function(e,n){e.exports="\t\n\v\f\r                　\u2028\u2029\ufeff"},function(e,n,t){var r=t(111);e.exports=r&&!Symbol.sham&&"symbol"==typeof Symbol.iterator},function(e,n,t){var r=t(8),o=t(12),i=t(7),a=t(18),s=t(82);e.exports=r?Object.defineProperties:function(e,n){i(e);for(var t,r=a(n),c=s(n),u=c.length,l=0;u>l;)o.f(e,t=c[l++],r[t]);return e}},function(e,n,t){var r=t(8),o=t(3),i=t(78);e.exports=!r&&!o((function(){return 7!=Object.defineProperty(i("div"),"a",{get:function(){return 7}}).a}))},function(e,n,t){var r=t(0),o=t(10),i=t(9),a=t(80),s=t(45),c=t(231),u=t(6),l=r.TypeError,p=u("toPrimitive");e.exports=function(e,n){if(!i(e)||a(e))return e;var t,r=s(e,p);if(r){if(void 0===n&&(n="default"),t=o(r,e,n),!i(t)||a(t))return t;throw l("Can't convert object to primitive value")}return void 0===n&&(n="number"),c(e,n)}},function(e,n,t){var r=t(2),o=t(11),i=t(18),a=t(112).indexOf,s=t(61),c=r([].push);e.exports=function(e,n){var t,r=i(e),u=0,l=[];for(t in r)!o(s,t)&&o(r,t)&&c(l,t);for(;n.length>u;)o(r,t=n[u++])&&(~a(l,t)||c(l,t));return l}},function(e,n,t){var r=t(19);e.exports=r("document","documentElement")},function(e,n,t){"use strict";var r=t(1),o=t(10),i=t(31),a=t(63),s=t(5),c=t(218),u=t(118),l=t(85),p=t(57),d=t(37),f=t(14),v=t(6),h=t(62),m=t(156),g=a.PROPER,b=a.CONFIGURABLE,y=m.IteratorPrototype,x=m.BUGGY_SAFARI_ITERATORS,j=v("iterator"),k=function(){return this};e.exports=function(e,n,t,a,v,m,w){c(t,n,a);var _,S,E,C=function(e){if(e===v&&P)return P;if(!x&&e in A)return A[e];switch(e){case"keys":case"values":case"entries":return function(){return new t(this,e)}}return function(){return new t(this)}},I=n+" Iterator",O=!1,A=e.prototype,T=A[j]||A["@@iterator"]||v&&A[v],P=!x&&T||C(v),$="Array"==n&&A.entries||T;if($&&(_=u($.call(new e)))!==Object.prototype&&_.next&&(i||u(_)===y||(l?l(_,y):s(_[j])||f(_,j,k)),p(_,I,!0,!0),i&&(h[I]=k)),g&&"values"==v&&T&&"values"!==T.name&&(!i&&b?d(A,"name","values"):(O=!0,P=function(){return o(T,this)})),v)if(S={values:C("values"),keys:m?P:C("keys"),entries:C("entries")},w)for(E in S)(x||O||!(E in A))&&f(A,E,S[E]);else r({target:n,proto:!0,forced:x||O},S);return i&&!w||A[j]===P||f(A,j,P,{name:v}),h[n]=P,S}},function(e,n,t){var r=t(11),o=t(116),i=t(33),a=t(12);e.exports=function(e,n,t){for(var s=o(n),c=a.f,u=i.f,l=0;l<s.length;l++){var p=s[l];r(e,p)||t&&r(t,p)||c(e,p,u(n,p))}}},function(e,n,t){"use strict";var r,o,i,a=t(3),s=t(5),c=t(35),u=t(118),l=t(14),p=t(6),d=t(31),f=p("iterator"),v=!1;[].keys&&("next"in(i=[].keys())?(o=u(u(i)))!==Object.prototype&&(r=o):v=!0),null==r||a((function(){var e={};return r[f].call(e)!==e}))?r={}:d&&(r=c(r)),s(r[f])||l(r,f,(function(){return this})),e.exports={IteratorPrototype:r,BUGGY_SAFARI_ITERATORS:v}},function(e,n,t){var r=t(3);e.exports=!r((function(){function e(){}return e.prototype.constructor=null,Object.getPrototypeOf(new e)!==e.prototype}))},function(e,n,t){var r=t(0);e.exports=r.Promise},function(e,n,t){var r=t(6),o=t(62),i=r("iterator"),a=Array.prototype;e.exports=function(e){return void 0!==e&&(o.Array===e||a[i]===e)}},function(e,n,t){var r=t(10),o=t(7),i=t(45);e.exports=function(e,n,t){var a,s;o(e);try{if(!(a=i(e,"return"))){if("throw"===n)throw t;return t}a=r(a,e)}catch(e){s=!0,a=e}if("throw"===n)throw t;if(s)throw a;return o(a),t}},function(e,n,t){var r=t(6)("iterator"),o=!1;try{var i=0,a={next:function(){return{done:!!i++}},return:function(){o=!0}};a[r]=function(){return this},Array.from(a,(function(){throw 2}))}catch(e){}e.exports=function(e,n){if(!n&&!o)return!1;var t=!1;try{var i={};i[r]=function(){return{next:function(){return{done:t=!0}}}},e(i)}catch(e){}return t}},function(e,n,t){var r=t(0),o=t(86),i=t(81),a=r.TypeError;e.exports=function(e){if(o(e))return e;throw a(i(e)+" is not a constructor")}},function(e,n,t){var r,o,i,a,s=t(0),c=t(38),u=t(53),l=t(5),p=t(11),d=t(3),f=t(153),v=t(64),h=t(78),m=t(164),g=t(87),b=s.setImmediate,y=s.clearImmediate,x=s.process,j=s.Dispatch,k=s.Function,w=s.MessageChannel,_=s.String,S=0,E={};try{r=s.location}catch(e){}var C=function(e){if(p(E,e)){var n=E[e];delete E[e],n()}},I=function(e){return function(){C(e)}},O=function(e){C(e.data)},A=function(e){s.postMessage(_(e),r.protocol+"//"+r.host)};b&&y||(b=function(e){var n=v(arguments,1);return E[++S]=function(){c(l(e)?e:k(e),void 0,n)},o(S),S},y=function(e){delete E[e]},g?o=function(e){x.nextTick(I(e))}:j&&j.now?o=function(e){j.now(I(e))}:w&&!m?(a=(i=new w).port2,i.port1.onmessage=O,o=u(a.postMessage,a)):s.addEventListener&&l(s.postMessage)&&!s.importScripts&&r&&"file:"!==r.protocol&&!d(A)?(o=A,s.addEventListener("message",O,!1)):o="onreadystatechange"in h("script")?function(e){f.appendChild(h("script")).onreadystatechange=function(){f.removeChild(this),C(e)}}:function(e){setTimeout(I(e),0)}),e.exports={set:b,clear:y}},function(e,n,t){var r=t(27);e.exports=/(?:ipad|iphone|ipod).*applewebkit/i.test(r)},function(e,n,t){var r=t(7),o=t(9),i=t(166);e.exports=function(e,n){if(r(e),o(n)&&n.constructor===e)return n;var t=i.f(e);return(0,t.resolve)(n),t.promise}},function(e,n,t){"use strict";var r=t(32),o=function(e){var n,t;this.promise=new e((function(e,r){if(void 0!==n||void 0!==t)throw TypeError("Bad Promise constructor");n=e,t=r})),this.resolve=r(n),this.reject=r(t)};e.exports.f=function(e){return new o(e)}},function(e,n,t){var r=t(2),o=t(52),i=t(13),a=t(17),s=r("".charAt),c=r("".charCodeAt),u=r("".slice),l=function(e){return function(n,t){var r,l,p=i(a(n)),d=o(t),f=p.length;return d<0||d>=f?e?"":void 0:(r=c(p,d))<55296||r>56319||d+1===f||(l=c(p,d+1))<56320||l>57343?e?s(p,d):r:e?u(p,d,d+2):l-56320+(r-55296<<10)+65536}};e.exports={codeAt:l(!1),charAt:l(!0)}},function(e,n){e.exports={CSSRuleList:0,CSSStyleDeclaration:0,CSSValueList:0,ClientRectList:0,DOMRectList:0,DOMStringList:0,DOMTokenList:1,DataTransferItemList:0,FileList:0,HTMLAllCollection:0,HTMLCollection:0,HTMLFormElement:0,HTMLSelectElement:0,MediaList:0,MimeTypeArray:0,NamedNodeMap:0,NodeList:1,PaintRequestList:0,Plugin:0,PluginArray:0,SVGLengthList:0,SVGNumberList:0,SVGPathSegList:0,SVGPointList:0,SVGStringList:0,SVGTransformList:0,SourceBufferList:0,StyleSheetList:0,TextTrackCueList:0,TextTrackList:0,TouchList:0}},function(e,n,t){var r=t(78)("span").classList,o=r&&r.constructor&&r.constructor.prototype;e.exports=o===Object.prototype?void 0:o},function(e,n,t){var r=t(1),o=t(8),i=t(116),a=t(18),s=t(33),c=t(65);r({target:"Object",stat:!0,sham:!o},{getOwnPropertyDescriptors:function(e){for(var n,t,r=a(e),o=s.f,u=i(r),l={},p=0;u.length>p;)void 0!==(t=o(r,n=u[p++]))&&c(l,n,t);return l}})},function(e,n,t){var r=t(1),o=t(3),i=t(15),a=t(118),s=t(157);r({target:"Object",stat:!0,forced:o((function(){a(1)})),sham:!s},{getPrototypeOf:function(e){return a(i(e))}})},function(e,n,t){"use strict";var r,o=t(1),i=t(2),a=t(33).f,s=t(49),c=t(13),u=t(173),l=t(17),p=t(174),d=t(31),f=i("".startsWith),v=i("".slice),h=Math.min,m=p("startsWith");o({target:"String",proto:!0,forced:!!(d||m||(r=a(String.prototype,"startsWith"),!r||r.writable))&&!m},{startsWith:function(e){var n=c(l(this));u(e);var t=s(h(arguments.length>1?arguments[1]:void 0,n.length)),r=c(e);return f?f(n,r,t):v(n,t,t+r.length)===r}})},function(e,n,t){var r=t(0),o=t(142),i=r.TypeError;e.exports=function(e){if(o(e))throw i("The method doesn't accept regular expressions");return e}},function(e,n,t){var r=t(6)("match");e.exports=function(e){var n=/./;try{"/./"[e](n)}catch(t){try{return n[r]=!1,"/./"[e](n)}catch(e){}}return!1}},function(e,n,t){"use strict";var r=t(54).forEach,o=t(44)("forEach");e.exports=o?[].forEach:function(e){return r(this,e,arguments.length>1?arguments[1]:void 0)}},function(e,n,t){var r=t(3);e.exports=!r((function(){return Object.isExtensible(Object.preventExtensions({}))}))},function(e,n,t){var r=t(25),o=t(18),i=t(56).f,a=t(121),s="object"==typeof window&&window&&Object.getOwnPropertyNames?Object.getOwnPropertyNames(window):[];e.exports.f=function(e){return s&&"Window"==r(e)?function(e){try{return i(e)}catch(e){return a(s)}}(e):i(o(e))}},function(e,n,t){var r=t(6);n.f=r},function(e,n,t){var r=t(254),o=t(11),i=t(178),a=t(12).f;e.exports=function(e){var n=r.Symbol||(r.Symbol={});o(n,e)||a(n,e,{value:i.f(e)})}},function(e,n,t){var r=t(1),o=t(255);r({target:"Array",stat:!0,forced:!t(161)((function(e){Array.from(e)}))},{from:o})},function(e,n,t){t(1)({target:"Object",stat:!0,sham:!t(8)},{create:t(35)})},function(e,n,t){var r=t(1),o=t(0),i=t(19),a=t(38),s=t(2),c=t(3),u=o.Array,l=i("JSON","stringify"),p=s(/./.exec),d=s("".charAt),f=s("".charCodeAt),v=s("".replace),h=s(1..toString),m=/[\uD800-\uDFFF]/g,g=/^[\uD800-\uDBFF]$/,b=/^[\uDC00-\uDFFF]$/,y=function(e,n,t){var r=d(t,n-1),o=d(t,n+1);return p(g,e)&&!p(b,o)||p(b,e)&&!p(g,r)?"\\u"+h(f(e,0),16):e},x=c((function(){return'"\\udf06\\ud834"'!==l("\udf06\ud834")||'"\\udead"'!==l("\udead")}));l&&r({target:"JSON",stat:!0,forced:x},{stringify:function(e,n,t){for(var r=0,o=arguments.length,i=u(o);r<o;r++)i[r]=arguments[r];var s=a(l,null,i);return"string"==typeof s?v(s,m,y):s}})},function(e,n){e.exports=function(e,n){for(var t=-1,r=n.length,o=e.length;++t<r;)e[o+t]=n[t];return e}},function(e,n){var t="object"==typeof global&&global&&global.Object===Object&&global;e.exports=t},function(e,n,t){var r=t(92),o=t(271),i=t(272),a=t(273),s=t(274),c=t(275);function u(e){var n=this.__data__=new r(e);this.size=n.size}u.prototype.clear=o,u.prototype.delete=i,u.prototype.get=a,u.prototype.has=s,u.prototype.set=c,e.exports=u},function(e,n){e.exports=function(e,n){return e===n||e!=e&&n!=n}},function(e,n,t){var r=t(59),o=t(126);e.exports=function(e){if(!o(e))return!1;var n=r(e);return"[object Function]"==n||"[object GeneratorFunction]"==n||"[object AsyncFunction]"==n||"[object Proxy]"==n}},function(e,n){var t=Function.prototype.toString;e.exports=function(e){if(null!=e){try{return t.call(e)}catch(e){}try{return e+""}catch(e){}}return""}},function(e,n,t){var r=t(292),o=t(46);e.exports=function e(n,t,i,a,s){return n===t||(null==n||null==t||!o(n)&&!o(t)?n!=n&&t!=t:r(n,t,i,a,e,s))}},function(e,n,t){var r=t(191),o=t(295),i=t(192);e.exports=function(e,n,t,a,s,c){var u=1&t,l=e.length,p=n.length;if(l!=p&&!(u&&p>l))return!1;var d=c.get(e),f=c.get(n);if(d&&f)return d==n&&f==e;var v=-1,h=!0,m=2&t?new r:void 0;for(c.set(e,n),c.set(n,e);++v<l;){var g=e[v],b=n[v];if(a)var y=u?a(b,g,v,n,e,c):a(g,b,v,e,n,c);if(void 0!==y){if(y)continue;h=!1;break}if(m){if(!o(n,(function(e,n){if(!i(m,n)&&(g===e||s(g,e,t,a,c)))return m.push(n)}))){h=!1;break}}else if(g!==b&&!s(g,b,t,a,c)){h=!1;break}}return c.delete(e),c.delete(n),h}},function(e,n,t){var r=t(127),o=t(293),i=t(294);function a(e){var n=-1,t=null==e?0:e.length;for(this.__data__=new r;++n<t;)this.add(e[n])}a.prototype.add=a.prototype.push=o,a.prototype.has=i,e.exports=a},function(e,n){e.exports=function(e,n){return e.has(n)}},function(e,n,t){var r=t(305),o=t(311),i=t(197);e.exports=function(e){return i(e)?r(e):o(e)}},function(e,n,t){(function(e){var r=t(30),o=t(307),i=n&&!n.nodeType&&n,a=i&&"object"==typeof e&&e&&!e.nodeType&&e,s=a&&a.exports===i?r.Buffer:void 0,c=(s?s.isBuffer:void 0)||o;e.exports=c}).call(this,t(144)(e))},function(e,n){var t=/^(?:0|[1-9]\d*)$/;e.exports=function(e,n){var r=typeof e;return!!(n=null==n?9007199254740991:n)&&("number"==r||"symbol"!=r&&t.test(e))&&e>-1&&e%1==0&&e<n}},function(e,n,t){var r=t(308),o=t(309),i=t(310),a=i&&i.isTypedArray,s=a?o(a):r;e.exports=s},function(e,n,t){var r=t(187),o=t(129);e.exports=function(e){return null!=e&&o(e.length)&&!r(e)}},function(e,n,t){var r=t(39)(t(30),"Set");e.exports=r},function(e,n,t){var r=t(126);e.exports=function(e){return e==e&&!r(e)}},function(e,n){e.exports=function(e,n){return function(t){return null!=t&&(t[e]===n&&(void 0!==n||e in Object(t)))}}},function(e,n,t){var r=t(202),o=t(96);e.exports=function(e,n){for(var t=0,i=(n=r(n,e)).length;null!=e&&t<i;)e=e[o(n[t++])];return t&&t==i?e:void 0}},function(e,n,t){var r=t(26),o=t(130),i=t(322),a=t(325);e.exports=function(e,n){return r(e)?e:o(e,n)?[e]:i(a(e))}},function(e,n,t){"use strict";var r=t(0),o=t(2),i=t(32),a=t(9),s=t(11),c=t(64),u=r.Function,l=o([].concat),p=o([].join),d={},f=function(e,n,t){if(!s(d,n)){for(var r=[],o=0;o<n;o++)r[o]="a["+o+"]";d[n]=u("C,a","return new C("+p(r,",")+")")}return d[n](e,t)};e.exports=u.bind||function(e){var n=i(this),t=n.prototype,r=c(arguments,1),o=function(){var t=l(r,c(arguments));return this instanceof o?f(n,t.length,t):n.apply(e,t)};return a(t)&&(o.prototype=t),o}},function(e,n,t){"use strict";var r=t(1),o=t(357).start;r({target:"String",proto:!0,forced:t(359)},{padStart:function(e){return o(this,e,arguments.length>1?arguments[1]:void 0)}})},function(e,n,t){},function(e,n,t){},function(e,n,t){t(1)({target:"Object",stat:!0},{setPrototypeOf:t(85)})},function(e,n,t){var r=t(1),o=t(19),i=t(38),a=t(203),s=t(162),c=t(7),u=t(9),l=t(35),p=t(3),d=o("Reflect","construct"),f=Object.prototype,v=[].push,h=p((function(){function e(){}return!(d((function(){}),[],e)instanceof e)})),m=!p((function(){d((function(){}))})),g=h||m;r({target:"Reflect",stat:!0,forced:g,sham:g},{construct:function(e,n){s(e),c(n);var t=arguments.length<3?e:s(arguments[2]);if(m&&!h)return d(e,n,t);if(e==t){switch(n.length){case 0:return new e;case 1:return new e(n[0]);case 2:return new e(n[0],n[1]);case 3:return new e(n[0],n[1],n[2]);case 4:return new e(n[0],n[1],n[2],n[3])}var r=[null];return i(v,r,n),new(i(a,e,r))}var o=t.prototype,p=l(u(o)?o:f),g=i(e,p,n);return u(g)?g:p}})},function(e,n,t){},function(e,n,t){},function(e,n,t){var r=t(258),o=t(263),i=t(334),a=t(342),s=t(351),c=t(225),u=i((function(e){var n=c(e);return s(n)&&(n=void 0),a(r(e,1,s,!0),o(n,2))}));e.exports=u},function(e,n,t){"use strict";
/**
 * @file Embedded JavaScript templating engine. {@link http://ejs.co}
 * @author Matthew Eernisse <mde@fleegix.org>
 * @author Tiancheng "Timothy" Gu <timothygu99@gmail.com>
 * @project EJS
 * @license {@link http://www.apache.org/licenses/LICENSE-2.0 Apache License, Version 2.0}
 */var r=t(371),o=t(372),i=t(373),a=!1,s=t(374).version,c=["delimiter","scope","context","debug","compileDebug","client","_with","rmWhitespace","strict","filename","async"],u=c.concat("cache"),l=/^\uFEFF/;function p(e,t){var o,i,a=t.views,s=/^[A-Za-z]+:\\|^\//.exec(e);if(s&&s.length)o=n.resolveInclude(e.replace(/^\/*/,""),t.root||"/",!0);else if(t.filename&&(i=n.resolveInclude(e,t.filename),r.existsSync(i)&&(o=i)),o||Array.isArray(a)&&a.some((function(t){return i=n.resolveInclude(e,t,!0),r.existsSync(i)}))&&(o=i),!o)throw new Error('Could not find the include file "'+t.escapeFunction(e)+'"');return o}function d(e,t){var r,o=e.filename,i=arguments.length>1;if(e.cache){if(!o)throw new Error("cache option requires a filename");if(r=n.cache.get(o))return r;i||(t=v(o).toString().replace(l,""))}else if(!i){if(!o)throw new Error("Internal EJS error: no file name or template provided");t=v(o).toString().replace(l,"")}return r=n.compile(t,e),e.cache&&n.cache.set(o,r),r}function f(e,t,r){var o;if(!r){if("function"==typeof n.promiseImpl)return new n.promiseImpl((function(n,r){try{n(o=d(e)(t))}catch(e){r(e)}}));throw new Error("Please provide a callback function")}try{o=d(e)(t)}catch(e){return r(e)}r(null,o)}function v(e){return n.fileLoader(e)}function h(e,n,t,r,o){var i=n.split("\n"),a=Math.max(r-3,0),s=Math.min(i.length,r+3),c=o(t),u=i.slice(a,s).map((function(e,n){var t=n+a+1;return(t==r?" >> ":"    ")+t+"| "+e})).join("\n");throw e.path=c,e.message=(c||"ejs")+":"+r+"\n"+u+"\n\n"+e.message,e}function m(e){return e.replace(/;(\s*$)/,"$1")}function g(e,t){t=t||{};var r={};this.templateText=e,this.mode=null,this.truncate=!1,this.currentLine=1,this.source="",this.dependencies=[],r.client=t.client||!1,r.escapeFunction=t.escape||t.escapeFunction||i.escapeXML,r.compileDebug=!1!==t.compileDebug,r.debug=!!t.debug,r.filename=t.filename,r.openDelimiter=t.openDelimiter||n.openDelimiter||"<",r.closeDelimiter=t.closeDelimiter||n.closeDelimiter||">",r.delimiter=t.delimiter||n.delimiter||"%",r.strict=t.strict||!1,r.context=t.context,r.cache=t.cache||!1,r.rmWhitespace=t.rmWhitespace,r.root=t.root,r.outputFunctionName=t.outputFunctionName,r.localsName=t.localsName||n.localsName||"locals",r.views=t.views,r.async=t.async,r.destructuredLocals=t.destructuredLocals,r.legacyInclude=void 0===t.legacyInclude||!!t.legacyInclude,r.strict?r._with=!1:r._with=void 0===t._with||t._with,this.opts=r,this.regex=this.createRegex()}n.cache=i.cache,n.fileLoader=r.readFileSync,n.localsName="locals",n.promiseImpl=new Function("return this;")().Promise,n.resolveInclude=function(e,n,t){var r=o.dirname,i=o.extname,a=(0,o.resolve)(t?n:r(n),e);return i(e)||(a+=".ejs"),a},n.compile=function(e,n){return n&&n.scope&&(a||(console.warn("`scope` option is deprecated and will be removed in EJS 3"),a=!0),n.context||(n.context=n.scope),delete n.scope),new g(e,n).compile()},n.render=function(e,n,t){var r=n||{},o=t||{};return 2==arguments.length&&i.shallowCopyFromList(o,r,c),d(o,e)(r)},n.renderFile=function(){var e,n,t,r=Array.prototype.slice.call(arguments),o=r.shift(),a={filename:o};return"function"==typeof arguments[arguments.length-1]&&(e=r.pop()),r.length?(n=r.shift(),r.length?i.shallowCopy(a,r.pop()):(n.settings&&(n.settings.views&&(a.views=n.settings.views),n.settings["view cache"]&&(a.cache=!0),(t=n.settings["view options"])&&i.shallowCopy(a,t)),i.shallowCopyFromList(a,n,u)),a.filename=o):n={},f(a,n,e)},n.Template=g,n.clearCache=function(){n.cache.reset()},g.modes={EVAL:"eval",ESCAPED:"escaped",RAW:"raw",COMMENT:"comment",LITERAL:"literal"},g.prototype={createRegex:function(){var e="(<%%|%%>|<%=|<%-|<%_|<%#|<%|%>|-%>|_%>)",n=i.escapeRegExpChars(this.opts.delimiter),t=i.escapeRegExpChars(this.opts.openDelimiter),r=i.escapeRegExpChars(this.opts.closeDelimiter);return e=e.replace(/%/g,n).replace(/</g,t).replace(/>/g,r),new RegExp(e)},compile:function(){var e,n,t,r=this.opts,a="",s="",c=r.escapeFunction;if(!this.source){if(this.generateSource(),a+='  var __output = "";\n  function __append(s) { if (s !== undefined && s !== null) __output += s }\n',r.outputFunctionName&&(a+="  var "+r.outputFunctionName+" = __append;\n"),r.destructuredLocals&&r.destructuredLocals.length){for(var u="  var __locals = ("+r.localsName+" || {}),\n",l=0;l<r.destructuredLocals.length;l++){var f=r.destructuredLocals[l];l>0&&(u+=",\n  "),u+=f+" = __locals."+f}a+=u+";\n"}!1!==r._with&&(a+="  with ("+r.localsName+" || {}) {\n",s+="  }\n"),s+="  return __output;\n",this.source=a+this.source+s}e=r.compileDebug?"var __line = 1\n  , __lines = "+JSON.stringify(this.templateText)+"\n  , __filename = "+(r.filename?JSON.stringify(r.filename):"undefined")+";\ntry {\n"+this.source+"} catch (e) {\n  rethrow(e, __lines, __filename, __line, escapeFn);\n}\n":this.source,r.client&&(e="escapeFn = escapeFn || "+c.toString()+";\n"+e,r.compileDebug&&(e="rethrow = rethrow || "+h.toString()+";\n"+e)),r.strict&&(e='"use strict";\n'+e),r.debug&&console.log(e),r.compileDebug&&r.filename&&(e=e+"\n//# sourceURL="+r.filename+"\n");try{if(r.async)try{t=new Function("return (async function(){}).constructor;")()}catch(e){throw e instanceof SyntaxError?new Error("This environment does not support async/await"):e}else t=Function;n=new t(r.localsName+", escapeFn, include, rethrow",e)}catch(e){throw e instanceof SyntaxError&&(r.filename&&(e.message+=" in "+r.filename),e.message+=" while compiling ejs\n\n",e.message+="If the above error is not helpful, you may want to try EJS-Lint:\n",e.message+="https://github.com/RyanZim/EJS-Lint",r.async||(e.message+="\n",e.message+="Or, if you meant to create an async function, pass `async: true` as an option.")),e}var v=r.client?n:function(e){return n.apply(r.context,[e||{},c,function(n,t){var o=i.shallowCopy({},e);return t&&(o=i.shallowCopy(o,t)),function(e,n){var t=i.shallowCopy({},n);return t.filename=p(e,t),d(t)}(n,r)(o)},h])};if(v.dependencies=this.dependencies,r.filename&&"function"==typeof Object.defineProperty){var m=r.filename,g=o.basename(m,o.extname(m));try{Object.defineProperty(v,"name",{value:g,writable:!1,enumerable:!1,configurable:!0})}catch(e){}}return v},generateSource:function(){var e=this.opts;e.rmWhitespace&&(this.templateText=this.templateText.replace(/[\r\n]+/g,"\n").replace(/^\s+|\s+$/gm,"")),this.templateText=this.templateText.replace(/[ \t]*<%_/gm,"<%_").replace(/_%>[ \t]*/gm,"_%>");var t=this,r=this.parseTemplateText(),o=this.opts.delimiter,a=this.opts.openDelimiter,s=this.opts.closeDelimiter;r&&r.length&&r.forEach((function(c,u){var d,f,h,m,b,y;if(0===c.indexOf(a+o)&&0!==c.indexOf(a+o+o)&&(f=r[u+2])!=o+s&&f!="-"+o+s&&f!="_"+o+s)throw new Error('Could not find matching close tag for "'+c+'".');if(e.legacyInclude&&(h=c.match(/^\s*include\s+(\S+)/))&&(d=r[u-1])&&(d==a+o||d==a+o+"-"||d==a+o+"_"))return m=i.shallowCopy({},t.opts),b=function(e,n){var t,r,o=i.shallowCopy({},n);r=v(t=p(e,o)).toString().replace(l,""),o.filename=t;var a=new g(r,o);return a.generateSource(),{source:a.source,filename:t,template:r}}(h[1],m),y=t.opts.compileDebug?"    ; (function(){\n      var __line = 1\n      , __lines = "+JSON.stringify(b.template)+"\n      , __filename = "+JSON.stringify(b.filename)+";\n      try {\n"+b.source+"      } catch (e) {\n        rethrow(e, __lines, __filename, __line, escapeFn);\n      }\n    ; }).call(this)\n":"    ; (function(){\n"+b.source+"    ; }).call(this)\n",t.source+=y,void t.dependencies.push(n.resolveInclude(h[1],m.filename));t.scanLine(c)}))},parseTemplateText:function(){for(var e,n=this.templateText,t=this.regex,r=t.exec(n),o=[];r;)0!==(e=r.index)&&(o.push(n.substring(0,e)),n=n.slice(e)),o.push(r[0]),n=n.slice(r[0].length),r=t.exec(n);return n&&o.push(n),o},_addOutput:function(e){if(this.truncate&&(e=e.replace(/^(?:\r\n|\r|\n)/,""),this.truncate=!1),!e)return e;e=(e=(e=(e=e.replace(/\\/g,"\\\\")).replace(/\n/g,"\\n")).replace(/\r/g,"\\r")).replace(/"/g,'\\"'),this.source+='    ; __append("'+e+'")\n'},scanLine:function(e){var n,t=this.opts.delimiter,r=this.opts.openDelimiter,o=this.opts.closeDelimiter;switch(n=e.split("\n").length-1,e){case r+t:case r+t+"_":this.mode=g.modes.EVAL;break;case r+t+"=":this.mode=g.modes.ESCAPED;break;case r+t+"-":this.mode=g.modes.RAW;break;case r+t+"#":this.mode=g.modes.COMMENT;break;case r+t+t:this.mode=g.modes.LITERAL,this.source+='    ; __append("'+e.replace(r+t+t,r+t)+'")\n';break;case t+t+o:this.mode=g.modes.LITERAL,this.source+='    ; __append("'+e.replace(t+t+o,t+o)+'")\n';break;case t+o:case"-"+t+o:case"_"+t+o:this.mode==g.modes.LITERAL&&this._addOutput(e),this.mode=null,this.truncate=0===e.indexOf("-")||0===e.indexOf("_");break;default:if(this.mode){switch(this.mode){case g.modes.EVAL:case g.modes.ESCAPED:case g.modes.RAW:e.lastIndexOf("//")>e.lastIndexOf("\n")&&(e+="\n")}switch(this.mode){case g.modes.EVAL:this.source+="    ; "+e+"\n";break;case g.modes.ESCAPED:this.source+="    ; __append(escapeFn("+m(e)+"))\n";break;case g.modes.RAW:this.source+="    ; __append("+m(e)+")\n";break;case g.modes.COMMENT:break;case g.modes.LITERAL:this._addOutput(e)}}else this._addOutput(e)}this.opts.compileDebug&&n&&(this.currentLine+=n,this.source+="    ; __line = "+this.currentLine+"\n")}},n.escapeXML=i.escapeXML,n.__express=n.renderFile,n.VERSION=s,n.name="ejs","undefined"!=typeof window&&(window.ejs=n)},function(e,n,t){"use strict";t.r(n);var r={name:"CodeBlock",props:{title:{type:String,required:!0},active:{type:Boolean,default:!1}}},o=(t(360),t(20)),i=Object(o.a)(r,(function(){var e=this.$createElement;return(this._self._c||e)("div",{staticClass:"theme-code-block",class:{"theme-code-block__active":this.active}},[this._t("default")],2)}),[],!1,null,"4f1e9d0c",null);n.default=i.exports},function(e,n,t){"use strict";t.r(n);t(28),t(4),t(29),t(42),t(21);var r={name:"CodeGroup",data:function(){return{codeTabs:[],activeCodeTabIndex:-1}},watch:{activeCodeTabIndex:function(e){this.codeTabs.forEach((function(e){e.elm.classList.remove("theme-code-block__active")})),this.codeTabs[e].elm.classList.add("theme-code-block__active")}},mounted:function(){var e=this;this.codeTabs=(this.$slots.default||[]).filter((function(e){return Boolean(e.componentOptions)})).map((function(n,t){return""===n.componentOptions.propsData.active&&(e.activeCodeTabIndex=t),{title:n.componentOptions.propsData.title,elm:n.elm}})),-1===this.activeCodeTabIndex&&this.codeTabs.length>0&&(this.activeCodeTabIndex=0)},methods:{changeCodeTab:function(e){this.activeCodeTabIndex=e}}},o=(t(361),t(20)),i=Object(o.a)(r,(function(){var e=this,n=e.$createElement,t=e._self._c||n;return t("div",{staticClass:"theme-code-group"},[t("div",{staticClass:"theme-code-group__nav"},[t("ul",{staticClass:"theme-code-group__ul"},e._l(e.codeTabs,(function(n,r){return t("li",{key:n.title,staticClass:"theme-code-group__li"},[t("button",{staticClass:"theme-code-group__nav-tab",class:{"theme-code-group__nav-tab-active":r===e.activeCodeTabIndex},on:{click:function(n){return e.changeCodeTab(r)}}},[e._v("\n            "+e._s(n.title)+"\n          ")])])})),0)]),e._v(" "),e._t("default"),e._v(" "),e.codeTabs.length<1?t("pre",{staticClass:"pre-blank"},[e._v("// Make sure to add code blocks to your code group")]):e._e()],2)}),[],!1,null,"2f5f1757",null);n.default=i.exports},function(e,n,t){"use strict";var r=t(8),o=t(0),i=t(2),a=t(103),s=t(14),c=t(11),u=t(227),l=t(36),p=t(80),d=t(151),f=t(3),v=t(56).f,h=t(33).f,m=t(12).f,g=t(356),b=t(146).trim,y=o.Number,x=y.prototype,j=o.TypeError,k=i("".slice),w=i("".charCodeAt),_=function(e){var n=d(e,"number");return"bigint"==typeof n?n:S(n)},S=function(e){var n,t,r,o,i,a,s,c,u=d(e,"number");if(p(u))throw j("Cannot convert a Symbol value to a number");if("string"==typeof u&&u.length>2)if(u=b(u),43===(n=w(u,0))||45===n){if(88===(t=w(u,2))||120===t)return NaN}else if(48===n){switch(w(u,1)){case 66:case 98:r=2,o=49;break;case 79:case 111:r=8,o=55;break;default:return+u}for(a=(i=k(u,2)).length,s=0;s<a;s++)if((c=w(i,s))<48||c>o)return NaN;return parseInt(i,r)}return+u};if(a("Number",!y(" 0o1")||!y("0b1")||y("+0x1"))){for(var E,C=function(e){var n=arguments.length<1?0:y(_(e)),t=this;return l(x,t)&&f((function(){g(t)}))?u(Object(n),t,C):n},I=r?v(y):"MAX_VALUE,MIN_VALUE,NaN,NEGATIVE_INFINITY,POSITIVE_INFINITY,EPSILON,MAX_SAFE_INTEGER,MIN_SAFE_INTEGER,isFinite,isInteger,isNaN,isSafeInteger,parseFloat,parseInt,fromString,range".split(","),O=0;I.length>O;O++)c(y,E=I[O])&&!c(C,E)&&m(C,E,h(y,E));C.prototype=x,x.constructor=C,s(o,"Number",C)}},function(e,n,t){"use strict";var r=t(1),o=t(54).some;r({target:"Array",proto:!0,forced:!t(44)("some")},{some:function(e){return o(this,e,arguments.length>1?arguments[1]:void 0)}})},function(e,n,t){var r=t(3),o=t(0).RegExp;e.exports=r((function(){var e=o(".","s");return!(e.dotAll&&e.exec("\n")&&"s"===e.flags)}))},function(e,n,t){"use strict";var r=t(156).IteratorPrototype,o=t(35),i=t(55),a=t(57),s=t(62),c=function(){return this};e.exports=function(e,n,t,u){var l=n+" Iterator";return e.prototype=o(r,{next:i(+!u,t)}),a(e,l,!1,!0),s[l]=c,e}},function(e,n,t){var r=t(14);e.exports=function(e,n,t){for(var o in n)r(e,o,n[o],t);return e}},function(e,n,t){"use strict";var r=t(19),o=t(12),i=t(6),a=t(8),s=i("species");e.exports=function(e){var n=r(e),t=o.f;a&&n&&!n[s]&&t(n,s,{configurable:!0,get:function(){return this}})}},function(e,n,t){var r=t(0),o=t(36),i=r.TypeError;e.exports=function(e,n){if(o(n,e))return e;throw i("Incorrect invocation")}},function(e,n,t){var r=t(3),o=t(0).RegExp;e.exports=r((function(){var e=o("(?<a>b)","g");return"b"!==e.exec("b").groups.a||"bc"!=="b".replace(e,"$<a>c")}))},function(e,n,t){"use strict";var r=t(1),o=t(112).includes,i=t(136);r({target:"Array",proto:!0},{includes:function(e){return o(this,e,arguments.length>1?arguments[1]:void 0)}}),i("includes")},function(e,n,t){"use strict";var r=t(1),o=t(2),i=t(173),a=t(17),s=t(13),c=t(174),u=o("".indexOf);r({target:"String",proto:!0,forced:!c("includes")},{includes:function(e){return!!~u(s(a(this)),s(i(e)),arguments.length>1?arguments[1]:void 0)}})},function(e,n){e.exports=function(e){var n=null==e?0:e.length;return n?e[n-1]:void 0}},function(e,n,t){"use strict";var r=t(1),o=t(146).trim;r({target:"String",proto:!0,forced:t(354)("trim")},{trim:function(){return o(this)}})},function(e,n,t){var r=t(5),o=t(9),i=t(85);e.exports=function(e,n,t){var a,s;return i&&r(a=n.constructor)&&a!==t&&o(s=a.prototype)&&s!==t.prototype&&i(e,s),e}},function(e,n,t){var r=t(121),o=Math.floor,i=function(e,n){var t=e.length,c=o(t/2);return t<8?a(e,n):s(e,i(r(e,0,c),n),i(r(e,c),n),n)},a=function(e,n){for(var t,r,o=e.length,i=1;i<o;){for(r=i,t=e[i];r&&n(e[r-1],t)>0;)e[r]=e[--r];r!==i++&&(e[r]=t)}return e},s=function(e,n,t,r){for(var o=n.length,i=t.length,a=0,s=0;a<o||s<i;)e[a+s]=a<o&&s<i?r(n[a],t[s])<=0?n[a++]:t[s++]:a<o?n[a++]:t[s++];return e};e.exports=i},function(e,n,t){var r=t(0),o=t(8),i=t(105).MISSED_STICKY,a=t(25),s=t(12).f,c=t(34).get,u=RegExp.prototype,l=r.TypeError;o&&i&&s(u,"sticky",{configurable:!0,get:function(){if(this!==u){if("RegExp"===a(this))return!!c(this).sticky;throw l("Incompatible receiver, RegExp required")}}})},function(e,n,t){e.exports=t(377)},function(e,n,t){var r=t(0),o=t(10),i=t(5),a=t(9),s=r.TypeError;e.exports=function(e,n){var t,r;if("string"===n&&i(t=e.toString)&&!a(r=o(t,e)))return r;if(i(t=e.valueOf)&&!a(r=o(t,e)))return r;if("string"!==n&&i(t=e.toString)&&!a(r=o(t,e)))return r;throw s("Can't convert object to primitive value")}},function(e,n,t){var r=t(0),o=t(5),i=t(84),a=r.WeakMap;e.exports=o(a)&&/native code/.test(i(a))},function(e,n,t){var r=t(0),o=t(5),i=r.String,a=r.TypeError;e.exports=function(e){if("object"==typeof e||o(e))return e;throw a("Can't set "+i(e)+" as a prototype")}},function(e,n,t){"use strict";var r,o,i,a,s=t(1),c=t(31),u=t(0),l=t(19),p=t(10),d=t(158),f=t(14),v=t(219),h=t(85),m=t(57),g=t(220),b=t(32),y=t(5),x=t(9),j=t(221),k=t(84),w=t(235),_=t(161),S=t(120),E=t(163).set,C=t(236),I=t(165),O=t(239),A=t(166),T=t(240),P=t(241),$=t(34),L=t(103),R=t(6),z=t(242),B=t(87),D=t(48),N=R("species"),M="Promise",U=$.getterFor(M),F=$.set,V=$.getterFor(M),q=d&&d.prototype,H=d,K=q,W=u.TypeError,G=u.document,Z=u.process,J=A.f,X=J,Y=!!(G&&G.createEvent&&u.dispatchEvent),Q=y(u.PromiseRejectionEvent),ee=!1,ne=L(M,(function(){var e=k(H),n=e!==String(H);if(!n&&66===D)return!0;if(c&&!K.finally)return!0;if(D>=51&&/native code/.test(e))return!1;var t=new H((function(e){e(1)})),r=function(e){e((function(){}),(function(){}))};return(t.constructor={})[N]=r,!(ee=t.then((function(){}))instanceof r)||!n&&z&&!Q})),te=ne||!_((function(e){H.all(e).catch((function(){}))})),re=function(e){var n;return!(!x(e)||!y(n=e.then))&&n},oe=function(e,n){var t,r,o,i=n.value,a=1==n.state,s=a?e.ok:e.fail,c=e.resolve,u=e.reject,l=e.domain;try{s?(a||(2===n.rejection&&ue(n),n.rejection=1),!0===s?t=i:(l&&l.enter(),t=s(i),l&&(l.exit(),o=!0)),t===e.promise?u(W("Promise-chain cycle")):(r=re(t))?p(r,t,c,u):c(t)):u(i)}catch(e){l&&!o&&l.exit(),u(e)}},ie=function(e,n){e.notified||(e.notified=!0,C((function(){for(var t,r=e.reactions;t=r.get();)oe(t,e);e.notified=!1,n&&!e.rejection&&se(e)})))},ae=function(e,n,t){var r,o;Y?((r=G.createEvent("Event")).promise=n,r.reason=t,r.initEvent(e,!1,!0),u.dispatchEvent(r)):r={promise:n,reason:t},!Q&&(o=u["on"+e])?o(r):"unhandledrejection"===e&&O("Unhandled promise rejection",t)},se=function(e){p(E,u,(function(){var n,t=e.facade,r=e.value;if(ce(e)&&(n=T((function(){B?Z.emit("unhandledRejection",r,t):ae("unhandledrejection",t,r)})),e.rejection=B||ce(e)?2:1,n.error))throw n.value}))},ce=function(e){return 1!==e.rejection&&!e.parent},ue=function(e){p(E,u,(function(){var n=e.facade;B?Z.emit("rejectionHandled",n):ae("rejectionhandled",n,e.value)}))},le=function(e,n,t){return function(r){e(n,r,t)}},pe=function(e,n,t){e.done||(e.done=!0,t&&(e=t),e.value=n,e.state=2,ie(e,!0))},de=function(e,n,t){if(!e.done){e.done=!0,t&&(e=t);try{if(e.facade===n)throw W("Promise can't be resolved itself");var r=re(n);r?C((function(){var t={done:!1};try{p(r,n,le(de,t,e),le(pe,t,e))}catch(n){pe(t,n,e)}})):(e.value=n,e.state=1,ie(e,!1))}catch(n){pe({done:!1},n,e)}}};if(ne&&(K=(H=function(e){j(this,K),b(e),p(r,this);var n=U(this);try{e(le(de,n),le(pe,n))}catch(e){pe(n,e)}}).prototype,(r=function(e){F(this,{type:M,done:!1,notified:!1,parent:!1,reactions:new P,rejection:!1,state:0,value:void 0})}).prototype=v(K,{then:function(e,n){var t=V(this),r=J(S(this,H));return t.parent=!0,r.ok=!y(e)||e,r.fail=y(n)&&n,r.domain=B?Z.domain:void 0,0==t.state?t.reactions.add(r):C((function(){oe(r,t)})),r.promise},catch:function(e){return this.then(void 0,e)}}),o=function(){var e=new r,n=U(e);this.promise=e,this.resolve=le(de,n),this.reject=le(pe,n)},A.f=J=function(e){return e===H||e===i?new o(e):X(e)},!c&&y(d)&&q!==Object.prototype)){a=q.then,ee||(f(q,"then",(function(e,n){var t=this;return new H((function(e,n){p(a,t,e,n)})).then(e,n)}),{unsafe:!0}),f(q,"catch",K.catch,{unsafe:!0}));try{delete q.constructor}catch(e){}h&&h(q,K)}s({global:!0,wrap:!0,forced:ne},{Promise:H}),m(H,M,!1,!0),g(M),i=l(M),s({target:M,stat:!0,forced:ne},{reject:function(e){var n=J(this);return p(n.reject,void 0,e),n.promise}}),s({target:M,stat:!0,forced:c||ne},{resolve:function(e){return I(c&&this===i?H:this,e)}}),s({target:M,stat:!0,forced:te},{all:function(e){var n=this,t=J(n),r=t.resolve,o=t.reject,i=T((function(){var t=b(n.resolve),i=[],a=0,s=1;w(e,(function(e){var c=a++,u=!1;s++,p(t,n,e).then((function(e){u||(u=!0,i[c]=e,--s||r(i))}),o)})),--s||r(i)}));return i.error&&o(i.value),t.promise},race:function(e){var n=this,t=J(n),r=t.reject,o=T((function(){var o=b(n.resolve);w(e,(function(e){p(o,n,e).then(t.resolve,r)}))}));return o.error&&r(o.value),t.promise}})},function(e,n,t){var r=t(0),o=t(53),i=t(10),a=t(7),s=t(81),c=t(159),u=t(23),l=t(36),p=t(140),d=t(104),f=t(160),v=r.TypeError,h=function(e,n){this.stopped=e,this.result=n},m=h.prototype;e.exports=function(e,n,t){var r,g,b,y,x,j,k,w=t&&t.that,_=!(!t||!t.AS_ENTRIES),S=!(!t||!t.IS_ITERATOR),E=!(!t||!t.INTERRUPTED),C=o(n,w),I=function(e){return r&&f(r,"normal",e),new h(!0,e)},O=function(e){return _?(a(e),E?C(e[0],e[1],I):C(e[0],e[1])):E?C(e,I):C(e)};if(S)r=e;else{if(!(g=d(e)))throw v(s(e)+" is not iterable");if(c(g)){for(b=0,y=u(e);y>b;b++)if((x=O(e[b]))&&l(m,x))return x;return new h(!1)}r=p(e,g)}for(j=r.next;!(k=i(j,r)).done;){try{x=O(k.value)}catch(e){f(r,"throw",e)}if("object"==typeof x&&x&&l(m,x))return x}return new h(!1)}},function(e,n,t){var r,o,i,a,s,c,u,l,p=t(0),d=t(53),f=t(33).f,v=t(163).set,h=t(164),m=t(237),g=t(238),b=t(87),y=p.MutationObserver||p.WebKitMutationObserver,x=p.document,j=p.process,k=p.Promise,w=f(p,"queueMicrotask"),_=w&&w.value;_||(r=function(){var e,n;for(b&&(e=j.domain)&&e.exit();o;){n=o.fn,o=o.next;try{n()}catch(e){throw o?a():i=void 0,e}}i=void 0,e&&e.enter()},h||b||g||!y||!x?!m&&k&&k.resolve?((u=k.resolve(void 0)).constructor=k,l=d(u.then,u),a=function(){l(r)}):b?a=function(){j.nextTick(r)}:(v=d(v,p),a=function(){v(r)}):(s=!0,c=x.createTextNode(""),new y(r).observe(c,{characterData:!0}),a=function(){c.data=s=!s})),e.exports=_||function(e){var n={fn:e,next:void 0};i&&(i.next=n),o||(o=n,a()),i=n}},function(e,n,t){var r=t(27),o=t(0);e.exports=/ipad|iphone|ipod/i.test(r)&&void 0!==o.Pebble},function(e,n,t){var r=t(27);e.exports=/web0s(?!.*chrome)/i.test(r)},function(e,n,t){var r=t(0);e.exports=function(e,n){var t=r.console;t&&t.error&&(1==arguments.length?t.error(e):t.error(e,n))}},function(e,n){e.exports=function(e){try{return{error:!1,value:e()}}catch(e){return{error:!0,value:e}}}},function(e,n){var t=function(){this.head=null,this.tail=null};t.prototype={add:function(e){var n={item:e,next:null};this.head?this.tail.next=n:this.head=n,this.tail=n},get:function(){var e=this.head;if(e)return this.head=e.next,this.tail===e&&(this.tail=null),e.item}},e.exports=t},function(e,n){e.exports="object"==typeof window},function(e,n,t){var r=t(1),o=t(244);r({target:"Object",stat:!0,forced:Object.assign!==o},{assign:o})},function(e,n,t){"use strict";var r=t(8),o=t(2),i=t(10),a=t(3),s=t(82),c=t(117),u=t(115),l=t(15),p=t(60),d=Object.assign,f=Object.defineProperty,v=o([].concat);e.exports=!d||a((function(){if(r&&1!==d({b:1},d(f({},"a",{enumerable:!0,get:function(){f(this,"b",{value:3,enumerable:!1})}}),{b:2})).b)return!0;var e={},n={},t=Symbol();return e[t]=7,"abcdefghijklmnopqrst".split("").forEach((function(e){n[e]=e})),7!=d({},e)[t]||"abcdefghijklmnopqrst"!=s(d({},n)).join("")}))?function(e,n){for(var t=l(e),o=arguments.length,a=1,d=c.f,f=u.f;o>a;)for(var h,m=p(arguments[a++]),g=d?v(s(m),d(m)):s(m),b=g.length,y=0;b>y;)h=g[y++],r&&!i(f,m,h)||(t[h]=m[h]);return t}:d},function(e,n,t){"use strict";var r=t(1),o=t(31),i=t(158),a=t(3),s=t(19),c=t(5),u=t(120),l=t(165),p=t(14);if(r({target:"Promise",proto:!0,real:!0,forced:!!i&&a((function(){i.prototype.finally.call({then:function(){}},(function(){}))}))},{finally:function(e){var n=u(this,s("Promise")),t=c(e);return this.then(t?function(t){return l(n,e()).then((function(){return t}))}:e,t?function(t){return l(n,e()).then((function(){throw t}))}:e)}}),!o&&c(i)){var d=s("Promise").prototype.finally;i.prototype.finally!==d&&p(i.prototype,"finally",d,{unsafe:!0})}},function(e,n,t){"use strict";var r=t(119),o=t(72);e.exports=r?{}.toString:function(){return"[object "+o(this)+"]"}},function(e,n,t){var r=t(0),o=t(58),i=t(86),a=t(9),s=t(6)("species"),c=r.Array;e.exports=function(e){var n;return o(e)&&(n=e.constructor,(i(n)&&(n===c||o(n.prototype))||a(n)&&null===(n=n[s]))&&(n=void 0)),void 0===n?c:n}},function(e,n,t){"use strict";var r=t(1),o=t(249).left,i=t(44),a=t(48),s=t(87);r({target:"Array",proto:!0,forced:!i("reduce")||!s&&a>79&&a<83},{reduce:function(e){var n=arguments.length;return o(this,e,n,n>1?arguments[1]:void 0)}})},function(e,n,t){var r=t(0),o=t(32),i=t(15),a=t(60),s=t(23),c=r.TypeError,u=function(e){return function(n,t,r,u){o(t);var l=i(n),p=a(l),d=s(l),f=e?d-1:0,v=e?-1:1;if(r<2)for(;;){if(f in p){u=p[f],f+=v;break}if(f+=v,e?f<0:d<=f)throw c("Reduce of empty array with no initial value")}for(;e?f>=0:d>f;f+=v)f in p&&(u=t(u,p[f],f,l));return u}};e.exports={left:u(!1),right:u(!0)}},function(e,n,t){var r=t(1),o=t(176),i=t(3),a=t(9),s=t(251).onFreeze,c=Object.freeze;r({target:"Object",stat:!0,forced:i((function(){c(1)})),sham:!o},{freeze:function(e){return c&&a(e)?c(s(e)):e}})},function(e,n,t){var r=t(1),o=t(2),i=t(61),a=t(9),s=t(11),c=t(12).f,u=t(56),l=t(177),p=t(252),d=t(77),f=t(176),v=!1,h=d("meta"),m=0,g=function(e){c(e,h,{value:{objectID:"O"+m++,weakData:{}}})},b=e.exports={enable:function(){b.enable=function(){},v=!0;var e=u.f,n=o([].splice),t={};t[h]=1,e(t).length&&(u.f=function(t){for(var r=e(t),o=0,i=r.length;o<i;o++)if(r[o]===h){n(r,o,1);break}return r},r({target:"Object",stat:!0,forced:!0},{getOwnPropertyNames:l.f}))},fastKey:function(e,n){if(!a(e))return"symbol"==typeof e?e:("string"==typeof e?"S":"P")+e;if(!s(e,h)){if(!p(e))return"F";if(!n)return"E";g(e)}return e[h].objectID},getWeakData:function(e,n){if(!s(e,h)){if(!p(e))return!0;if(!n)return!1;g(e)}return e[h].weakData},onFreeze:function(e){return f&&v&&p(e)&&!s(e,h)&&g(e),e}};i[h]=!0},function(e,n,t){var r=t(3),o=t(9),i=t(25),a=t(253),s=Object.isExtensible,c=r((function(){s(1)}));e.exports=c||a?function(e){return!!o(e)&&((!a||"ArrayBuffer"!=i(e))&&(!s||s(e)))}:s},function(e,n,t){var r=t(3);e.exports=r((function(){if("function"==typeof ArrayBuffer){var e=new ArrayBuffer(8);Object.isExtensible(e)&&Object.defineProperty(e,"a",{value:8})}}))},function(e,n,t){var r=t(0);e.exports=r},function(e,n,t){"use strict";var r=t(0),o=t(53),i=t(10),a=t(15),s=t(256),c=t(159),u=t(86),l=t(23),p=t(65),d=t(140),f=t(104),v=r.Array;e.exports=function(e){var n=a(e),t=u(this),r=arguments.length,h=r>1?arguments[1]:void 0,m=void 0!==h;m&&(h=o(h,r>2?arguments[2]:void 0));var g,b,y,x,j,k,w=f(n),_=0;if(!w||this==v&&c(w))for(g=l(n),b=t?new this(g):v(g);g>_;_++)k=m?h(n[_],_):n[_],p(b,_,k);else for(j=(x=d(n,w)).next,b=t?new this:[];!(y=i(j,x)).done;_++)k=m?s(x,h,[y.value,_],!0):y.value,p(b,_,k);return b.length=_,b}},function(e,n,t){var r=t(7),o=t(160);e.exports=function(e,n,t,i){try{return i?n(r(t)[0],t[1]):n(t)}catch(n){o(e,"throw",n)}}},function(e,n,t){var r=t(2),o=t(15),i=Math.floor,a=r("".charAt),s=r("".replace),c=r("".slice),u=/\$([$&'`]|\d{1,2}|<[^>]*>)/g,l=/\$([$&'`]|\d{1,2})/g;e.exports=function(e,n,t,r,p,d){var f=t+e.length,v=r.length,h=l;return void 0!==p&&(p=o(p),h=u),s(d,h,(function(o,s){var u;switch(a(s,0)){case"$":return"$";case"&":return e;case"`":return c(n,0,t);case"'":return c(n,f);case"<":u=p[c(s,1,-1)];break;default:var l=+s;if(0===l)return o;if(l>v){var d=i(l/10);return 0===d?o:d<=v?void 0===r[d-1]?a(s,1):r[d-1]+a(s,1):o}u=r[l-1]}return void 0===u?"":u}))}},function(e,n,t){var r=t(183),o=t(259);e.exports=function e(n,t,i,a,s){var c=-1,u=n.length;for(i||(i=o),s||(s=[]);++c<u;){var l=n[c];t>0&&i(l)?t>1?e(l,t-1,i,a,s):r(s,l):a||(s[s.length]=l)}return s}},function(e,n,t){var r=t(67),o=t(124),i=t(26),a=r?r.isConcatSpreadable:void 0;e.exports=function(e){return i(e)||o(e)||!!(a&&e&&e[a])}},function(e,n,t){var r=t(59),o=t(46);e.exports=function(e){return o(e)&&"[object Arguments]"==r(e)}},function(e,n,t){var r=t(67),o=Object.prototype,i=o.hasOwnProperty,a=o.toString,s=r?r.toStringTag:void 0;e.exports=function(e){var n=i.call(e,s),t=e[s];try{e[s]=void 0;var r=!0}catch(e){}var o=a.call(e);return r&&(n?e[s]=t:delete e[s]),o}},function(e,n){var t=Object.prototype.toString;e.exports=function(e){return t.call(e)}},function(e,n,t){var r=t(264),o=t(320),i=t(132),a=t(26),s=t(331);e.exports=function(e){return"function"==typeof e?e:null==e?i:"object"==typeof e?a(e)?o(e[0],e[1]):r(e):s(e)}},function(e,n,t){var r=t(265),o=t(319),i=t(200);e.exports=function(e){var n=o(e);return 1==n.length&&n[0][2]?i(n[0][0],n[0][1]):function(t){return t===e||r(t,e,n)}}},function(e,n,t){var r=t(185),o=t(189);e.exports=function(e,n,t,i){var a=t.length,s=a,c=!i;if(null==e)return!s;for(e=Object(e);a--;){var u=t[a];if(c&&u[2]?u[1]!==e[u[0]]:!(u[0]in e))return!1}for(;++a<s;){var l=(u=t[a])[0],p=e[l],d=u[1];if(c&&u[2]){if(void 0===p&&!(l in e))return!1}else{var f=new r;if(i)var v=i(p,d,l,e,n,f);if(!(void 0===v?o(d,p,3,i,f):v))return!1}}return!0}},function(e,n){e.exports=function(){this.__data__=[],this.size=0}},function(e,n,t){var r=t(93),o=Array.prototype.splice;e.exports=function(e){var n=this.__data__,t=r(n,e);return!(t<0)&&(t==n.length-1?n.pop():o.call(n,t,1),--this.size,!0)}},function(e,n,t){var r=t(93);e.exports=function(e){var n=this.__data__,t=r(n,e);return t<0?void 0:n[t][1]}},function(e,n,t){var r=t(93);e.exports=function(e){return r(this.__data__,e)>-1}},function(e,n,t){var r=t(93);e.exports=function(e,n){var t=this.__data__,o=r(t,e);return o<0?(++this.size,t.push([e,n])):t[o][1]=n,this}},function(e,n,t){var r=t(92);e.exports=function(){this.__data__=new r,this.size=0}},function(e,n){e.exports=function(e){var n=this.__data__,t=n.delete(e);return this.size=n.size,t}},function(e,n){e.exports=function(e){return this.__data__.get(e)}},function(e,n){e.exports=function(e){return this.__data__.has(e)}},function(e,n,t){var r=t(92),o=t(125),i=t(127);e.exports=function(e,n){var t=this.__data__;if(t instanceof r){var a=t.__data__;if(!o||a.length<199)return a.push([e,n]),this.size=++t.size,this;t=this.__data__=new i(a)}return t.set(e,n),this.size=t.size,this}},function(e,n,t){var r=t(187),o=t(277),i=t(126),a=t(188),s=/^\[object .+?Constructor\]$/,c=Function.prototype,u=Object.prototype,l=c.toString,p=u.hasOwnProperty,d=RegExp("^"+l.call(p).replace(/[\\^$.*+?()[\]{}|]/g,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$");e.exports=function(e){return!(!i(e)||o(e))&&(r(e)?d:s).test(a(e))}},function(e,n,t){var r,o=t(278),i=(r=/[^.]+$/.exec(o&&o.keys&&o.keys.IE_PROTO||""))?"Symbol(src)_1."+r:"";e.exports=function(e){return!!i&&i in e}},function(e,n,t){var r=t(30)["__core-js_shared__"];e.exports=r},function(e,n){e.exports=function(e,n){return null==e?void 0:e[n]}},function(e,n,t){var r=t(281),o=t(92),i=t(125);e.exports=function(){this.size=0,this.__data__={hash:new r,map:new(i||o),string:new r}}},function(e,n,t){var r=t(282),o=t(283),i=t(284),a=t(285),s=t(286);function c(e){var n=-1,t=null==e?0:e.length;for(this.clear();++n<t;){var r=e[n];this.set(r[0],r[1])}}c.prototype.clear=r,c.prototype.delete=o,c.prototype.get=i,c.prototype.has=a,c.prototype.set=s,e.exports=c},function(e,n,t){var r=t(94);e.exports=function(){this.__data__=r?r(null):{},this.size=0}},function(e,n){e.exports=function(e){var n=this.has(e)&&delete this.__data__[e];return this.size-=n?1:0,n}},function(e,n,t){var r=t(94),o=Object.prototype.hasOwnProperty;e.exports=function(e){var n=this.__data__;if(r){var t=n[e];return"__lodash_hash_undefined__"===t?void 0:t}return o.call(n,e)?n[e]:void 0}},function(e,n,t){var r=t(94),o=Object.prototype.hasOwnProperty;e.exports=function(e){var n=this.__data__;return r?void 0!==n[e]:o.call(n,e)}},function(e,n,t){var r=t(94);e.exports=function(e,n){var t=this.__data__;return this.size+=this.has(e)?0:1,t[e]=r&&void 0===n?"__lodash_hash_undefined__":n,this}},function(e,n,t){var r=t(95);e.exports=function(e){var n=r(this,e).delete(e);return this.size-=n?1:0,n}},function(e,n){e.exports=function(e){var n=typeof e;return"string"==n||"number"==n||"symbol"==n||"boolean"==n?"__proto__"!==e:null===e}},function(e,n,t){var r=t(95);e.exports=function(e){return r(this,e).get(e)}},function(e,n,t){var r=t(95);e.exports=function(e){return r(this,e).has(e)}},function(e,n,t){var r=t(95);e.exports=function(e,n){var t=r(this,e),o=t.size;return t.set(e,n),this.size+=t.size==o?0:1,this}},function(e,n,t){var r=t(185),o=t(190),i=t(296),a=t(299),s=t(315),c=t(26),u=t(194),l=t(196),p="[object Object]",d=Object.prototype.hasOwnProperty;e.exports=function(e,n,t,f,v,h){var m=c(e),g=c(n),b=m?"[object Array]":s(e),y=g?"[object Array]":s(n),x=(b="[object Arguments]"==b?p:b)==p,j=(y="[object Arguments]"==y?p:y)==p,k=b==y;if(k&&u(e)){if(!u(n))return!1;m=!0,x=!1}if(k&&!x)return h||(h=new r),m||l(e)?o(e,n,t,f,v,h):i(e,n,b,t,f,v,h);if(!(1&t)){var w=x&&d.call(e,"__wrapped__"),_=j&&d.call(n,"__wrapped__");if(w||_){var S=w?e.value():e,E=_?n.value():n;return h||(h=new r),v(S,E,t,f,h)}}return!!k&&(h||(h=new r),a(e,n,t,f,v,h))}},function(e,n){e.exports=function(e){return this.__data__.set(e,"__lodash_hash_undefined__"),this}},function(e,n){e.exports=function(e){return this.__data__.has(e)}},function(e,n){e.exports=function(e,n){for(var t=-1,r=null==e?0:e.length;++t<r;)if(n(e[t],t,e))return!0;return!1}},function(e,n,t){var r=t(67),o=t(297),i=t(186),a=t(190),s=t(298),c=t(128),u=r?r.prototype:void 0,l=u?u.valueOf:void 0;e.exports=function(e,n,t,r,u,p,d){switch(t){case"[object DataView]":if(e.byteLength!=n.byteLength||e.byteOffset!=n.byteOffset)return!1;e=e.buffer,n=n.buffer;case"[object ArrayBuffer]":return!(e.byteLength!=n.byteLength||!p(new o(e),new o(n)));case"[object Boolean]":case"[object Date]":case"[object Number]":return i(+e,+n);case"[object Error]":return e.name==n.name&&e.message==n.message;case"[object RegExp]":case"[object String]":return e==n+"";case"[object Map]":var f=s;case"[object Set]":var v=1&r;if(f||(f=c),e.size!=n.size&&!v)return!1;var h=d.get(e);if(h)return h==n;r|=2,d.set(e,n);var m=a(f(e),f(n),r,u,p,d);return d.delete(e),m;case"[object Symbol]":if(l)return l.call(e)==l.call(n)}return!1}},function(e,n,t){var r=t(30).Uint8Array;e.exports=r},function(e,n){e.exports=function(e){var n=-1,t=Array(e.size);return e.forEach((function(e,r){t[++n]=[r,e]})),t}},function(e,n,t){var r=t(300),o=Object.prototype.hasOwnProperty;e.exports=function(e,n,t,i,a,s){var c=1&t,u=r(e),l=u.length;if(l!=r(n).length&&!c)return!1;for(var p=l;p--;){var d=u[p];if(!(c?d in n:o.call(n,d)))return!1}var f=s.get(e),v=s.get(n);if(f&&v)return f==n&&v==e;var h=!0;s.set(e,n),s.set(n,e);for(var m=c;++p<l;){var g=e[d=u[p]],b=n[d];if(i)var y=c?i(b,g,d,n,e,s):i(g,b,d,e,n,s);if(!(void 0===y?g===b||a(g,b,t,i,s):y)){h=!1;break}m||(m="constructor"==d)}if(h&&!m){var x=e.constructor,j=n.constructor;x==j||!("constructor"in e)||!("constructor"in n)||"function"==typeof x&&x instanceof x&&"function"==typeof j&&j instanceof j||(h=!1)}return s.delete(e),s.delete(n),h}},function(e,n,t){var r=t(301),o=t(302),i=t(193);e.exports=function(e){return r(e,i,o)}},function(e,n,t){var r=t(183),o=t(26);e.exports=function(e,n,t){var i=n(e);return o(e)?i:r(i,t(e))}},function(e,n,t){var r=t(303),o=t(304),i=Object.prototype.propertyIsEnumerable,a=Object.getOwnPropertySymbols,s=a?function(e){return null==e?[]:(e=Object(e),r(a(e),(function(n){return i.call(e,n)})))}:o;e.exports=s},function(e,n){e.exports=function(e,n){for(var t=-1,r=null==e?0:e.length,o=0,i=[];++t<r;){var a=e[t];n(a,t,e)&&(i[o++]=a)}return i}},function(e,n){e.exports=function(){return[]}},function(e,n,t){var r=t(306),o=t(124),i=t(26),a=t(194),s=t(195),c=t(196),u=Object.prototype.hasOwnProperty;e.exports=function(e,n){var t=i(e),l=!t&&o(e),p=!t&&!l&&a(e),d=!t&&!l&&!p&&c(e),f=t||l||p||d,v=f?r(e.length,String):[],h=v.length;for(var m in e)!n&&!u.call(e,m)||f&&("length"==m||p&&("offset"==m||"parent"==m)||d&&("buffer"==m||"byteLength"==m||"byteOffset"==m)||s(m,h))||v.push(m);return v}},function(e,n){e.exports=function(e,n){for(var t=-1,r=Array(e);++t<e;)r[t]=n(t);return r}},function(e,n){e.exports=function(){return!1}},function(e,n,t){var r=t(59),o=t(129),i=t(46),a={};a["[object Float32Array]"]=a["[object Float64Array]"]=a["[object Int8Array]"]=a["[object Int16Array]"]=a["[object Int32Array]"]=a["[object Uint8Array]"]=a["[object Uint8ClampedArray]"]=a["[object Uint16Array]"]=a["[object Uint32Array]"]=!0,a["[object Arguments]"]=a["[object Array]"]=a["[object ArrayBuffer]"]=a["[object Boolean]"]=a["[object DataView]"]=a["[object Date]"]=a["[object Error]"]=a["[object Function]"]=a["[object Map]"]=a["[object Number]"]=a["[object Object]"]=a["[object RegExp]"]=a["[object Set]"]=a["[object String]"]=a["[object WeakMap]"]=!1,e.exports=function(e){return i(e)&&o(e.length)&&!!a[r(e)]}},function(e,n){e.exports=function(e){return function(n){return e(n)}}},function(e,n,t){(function(e){var r=t(184),o=n&&!n.nodeType&&n,i=o&&"object"==typeof e&&e&&!e.nodeType&&e,a=i&&i.exports===o&&r.process,s=function(){try{var e=i&&i.require&&i.require("util").types;return e||a&&a.binding&&a.binding("util")}catch(e){}}();e.exports=s}).call(this,t(144)(e))},function(e,n,t){var r=t(312),o=t(313),i=Object.prototype.hasOwnProperty;e.exports=function(e){if(!r(e))return o(e);var n=[];for(var t in Object(e))i.call(e,t)&&"constructor"!=t&&n.push(t);return n}},function(e,n){var t=Object.prototype;e.exports=function(e){var n=e&&e.constructor;return e===("function"==typeof n&&n.prototype||t)}},function(e,n,t){var r=t(314)(Object.keys,Object);e.exports=r},function(e,n){e.exports=function(e,n){return function(t){return e(n(t))}}},function(e,n,t){var r=t(316),o=t(125),i=t(317),a=t(198),s=t(318),c=t(59),u=t(188),l=u(r),p=u(o),d=u(i),f=u(a),v=u(s),h=c;(r&&"[object DataView]"!=h(new r(new ArrayBuffer(1)))||o&&"[object Map]"!=h(new o)||i&&"[object Promise]"!=h(i.resolve())||a&&"[object Set]"!=h(new a)||s&&"[object WeakMap]"!=h(new s))&&(h=function(e){var n=c(e),t="[object Object]"==n?e.constructor:void 0,r=t?u(t):"";if(r)switch(r){case l:return"[object DataView]";case p:return"[object Map]";case d:return"[object Promise]";case f:return"[object Set]";case v:return"[object WeakMap]"}return n}),e.exports=h},function(e,n,t){var r=t(39)(t(30),"DataView");e.exports=r},function(e,n,t){var r=t(39)(t(30),"Promise");e.exports=r},function(e,n,t){var r=t(39)(t(30),"WeakMap");e.exports=r},function(e,n,t){var r=t(199),o=t(193);e.exports=function(e){for(var n=o(e),t=n.length;t--;){var i=n[t],a=e[i];n[t]=[i,a,r(a)]}return n}},function(e,n,t){var r=t(189),o=t(321),i=t(328),a=t(130),s=t(199),c=t(200),u=t(96);e.exports=function(e,n){return a(e)&&s(n)?c(u(e),n):function(t){var a=o(t,e);return void 0===a&&a===n?i(t,e):r(n,a,3)}}},function(e,n,t){var r=t(201);e.exports=function(e,n,t){var o=null==e?void 0:r(e,n);return void 0===o?t:o}},function(e,n,t){var r=t(323),o=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,i=/\\(\\)?/g,a=r((function(e){var n=[];return 46===e.charCodeAt(0)&&n.push(""),e.replace(o,(function(e,t,r,o){n.push(r?o.replace(i,"$1"):t||e)})),n}));e.exports=a},function(e,n,t){var r=t(324);e.exports=function(e){var n=r(e,(function(e){return 500===t.size&&t.clear(),e})),t=n.cache;return n}},function(e,n,t){var r=t(127);function o(e,n){if("function"!=typeof e||null!=n&&"function"!=typeof n)throw new TypeError("Expected a function");var t=function(){var r=arguments,o=n?n.apply(this,r):r[0],i=t.cache;if(i.has(o))return i.get(o);var a=e.apply(this,r);return t.cache=i.set(o,a)||i,a};return t.cache=new(o.Cache||r),t}o.Cache=r,e.exports=o},function(e,n,t){var r=t(326);e.exports=function(e){return null==e?"":r(e)}},function(e,n,t){var r=t(67),o=t(327),i=t(26),a=t(131),s=r?r.prototype:void 0,c=s?s.toString:void 0;e.exports=function e(n){if("string"==typeof n)return n;if(i(n))return o(n,e)+"";if(a(n))return c?c.call(n):"";var t=n+"";return"0"==t&&1/n==-1/0?"-0":t}},function(e,n){e.exports=function(e,n){for(var t=-1,r=null==e?0:e.length,o=Array(r);++t<r;)o[t]=n(e[t],t,e);return o}},function(e,n,t){var r=t(329),o=t(330);e.exports=function(e,n){return null!=e&&o(e,n,r)}},function(e,n){e.exports=function(e,n){return null!=e&&n in Object(e)}},function(e,n,t){var r=t(202),o=t(124),i=t(26),a=t(195),s=t(129),c=t(96);e.exports=function(e,n,t){for(var u=-1,l=(n=r(n,e)).length,p=!1;++u<l;){var d=c(n[u]);if(!(p=null!=e&&t(e,d)))break;e=e[d]}return p||++u!=l?p:!!(l=null==e?0:e.length)&&s(l)&&a(d,l)&&(i(e)||o(e))}},function(e,n,t){var r=t(332),o=t(333),i=t(130),a=t(96);e.exports=function(e){return i(e)?r(a(e)):o(e)}},function(e,n){e.exports=function(e){return function(n){return null==n?void 0:n[e]}}},function(e,n,t){var r=t(201);e.exports=function(e){return function(n){return r(n,e)}}},function(e,n,t){var r=t(132),o=t(335),i=t(337);e.exports=function(e,n){return i(o(e,n,r),e+"")}},function(e,n,t){var r=t(336),o=Math.max;e.exports=function(e,n,t){return n=o(void 0===n?e.length-1:n,0),function(){for(var i=arguments,a=-1,s=o(i.length-n,0),c=Array(s);++a<s;)c[a]=i[n+a];a=-1;for(var u=Array(n+1);++a<n;)u[a]=i[a];return u[n]=t(c),r(e,this,u)}}},function(e,n){e.exports=function(e,n,t){switch(t.length){case 0:return e.call(n);case 1:return e.call(n,t[0]);case 2:return e.call(n,t[0],t[1]);case 3:return e.call(n,t[0],t[1],t[2])}return e.apply(n,t)}},function(e,n,t){var r=t(338),o=t(341)(r);e.exports=o},function(e,n,t){var r=t(339),o=t(340),i=t(132),a=o?function(e,n){return o(e,"toString",{configurable:!0,enumerable:!1,value:r(n),writable:!0})}:i;e.exports=a},function(e,n){e.exports=function(e){return function(){return e}}},function(e,n,t){var r=t(39),o=function(){try{var e=r(Object,"defineProperty");return e({},"",{}),e}catch(e){}}();e.exports=o},function(e,n){var t=Date.now;e.exports=function(e){var n=0,r=0;return function(){var o=t(),i=16-(o-r);if(r=o,i>0){if(++n>=800)return arguments[0]}else n=0;return e.apply(void 0,arguments)}}},function(e,n,t){var r=t(191),o=t(343),i=t(348),a=t(192),s=t(349),c=t(128);e.exports=function(e,n,t){var u=-1,l=o,p=e.length,d=!0,f=[],v=f;if(t)d=!1,l=i;else if(p>=200){var h=n?null:s(e);if(h)return c(h);d=!1,l=a,v=new r}else v=n?[]:f;e:for(;++u<p;){var m=e[u],g=n?n(m):m;if(m=t||0!==m?m:0,d&&g==g){for(var b=v.length;b--;)if(v[b]===g)continue e;n&&v.push(g),f.push(m)}else l(v,g,t)||(v!==f&&v.push(g),f.push(m))}return f}},function(e,n,t){var r=t(344);e.exports=function(e,n){return!!(null==e?0:e.length)&&r(e,n,0)>-1}},function(e,n,t){var r=t(345),o=t(346),i=t(347);e.exports=function(e,n,t){return n==n?i(e,n,t):r(e,o,t)}},function(e,n){e.exports=function(e,n,t,r){for(var o=e.length,i=t+(r?1:-1);r?i--:++i<o;)if(n(e[i],i,e))return i;return-1}},function(e,n){e.exports=function(e){return e!=e}},function(e,n){e.exports=function(e,n,t){for(var r=t-1,o=e.length;++r<o;)if(e[r]===n)return r;return-1}},function(e,n){e.exports=function(e,n,t){for(var r=-1,o=null==e?0:e.length;++r<o;)if(t(n,e[r]))return!0;return!1}},function(e,n,t){var r=t(198),o=t(350),i=t(128),a=r&&1/i(new r([,-0]))[1]==1/0?function(e){return new r(e)}:o;e.exports=a},function(e,n){e.exports=function(){}},function(e,n,t){var r=t(197),o=t(46);e.exports=function(e){return o(e)&&r(e)}},function(e,n,t){},function(e,n,t){},function(e,n,t){var r=t(63).PROPER,o=t(3),i=t(147);e.exports=function(e){return o((function(){return!!i[e]()||"​᠎"!=="​᠎"[e]()||r&&i[e].name!==e}))}},function(e,n,t){t(1)({target:"Function",proto:!0},{bind:t(203)})},function(e,n,t){var r=t(2);e.exports=r(1..valueOf)},function(e,n,t){var r=t(2),o=t(49),i=t(13),a=t(358),s=t(17),c=r(a),u=r("".slice),l=Math.ceil,p=function(e){return function(n,t,r){var a,p,d=i(s(n)),f=o(t),v=d.length,h=void 0===r?" ":i(r);return f<=v||""==h?d:((p=c(h,l((a=f-v)/h.length))).length>a&&(p=u(p,0,a)),e?d+p:p+d)}};e.exports={start:p(!1),end:p(!0)}},function(e,n,t){"use strict";var r=t(0),o=t(52),i=t(13),a=t(17),s=r.RangeError;e.exports=function(e){var n=i(a(this)),t="",r=o(e);if(r<0||r==1/0)throw s("Wrong number of repetitions");for(;r>0;(r>>>=1)&&(n+=n))1&r&&(t+=n);return t}},function(e,n,t){var r=t(27);e.exports=/Version\/10(?:\.\d+){1,2}(?: [\w./]+)?(?: Mobile\/\w+)? Safari\//.test(r)},function(e,n,t){"use strict";t(205)},function(e,n,t){"use strict";t(206)},function(e,n,t){"use strict";var r=t(1),o=t(2),i=t(32),a=t(15),s=t(23),c=t(13),u=t(3),l=t(228),p=t(44),d=t(363),f=t(364),v=t(48),h=t(365),m=[],g=o(m.sort),b=o(m.push),y=u((function(){m.sort(void 0)})),x=u((function(){m.sort(null)})),j=p("sort"),k=!u((function(){if(v)return v<70;if(!(d&&d>3)){if(f)return!0;if(h)return h<603;var e,n,t,r,o="";for(e=65;e<76;e++){switch(n=String.fromCharCode(e),e){case 66:case 69:case 70:case 72:t=3;break;case 68:case 71:t=4;break;default:t=2}for(r=0;r<47;r++)m.push({k:n+r,v:t})}for(m.sort((function(e,n){return n.v-e.v})),r=0;r<m.length;r++)n=m[r].k.charAt(0),o.charAt(o.length-1)!==n&&(o+=n);return"DGBEFHACIJK"!==o}}));r({target:"Array",proto:!0,forced:y||!x||!j||!k},{sort:function(e){void 0!==e&&i(e);var n=a(this);if(k)return void 0===e?g(n):g(n,e);var t,r,o=[],u=s(n);for(r=0;r<u;r++)r in n&&b(o,n[r]);for(l(o,function(e){return function(n,t){return void 0===t?-1:void 0===n?1:void 0!==e?+e(n,t)||0:c(n)>c(t)?1:-1}}(e)),t=o.length,r=0;r<t;)n[r]=o[r++];for(;r<u;)delete n[r++];return n}})},function(e,n,t){var r=t(27).match(/firefox\/(\d+)/i);e.exports=!!r&&+r[1]},function(e,n,t){var r=t(27);e.exports=/MSIE|Trident/.test(r)},function(e,n,t){var r=t(27).match(/AppleWebKit\/(\d+)\./);e.exports=!!r&&+r[1]},function(e,n,t){},function(e,n,t){},function(e,n,t){var r=t(1),o=t(3),i=t(18),a=t(33).f,s=t(8),c=o((function(){a(1)}));r({target:"Object",stat:!0,forced:!s||c,sham:!s},{getOwnPropertyDescriptor:function(e,n){return a(i(e),n)}})},function(e,n,t){var r=t(1),o=t(8);r({target:"Object",stat:!0,forced:!o,sham:!o},{defineProperties:t(149)})},function(e,n,t){t(1)({target:"Reflect",stat:!0},{ownKeys:t(116)})},function(e,n){},function(e,n){function t(e,n){for(var t=0,r=e.length-1;r>=0;r--){var o=e[r];"."===o?e.splice(r,1):".."===o?(e.splice(r,1),t++):t&&(e.splice(r,1),t--)}if(n)for(;t--;t)e.unshift("..");return e}function r(e,n){if(e.filter)return e.filter(n);for(var t=[],r=0;r<e.length;r++)n(e[r],r,e)&&t.push(e[r]);return t}n.resolve=function(){for(var e="",n=!1,o=arguments.length-1;o>=-1&&!n;o--){var i=o>=0?arguments[o]:process.cwd();if("string"!=typeof i)throw new TypeError("Arguments to path.resolve must be strings");i&&(e=i+"/"+e,n="/"===i.charAt(0))}return(n?"/":"")+(e=t(r(e.split("/"),(function(e){return!!e})),!n).join("/"))||"."},n.normalize=function(e){var i=n.isAbsolute(e),a="/"===o(e,-1);return(e=t(r(e.split("/"),(function(e){return!!e})),!i).join("/"))||i||(e="."),e&&a&&(e+="/"),(i?"/":"")+e},n.isAbsolute=function(e){return"/"===e.charAt(0)},n.join=function(){var e=Array.prototype.slice.call(arguments,0);return n.normalize(r(e,(function(e,n){if("string"!=typeof e)throw new TypeError("Arguments to path.join must be strings");return e})).join("/"))},n.relative=function(e,t){function r(e){for(var n=0;n<e.length&&""===e[n];n++);for(var t=e.length-1;t>=0&&""===e[t];t--);return n>t?[]:e.slice(n,t-n+1)}e=n.resolve(e).substr(1),t=n.resolve(t).substr(1);for(var o=r(e.split("/")),i=r(t.split("/")),a=Math.min(o.length,i.length),s=a,c=0;c<a;c++)if(o[c]!==i[c]){s=c;break}var u=[];for(c=s;c<o.length;c++)u.push("..");return(u=u.concat(i.slice(s))).join("/")},n.sep="/",n.delimiter=":",n.dirname=function(e){if("string"!=typeof e&&(e+=""),0===e.length)return".";for(var n=e.charCodeAt(0),t=47===n,r=-1,o=!0,i=e.length-1;i>=1;--i)if(47===(n=e.charCodeAt(i))){if(!o){r=i;break}}else o=!1;return-1===r?t?"/":".":t&&1===r?"/":e.slice(0,r)},n.basename=function(e,n){var t=function(e){"string"!=typeof e&&(e+="");var n,t=0,r=-1,o=!0;for(n=e.length-1;n>=0;--n)if(47===e.charCodeAt(n)){if(!o){t=n+1;break}}else-1===r&&(o=!1,r=n+1);return-1===r?"":e.slice(t,r)}(e);return n&&t.substr(-1*n.length)===n&&(t=t.substr(0,t.length-n.length)),t},n.extname=function(e){"string"!=typeof e&&(e+="");for(var n=-1,t=0,r=-1,o=!0,i=0,a=e.length-1;a>=0;--a){var s=e.charCodeAt(a);if(47!==s)-1===r&&(o=!1,r=a+1),46===s?-1===n?n=a:1!==i&&(i=1):-1!==n&&(i=-1);else if(!o){t=a+1;break}}return-1===n||-1===r||0===i||1===i&&n===r-1&&n===t+1?"":e.slice(n,r)};var o="b"==="ab".substr(-1)?function(e,n,t){return e.substr(n,t)}:function(e,n,t){return n<0&&(n=e.length+n),e.substr(n,t)}},function(e,n,t){"use strict";var r=/[|\\{}()[\]^$+*?.]/g;n.escapeRegExpChars=function(e){return e?String(e).replace(r,"\\$&"):""};var o={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&#34;","'":"&#39;"},i=/[&<>'"]/g;function a(e){return o[e]||e}n.escapeXML=function(e){return null==e?"":String(e).replace(i,a)},n.escapeXML.toString=function(){return Function.prototype.toString.call(this)+';\nvar _ENCODE_HTML_RULES = {\n      "&": "&amp;"\n    , "<": "&lt;"\n    , ">": "&gt;"\n    , \'"\': "&#34;"\n    , "\'": "&#39;"\n    }\n  , _MATCH_HTML = /[&<>\'"]/g;\nfunction encode_char(c) {\n  return _ENCODE_HTML_RULES[c] || c;\n};\n'},n.shallowCopy=function(e,n){for(var t in n=n||{})e[t]=n[t];return e},n.shallowCopyFromList=function(e,n,t){for(var r=0;r<t.length;r++){var o=t[r];void 0!==n[o]&&(e[o]=n[o])}return e},n.cache={_data:{},set:function(e,n){this._data[e]=n},get:function(e){return this._data[e]},remove:function(e){delete this._data[e]},reset:function(){this._data={}}}},function(e){e.exports=JSON.parse('{"name":"ejs","description":"Embedded JavaScript templates","keywords":["template","engine","ejs"],"version":"2.7.4","author":"Matthew Eernisse <mde@fleegix.org> (http://fleegix.org)","license":"Apache-2.0","main":"./lib/ejs.js","repository":{"type":"git","url":"git://github.com/mde/ejs.git"},"bugs":"https://github.com/mde/ejs/issues","homepage":"https://github.com/mde/ejs","dependencies":{},"devDependencies":{"browserify":"^13.1.1","eslint":"^4.14.0","git-directory-deploy":"^1.5.1","jake":"^10.3.1","jsdoc":"^3.4.0","lru-cache":"^4.0.1","mocha":"^5.0.5","uglify-js":"^3.3.16"},"engines":{"node":">=0.10.0"},"scripts":{"test":"mocha","postinstall":"node ./postinstall.js"}}')},function(e,n,t){"use strict";t(209)},function(e,n,t){"use strict";t(210)},function(e,n,t){"use strict";t.r(n);t(139),t(234),t(243),t(245);var r=t(88),o=(t(137),t(40),t(4),t(22),t(24),t(42),t(21),Object.freeze({}));function i(e){return null==e}function a(e){return null!=e}function s(e){return!0===e}function c(e){return"string"==typeof e||"number"==typeof e||"symbol"==typeof e||"boolean"==typeof e}function u(e){return null!==e&&"object"==typeof e}var l=Object.prototype.toString;function p(e){return"[object Object]"===l.call(e)}function d(e){return"[object RegExp]"===l.call(e)}function f(e){var n=parseFloat(String(e));return n>=0&&Math.floor(n)===n&&isFinite(e)}function v(e){return a(e)&&"function"==typeof e.then&&"function"==typeof e.catch}function h(e){return null==e?"":Array.isArray(e)||p(e)&&e.toString===l?JSON.stringify(e,null,2):String(e)}function m(e){var n=parseFloat(e);return isNaN(n)?e:n}function g(e,n){for(var t=Object.create(null),r=e.split(","),o=0;o<r.length;o++)t[r[o]]=!0;return n?function(e){return t[e.toLowerCase()]}:function(e){return t[e]}}g("slot,component",!0);var b=g("key,ref,slot,slot-scope,is");function y(e,n){if(e.length){var t=e.indexOf(n);if(t>-1)return e.splice(t,1)}}var x=Object.prototype.hasOwnProperty;function j(e,n){return x.call(e,n)}function k(e){var n=Object.create(null);return function(t){return n[t]||(n[t]=e(t))}}var w=/-(\w)/g,_=k((function(e){return e.replace(w,(function(e,n){return n?n.toUpperCase():""}))})),S=k((function(e){return e.charAt(0).toUpperCase()+e.slice(1)})),E=/\B([A-Z])/g,C=k((function(e){return e.replace(E,"-$1").toLowerCase()}));var I=Function.prototype.bind?function(e,n){return e.bind(n)}:function(e,n){function t(t){var r=arguments.length;return r?r>1?e.apply(n,arguments):e.call(n,t):e.call(n)}return t._length=e.length,t};function O(e,n){n=n||0;for(var t=e.length-n,r=new Array(t);t--;)r[t]=e[t+n];return r}function A(e,n){for(var t in n)e[t]=n[t];return e}function T(e){for(var n={},t=0;t<e.length;t++)e[t]&&A(n,e[t]);return n}function P(e,n,t){}var $=function(e,n,t){return!1},L=function(e){return e};function R(e,n){if(e===n)return!0;var t=u(e),r=u(n);if(!t||!r)return!t&&!r&&String(e)===String(n);try{var o=Array.isArray(e),i=Array.isArray(n);if(o&&i)return e.length===n.length&&e.every((function(e,t){return R(e,n[t])}));if(e instanceof Date&&n instanceof Date)return e.getTime()===n.getTime();if(o||i)return!1;var a=Object.keys(e),s=Object.keys(n);return a.length===s.length&&a.every((function(t){return R(e[t],n[t])}))}catch(e){return!1}}function z(e,n){for(var t=0;t<e.length;t++)if(R(e[t],n))return t;return-1}function B(e){var n=!1;return function(){n||(n=!0,e.apply(this,arguments))}}var D=["component","directive","filter"],N=["beforeCreate","created","beforeMount","mounted","beforeUpdate","updated","beforeDestroy","destroyed","activated","deactivated","errorCaptured","serverPrefetch"],M={optionMergeStrategies:Object.create(null),silent:!1,productionTip:!1,devtools:!1,performance:!1,errorHandler:null,warnHandler:null,ignoredElements:[],keyCodes:Object.create(null),isReservedTag:$,isReservedAttr:$,isUnknownElement:$,getTagNamespace:P,parsePlatformTagName:L,mustUseProp:$,async:!0,_lifecycleHooks:N},U=/a-zA-Z\u00B7\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u037D\u037F-\u1FFF\u200C-\u200D\u203F-\u2040\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD/;function F(e,n,t,r){Object.defineProperty(e,n,{value:t,enumerable:!!r,writable:!0,configurable:!0})}var V=new RegExp("[^"+U.source+".$_\\d]");var q,H="__proto__"in{},K="undefined"!=typeof window,W="undefined"!=typeof WXEnvironment&&!!WXEnvironment.platform,G=W&&WXEnvironment.platform.toLowerCase(),Z=K&&window.navigator.userAgent.toLowerCase(),J=Z&&/msie|trident/.test(Z),X=Z&&Z.indexOf("msie 9.0")>0,Y=Z&&Z.indexOf("edge/")>0,Q=(Z&&Z.indexOf("android"),Z&&/iphone|ipad|ipod|ios/.test(Z)||"ios"===G),ee=(Z&&/chrome\/\d+/.test(Z),Z&&/phantomjs/.test(Z),Z&&Z.match(/firefox\/(\d+)/)),ne={}.watch,te=!1;if(K)try{var re={};Object.defineProperty(re,"passive",{get:function(){te=!0}}),window.addEventListener("test-passive",null,re)}catch(e){}var oe=function(){return void 0===q&&(q=!K&&!W&&"undefined"!=typeof global&&(global.process&&"server"===global.process.env.VUE_ENV)),q},ie=K&&window.__VUE_DEVTOOLS_GLOBAL_HOOK__;function ae(e){return"function"==typeof e&&/native code/.test(e.toString())}var se,ce="undefined"!=typeof Symbol&&ae(Symbol)&&"undefined"!=typeof Reflect&&ae(Reflect.ownKeys);se="undefined"!=typeof Set&&ae(Set)?Set:function(){function e(){this.set=Object.create(null)}return e.prototype.has=function(e){return!0===this.set[e]},e.prototype.add=function(e){this.set[e]=!0},e.prototype.clear=function(){this.set=Object.create(null)},e}();var ue=P,le=0,pe=function(){this.id=le++,this.subs=[]};pe.prototype.addSub=function(e){this.subs.push(e)},pe.prototype.removeSub=function(e){y(this.subs,e)},pe.prototype.depend=function(){pe.target&&pe.target.addDep(this)},pe.prototype.notify=function(){var e=this.subs.slice();for(var n=0,t=e.length;n<t;n++)e[n].update()},pe.target=null;var de=[];function fe(e){de.push(e),pe.target=e}function ve(){de.pop(),pe.target=de[de.length-1]}var he=function(e,n,t,r,o,i,a,s){this.tag=e,this.data=n,this.children=t,this.text=r,this.elm=o,this.ns=void 0,this.context=i,this.fnContext=void 0,this.fnOptions=void 0,this.fnScopeId=void 0,this.key=n&&n.key,this.componentOptions=a,this.componentInstance=void 0,this.parent=void 0,this.raw=!1,this.isStatic=!1,this.isRootInsert=!0,this.isComment=!1,this.isCloned=!1,this.isOnce=!1,this.asyncFactory=s,this.asyncMeta=void 0,this.isAsyncPlaceholder=!1},me={child:{configurable:!0}};me.child.get=function(){return this.componentInstance},Object.defineProperties(he.prototype,me);var ge=function(e){void 0===e&&(e="");var n=new he;return n.text=e,n.isComment=!0,n};function be(e){return new he(void 0,void 0,void 0,String(e))}function ye(e){var n=new he(e.tag,e.data,e.children&&e.children.slice(),e.text,e.elm,e.context,e.componentOptions,e.asyncFactory);return n.ns=e.ns,n.isStatic=e.isStatic,n.key=e.key,n.isComment=e.isComment,n.fnContext=e.fnContext,n.fnOptions=e.fnOptions,n.fnScopeId=e.fnScopeId,n.asyncMeta=e.asyncMeta,n.isCloned=!0,n}var xe=Array.prototype,je=Object.create(xe);["push","pop","shift","unshift","splice","sort","reverse"].forEach((function(e){var n=xe[e];F(je,e,(function(){for(var t=[],r=arguments.length;r--;)t[r]=arguments[r];var o,i=n.apply(this,t),a=this.__ob__;switch(e){case"push":case"unshift":o=t;break;case"splice":o=t.slice(2)}return o&&a.observeArray(o),a.dep.notify(),i}))}));var ke=Object.getOwnPropertyNames(je),we=!0;function _e(e){we=e}var Se=function(e){this.value=e,this.dep=new pe,this.vmCount=0,F(e,"__ob__",this),Array.isArray(e)?(H?function(e,n){e.__proto__=n}(e,je):function(e,n,t){for(var r=0,o=t.length;r<o;r++){var i=t[r];F(e,i,n[i])}}(e,je,ke),this.observeArray(e)):this.walk(e)};function Ee(e,n){var t;if(u(e)&&!(e instanceof he))return j(e,"__ob__")&&e.__ob__ instanceof Se?t=e.__ob__:we&&!oe()&&(Array.isArray(e)||p(e))&&Object.isExtensible(e)&&!e._isVue&&(t=new Se(e)),n&&t&&t.vmCount++,t}function Ce(e,n,t,r,o){var i=new pe,a=Object.getOwnPropertyDescriptor(e,n);if(!a||!1!==a.configurable){var s=a&&a.get,c=a&&a.set;s&&!c||2!==arguments.length||(t=e[n]);var u=!o&&Ee(t);Object.defineProperty(e,n,{enumerable:!0,configurable:!0,get:function(){var n=s?s.call(e):t;return pe.target&&(i.depend(),u&&(u.dep.depend(),Array.isArray(n)&&Ae(n))),n},set:function(n){var r=s?s.call(e):t;n===r||n!=n&&r!=r||s&&!c||(c?c.call(e,n):t=n,u=!o&&Ee(n),i.notify())}})}}function Ie(e,n,t){if(Array.isArray(e)&&f(n))return e.length=Math.max(e.length,n),e.splice(n,1,t),t;if(n in e&&!(n in Object.prototype))return e[n]=t,t;var r=e.__ob__;return e._isVue||r&&r.vmCount?t:r?(Ce(r.value,n,t),r.dep.notify(),t):(e[n]=t,t)}function Oe(e,n){if(Array.isArray(e)&&f(n))e.splice(n,1);else{var t=e.__ob__;e._isVue||t&&t.vmCount||j(e,n)&&(delete e[n],t&&t.dep.notify())}}function Ae(e){for(var n=void 0,t=0,r=e.length;t<r;t++)(n=e[t])&&n.__ob__&&n.__ob__.dep.depend(),Array.isArray(n)&&Ae(n)}Se.prototype.walk=function(e){for(var n=Object.keys(e),t=0;t<n.length;t++)Ce(e,n[t])},Se.prototype.observeArray=function(e){for(var n=0,t=e.length;n<t;n++)Ee(e[n])};var Te=M.optionMergeStrategies;function Pe(e,n){if(!n)return e;for(var t,r,o,i=ce?Reflect.ownKeys(n):Object.keys(n),a=0;a<i.length;a++)"__ob__"!==(t=i[a])&&(r=e[t],o=n[t],j(e,t)?r!==o&&p(r)&&p(o)&&Pe(r,o):Ie(e,t,o));return e}function $e(e,n,t){return t?function(){var r="function"==typeof n?n.call(t,t):n,o="function"==typeof e?e.call(t,t):e;return r?Pe(r,o):o}:n?e?function(){return Pe("function"==typeof n?n.call(this,this):n,"function"==typeof e?e.call(this,this):e)}:n:e}function Le(e,n){var t=n?e?e.concat(n):Array.isArray(n)?n:[n]:e;return t?function(e){for(var n=[],t=0;t<e.length;t++)-1===n.indexOf(e[t])&&n.push(e[t]);return n}(t):t}function Re(e,n,t,r){var o=Object.create(e||null);return n?A(o,n):o}Te.data=function(e,n,t){return t?$e(e,n,t):n&&"function"!=typeof n?e:$e(e,n)},N.forEach((function(e){Te[e]=Le})),D.forEach((function(e){Te[e+"s"]=Re})),Te.watch=function(e,n,t,r){if(e===ne&&(e=void 0),n===ne&&(n=void 0),!n)return Object.create(e||null);if(!e)return n;var o={};for(var i in A(o,e),n){var a=o[i],s=n[i];a&&!Array.isArray(a)&&(a=[a]),o[i]=a?a.concat(s):Array.isArray(s)?s:[s]}return o},Te.props=Te.methods=Te.inject=Te.computed=function(e,n,t,r){if(!e)return n;var o=Object.create(null);return A(o,e),n&&A(o,n),o},Te.provide=$e;var ze=function(e,n){return void 0===n?e:n};function Be(e,n,t){if("function"==typeof n&&(n=n.options),function(e,n){var t=e.props;if(t){var r,o,i={};if(Array.isArray(t))for(r=t.length;r--;)"string"==typeof(o=t[r])&&(i[_(o)]={type:null});else if(p(t))for(var a in t)o=t[a],i[_(a)]=p(o)?o:{type:o};else 0;e.props=i}}(n),function(e,n){var t=e.inject;if(t){var r=e.inject={};if(Array.isArray(t))for(var o=0;o<t.length;o++)r[t[o]]={from:t[o]};else if(p(t))for(var i in t){var a=t[i];r[i]=p(a)?A({from:i},a):{from:a}}else 0}}(n),function(e){var n=e.directives;if(n)for(var t in n){var r=n[t];"function"==typeof r&&(n[t]={bind:r,update:r})}}(n),!n._base&&(n.extends&&(e=Be(e,n.extends,t)),n.mixins))for(var r=0,o=n.mixins.length;r<o;r++)e=Be(e,n.mixins[r],t);var i,a={};for(i in e)s(i);for(i in n)j(e,i)||s(i);function s(r){var o=Te[r]||ze;a[r]=o(e[r],n[r],t,r)}return a}function De(e,n,t,r){if("string"==typeof t){var o=e[n];if(j(o,t))return o[t];var i=_(t);if(j(o,i))return o[i];var a=S(i);return j(o,a)?o[a]:o[t]||o[i]||o[a]}}function Ne(e,n,t,r){var o=n[e],i=!j(t,e),a=t[e],s=Ve(Boolean,o.type);if(s>-1)if(i&&!j(o,"default"))a=!1;else if(""===a||a===C(e)){var c=Ve(String,o.type);(c<0||s<c)&&(a=!0)}if(void 0===a){a=function(e,n,t){if(!j(n,"default"))return;var r=n.default;0;if(e&&e.$options.propsData&&void 0===e.$options.propsData[t]&&void 0!==e._props[t])return e._props[t];return"function"==typeof r&&"Function"!==Ue(n.type)?r.call(e):r}(r,o,e);var u=we;_e(!0),Ee(a),_e(u)}return a}var Me=/^\s*function (\w+)/;function Ue(e){var n=e&&e.toString().match(Me);return n?n[1]:""}function Fe(e,n){return Ue(e)===Ue(n)}function Ve(e,n){if(!Array.isArray(n))return Fe(n,e)?0:-1;for(var t=0,r=n.length;t<r;t++)if(Fe(n[t],e))return t;return-1}function qe(e,n,t){fe();try{if(n)for(var r=n;r=r.$parent;){var o=r.$options.errorCaptured;if(o)for(var i=0;i<o.length;i++)try{if(!1===o[i].call(r,e,n,t))return}catch(e){Ke(e,r,"errorCaptured hook")}}Ke(e,n,t)}finally{ve()}}function He(e,n,t,r,o){var i;try{(i=t?e.apply(n,t):e.call(n))&&!i._isVue&&v(i)&&!i._handled&&(i.catch((function(e){return qe(e,r,o+" (Promise/async)")})),i._handled=!0)}catch(e){qe(e,r,o)}return i}function Ke(e,n,t){if(M.errorHandler)try{return M.errorHandler.call(null,e,n,t)}catch(n){n!==e&&We(n,null,"config.errorHandler")}We(e,n,t)}function We(e,n,t){if(!K&&!W||"undefined"==typeof console)throw e;console.error(e)}var Ge,Ze=!1,Je=[],Xe=!1;function Ye(){Xe=!1;var e=Je.slice(0);Je.length=0;for(var n=0;n<e.length;n++)e[n]()}if("undefined"!=typeof Promise&&ae(Promise)){var Qe=Promise.resolve();Ge=function(){Qe.then(Ye),Q&&setTimeout(P)},Ze=!0}else if(J||"undefined"==typeof MutationObserver||!ae(MutationObserver)&&"[object MutationObserverConstructor]"!==MutationObserver.toString())Ge="undefined"!=typeof setImmediate&&ae(setImmediate)?function(){setImmediate(Ye)}:function(){setTimeout(Ye,0)};else{var en=1,nn=new MutationObserver(Ye),tn=document.createTextNode(String(en));nn.observe(tn,{characterData:!0}),Ge=function(){en=(en+1)%2,tn.data=String(en)},Ze=!0}function rn(e,n){var t;if(Je.push((function(){if(e)try{e.call(n)}catch(e){qe(e,n,"nextTick")}else t&&t(n)})),Xe||(Xe=!0,Ge()),!e&&"undefined"!=typeof Promise)return new Promise((function(e){t=e}))}var on=new se;function an(e){!function e(n,t){var r,o,i=Array.isArray(n);if(!i&&!u(n)||Object.isFrozen(n)||n instanceof he)return;if(n.__ob__){var a=n.__ob__.dep.id;if(t.has(a))return;t.add(a)}if(i)for(r=n.length;r--;)e(n[r],t);else for(o=Object.keys(n),r=o.length;r--;)e(n[o[r]],t)}(e,on),on.clear()}var sn=k((function(e){var n="&"===e.charAt(0),t="~"===(e=n?e.slice(1):e).charAt(0),r="!"===(e=t?e.slice(1):e).charAt(0);return{name:e=r?e.slice(1):e,once:t,capture:r,passive:n}}));function cn(e,n){function t(){var e=arguments,r=t.fns;if(!Array.isArray(r))return He(r,null,arguments,n,"v-on handler");for(var o=r.slice(),i=0;i<o.length;i++)He(o[i],null,e,n,"v-on handler")}return t.fns=e,t}function un(e,n,t,r,o,a){var c,u,l,p;for(c in e)u=e[c],l=n[c],p=sn(c),i(u)||(i(l)?(i(u.fns)&&(u=e[c]=cn(u,a)),s(p.once)&&(u=e[c]=o(p.name,u,p.capture)),t(p.name,u,p.capture,p.passive,p.params)):u!==l&&(l.fns=u,e[c]=l));for(c in n)i(e[c])&&r((p=sn(c)).name,n[c],p.capture)}function ln(e,n,t){var r;e instanceof he&&(e=e.data.hook||(e.data.hook={}));var o=e[n];function c(){t.apply(this,arguments),y(r.fns,c)}i(o)?r=cn([c]):a(o.fns)&&s(o.merged)?(r=o).fns.push(c):r=cn([o,c]),r.merged=!0,e[n]=r}function pn(e,n,t,r,o){if(a(n)){if(j(n,t))return e[t]=n[t],o||delete n[t],!0;if(j(n,r))return e[t]=n[r],o||delete n[r],!0}return!1}function dn(e){return c(e)?[be(e)]:Array.isArray(e)?function e(n,t){var r,o,u,l,p=[];for(r=0;r<n.length;r++)i(o=n[r])||"boolean"==typeof o||(u=p.length-1,l=p[u],Array.isArray(o)?o.length>0&&(fn((o=e(o,(t||"")+"_"+r))[0])&&fn(l)&&(p[u]=be(l.text+o[0].text),o.shift()),p.push.apply(p,o)):c(o)?fn(l)?p[u]=be(l.text+o):""!==o&&p.push(be(o)):fn(o)&&fn(l)?p[u]=be(l.text+o.text):(s(n._isVList)&&a(o.tag)&&i(o.key)&&a(t)&&(o.key="__vlist"+t+"_"+r+"__"),p.push(o)));return p}(e):void 0}function fn(e){return a(e)&&a(e.text)&&!1===e.isComment}function vn(e,n){if(e){for(var t=Object.create(null),r=ce?Reflect.ownKeys(e):Object.keys(e),o=0;o<r.length;o++){var i=r[o];if("__ob__"!==i){for(var a=e[i].from,s=n;s;){if(s._provided&&j(s._provided,a)){t[i]=s._provided[a];break}s=s.$parent}if(!s)if("default"in e[i]){var c=e[i].default;t[i]="function"==typeof c?c.call(n):c}else 0}}return t}}function hn(e,n){if(!e||!e.length)return{};for(var t={},r=0,o=e.length;r<o;r++){var i=e[r],a=i.data;if(a&&a.attrs&&a.attrs.slot&&delete a.attrs.slot,i.context!==n&&i.fnContext!==n||!a||null==a.slot)(t.default||(t.default=[])).push(i);else{var s=a.slot,c=t[s]||(t[s]=[]);"template"===i.tag?c.push.apply(c,i.children||[]):c.push(i)}}for(var u in t)t[u].every(mn)&&delete t[u];return t}function mn(e){return e.isComment&&!e.asyncFactory||" "===e.text}function gn(e){return e.isComment&&e.asyncFactory}function bn(e,n,t){var r,i=Object.keys(n).length>0,a=e?!!e.$stable:!i,s=e&&e.$key;if(e){if(e._normalized)return e._normalized;if(a&&t&&t!==o&&s===t.$key&&!i&&!t.$hasNormal)return t;for(var c in r={},e)e[c]&&"$"!==c[0]&&(r[c]=yn(n,c,e[c]))}else r={};for(var u in n)u in r||(r[u]=xn(n,u));return e&&Object.isExtensible(e)&&(e._normalized=r),F(r,"$stable",a),F(r,"$key",s),F(r,"$hasNormal",i),r}function yn(e,n,t){var r=function(){var e=arguments.length?t.apply(null,arguments):t({}),n=(e=e&&"object"==typeof e&&!Array.isArray(e)?[e]:dn(e))&&e[0];return e&&(!n||1===e.length&&n.isComment&&!gn(n))?void 0:e};return t.proxy&&Object.defineProperty(e,n,{get:r,enumerable:!0,configurable:!0}),r}function xn(e,n){return function(){return e[n]}}function jn(e,n){var t,r,o,i,s;if(Array.isArray(e)||"string"==typeof e)for(t=new Array(e.length),r=0,o=e.length;r<o;r++)t[r]=n(e[r],r);else if("number"==typeof e)for(t=new Array(e),r=0;r<e;r++)t[r]=n(r+1,r);else if(u(e))if(ce&&e[Symbol.iterator]){t=[];for(var c=e[Symbol.iterator](),l=c.next();!l.done;)t.push(n(l.value,t.length)),l=c.next()}else for(i=Object.keys(e),t=new Array(i.length),r=0,o=i.length;r<o;r++)s=i[r],t[r]=n(e[s],s,r);return a(t)||(t=[]),t._isVList=!0,t}function kn(e,n,t,r){var o,i=this.$scopedSlots[e];i?(t=t||{},r&&(t=A(A({},r),t)),o=i(t)||("function"==typeof n?n():n)):o=this.$slots[e]||("function"==typeof n?n():n);var a=t&&t.slot;return a?this.$createElement("template",{slot:a},o):o}function wn(e){return De(this.$options,"filters",e)||L}function _n(e,n){return Array.isArray(e)?-1===e.indexOf(n):e!==n}function Sn(e,n,t,r,o){var i=M.keyCodes[n]||t;return o&&r&&!M.keyCodes[n]?_n(o,r):i?_n(i,e):r?C(r)!==n:void 0===e}function En(e,n,t,r,o){if(t)if(u(t)){var i;Array.isArray(t)&&(t=T(t));var a=function(a){if("class"===a||"style"===a||b(a))i=e;else{var s=e.attrs&&e.attrs.type;i=r||M.mustUseProp(n,s,a)?e.domProps||(e.domProps={}):e.attrs||(e.attrs={})}var c=_(a),u=C(a);c in i||u in i||(i[a]=t[a],o&&((e.on||(e.on={}))["update:"+a]=function(e){t[a]=e}))};for(var s in t)a(s)}else;return e}function Cn(e,n){var t=this._staticTrees||(this._staticTrees=[]),r=t[e];return r&&!n||On(r=t[e]=this.$options.staticRenderFns[e].call(this._renderProxy,null,this),"__static__"+e,!1),r}function In(e,n,t){return On(e,"__once__"+n+(t?"_"+t:""),!0),e}function On(e,n,t){if(Array.isArray(e))for(var r=0;r<e.length;r++)e[r]&&"string"!=typeof e[r]&&An(e[r],n+"_"+r,t);else An(e,n,t)}function An(e,n,t){e.isStatic=!0,e.key=n,e.isOnce=t}function Tn(e,n){if(n)if(p(n)){var t=e.on=e.on?A({},e.on):{};for(var r in n){var o=t[r],i=n[r];t[r]=o?[].concat(o,i):i}}else;return e}function Pn(e,n,t,r){n=n||{$stable:!t};for(var o=0;o<e.length;o++){var i=e[o];Array.isArray(i)?Pn(i,n,t):i&&(i.proxy&&(i.fn.proxy=!0),n[i.key]=i.fn)}return r&&(n.$key=r),n}function $n(e,n){for(var t=0;t<n.length;t+=2){var r=n[t];"string"==typeof r&&r&&(e[n[t]]=n[t+1])}return e}function Ln(e,n){return"string"==typeof e?n+e:e}function Rn(e){e._o=In,e._n=m,e._s=h,e._l=jn,e._t=kn,e._q=R,e._i=z,e._m=Cn,e._f=wn,e._k=Sn,e._b=En,e._v=be,e._e=ge,e._u=Pn,e._g=Tn,e._d=$n,e._p=Ln}function zn(e,n,t,r,i){var a,c=this,u=i.options;j(r,"_uid")?(a=Object.create(r))._original=r:(a=r,r=r._original);var l=s(u._compiled),p=!l;this.data=e,this.props=n,this.children=t,this.parent=r,this.listeners=e.on||o,this.injections=vn(u.inject,r),this.slots=function(){return c.$slots||bn(e.scopedSlots,c.$slots=hn(t,r)),c.$slots},Object.defineProperty(this,"scopedSlots",{enumerable:!0,get:function(){return bn(e.scopedSlots,this.slots())}}),l&&(this.$options=u,this.$slots=this.slots(),this.$scopedSlots=bn(e.scopedSlots,this.$slots)),u._scopeId?this._c=function(e,n,t,o){var i=Vn(a,e,n,t,o,p);return i&&!Array.isArray(i)&&(i.fnScopeId=u._scopeId,i.fnContext=r),i}:this._c=function(e,n,t,r){return Vn(a,e,n,t,r,p)}}function Bn(e,n,t,r,o){var i=ye(e);return i.fnContext=t,i.fnOptions=r,n.slot&&((i.data||(i.data={})).slot=n.slot),i}function Dn(e,n){for(var t in n)e[_(t)]=n[t]}Rn(zn.prototype);var Nn={init:function(e,n){if(e.componentInstance&&!e.componentInstance._isDestroyed&&e.data.keepAlive){var t=e;Nn.prepatch(t,t)}else{(e.componentInstance=function(e,n){var t={_isComponent:!0,_parentVnode:e,parent:n},r=e.data.inlineTemplate;a(r)&&(t.render=r.render,t.staticRenderFns=r.staticRenderFns);return new e.componentOptions.Ctor(t)}(e,Yn)).$mount(n?e.elm:void 0,n)}},prepatch:function(e,n){var t=n.componentOptions;!function(e,n,t,r,i){0;var a=r.data.scopedSlots,s=e.$scopedSlots,c=!!(a&&!a.$stable||s!==o&&!s.$stable||a&&e.$scopedSlots.$key!==a.$key||!a&&e.$scopedSlots.$key),u=!!(i||e.$options._renderChildren||c);e.$options._parentVnode=r,e.$vnode=r,e._vnode&&(e._vnode.parent=r);if(e.$options._renderChildren=i,e.$attrs=r.data.attrs||o,e.$listeners=t||o,n&&e.$options.props){_e(!1);for(var l=e._props,p=e.$options._propKeys||[],d=0;d<p.length;d++){var f=p[d],v=e.$options.props;l[f]=Ne(f,v,n,e)}_e(!0),e.$options.propsData=n}t=t||o;var h=e.$options._parentListeners;e.$options._parentListeners=t,Xn(e,t,h),u&&(e.$slots=hn(i,r.context),e.$forceUpdate());0}(n.componentInstance=e.componentInstance,t.propsData,t.listeners,n,t.children)},insert:function(e){var n,t=e.context,r=e.componentInstance;r._isMounted||(r._isMounted=!0,tt(r,"mounted")),e.data.keepAlive&&(t._isMounted?((n=r)._inactive=!1,ot.push(n)):nt(r,!0))},destroy:function(e){var n=e.componentInstance;n._isDestroyed||(e.data.keepAlive?function e(n,t){if(t&&(n._directInactive=!0,et(n)))return;if(!n._inactive){n._inactive=!0;for(var r=0;r<n.$children.length;r++)e(n.$children[r]);tt(n,"deactivated")}}(n,!0):n.$destroy())}},Mn=Object.keys(Nn);function Un(e,n,t,r,c){if(!i(e)){var l=t.$options._base;if(u(e)&&(e=l.extend(e)),"function"==typeof e){var p;if(i(e.cid)&&void 0===(e=function(e,n){if(s(e.error)&&a(e.errorComp))return e.errorComp;if(a(e.resolved))return e.resolved;var t=Hn;t&&a(e.owners)&&-1===e.owners.indexOf(t)&&e.owners.push(t);if(s(e.loading)&&a(e.loadingComp))return e.loadingComp;if(t&&!a(e.owners)){var r=e.owners=[t],o=!0,c=null,l=null;t.$on("hook:destroyed",(function(){return y(r,t)}));var p=function(e){for(var n=0,t=r.length;n<t;n++)r[n].$forceUpdate();e&&(r.length=0,null!==c&&(clearTimeout(c),c=null),null!==l&&(clearTimeout(l),l=null))},d=B((function(t){e.resolved=Kn(t,n),o?r.length=0:p(!0)})),f=B((function(n){a(e.errorComp)&&(e.error=!0,p(!0))})),h=e(d,f);return u(h)&&(v(h)?i(e.resolved)&&h.then(d,f):v(h.component)&&(h.component.then(d,f),a(h.error)&&(e.errorComp=Kn(h.error,n)),a(h.loading)&&(e.loadingComp=Kn(h.loading,n),0===h.delay?e.loading=!0:c=setTimeout((function(){c=null,i(e.resolved)&&i(e.error)&&(e.loading=!0,p(!1))}),h.delay||200)),a(h.timeout)&&(l=setTimeout((function(){l=null,i(e.resolved)&&f(null)}),h.timeout)))),o=!1,e.loading?e.loadingComp:e.resolved}}(p=e,l)))return function(e,n,t,r,o){var i=ge();return i.asyncFactory=e,i.asyncMeta={data:n,context:t,children:r,tag:o},i}(p,n,t,r,c);n=n||{},_t(e),a(n.model)&&function(e,n){var t=e.model&&e.model.prop||"value",r=e.model&&e.model.event||"input";(n.attrs||(n.attrs={}))[t]=n.model.value;var o=n.on||(n.on={}),i=o[r],s=n.model.callback;a(i)?(Array.isArray(i)?-1===i.indexOf(s):i!==s)&&(o[r]=[s].concat(i)):o[r]=s}(e.options,n);var d=function(e,n,t){var r=n.options.props;if(!i(r)){var o={},s=e.attrs,c=e.props;if(a(s)||a(c))for(var u in r){var l=C(u);pn(o,c,u,l,!0)||pn(o,s,u,l,!1)}return o}}(n,e);if(s(e.options.functional))return function(e,n,t,r,i){var s=e.options,c={},u=s.props;if(a(u))for(var l in u)c[l]=Ne(l,u,n||o);else a(t.attrs)&&Dn(c,t.attrs),a(t.props)&&Dn(c,t.props);var p=new zn(t,c,i,r,e),d=s.render.call(null,p._c,p);if(d instanceof he)return Bn(d,t,p.parent,s,p);if(Array.isArray(d)){for(var f=dn(d)||[],v=new Array(f.length),h=0;h<f.length;h++)v[h]=Bn(f[h],t,p.parent,s,p);return v}}(e,d,n,t,r);var f=n.on;if(n.on=n.nativeOn,s(e.options.abstract)){var h=n.slot;n={},h&&(n.slot=h)}!function(e){for(var n=e.hook||(e.hook={}),t=0;t<Mn.length;t++){var r=Mn[t],o=n[r],i=Nn[r];o===i||o&&o._merged||(n[r]=o?Fn(i,o):i)}}(n);var m=e.options.name||c;return new he("vue-component-"+e.cid+(m?"-"+m:""),n,void 0,void 0,void 0,t,{Ctor:e,propsData:d,listeners:f,tag:c,children:r},p)}}}function Fn(e,n){var t=function(t,r){e(t,r),n(t,r)};return t._merged=!0,t}function Vn(e,n,t,r,o,l){return(Array.isArray(t)||c(t))&&(o=r,r=t,t=void 0),s(l)&&(o=2),function(e,n,t,r,o){if(a(t)&&a(t.__ob__))return ge();a(t)&&a(t.is)&&(n=t.is);if(!n)return ge();0;Array.isArray(r)&&"function"==typeof r[0]&&((t=t||{}).scopedSlots={default:r[0]},r.length=0);2===o?r=dn(r):1===o&&(r=function(e){for(var n=0;n<e.length;n++)if(Array.isArray(e[n]))return Array.prototype.concat.apply([],e);return e}(r));var c,l;if("string"==typeof n){var p;l=e.$vnode&&e.$vnode.ns||M.getTagNamespace(n),c=M.isReservedTag(n)?new he(M.parsePlatformTagName(n),t,r,void 0,void 0,e):t&&t.pre||!a(p=De(e.$options,"components",n))?new he(n,t,r,void 0,void 0,e):Un(p,t,e,r,n)}else c=Un(n,t,e,r);return Array.isArray(c)?c:a(c)?(a(l)&&function e(n,t,r){n.ns=t,"foreignObject"===n.tag&&(t=void 0,r=!0);if(a(n.children))for(var o=0,c=n.children.length;o<c;o++){var u=n.children[o];a(u.tag)&&(i(u.ns)||s(r)&&"svg"!==u.tag)&&e(u,t,r)}}(c,l),a(t)&&function(e){u(e.style)&&an(e.style);u(e.class)&&an(e.class)}(t),c):ge()}(e,n,t,r,o)}var qn,Hn=null;function Kn(e,n){return(e.__esModule||ce&&"Module"===e[Symbol.toStringTag])&&(e=e.default),u(e)?n.extend(e):e}function Wn(e){if(Array.isArray(e))for(var n=0;n<e.length;n++){var t=e[n];if(a(t)&&(a(t.componentOptions)||gn(t)))return t}}function Gn(e,n){qn.$on(e,n)}function Zn(e,n){qn.$off(e,n)}function Jn(e,n){var t=qn;return function r(){var o=n.apply(null,arguments);null!==o&&t.$off(e,r)}}function Xn(e,n,t){qn=e,un(n,t||{},Gn,Zn,Jn,e),qn=void 0}var Yn=null;function Qn(e){var n=Yn;return Yn=e,function(){Yn=n}}function et(e){for(;e&&(e=e.$parent);)if(e._inactive)return!0;return!1}function nt(e,n){if(n){if(e._directInactive=!1,et(e))return}else if(e._directInactive)return;if(e._inactive||null===e._inactive){e._inactive=!1;for(var t=0;t<e.$children.length;t++)nt(e.$children[t]);tt(e,"activated")}}function tt(e,n){fe();var t=e.$options[n],r=n+" hook";if(t)for(var o=0,i=t.length;o<i;o++)He(t[o],e,null,e,r);e._hasHookEvent&&e.$emit("hook:"+n),ve()}var rt=[],ot=[],it={},at=!1,st=!1,ct=0;var ut=0,lt=Date.now;if(K&&!J){var pt=window.performance;pt&&"function"==typeof pt.now&&lt()>document.createEvent("Event").timeStamp&&(lt=function(){return pt.now()})}function dt(){var e,n;for(ut=lt(),st=!0,rt.sort((function(e,n){return e.id-n.id})),ct=0;ct<rt.length;ct++)(e=rt[ct]).before&&e.before(),n=e.id,it[n]=null,e.run();var t=ot.slice(),r=rt.slice();ct=rt.length=ot.length=0,it={},at=st=!1,function(e){for(var n=0;n<e.length;n++)e[n]._inactive=!0,nt(e[n],!0)}(t),function(e){var n=e.length;for(;n--;){var t=e[n],r=t.vm;r._watcher===t&&r._isMounted&&!r._isDestroyed&&tt(r,"updated")}}(r),ie&&M.devtools&&ie.emit("flush")}var ft=0,vt=function(e,n,t,r,o){this.vm=e,o&&(e._watcher=this),e._watchers.push(this),r?(this.deep=!!r.deep,this.user=!!r.user,this.lazy=!!r.lazy,this.sync=!!r.sync,this.before=r.before):this.deep=this.user=this.lazy=this.sync=!1,this.cb=t,this.id=++ft,this.active=!0,this.dirty=this.lazy,this.deps=[],this.newDeps=[],this.depIds=new se,this.newDepIds=new se,this.expression="","function"==typeof n?this.getter=n:(this.getter=function(e){if(!V.test(e)){var n=e.split(".");return function(e){for(var t=0;t<n.length;t++){if(!e)return;e=e[n[t]]}return e}}}(n),this.getter||(this.getter=P)),this.value=this.lazy?void 0:this.get()};vt.prototype.get=function(){var e;fe(this);var n=this.vm;try{e=this.getter.call(n,n)}catch(e){if(!this.user)throw e;qe(e,n,'getter for watcher "'+this.expression+'"')}finally{this.deep&&an(e),ve(),this.cleanupDeps()}return e},vt.prototype.addDep=function(e){var n=e.id;this.newDepIds.has(n)||(this.newDepIds.add(n),this.newDeps.push(e),this.depIds.has(n)||e.addSub(this))},vt.prototype.cleanupDeps=function(){for(var e=this.deps.length;e--;){var n=this.deps[e];this.newDepIds.has(n.id)||n.removeSub(this)}var t=this.depIds;this.depIds=this.newDepIds,this.newDepIds=t,this.newDepIds.clear(),t=this.deps,this.deps=this.newDeps,this.newDeps=t,this.newDeps.length=0},vt.prototype.update=function(){this.lazy?this.dirty=!0:this.sync?this.run():function(e){var n=e.id;if(null==it[n]){if(it[n]=!0,st){for(var t=rt.length-1;t>ct&&rt[t].id>e.id;)t--;rt.splice(t+1,0,e)}else rt.push(e);at||(at=!0,rn(dt))}}(this)},vt.prototype.run=function(){if(this.active){var e=this.get();if(e!==this.value||u(e)||this.deep){var n=this.value;if(this.value=e,this.user){var t='callback for watcher "'+this.expression+'"';He(this.cb,this.vm,[e,n],this.vm,t)}else this.cb.call(this.vm,e,n)}}},vt.prototype.evaluate=function(){this.value=this.get(),this.dirty=!1},vt.prototype.depend=function(){for(var e=this.deps.length;e--;)this.deps[e].depend()},vt.prototype.teardown=function(){if(this.active){this.vm._isBeingDestroyed||y(this.vm._watchers,this);for(var e=this.deps.length;e--;)this.deps[e].removeSub(this);this.active=!1}};var ht={enumerable:!0,configurable:!0,get:P,set:P};function mt(e,n,t){ht.get=function(){return this[n][t]},ht.set=function(e){this[n][t]=e},Object.defineProperty(e,t,ht)}function gt(e){e._watchers=[];var n=e.$options;n.props&&function(e,n){var t=e.$options.propsData||{},r=e._props={},o=e.$options._propKeys=[];e.$parent&&_e(!1);var i=function(i){o.push(i);var a=Ne(i,n,t,e);Ce(r,i,a),i in e||mt(e,"_props",i)};for(var a in n)i(a);_e(!0)}(e,n.props),n.methods&&function(e,n){e.$options.props;for(var t in n)e[t]="function"!=typeof n[t]?P:I(n[t],e)}(e,n.methods),n.data?function(e){var n=e.$options.data;p(n=e._data="function"==typeof n?function(e,n){fe();try{return e.call(n,n)}catch(e){return qe(e,n,"data()"),{}}finally{ve()}}(n,e):n||{})||(n={});var t=Object.keys(n),r=e.$options.props,o=(e.$options.methods,t.length);for(;o--;){var i=t[o];0,r&&j(r,i)||(a=void 0,36!==(a=(i+"").charCodeAt(0))&&95!==a&&mt(e,"_data",i))}var a;Ee(n,!0)}(e):Ee(e._data={},!0),n.computed&&function(e,n){var t=e._computedWatchers=Object.create(null),r=oe();for(var o in n){var i=n[o],a="function"==typeof i?i:i.get;0,r||(t[o]=new vt(e,a||P,P,bt)),o in e||yt(e,o,i)}}(e,n.computed),n.watch&&n.watch!==ne&&function(e,n){for(var t in n){var r=n[t];if(Array.isArray(r))for(var o=0;o<r.length;o++)kt(e,t,r[o]);else kt(e,t,r)}}(e,n.watch)}var bt={lazy:!0};function yt(e,n,t){var r=!oe();"function"==typeof t?(ht.get=r?xt(n):jt(t),ht.set=P):(ht.get=t.get?r&&!1!==t.cache?xt(n):jt(t.get):P,ht.set=t.set||P),Object.defineProperty(e,n,ht)}function xt(e){return function(){var n=this._computedWatchers&&this._computedWatchers[e];if(n)return n.dirty&&n.evaluate(),pe.target&&n.depend(),n.value}}function jt(e){return function(){return e.call(this,this)}}function kt(e,n,t,r){return p(t)&&(r=t,t=t.handler),"string"==typeof t&&(t=e[t]),e.$watch(n,t,r)}var wt=0;function _t(e){var n=e.options;if(e.super){var t=_t(e.super);if(t!==e.superOptions){e.superOptions=t;var r=function(e){var n,t=e.options,r=e.sealedOptions;for(var o in t)t[o]!==r[o]&&(n||(n={}),n[o]=t[o]);return n}(e);r&&A(e.extendOptions,r),(n=e.options=Be(t,e.extendOptions)).name&&(n.components[n.name]=e)}}return n}function St(e){this._init(e)}function Et(e){e.cid=0;var n=1;e.extend=function(e){e=e||{};var t=this,r=t.cid,o=e._Ctor||(e._Ctor={});if(o[r])return o[r];var i=e.name||t.options.name;var a=function(e){this._init(e)};return(a.prototype=Object.create(t.prototype)).constructor=a,a.cid=n++,a.options=Be(t.options,e),a.super=t,a.options.props&&function(e){var n=e.options.props;for(var t in n)mt(e.prototype,"_props",t)}(a),a.options.computed&&function(e){var n=e.options.computed;for(var t in n)yt(e.prototype,t,n[t])}(a),a.extend=t.extend,a.mixin=t.mixin,a.use=t.use,D.forEach((function(e){a[e]=t[e]})),i&&(a.options.components[i]=a),a.superOptions=t.options,a.extendOptions=e,a.sealedOptions=A({},a.options),o[r]=a,a}}function Ct(e){return e&&(e.Ctor.options.name||e.tag)}function It(e,n){return Array.isArray(e)?e.indexOf(n)>-1:"string"==typeof e?e.split(",").indexOf(n)>-1:!!d(e)&&e.test(n)}function Ot(e,n){var t=e.cache,r=e.keys,o=e._vnode;for(var i in t){var a=t[i];if(a){var s=a.name;s&&!n(s)&&At(t,i,r,o)}}}function At(e,n,t,r){var o=e[n];!o||r&&o.tag===r.tag||o.componentInstance.$destroy(),e[n]=null,y(t,n)}!function(e){e.prototype._init=function(e){var n=this;n._uid=wt++,n._isVue=!0,e&&e._isComponent?function(e,n){var t=e.$options=Object.create(e.constructor.options),r=n._parentVnode;t.parent=n.parent,t._parentVnode=r;var o=r.componentOptions;t.propsData=o.propsData,t._parentListeners=o.listeners,t._renderChildren=o.children,t._componentTag=o.tag,n.render&&(t.render=n.render,t.staticRenderFns=n.staticRenderFns)}(n,e):n.$options=Be(_t(n.constructor),e||{},n),n._renderProxy=n,n._self=n,function(e){var n=e.$options,t=n.parent;if(t&&!n.abstract){for(;t.$options.abstract&&t.$parent;)t=t.$parent;t.$children.push(e)}e.$parent=t,e.$root=t?t.$root:e,e.$children=[],e.$refs={},e._watcher=null,e._inactive=null,e._directInactive=!1,e._isMounted=!1,e._isDestroyed=!1,e._isBeingDestroyed=!1}(n),function(e){e._events=Object.create(null),e._hasHookEvent=!1;var n=e.$options._parentListeners;n&&Xn(e,n)}(n),function(e){e._vnode=null,e._staticTrees=null;var n=e.$options,t=e.$vnode=n._parentVnode,r=t&&t.context;e.$slots=hn(n._renderChildren,r),e.$scopedSlots=o,e._c=function(n,t,r,o){return Vn(e,n,t,r,o,!1)},e.$createElement=function(n,t,r,o){return Vn(e,n,t,r,o,!0)};var i=t&&t.data;Ce(e,"$attrs",i&&i.attrs||o,null,!0),Ce(e,"$listeners",n._parentListeners||o,null,!0)}(n),tt(n,"beforeCreate"),function(e){var n=vn(e.$options.inject,e);n&&(_e(!1),Object.keys(n).forEach((function(t){Ce(e,t,n[t])})),_e(!0))}(n),gt(n),function(e){var n=e.$options.provide;n&&(e._provided="function"==typeof n?n.call(e):n)}(n),tt(n,"created"),n.$options.el&&n.$mount(n.$options.el)}}(St),function(e){var n={get:function(){return this._data}},t={get:function(){return this._props}};Object.defineProperty(e.prototype,"$data",n),Object.defineProperty(e.prototype,"$props",t),e.prototype.$set=Ie,e.prototype.$delete=Oe,e.prototype.$watch=function(e,n,t){if(p(n))return kt(this,e,n,t);(t=t||{}).user=!0;var r=new vt(this,e,n,t);if(t.immediate){var o='callback for immediate watcher "'+r.expression+'"';fe(),He(n,this,[r.value],this,o),ve()}return function(){r.teardown()}}}(St),function(e){var n=/^hook:/;e.prototype.$on=function(e,t){var r=this;if(Array.isArray(e))for(var o=0,i=e.length;o<i;o++)r.$on(e[o],t);else(r._events[e]||(r._events[e]=[])).push(t),n.test(e)&&(r._hasHookEvent=!0);return r},e.prototype.$once=function(e,n){var t=this;function r(){t.$off(e,r),n.apply(t,arguments)}return r.fn=n,t.$on(e,r),t},e.prototype.$off=function(e,n){var t=this;if(!arguments.length)return t._events=Object.create(null),t;if(Array.isArray(e)){for(var r=0,o=e.length;r<o;r++)t.$off(e[r],n);return t}var i,a=t._events[e];if(!a)return t;if(!n)return t._events[e]=null,t;for(var s=a.length;s--;)if((i=a[s])===n||i.fn===n){a.splice(s,1);break}return t},e.prototype.$emit=function(e){var n=this,t=n._events[e];if(t){t=t.length>1?O(t):t;for(var r=O(arguments,1),o='event handler for "'+e+'"',i=0,a=t.length;i<a;i++)He(t[i],n,r,n,o)}return n}}(St),function(e){e.prototype._update=function(e,n){var t=this,r=t.$el,o=t._vnode,i=Qn(t);t._vnode=e,t.$el=o?t.__patch__(o,e):t.__patch__(t.$el,e,n,!1),i(),r&&(r.__vue__=null),t.$el&&(t.$el.__vue__=t),t.$vnode&&t.$parent&&t.$vnode===t.$parent._vnode&&(t.$parent.$el=t.$el)},e.prototype.$forceUpdate=function(){this._watcher&&this._watcher.update()},e.prototype.$destroy=function(){var e=this;if(!e._isBeingDestroyed){tt(e,"beforeDestroy"),e._isBeingDestroyed=!0;var n=e.$parent;!n||n._isBeingDestroyed||e.$options.abstract||y(n.$children,e),e._watcher&&e._watcher.teardown();for(var t=e._watchers.length;t--;)e._watchers[t].teardown();e._data.__ob__&&e._data.__ob__.vmCount--,e._isDestroyed=!0,e.__patch__(e._vnode,null),tt(e,"destroyed"),e.$off(),e.$el&&(e.$el.__vue__=null),e.$vnode&&(e.$vnode.parent=null)}}}(St),function(e){Rn(e.prototype),e.prototype.$nextTick=function(e){return rn(e,this)},e.prototype._render=function(){var e,n=this,t=n.$options,r=t.render,o=t._parentVnode;o&&(n.$scopedSlots=bn(o.data.scopedSlots,n.$slots,n.$scopedSlots)),n.$vnode=o;try{Hn=n,e=r.call(n._renderProxy,n.$createElement)}catch(t){qe(t,n,"render"),e=n._vnode}finally{Hn=null}return Array.isArray(e)&&1===e.length&&(e=e[0]),e instanceof he||(e=ge()),e.parent=o,e}}(St);var Tt=[String,RegExp,Array],Pt={KeepAlive:{name:"keep-alive",abstract:!0,props:{include:Tt,exclude:Tt,max:[String,Number]},methods:{cacheVNode:function(){var e=this.cache,n=this.keys,t=this.vnodeToCache,r=this.keyToCache;if(t){var o=t.tag,i=t.componentInstance,a=t.componentOptions;e[r]={name:Ct(a),tag:o,componentInstance:i},n.push(r),this.max&&n.length>parseInt(this.max)&&At(e,n[0],n,this._vnode),this.vnodeToCache=null}}},created:function(){this.cache=Object.create(null),this.keys=[]},destroyed:function(){for(var e in this.cache)At(this.cache,e,this.keys)},mounted:function(){var e=this;this.cacheVNode(),this.$watch("include",(function(n){Ot(e,(function(e){return It(n,e)}))})),this.$watch("exclude",(function(n){Ot(e,(function(e){return!It(n,e)}))}))},updated:function(){this.cacheVNode()},render:function(){var e=this.$slots.default,n=Wn(e),t=n&&n.componentOptions;if(t){var r=Ct(t),o=this.include,i=this.exclude;if(o&&(!r||!It(o,r))||i&&r&&It(i,r))return n;var a=this.cache,s=this.keys,c=null==n.key?t.Ctor.cid+(t.tag?"::"+t.tag:""):n.key;a[c]?(n.componentInstance=a[c].componentInstance,y(s,c),s.push(c)):(this.vnodeToCache=n,this.keyToCache=c),n.data.keepAlive=!0}return n||e&&e[0]}}};!function(e){var n={get:function(){return M}};Object.defineProperty(e,"config",n),e.util={warn:ue,extend:A,mergeOptions:Be,defineReactive:Ce},e.set=Ie,e.delete=Oe,e.nextTick=rn,e.observable=function(e){return Ee(e),e},e.options=Object.create(null),D.forEach((function(n){e.options[n+"s"]=Object.create(null)})),e.options._base=e,A(e.options.components,Pt),function(e){e.use=function(e){var n=this._installedPlugins||(this._installedPlugins=[]);if(n.indexOf(e)>-1)return this;var t=O(arguments,1);return t.unshift(this),"function"==typeof e.install?e.install.apply(e,t):"function"==typeof e&&e.apply(null,t),n.push(e),this}}(e),function(e){e.mixin=function(e){return this.options=Be(this.options,e),this}}(e),Et(e),function(e){D.forEach((function(n){e[n]=function(e,t){return t?("component"===n&&p(t)&&(t.name=t.name||e,t=this.options._base.extend(t)),"directive"===n&&"function"==typeof t&&(t={bind:t,update:t}),this.options[n+"s"][e]=t,t):this.options[n+"s"][e]}}))}(e)}(St),Object.defineProperty(St.prototype,"$isServer",{get:oe}),Object.defineProperty(St.prototype,"$ssrContext",{get:function(){return this.$vnode&&this.$vnode.ssrContext}}),Object.defineProperty(St,"FunctionalRenderContext",{value:zn}),St.version="2.6.14";var $t=g("style,class"),Lt=g("input,textarea,option,select,progress"),Rt=g("contenteditable,draggable,spellcheck"),zt=g("events,caret,typing,plaintext-only"),Bt=g("allowfullscreen,async,autofocus,autoplay,checked,compact,controls,declare,default,defaultchecked,defaultmuted,defaultselected,defer,disabled,enabled,formnovalidate,hidden,indeterminate,inert,ismap,itemscope,loop,multiple,muted,nohref,noresize,noshade,novalidate,nowrap,open,pauseonexit,readonly,required,reversed,scoped,seamless,selected,sortable,truespeed,typemustmatch,visible"),Dt="http://www.w3.org/1999/xlink",Nt=function(e){return":"===e.charAt(5)&&"xlink"===e.slice(0,5)},Mt=function(e){return Nt(e)?e.slice(6,e.length):""},Ut=function(e){return null==e||!1===e};function Ft(e){for(var n=e.data,t=e,r=e;a(r.componentInstance);)(r=r.componentInstance._vnode)&&r.data&&(n=Vt(r.data,n));for(;a(t=t.parent);)t&&t.data&&(n=Vt(n,t.data));return function(e,n){if(a(e)||a(n))return qt(e,Ht(n));return""}(n.staticClass,n.class)}function Vt(e,n){return{staticClass:qt(e.staticClass,n.staticClass),class:a(e.class)?[e.class,n.class]:n.class}}function qt(e,n){return e?n?e+" "+n:e:n||""}function Ht(e){return Array.isArray(e)?function(e){for(var n,t="",r=0,o=e.length;r<o;r++)a(n=Ht(e[r]))&&""!==n&&(t&&(t+=" "),t+=n);return t}(e):u(e)?function(e){var n="";for(var t in e)e[t]&&(n&&(n+=" "),n+=t);return n}(e):"string"==typeof e?e:""}var Kt={svg:"http://www.w3.org/2000/svg",math:"http://www.w3.org/1998/Math/MathML"},Wt=g("html,body,base,head,link,meta,style,title,address,article,aside,footer,header,h1,h2,h3,h4,h5,h6,hgroup,nav,section,div,dd,dl,dt,figcaption,figure,picture,hr,img,li,main,ol,p,pre,ul,a,b,abbr,bdi,bdo,br,cite,code,data,dfn,em,i,kbd,mark,q,rp,rt,rtc,ruby,s,samp,small,span,strong,sub,sup,time,u,var,wbr,area,audio,map,track,video,embed,object,param,source,canvas,script,noscript,del,ins,caption,col,colgroup,table,thead,tbody,td,th,tr,button,datalist,fieldset,form,input,label,legend,meter,optgroup,option,output,progress,select,textarea,details,dialog,menu,menuitem,summary,content,element,shadow,template,blockquote,iframe,tfoot"),Gt=g("svg,animate,circle,clippath,cursor,defs,desc,ellipse,filter,font-face,foreignobject,g,glyph,image,line,marker,mask,missing-glyph,path,pattern,polygon,polyline,rect,switch,symbol,text,textpath,tspan,use,view",!0),Zt=function(e){return Wt(e)||Gt(e)};var Jt=Object.create(null);var Xt=g("text,number,password,search,email,tel,url");var Yt=Object.freeze({createElement:function(e,n){var t=document.createElement(e);return"select"!==e||n.data&&n.data.attrs&&void 0!==n.data.attrs.multiple&&t.setAttribute("multiple","multiple"),t},createElementNS:function(e,n){return document.createElementNS(Kt[e],n)},createTextNode:function(e){return document.createTextNode(e)},createComment:function(e){return document.createComment(e)},insertBefore:function(e,n,t){e.insertBefore(n,t)},removeChild:function(e,n){e.removeChild(n)},appendChild:function(e,n){e.appendChild(n)},parentNode:function(e){return e.parentNode},nextSibling:function(e){return e.nextSibling},tagName:function(e){return e.tagName},setTextContent:function(e,n){e.textContent=n},setStyleScope:function(e,n){e.setAttribute(n,"")}}),Qt={create:function(e,n){er(n)},update:function(e,n){e.data.ref!==n.data.ref&&(er(e,!0),er(n))},destroy:function(e){er(e,!0)}};function er(e,n){var t=e.data.ref;if(a(t)){var r=e.context,o=e.componentInstance||e.elm,i=r.$refs;n?Array.isArray(i[t])?y(i[t],o):i[t]===o&&(i[t]=void 0):e.data.refInFor?Array.isArray(i[t])?i[t].indexOf(o)<0&&i[t].push(o):i[t]=[o]:i[t]=o}}var nr=new he("",{},[]),tr=["create","activate","update","remove","destroy"];function rr(e,n){return e.key===n.key&&e.asyncFactory===n.asyncFactory&&(e.tag===n.tag&&e.isComment===n.isComment&&a(e.data)===a(n.data)&&function(e,n){if("input"!==e.tag)return!0;var t,r=a(t=e.data)&&a(t=t.attrs)&&t.type,o=a(t=n.data)&&a(t=t.attrs)&&t.type;return r===o||Xt(r)&&Xt(o)}(e,n)||s(e.isAsyncPlaceholder)&&i(n.asyncFactory.error))}function or(e,n,t){var r,o,i={};for(r=n;r<=t;++r)a(o=e[r].key)&&(i[o]=r);return i}var ir={create:ar,update:ar,destroy:function(e){ar(e,nr)}};function ar(e,n){(e.data.directives||n.data.directives)&&function(e,n){var t,r,o,i=e===nr,a=n===nr,s=cr(e.data.directives,e.context),c=cr(n.data.directives,n.context),u=[],l=[];for(t in c)r=s[t],o=c[t],r?(o.oldValue=r.value,o.oldArg=r.arg,lr(o,"update",n,e),o.def&&o.def.componentUpdated&&l.push(o)):(lr(o,"bind",n,e),o.def&&o.def.inserted&&u.push(o));if(u.length){var p=function(){for(var t=0;t<u.length;t++)lr(u[t],"inserted",n,e)};i?ln(n,"insert",p):p()}l.length&&ln(n,"postpatch",(function(){for(var t=0;t<l.length;t++)lr(l[t],"componentUpdated",n,e)}));if(!i)for(t in s)c[t]||lr(s[t],"unbind",e,e,a)}(e,n)}var sr=Object.create(null);function cr(e,n){var t,r,o=Object.create(null);if(!e)return o;for(t=0;t<e.length;t++)(r=e[t]).modifiers||(r.modifiers=sr),o[ur(r)]=r,r.def=De(n.$options,"directives",r.name);return o}function ur(e){return e.rawName||e.name+"."+Object.keys(e.modifiers||{}).join(".")}function lr(e,n,t,r,o){var i=e.def&&e.def[n];if(i)try{i(t.elm,e,t,r,o)}catch(r){qe(r,t.context,"directive "+e.name+" "+n+" hook")}}var pr=[Qt,ir];function dr(e,n){var t=n.componentOptions;if(!(a(t)&&!1===t.Ctor.options.inheritAttrs||i(e.data.attrs)&&i(n.data.attrs))){var r,o,s=n.elm,c=e.data.attrs||{},u=n.data.attrs||{};for(r in a(u.__ob__)&&(u=n.data.attrs=A({},u)),u)o=u[r],c[r]!==o&&fr(s,r,o,n.data.pre);for(r in(J||Y)&&u.value!==c.value&&fr(s,"value",u.value),c)i(u[r])&&(Nt(r)?s.removeAttributeNS(Dt,Mt(r)):Rt(r)||s.removeAttribute(r))}}function fr(e,n,t,r){r||e.tagName.indexOf("-")>-1?vr(e,n,t):Bt(n)?Ut(t)?e.removeAttribute(n):(t="allowfullscreen"===n&&"EMBED"===e.tagName?"true":n,e.setAttribute(n,t)):Rt(n)?e.setAttribute(n,function(e,n){return Ut(n)||"false"===n?"false":"contenteditable"===e&&zt(n)?n:"true"}(n,t)):Nt(n)?Ut(t)?e.removeAttributeNS(Dt,Mt(n)):e.setAttributeNS(Dt,n,t):vr(e,n,t)}function vr(e,n,t){if(Ut(t))e.removeAttribute(n);else{if(J&&!X&&"TEXTAREA"===e.tagName&&"placeholder"===n&&""!==t&&!e.__ieph){var r=function(n){n.stopImmediatePropagation(),e.removeEventListener("input",r)};e.addEventListener("input",r),e.__ieph=!0}e.setAttribute(n,t)}}var hr={create:dr,update:dr};function mr(e,n){var t=n.elm,r=n.data,o=e.data;if(!(i(r.staticClass)&&i(r.class)&&(i(o)||i(o.staticClass)&&i(o.class)))){var s=Ft(n),c=t._transitionClasses;a(c)&&(s=qt(s,Ht(c))),s!==t._prevClass&&(t.setAttribute("class",s),t._prevClass=s)}}var gr,br={create:mr,update:mr};function yr(e,n,t){var r=gr;return function o(){var i=n.apply(null,arguments);null!==i&&kr(e,o,t,r)}}var xr=Ze&&!(ee&&Number(ee[1])<=53);function jr(e,n,t,r){if(xr){var o=ut,i=n;n=i._wrapper=function(e){if(e.target===e.currentTarget||e.timeStamp>=o||e.timeStamp<=0||e.target.ownerDocument!==document)return i.apply(this,arguments)}}gr.addEventListener(e,n,te?{capture:t,passive:r}:t)}function kr(e,n,t,r){(r||gr).removeEventListener(e,n._wrapper||n,t)}function wr(e,n){if(!i(e.data.on)||!i(n.data.on)){var t=n.data.on||{},r=e.data.on||{};gr=n.elm,function(e){if(a(e.__r)){var n=J?"change":"input";e[n]=[].concat(e.__r,e[n]||[]),delete e.__r}a(e.__c)&&(e.change=[].concat(e.__c,e.change||[]),delete e.__c)}(t),un(t,r,jr,kr,yr,n.context),gr=void 0}}var _r,Sr={create:wr,update:wr};function Er(e,n){if(!i(e.data.domProps)||!i(n.data.domProps)){var t,r,o=n.elm,s=e.data.domProps||{},c=n.data.domProps||{};for(t in a(c.__ob__)&&(c=n.data.domProps=A({},c)),s)t in c||(o[t]="");for(t in c){if(r=c[t],"textContent"===t||"innerHTML"===t){if(n.children&&(n.children.length=0),r===s[t])continue;1===o.childNodes.length&&o.removeChild(o.childNodes[0])}if("value"===t&&"PROGRESS"!==o.tagName){o._value=r;var u=i(r)?"":String(r);Cr(o,u)&&(o.value=u)}else if("innerHTML"===t&&Gt(o.tagName)&&i(o.innerHTML)){(_r=_r||document.createElement("div")).innerHTML="<svg>"+r+"</svg>";for(var l=_r.firstChild;o.firstChild;)o.removeChild(o.firstChild);for(;l.firstChild;)o.appendChild(l.firstChild)}else if(r!==s[t])try{o[t]=r}catch(e){}}}}function Cr(e,n){return!e.composing&&("OPTION"===e.tagName||function(e,n){var t=!0;try{t=document.activeElement!==e}catch(e){}return t&&e.value!==n}(e,n)||function(e,n){var t=e.value,r=e._vModifiers;if(a(r)){if(r.number)return m(t)!==m(n);if(r.trim)return t.trim()!==n.trim()}return t!==n}(e,n))}var Ir={create:Er,update:Er},Or=k((function(e){var n={},t=/:(.+)/;return e.split(/;(?![^(]*\))/g).forEach((function(e){if(e){var r=e.split(t);r.length>1&&(n[r[0].trim()]=r[1].trim())}})),n}));function Ar(e){var n=Tr(e.style);return e.staticStyle?A(e.staticStyle,n):n}function Tr(e){return Array.isArray(e)?T(e):"string"==typeof e?Or(e):e}var Pr,$r=/^--/,Lr=/\s*!important$/,Rr=function(e,n,t){if($r.test(n))e.style.setProperty(n,t);else if(Lr.test(t))e.style.setProperty(C(n),t.replace(Lr,""),"important");else{var r=Br(n);if(Array.isArray(t))for(var o=0,i=t.length;o<i;o++)e.style[r]=t[o];else e.style[r]=t}},zr=["Webkit","Moz","ms"],Br=k((function(e){if(Pr=Pr||document.createElement("div").style,"filter"!==(e=_(e))&&e in Pr)return e;for(var n=e.charAt(0).toUpperCase()+e.slice(1),t=0;t<zr.length;t++){var r=zr[t]+n;if(r in Pr)return r}}));function Dr(e,n){var t=n.data,r=e.data;if(!(i(t.staticStyle)&&i(t.style)&&i(r.staticStyle)&&i(r.style))){var o,s,c=n.elm,u=r.staticStyle,l=r.normalizedStyle||r.style||{},p=u||l,d=Tr(n.data.style)||{};n.data.normalizedStyle=a(d.__ob__)?A({},d):d;var f=function(e,n){var t,r={};if(n)for(var o=e;o.componentInstance;)(o=o.componentInstance._vnode)&&o.data&&(t=Ar(o.data))&&A(r,t);(t=Ar(e.data))&&A(r,t);for(var i=e;i=i.parent;)i.data&&(t=Ar(i.data))&&A(r,t);return r}(n,!0);for(s in p)i(f[s])&&Rr(c,s,"");for(s in f)(o=f[s])!==p[s]&&Rr(c,s,null==o?"":o)}}var Nr={create:Dr,update:Dr},Mr=/\s+/;function Ur(e,n){if(n&&(n=n.trim()))if(e.classList)n.indexOf(" ")>-1?n.split(Mr).forEach((function(n){return e.classList.add(n)})):e.classList.add(n);else{var t=" "+(e.getAttribute("class")||"")+" ";t.indexOf(" "+n+" ")<0&&e.setAttribute("class",(t+n).trim())}}function Fr(e,n){if(n&&(n=n.trim()))if(e.classList)n.indexOf(" ")>-1?n.split(Mr).forEach((function(n){return e.classList.remove(n)})):e.classList.remove(n),e.classList.length||e.removeAttribute("class");else{for(var t=" "+(e.getAttribute("class")||"")+" ",r=" "+n+" ";t.indexOf(r)>=0;)t=t.replace(r," ");(t=t.trim())?e.setAttribute("class",t):e.removeAttribute("class")}}function Vr(e){if(e){if("object"==typeof e){var n={};return!1!==e.css&&A(n,qr(e.name||"v")),A(n,e),n}return"string"==typeof e?qr(e):void 0}}var qr=k((function(e){return{enterClass:e+"-enter",enterToClass:e+"-enter-to",enterActiveClass:e+"-enter-active",leaveClass:e+"-leave",leaveToClass:e+"-leave-to",leaveActiveClass:e+"-leave-active"}})),Hr=K&&!X,Kr="transition",Wr="transitionend",Gr="animation",Zr="animationend";Hr&&(void 0===window.ontransitionend&&void 0!==window.onwebkittransitionend&&(Kr="WebkitTransition",Wr="webkitTransitionEnd"),void 0===window.onanimationend&&void 0!==window.onwebkitanimationend&&(Gr="WebkitAnimation",Zr="webkitAnimationEnd"));var Jr=K?window.requestAnimationFrame?window.requestAnimationFrame.bind(window):setTimeout:function(e){return e()};function Xr(e){Jr((function(){Jr(e)}))}function Yr(e,n){var t=e._transitionClasses||(e._transitionClasses=[]);t.indexOf(n)<0&&(t.push(n),Ur(e,n))}function Qr(e,n){e._transitionClasses&&y(e._transitionClasses,n),Fr(e,n)}function eo(e,n,t){var r=to(e,n),o=r.type,i=r.timeout,a=r.propCount;if(!o)return t();var s="transition"===o?Wr:Zr,c=0,u=function(){e.removeEventListener(s,l),t()},l=function(n){n.target===e&&++c>=a&&u()};setTimeout((function(){c<a&&u()}),i+1),e.addEventListener(s,l)}var no=/\b(transform|all)(,|$)/;function to(e,n){var t,r=window.getComputedStyle(e),o=(r[Kr+"Delay"]||"").split(", "),i=(r[Kr+"Duration"]||"").split(", "),a=ro(o,i),s=(r[Gr+"Delay"]||"").split(", "),c=(r[Gr+"Duration"]||"").split(", "),u=ro(s,c),l=0,p=0;return"transition"===n?a>0&&(t="transition",l=a,p=i.length):"animation"===n?u>0&&(t="animation",l=u,p=c.length):p=(t=(l=Math.max(a,u))>0?a>u?"transition":"animation":null)?"transition"===t?i.length:c.length:0,{type:t,timeout:l,propCount:p,hasTransform:"transition"===t&&no.test(r[Kr+"Property"])}}function ro(e,n){for(;e.length<n.length;)e=e.concat(e);return Math.max.apply(null,n.map((function(n,t){return oo(n)+oo(e[t])})))}function oo(e){return 1e3*Number(e.slice(0,-1).replace(",","."))}function io(e,n){var t=e.elm;a(t._leaveCb)&&(t._leaveCb.cancelled=!0,t._leaveCb());var r=Vr(e.data.transition);if(!i(r)&&!a(t._enterCb)&&1===t.nodeType){for(var o=r.css,s=r.type,c=r.enterClass,l=r.enterToClass,p=r.enterActiveClass,d=r.appearClass,f=r.appearToClass,v=r.appearActiveClass,h=r.beforeEnter,g=r.enter,b=r.afterEnter,y=r.enterCancelled,x=r.beforeAppear,j=r.appear,k=r.afterAppear,w=r.appearCancelled,_=r.duration,S=Yn,E=Yn.$vnode;E&&E.parent;)S=E.context,E=E.parent;var C=!S._isMounted||!e.isRootInsert;if(!C||j||""===j){var I=C&&d?d:c,O=C&&v?v:p,A=C&&f?f:l,T=C&&x||h,P=C&&"function"==typeof j?j:g,$=C&&k||b,L=C&&w||y,R=m(u(_)?_.enter:_);0;var z=!1!==o&&!X,D=co(P),N=t._enterCb=B((function(){z&&(Qr(t,A),Qr(t,O)),N.cancelled?(z&&Qr(t,I),L&&L(t)):$&&$(t),t._enterCb=null}));e.data.show||ln(e,"insert",(function(){var n=t.parentNode,r=n&&n._pending&&n._pending[e.key];r&&r.tag===e.tag&&r.elm._leaveCb&&r.elm._leaveCb(),P&&P(t,N)})),T&&T(t),z&&(Yr(t,I),Yr(t,O),Xr((function(){Qr(t,I),N.cancelled||(Yr(t,A),D||(so(R)?setTimeout(N,R):eo(t,s,N)))}))),e.data.show&&(n&&n(),P&&P(t,N)),z||D||N()}}}function ao(e,n){var t=e.elm;a(t._enterCb)&&(t._enterCb.cancelled=!0,t._enterCb());var r=Vr(e.data.transition);if(i(r)||1!==t.nodeType)return n();if(!a(t._leaveCb)){var o=r.css,s=r.type,c=r.leaveClass,l=r.leaveToClass,p=r.leaveActiveClass,d=r.beforeLeave,f=r.leave,v=r.afterLeave,h=r.leaveCancelled,g=r.delayLeave,b=r.duration,y=!1!==o&&!X,x=co(f),j=m(u(b)?b.leave:b);0;var k=t._leaveCb=B((function(){t.parentNode&&t.parentNode._pending&&(t.parentNode._pending[e.key]=null),y&&(Qr(t,l),Qr(t,p)),k.cancelled?(y&&Qr(t,c),h&&h(t)):(n(),v&&v(t)),t._leaveCb=null}));g?g(w):w()}function w(){k.cancelled||(!e.data.show&&t.parentNode&&((t.parentNode._pending||(t.parentNode._pending={}))[e.key]=e),d&&d(t),y&&(Yr(t,c),Yr(t,p),Xr((function(){Qr(t,c),k.cancelled||(Yr(t,l),x||(so(j)?setTimeout(k,j):eo(t,s,k)))}))),f&&f(t,k),y||x||k())}}function so(e){return"number"==typeof e&&!isNaN(e)}function co(e){if(i(e))return!1;var n=e.fns;return a(n)?co(Array.isArray(n)?n[0]:n):(e._length||e.length)>1}function uo(e,n){!0!==n.data.show&&io(n)}var lo=function(e){var n,t,r={},o=e.modules,u=e.nodeOps;for(n=0;n<tr.length;++n)for(r[tr[n]]=[],t=0;t<o.length;++t)a(o[t][tr[n]])&&r[tr[n]].push(o[t][tr[n]]);function l(e){var n=u.parentNode(e);a(n)&&u.removeChild(n,e)}function p(e,n,t,o,i,c,l){if(a(e.elm)&&a(c)&&(e=c[l]=ye(e)),e.isRootInsert=!i,!function(e,n,t,o){var i=e.data;if(a(i)){var c=a(e.componentInstance)&&i.keepAlive;if(a(i=i.hook)&&a(i=i.init)&&i(e,!1),a(e.componentInstance))return d(e,n),f(t,e.elm,o),s(c)&&function(e,n,t,o){var i,s=e;for(;s.componentInstance;)if(s=s.componentInstance._vnode,a(i=s.data)&&a(i=i.transition)){for(i=0;i<r.activate.length;++i)r.activate[i](nr,s);n.push(s);break}f(t,e.elm,o)}(e,n,t,o),!0}}(e,n,t,o)){var p=e.data,h=e.children,g=e.tag;a(g)?(e.elm=e.ns?u.createElementNS(e.ns,g):u.createElement(g,e),b(e),v(e,h,n),a(p)&&m(e,n),f(t,e.elm,o)):s(e.isComment)?(e.elm=u.createComment(e.text),f(t,e.elm,o)):(e.elm=u.createTextNode(e.text),f(t,e.elm,o))}}function d(e,n){a(e.data.pendingInsert)&&(n.push.apply(n,e.data.pendingInsert),e.data.pendingInsert=null),e.elm=e.componentInstance.$el,h(e)?(m(e,n),b(e)):(er(e),n.push(e))}function f(e,n,t){a(e)&&(a(t)?u.parentNode(t)===e&&u.insertBefore(e,n,t):u.appendChild(e,n))}function v(e,n,t){if(Array.isArray(n)){0;for(var r=0;r<n.length;++r)p(n[r],t,e.elm,null,!0,n,r)}else c(e.text)&&u.appendChild(e.elm,u.createTextNode(String(e.text)))}function h(e){for(;e.componentInstance;)e=e.componentInstance._vnode;return a(e.tag)}function m(e,t){for(var o=0;o<r.create.length;++o)r.create[o](nr,e);a(n=e.data.hook)&&(a(n.create)&&n.create(nr,e),a(n.insert)&&t.push(e))}function b(e){var n;if(a(n=e.fnScopeId))u.setStyleScope(e.elm,n);else for(var t=e;t;)a(n=t.context)&&a(n=n.$options._scopeId)&&u.setStyleScope(e.elm,n),t=t.parent;a(n=Yn)&&n!==e.context&&n!==e.fnContext&&a(n=n.$options._scopeId)&&u.setStyleScope(e.elm,n)}function y(e,n,t,r,o,i){for(;r<=o;++r)p(t[r],i,e,n,!1,t,r)}function x(e){var n,t,o=e.data;if(a(o))for(a(n=o.hook)&&a(n=n.destroy)&&n(e),n=0;n<r.destroy.length;++n)r.destroy[n](e);if(a(n=e.children))for(t=0;t<e.children.length;++t)x(e.children[t])}function j(e,n,t){for(;n<=t;++n){var r=e[n];a(r)&&(a(r.tag)?(k(r),x(r)):l(r.elm))}}function k(e,n){if(a(n)||a(e.data)){var t,o=r.remove.length+1;for(a(n)?n.listeners+=o:n=function(e,n){function t(){0==--t.listeners&&l(e)}return t.listeners=n,t}(e.elm,o),a(t=e.componentInstance)&&a(t=t._vnode)&&a(t.data)&&k(t,n),t=0;t<r.remove.length;++t)r.remove[t](e,n);a(t=e.data.hook)&&a(t=t.remove)?t(e,n):n()}else l(e.elm)}function w(e,n,t,r){for(var o=t;o<r;o++){var i=n[o];if(a(i)&&rr(e,i))return o}}function _(e,n,t,o,c,l){if(e!==n){a(n.elm)&&a(o)&&(n=o[c]=ye(n));var d=n.elm=e.elm;if(s(e.isAsyncPlaceholder))a(n.asyncFactory.resolved)?C(e.elm,n,t):n.isAsyncPlaceholder=!0;else if(s(n.isStatic)&&s(e.isStatic)&&n.key===e.key&&(s(n.isCloned)||s(n.isOnce)))n.componentInstance=e.componentInstance;else{var f,v=n.data;a(v)&&a(f=v.hook)&&a(f=f.prepatch)&&f(e,n);var m=e.children,g=n.children;if(a(v)&&h(n)){for(f=0;f<r.update.length;++f)r.update[f](e,n);a(f=v.hook)&&a(f=f.update)&&f(e,n)}i(n.text)?a(m)&&a(g)?m!==g&&function(e,n,t,r,o){var s,c,l,d=0,f=0,v=n.length-1,h=n[0],m=n[v],g=t.length-1,b=t[0],x=t[g],k=!o;for(0;d<=v&&f<=g;)i(h)?h=n[++d]:i(m)?m=n[--v]:rr(h,b)?(_(h,b,r,t,f),h=n[++d],b=t[++f]):rr(m,x)?(_(m,x,r,t,g),m=n[--v],x=t[--g]):rr(h,x)?(_(h,x,r,t,g),k&&u.insertBefore(e,h.elm,u.nextSibling(m.elm)),h=n[++d],x=t[--g]):rr(m,b)?(_(m,b,r,t,f),k&&u.insertBefore(e,m.elm,h.elm),m=n[--v],b=t[++f]):(i(s)&&(s=or(n,d,v)),i(c=a(b.key)?s[b.key]:w(b,n,d,v))?p(b,r,e,h.elm,!1,t,f):rr(l=n[c],b)?(_(l,b,r,t,f),n[c]=void 0,k&&u.insertBefore(e,l.elm,h.elm)):p(b,r,e,h.elm,!1,t,f),b=t[++f]);d>v?y(e,i(t[g+1])?null:t[g+1].elm,t,f,g,r):f>g&&j(n,d,v)}(d,m,g,t,l):a(g)?(a(e.text)&&u.setTextContent(d,""),y(d,null,g,0,g.length-1,t)):a(m)?j(m,0,m.length-1):a(e.text)&&u.setTextContent(d,""):e.text!==n.text&&u.setTextContent(d,n.text),a(v)&&a(f=v.hook)&&a(f=f.postpatch)&&f(e,n)}}}function S(e,n,t){if(s(t)&&a(e.parent))e.parent.data.pendingInsert=n;else for(var r=0;r<n.length;++r)n[r].data.hook.insert(n[r])}var E=g("attrs,class,staticClass,staticStyle,key");function C(e,n,t,r){var o,i=n.tag,c=n.data,u=n.children;if(r=r||c&&c.pre,n.elm=e,s(n.isComment)&&a(n.asyncFactory))return n.isAsyncPlaceholder=!0,!0;if(a(c)&&(a(o=c.hook)&&a(o=o.init)&&o(n,!0),a(o=n.componentInstance)))return d(n,t),!0;if(a(i)){if(a(u))if(e.hasChildNodes())if(a(o=c)&&a(o=o.domProps)&&a(o=o.innerHTML)){if(o!==e.innerHTML)return!1}else{for(var l=!0,p=e.firstChild,f=0;f<u.length;f++){if(!p||!C(p,u[f],t,r)){l=!1;break}p=p.nextSibling}if(!l||p)return!1}else v(n,u,t);if(a(c)){var h=!1;for(var g in c)if(!E(g)){h=!0,m(n,t);break}!h&&c.class&&an(c.class)}}else e.data!==n.text&&(e.data=n.text);return!0}return function(e,n,t,o){if(!i(n)){var c,l=!1,d=[];if(i(e))l=!0,p(n,d);else{var f=a(e.nodeType);if(!f&&rr(e,n))_(e,n,d,null,null,o);else{if(f){if(1===e.nodeType&&e.hasAttribute("data-server-rendered")&&(e.removeAttribute("data-server-rendered"),t=!0),s(t)&&C(e,n,d))return S(n,d,!0),e;c=e,e=new he(u.tagName(c).toLowerCase(),{},[],void 0,c)}var v=e.elm,m=u.parentNode(v);if(p(n,d,v._leaveCb?null:m,u.nextSibling(v)),a(n.parent))for(var g=n.parent,b=h(n);g;){for(var y=0;y<r.destroy.length;++y)r.destroy[y](g);if(g.elm=n.elm,b){for(var k=0;k<r.create.length;++k)r.create[k](nr,g);var w=g.data.hook.insert;if(w.merged)for(var E=1;E<w.fns.length;E++)w.fns[E]()}else er(g);g=g.parent}a(m)?j([e],0,0):a(e.tag)&&x(e)}}return S(n,d,l),n.elm}a(e)&&x(e)}}({nodeOps:Yt,modules:[hr,br,Sr,Ir,Nr,K?{create:uo,activate:uo,remove:function(e,n){!0!==e.data.show?ao(e,n):n()}}:{}].concat(pr)});X&&document.addEventListener("selectionchange",(function(){var e=document.activeElement;e&&e.vmodel&&yo(e,"input")}));var po={inserted:function(e,n,t,r){"select"===t.tag?(r.elm&&!r.elm._vOptions?ln(t,"postpatch",(function(){po.componentUpdated(e,n,t)})):fo(e,n,t.context),e._vOptions=[].map.call(e.options,mo)):("textarea"===t.tag||Xt(e.type))&&(e._vModifiers=n.modifiers,n.modifiers.lazy||(e.addEventListener("compositionstart",go),e.addEventListener("compositionend",bo),e.addEventListener("change",bo),X&&(e.vmodel=!0)))},componentUpdated:function(e,n,t){if("select"===t.tag){fo(e,n,t.context);var r=e._vOptions,o=e._vOptions=[].map.call(e.options,mo);if(o.some((function(e,n){return!R(e,r[n])})))(e.multiple?n.value.some((function(e){return ho(e,o)})):n.value!==n.oldValue&&ho(n.value,o))&&yo(e,"change")}}};function fo(e,n,t){vo(e,n,t),(J||Y)&&setTimeout((function(){vo(e,n,t)}),0)}function vo(e,n,t){var r=n.value,o=e.multiple;if(!o||Array.isArray(r)){for(var i,a,s=0,c=e.options.length;s<c;s++)if(a=e.options[s],o)i=z(r,mo(a))>-1,a.selected!==i&&(a.selected=i);else if(R(mo(a),r))return void(e.selectedIndex!==s&&(e.selectedIndex=s));o||(e.selectedIndex=-1)}}function ho(e,n){return n.every((function(n){return!R(n,e)}))}function mo(e){return"_value"in e?e._value:e.value}function go(e){e.target.composing=!0}function bo(e){e.target.composing&&(e.target.composing=!1,yo(e.target,"input"))}function yo(e,n){var t=document.createEvent("HTMLEvents");t.initEvent(n,!0,!0),e.dispatchEvent(t)}function xo(e){return!e.componentInstance||e.data&&e.data.transition?e:xo(e.componentInstance._vnode)}var jo={model:po,show:{bind:function(e,n,t){var r=n.value,o=(t=xo(t)).data&&t.data.transition,i=e.__vOriginalDisplay="none"===e.style.display?"":e.style.display;r&&o?(t.data.show=!0,io(t,(function(){e.style.display=i}))):e.style.display=r?i:"none"},update:function(e,n,t){var r=n.value;!r!=!n.oldValue&&((t=xo(t)).data&&t.data.transition?(t.data.show=!0,r?io(t,(function(){e.style.display=e.__vOriginalDisplay})):ao(t,(function(){e.style.display="none"}))):e.style.display=r?e.__vOriginalDisplay:"none")},unbind:function(e,n,t,r,o){o||(e.style.display=e.__vOriginalDisplay)}}},ko={name:String,appear:Boolean,css:Boolean,mode:String,type:String,enterClass:String,leaveClass:String,enterToClass:String,leaveToClass:String,enterActiveClass:String,leaveActiveClass:String,appearClass:String,appearActiveClass:String,appearToClass:String,duration:[Number,String,Object]};function wo(e){var n=e&&e.componentOptions;return n&&n.Ctor.options.abstract?wo(Wn(n.children)):e}function _o(e){var n={},t=e.$options;for(var r in t.propsData)n[r]=e[r];var o=t._parentListeners;for(var i in o)n[_(i)]=o[i];return n}function So(e,n){if(/\d-keep-alive$/.test(n.tag))return e("keep-alive",{props:n.componentOptions.propsData})}var Eo=function(e){return e.tag||gn(e)},Co=function(e){return"show"===e.name},Io={name:"transition",props:ko,abstract:!0,render:function(e){var n=this,t=this.$slots.default;if(t&&(t=t.filter(Eo)).length){0;var r=this.mode;0;var o=t[0];if(function(e){for(;e=e.parent;)if(e.data.transition)return!0}(this.$vnode))return o;var i=wo(o);if(!i)return o;if(this._leaving)return So(e,o);var a="__transition-"+this._uid+"-";i.key=null==i.key?i.isComment?a+"comment":a+i.tag:c(i.key)?0===String(i.key).indexOf(a)?i.key:a+i.key:i.key;var s=(i.data||(i.data={})).transition=_o(this),u=this._vnode,l=wo(u);if(i.data.directives&&i.data.directives.some(Co)&&(i.data.show=!0),l&&l.data&&!function(e,n){return n.key===e.key&&n.tag===e.tag}(i,l)&&!gn(l)&&(!l.componentInstance||!l.componentInstance._vnode.isComment)){var p=l.data.transition=A({},s);if("out-in"===r)return this._leaving=!0,ln(p,"afterLeave",(function(){n._leaving=!1,n.$forceUpdate()})),So(e,o);if("in-out"===r){if(gn(i))return u;var d,f=function(){d()};ln(s,"afterEnter",f),ln(s,"enterCancelled",f),ln(p,"delayLeave",(function(e){d=e}))}}return o}}},Oo=A({tag:String,moveClass:String},ko);function Ao(e){e.elm._moveCb&&e.elm._moveCb(),e.elm._enterCb&&e.elm._enterCb()}function To(e){e.data.newPos=e.elm.getBoundingClientRect()}function Po(e){var n=e.data.pos,t=e.data.newPos,r=n.left-t.left,o=n.top-t.top;if(r||o){e.data.moved=!0;var i=e.elm.style;i.transform=i.WebkitTransform="translate("+r+"px,"+o+"px)",i.transitionDuration="0s"}}delete Oo.mode;var $o={Transition:Io,TransitionGroup:{props:Oo,beforeMount:function(){var e=this,n=this._update;this._update=function(t,r){var o=Qn(e);e.__patch__(e._vnode,e.kept,!1,!0),e._vnode=e.kept,o(),n.call(e,t,r)}},render:function(e){for(var n=this.tag||this.$vnode.data.tag||"span",t=Object.create(null),r=this.prevChildren=this.children,o=this.$slots.default||[],i=this.children=[],a=_o(this),s=0;s<o.length;s++){var c=o[s];if(c.tag)if(null!=c.key&&0!==String(c.key).indexOf("__vlist"))i.push(c),t[c.key]=c,(c.data||(c.data={})).transition=a;else;}if(r){for(var u=[],l=[],p=0;p<r.length;p++){var d=r[p];d.data.transition=a,d.data.pos=d.elm.getBoundingClientRect(),t[d.key]?u.push(d):l.push(d)}this.kept=e(n,null,u),this.removed=l}return e(n,null,i)},updated:function(){var e=this.prevChildren,n=this.moveClass||(this.name||"v")+"-move";e.length&&this.hasMove(e[0].elm,n)&&(e.forEach(Ao),e.forEach(To),e.forEach(Po),this._reflow=document.body.offsetHeight,e.forEach((function(e){if(e.data.moved){var t=e.elm,r=t.style;Yr(t,n),r.transform=r.WebkitTransform=r.transitionDuration="",t.addEventListener(Wr,t._moveCb=function e(r){r&&r.target!==t||r&&!/transform$/.test(r.propertyName)||(t.removeEventListener(Wr,e),t._moveCb=null,Qr(t,n))})}})))},methods:{hasMove:function(e,n){if(!Hr)return!1;if(this._hasMove)return this._hasMove;var t=e.cloneNode();e._transitionClasses&&e._transitionClasses.forEach((function(e){Fr(t,e)})),Ur(t,n),t.style.display="none",this.$el.appendChild(t);var r=to(t);return this.$el.removeChild(t),this._hasMove=r.hasTransform}}}};St.config.mustUseProp=function(e,n,t){return"value"===t&&Lt(e)&&"button"!==n||"selected"===t&&"option"===e||"checked"===t&&"input"===e||"muted"===t&&"video"===e},St.config.isReservedTag=Zt,St.config.isReservedAttr=$t,St.config.getTagNamespace=function(e){return Gt(e)?"svg":"math"===e?"math":void 0},St.config.isUnknownElement=function(e){if(!K)return!0;if(Zt(e))return!1;if(e=e.toLowerCase(),null!=Jt[e])return Jt[e];var n=document.createElement(e);return e.indexOf("-")>-1?Jt[e]=n.constructor===window.HTMLUnknownElement||n.constructor===window.HTMLElement:Jt[e]=/HTMLUnknownElement/.test(n.toString())},A(St.options.directives,jo),A(St.options.components,$o),St.prototype.__patch__=K?lo:P,St.prototype.$mount=function(e,n){return function(e,n,t){var r;return e.$el=n,e.$options.render||(e.$options.render=ge),tt(e,"beforeMount"),r=function(){e._update(e._render(),t)},new vt(e,r,P,{before:function(){e._isMounted&&!e._isDestroyed&&tt(e,"beforeUpdate")}},!0),t=!1,null==e.$vnode&&(e._isMounted=!0,tt(e,"mounted")),e}(this,e=e&&K?function(e){if("string"==typeof e){var n=document.querySelector(e);return n||document.createElement("div")}return e}(e):void 0,n)},K&&setTimeout((function(){M.devtools&&ie&&ie.emit("init",St)}),0);var Lo=St;
/*!
  * vue-router v3.5.3
  * (c) 2021 Evan You
  * @license MIT
  */function Ro(e,n){for(var t in n)e[t]=n[t];return e}var zo=/[!'()*]/g,Bo=function(e){return"%"+e.charCodeAt(0).toString(16)},Do=/%2C/g,No=function(e){return encodeURIComponent(e).replace(zo,Bo).replace(Do,",")};function Mo(e){try{return decodeURIComponent(e)}catch(e){0}return e}var Uo=function(e){return null==e||"object"==typeof e?e:String(e)};function Fo(e){var n={};return(e=e.trim().replace(/^(\?|#|&)/,""))?(e.split("&").forEach((function(e){var t=e.replace(/\+/g," ").split("="),r=Mo(t.shift()),o=t.length>0?Mo(t.join("=")):null;void 0===n[r]?n[r]=o:Array.isArray(n[r])?n[r].push(o):n[r]=[n[r],o]})),n):n}function Vo(e){var n=e?Object.keys(e).map((function(n){var t=e[n];if(void 0===t)return"";if(null===t)return No(n);if(Array.isArray(t)){var r=[];return t.forEach((function(e){void 0!==e&&(null===e?r.push(No(n)):r.push(No(n)+"="+No(e)))})),r.join("&")}return No(n)+"="+No(t)})).filter((function(e){return e.length>0})).join("&"):null;return n?"?"+n:""}var qo=/\/?$/;function Ho(e,n,t,r){var o=r&&r.options.stringifyQuery,i=n.query||{};try{i=Ko(i)}catch(e){}var a={name:n.name||e&&e.name,meta:e&&e.meta||{},path:n.path||"/",hash:n.hash||"",query:i,params:n.params||{},fullPath:Zo(n,o),matched:e?Go(e):[]};return t&&(a.redirectedFrom=Zo(t,o)),Object.freeze(a)}function Ko(e){if(Array.isArray(e))return e.map(Ko);if(e&&"object"==typeof e){var n={};for(var t in e)n[t]=Ko(e[t]);return n}return e}var Wo=Ho(null,{path:"/"});function Go(e){for(var n=[];e;)n.unshift(e),e=e.parent;return n}function Zo(e,n){var t=e.path,r=e.query;void 0===r&&(r={});var o=e.hash;return void 0===o&&(o=""),(t||"/")+(n||Vo)(r)+o}function Jo(e,n,t){return n===Wo?e===n:!!n&&(e.path&&n.path?e.path.replace(qo,"")===n.path.replace(qo,"")&&(t||e.hash===n.hash&&Xo(e.query,n.query)):!(!e.name||!n.name)&&(e.name===n.name&&(t||e.hash===n.hash&&Xo(e.query,n.query)&&Xo(e.params,n.params))))}function Xo(e,n){if(void 0===e&&(e={}),void 0===n&&(n={}),!e||!n)return e===n;var t=Object.keys(e).sort(),r=Object.keys(n).sort();return t.length===r.length&&t.every((function(t,o){var i=e[t];if(r[o]!==t)return!1;var a=n[t];return null==i||null==a?i===a:"object"==typeof i&&"object"==typeof a?Xo(i,a):String(i)===String(a)}))}function Yo(e){for(var n=0;n<e.matched.length;n++){var t=e.matched[n];for(var r in t.instances){var o=t.instances[r],i=t.enteredCbs[r];if(o&&i){delete t.enteredCbs[r];for(var a=0;a<i.length;a++)o._isBeingDestroyed||i[a](o)}}}}var Qo={name:"RouterView",functional:!0,props:{name:{type:String,default:"default"}},render:function(e,n){var t=n.props,r=n.children,o=n.parent,i=n.data;i.routerView=!0;for(var a=o.$createElement,s=t.name,c=o.$route,u=o._routerViewCache||(o._routerViewCache={}),l=0,p=!1;o&&o._routerRoot!==o;){var d=o.$vnode?o.$vnode.data:{};d.routerView&&l++,d.keepAlive&&o._directInactive&&o._inactive&&(p=!0),o=o.$parent}if(i.routerViewDepth=l,p){var f=u[s],v=f&&f.component;return v?(f.configProps&&ei(v,i,f.route,f.configProps),a(v,i,r)):a()}var h=c.matched[l],m=h&&h.components[s];if(!h||!m)return u[s]=null,a();u[s]={component:m},i.registerRouteInstance=function(e,n){var t=h.instances[s];(n&&t!==e||!n&&t===e)&&(h.instances[s]=n)},(i.hook||(i.hook={})).prepatch=function(e,n){h.instances[s]=n.componentInstance},i.hook.init=function(e){e.data.keepAlive&&e.componentInstance&&e.componentInstance!==h.instances[s]&&(h.instances[s]=e.componentInstance),Yo(c)};var g=h.props&&h.props[s];return g&&(Ro(u[s],{route:c,configProps:g}),ei(m,i,c,g)),a(m,i,r)}};function ei(e,n,t,r){var o=n.props=function(e,n){switch(typeof n){case"undefined":return;case"object":return n;case"function":return n(e);case"boolean":return n?e.params:void 0;default:0}}(t,r);if(o){o=n.props=Ro({},o);var i=n.attrs=n.attrs||{};for(var a in o)e.props&&a in e.props||(i[a]=o[a],delete o[a])}}function ni(e,n,t){var r=e.charAt(0);if("/"===r)return e;if("?"===r||"#"===r)return n+e;var o=n.split("/");t&&o[o.length-1]||o.pop();for(var i=e.replace(/^\//,"").split("/"),a=0;a<i.length;a++){var s=i[a];".."===s?o.pop():"."!==s&&o.push(s)}return""!==o[0]&&o.unshift(""),o.join("/")}function ti(e){return e.replace(/\/+/g,"/")}var ri=Array.isArray||function(e){return"[object Array]"==Object.prototype.toString.call(e)},oi=bi,ii=li,ai=function(e,n){return di(li(e,n),n)},si=di,ci=gi,ui=new RegExp(["(\\\\.)","([\\/.])?(?:(?:\\:(\\w+)(?:\\(((?:\\\\.|[^\\\\()])+)\\))?|\\(((?:\\\\.|[^\\\\()])+)\\))([+*?])?|(\\*))"].join("|"),"g");function li(e,n){for(var t,r=[],o=0,i=0,a="",s=n&&n.delimiter||"/";null!=(t=ui.exec(e));){var c=t[0],u=t[1],l=t.index;if(a+=e.slice(i,l),i=l+c.length,u)a+=u[1];else{var p=e[i],d=t[2],f=t[3],v=t[4],h=t[5],m=t[6],g=t[7];a&&(r.push(a),a="");var b=null!=d&&null!=p&&p!==d,y="+"===m||"*"===m,x="?"===m||"*"===m,j=t[2]||s,k=v||h;r.push({name:f||o++,prefix:d||"",delimiter:j,optional:x,repeat:y,partial:b,asterisk:!!g,pattern:k?vi(k):g?".*":"[^"+fi(j)+"]+?"})}}return i<e.length&&(a+=e.substr(i)),a&&r.push(a),r}function pi(e){return encodeURI(e).replace(/[\/?#]/g,(function(e){return"%"+e.charCodeAt(0).toString(16).toUpperCase()}))}function di(e,n){for(var t=new Array(e.length),r=0;r<e.length;r++)"object"==typeof e[r]&&(t[r]=new RegExp("^(?:"+e[r].pattern+")$",mi(n)));return function(n,r){for(var o="",i=n||{},a=(r||{}).pretty?pi:encodeURIComponent,s=0;s<e.length;s++){var c=e[s];if("string"!=typeof c){var u,l=i[c.name];if(null==l){if(c.optional){c.partial&&(o+=c.prefix);continue}throw new TypeError('Expected "'+c.name+'" to be defined')}if(ri(l)){if(!c.repeat)throw new TypeError('Expected "'+c.name+'" to not repeat, but received `'+JSON.stringify(l)+"`");if(0===l.length){if(c.optional)continue;throw new TypeError('Expected "'+c.name+'" to not be empty')}for(var p=0;p<l.length;p++){if(u=a(l[p]),!t[s].test(u))throw new TypeError('Expected all "'+c.name+'" to match "'+c.pattern+'", but received `'+JSON.stringify(u)+"`");o+=(0===p?c.prefix:c.delimiter)+u}}else{if(u=c.asterisk?encodeURI(l).replace(/[?#]/g,(function(e){return"%"+e.charCodeAt(0).toString(16).toUpperCase()})):a(l),!t[s].test(u))throw new TypeError('Expected "'+c.name+'" to match "'+c.pattern+'", but received "'+u+'"');o+=c.prefix+u}}else o+=c}return o}}function fi(e){return e.replace(/([.+*?=^!:${}()[\]|\/\\])/g,"\\$1")}function vi(e){return e.replace(/([=!:$\/()])/g,"\\$1")}function hi(e,n){return e.keys=n,e}function mi(e){return e&&e.sensitive?"":"i"}function gi(e,n,t){ri(n)||(t=n||t,n=[]);for(var r=(t=t||{}).strict,o=!1!==t.end,i="",a=0;a<e.length;a++){var s=e[a];if("string"==typeof s)i+=fi(s);else{var c=fi(s.prefix),u="(?:"+s.pattern+")";n.push(s),s.repeat&&(u+="(?:"+c+u+")*"),i+=u=s.optional?s.partial?c+"("+u+")?":"(?:"+c+"("+u+"))?":c+"("+u+")"}}var l=fi(t.delimiter||"/"),p=i.slice(-l.length)===l;return r||(i=(p?i.slice(0,-l.length):i)+"(?:"+l+"(?=$))?"),i+=o?"$":r&&p?"":"(?="+l+"|$)",hi(new RegExp("^"+i,mi(t)),n)}function bi(e,n,t){return ri(n)||(t=n||t,n=[]),t=t||{},e instanceof RegExp?function(e,n){var t=e.source.match(/\((?!\?)/g);if(t)for(var r=0;r<t.length;r++)n.push({name:r,prefix:null,delimiter:null,optional:!1,repeat:!1,partial:!1,asterisk:!1,pattern:null});return hi(e,n)}(e,n):ri(e)?function(e,n,t){for(var r=[],o=0;o<e.length;o++)r.push(bi(e[o],n,t).source);return hi(new RegExp("(?:"+r.join("|")+")",mi(t)),n)}(e,n,t):function(e,n,t){return gi(li(e,t),n,t)}(e,n,t)}oi.parse=ii,oi.compile=ai,oi.tokensToFunction=si,oi.tokensToRegExp=ci;var yi=Object.create(null);function xi(e,n,t){n=n||{};try{var r=yi[e]||(yi[e]=oi.compile(e));return"string"==typeof n.pathMatch&&(n[0]=n.pathMatch),r(n,{pretty:!0})}catch(e){return""}finally{delete n[0]}}function ji(e,n,t,r){var o="string"==typeof e?{path:e}:e;if(o._normalized)return o;if(o.name){var i=(o=Ro({},e)).params;return i&&"object"==typeof i&&(o.params=Ro({},i)),o}if(!o.path&&o.params&&n){(o=Ro({},o))._normalized=!0;var a=Ro(Ro({},n.params),o.params);if(n.name)o.name=n.name,o.params=a;else if(n.matched.length){var s=n.matched[n.matched.length-1].path;o.path=xi(s,a,n.path)}else 0;return o}var c=function(e){var n="",t="",r=e.indexOf("#");r>=0&&(n=e.slice(r),e=e.slice(0,r));var o=e.indexOf("?");return o>=0&&(t=e.slice(o+1),e=e.slice(0,o)),{path:e,query:t,hash:n}}(o.path||""),u=n&&n.path||"/",l=c.path?ni(c.path,u,t||o.append):u,p=function(e,n,t){void 0===n&&(n={});var r,o=t||Fo;try{r=o(e||"")}catch(e){r={}}for(var i in n){var a=n[i];r[i]=Array.isArray(a)?a.map(Uo):Uo(a)}return r}(c.query,o.query,r&&r.options.parseQuery),d=o.hash||c.hash;return d&&"#"!==d.charAt(0)&&(d="#"+d),{_normalized:!0,path:l,query:p,hash:d}}var ki,wi=function(){},_i={name:"RouterLink",props:{to:{type:[String,Object],required:!0},tag:{type:String,default:"a"},custom:Boolean,exact:Boolean,exactPath:Boolean,append:Boolean,replace:Boolean,activeClass:String,exactActiveClass:String,ariaCurrentValue:{type:String,default:"page"},event:{type:[String,Array],default:"click"}},render:function(e){var n=this,t=this.$router,r=this.$route,o=t.resolve(this.to,r,this.append),i=o.location,a=o.route,s=o.href,c={},u=t.options.linkActiveClass,l=t.options.linkExactActiveClass,p=null==u?"router-link-active":u,d=null==l?"router-link-exact-active":l,f=null==this.activeClass?p:this.activeClass,v=null==this.exactActiveClass?d:this.exactActiveClass,h=a.redirectedFrom?Ho(null,ji(a.redirectedFrom),null,t):a;c[v]=Jo(r,h,this.exactPath),c[f]=this.exact||this.exactPath?c[v]:function(e,n){return 0===e.path.replace(qo,"/").indexOf(n.path.replace(qo,"/"))&&(!n.hash||e.hash===n.hash)&&function(e,n){for(var t in n)if(!(t in e))return!1;return!0}(e.query,n.query)}(r,h);var m=c[v]?this.ariaCurrentValue:null,g=function(e){Si(e)&&(n.replace?t.replace(i,wi):t.push(i,wi))},b={click:Si};Array.isArray(this.event)?this.event.forEach((function(e){b[e]=g})):b[this.event]=g;var y={class:c},x=!this.$scopedSlots.$hasNormal&&this.$scopedSlots.default&&this.$scopedSlots.default({href:s,route:a,navigate:g,isActive:c[f],isExactActive:c[v]});if(x){if(1===x.length)return x[0];if(x.length>1||!x.length)return 0===x.length?e():e("span",{},x)}if("a"===this.tag)y.on=b,y.attrs={href:s,"aria-current":m};else{var j=function e(n){var t;if(n)for(var r=0;r<n.length;r++){if("a"===(t=n[r]).tag)return t;if(t.children&&(t=e(t.children)))return t}}(this.$slots.default);if(j){j.isStatic=!1;var k=j.data=Ro({},j.data);for(var w in k.on=k.on||{},k.on){var _=k.on[w];w in b&&(k.on[w]=Array.isArray(_)?_:[_])}for(var S in b)S in k.on?k.on[S].push(b[S]):k.on[S]=g;var E=j.data.attrs=Ro({},j.data.attrs);E.href=s,E["aria-current"]=m}else y.on=b}return e(this.tag,y,this.$slots.default)}};function Si(e){if(!(e.metaKey||e.altKey||e.ctrlKey||e.shiftKey||e.defaultPrevented||void 0!==e.button&&0!==e.button)){if(e.currentTarget&&e.currentTarget.getAttribute){var n=e.currentTarget.getAttribute("target");if(/\b_blank\b/i.test(n))return}return e.preventDefault&&e.preventDefault(),!0}}var Ei="undefined"!=typeof window;function Ci(e,n,t,r,o){var i=n||[],a=t||Object.create(null),s=r||Object.create(null);e.forEach((function(e){!function e(n,t,r,o,i,a){var s=o.path,c=o.name;0;var u=o.pathToRegexpOptions||{},l=function(e,n,t){t||(e=e.replace(/\/$/,""));if("/"===e[0])return e;if(null==n)return e;return ti(n.path+"/"+e)}(s,i,u.strict);"boolean"==typeof o.caseSensitive&&(u.sensitive=o.caseSensitive);var p={path:l,regex:Ii(l,u),components:o.components||{default:o.component},alias:o.alias?"string"==typeof o.alias?[o.alias]:o.alias:[],instances:{},enteredCbs:{},name:c,parent:i,matchAs:a,redirect:o.redirect,beforeEnter:o.beforeEnter,meta:o.meta||{},props:null==o.props?{}:o.components?o.props:{default:o.props}};o.children&&o.children.forEach((function(o){var i=a?ti(a+"/"+o.path):void 0;e(n,t,r,o,p,i)}));t[p.path]||(n.push(p.path),t[p.path]=p);if(void 0!==o.alias)for(var d=Array.isArray(o.alias)?o.alias:[o.alias],f=0;f<d.length;++f){0;var v={path:d[f],children:o.children};e(n,t,r,v,i,p.path||"/")}c&&(r[c]||(r[c]=p))}(i,a,s,e,o)}));for(var c=0,u=i.length;c<u;c++)"*"===i[c]&&(i.push(i.splice(c,1)[0]),u--,c--);return{pathList:i,pathMap:a,nameMap:s}}function Ii(e,n){return oi(e,[],n)}function Oi(e,n){var t=Ci(e),r=t.pathList,o=t.pathMap,i=t.nameMap;function a(e,t,a){var s=ji(e,t,!1,n),u=s.name;if(u){var l=i[u];if(!l)return c(null,s);var p=l.regex.keys.filter((function(e){return!e.optional})).map((function(e){return e.name}));if("object"!=typeof s.params&&(s.params={}),t&&"object"==typeof t.params)for(var d in t.params)!(d in s.params)&&p.indexOf(d)>-1&&(s.params[d]=t.params[d]);return s.path=xi(l.path,s.params),c(l,s,a)}if(s.path){s.params={};for(var f=0;f<r.length;f++){var v=r[f],h=o[v];if(Ai(h.regex,s.path,s.params))return c(h,s,a)}}return c(null,s)}function s(e,t){var r=e.redirect,o="function"==typeof r?r(Ho(e,t,null,n)):r;if("string"==typeof o&&(o={path:o}),!o||"object"!=typeof o)return c(null,t);var s=o,u=s.name,l=s.path,p=t.query,d=t.hash,f=t.params;if(p=s.hasOwnProperty("query")?s.query:p,d=s.hasOwnProperty("hash")?s.hash:d,f=s.hasOwnProperty("params")?s.params:f,u){i[u];return a({_normalized:!0,name:u,query:p,hash:d,params:f},void 0,t)}if(l){var v=function(e,n){return ni(e,n.parent?n.parent.path:"/",!0)}(l,e);return a({_normalized:!0,path:xi(v,f),query:p,hash:d},void 0,t)}return c(null,t)}function c(e,t,r){return e&&e.redirect?s(e,r||t):e&&e.matchAs?function(e,n,t){var r=a({_normalized:!0,path:xi(t,n.params)});if(r){var o=r.matched,i=o[o.length-1];return n.params=r.params,c(i,n)}return c(null,n)}(0,t,e.matchAs):Ho(e,t,r,n)}return{match:a,addRoute:function(e,n){var t="object"!=typeof e?i[e]:void 0;Ci([n||e],r,o,i,t),t&&t.alias.length&&Ci(t.alias.map((function(e){return{path:e,children:[n]}})),r,o,i,t)},getRoutes:function(){return r.map((function(e){return o[e]}))},addRoutes:function(e){Ci(e,r,o,i)}}}function Ai(e,n,t){var r=n.match(e);if(!r)return!1;if(!t)return!0;for(var o=1,i=r.length;o<i;++o){var a=e.keys[o-1];a&&(t[a.name||"pathMatch"]="string"==typeof r[o]?Mo(r[o]):r[o])}return!0}var Ti=Ei&&window.performance&&window.performance.now?window.performance:Date;function Pi(){return Ti.now().toFixed(3)}var $i=Pi();function Li(){return $i}function Ri(e){return $i=e}var zi=Object.create(null);function Bi(){"scrollRestoration"in window.history&&(window.history.scrollRestoration="manual");var e=window.location.protocol+"//"+window.location.host,n=window.location.href.replace(e,""),t=Ro({},window.history.state);return t.key=Li(),window.history.replaceState(t,"",n),window.addEventListener("popstate",Mi),function(){window.removeEventListener("popstate",Mi)}}function Di(e,n,t,r){if(e.app){var o=e.options.scrollBehavior;o&&e.app.$nextTick((function(){var i=function(){var e=Li();if(e)return zi[e]}(),a=o.call(e,n,t,r?i:null);a&&("function"==typeof a.then?a.then((function(e){Hi(e,i)})).catch((function(e){0})):Hi(a,i))}))}}function Ni(){var e=Li();e&&(zi[e]={x:window.pageXOffset,y:window.pageYOffset})}function Mi(e){Ni(),e.state&&e.state.key&&Ri(e.state.key)}function Ui(e){return Vi(e.x)||Vi(e.y)}function Fi(e){return{x:Vi(e.x)?e.x:window.pageXOffset,y:Vi(e.y)?e.y:window.pageYOffset}}function Vi(e){return"number"==typeof e}var qi=/^#\d/;function Hi(e,n){var t,r="object"==typeof e;if(r&&"string"==typeof e.selector){var o=qi.test(e.selector)?document.getElementById(e.selector.slice(1)):document.querySelector(e.selector);if(o){var i=e.offset&&"object"==typeof e.offset?e.offset:{};n=function(e,n){var t=document.documentElement.getBoundingClientRect(),r=e.getBoundingClientRect();return{x:r.left-t.left-n.x,y:r.top-t.top-n.y}}(o,i={x:Vi((t=i).x)?t.x:0,y:Vi(t.y)?t.y:0})}else Ui(e)&&(n=Fi(e))}else r&&Ui(e)&&(n=Fi(e));n&&("scrollBehavior"in document.documentElement.style?window.scrollTo({left:n.x,top:n.y,behavior:e.behavior}):window.scrollTo(n.x,n.y))}var Ki,Wi=Ei&&((-1===(Ki=window.navigator.userAgent).indexOf("Android 2.")&&-1===Ki.indexOf("Android 4.0")||-1===Ki.indexOf("Mobile Safari")||-1!==Ki.indexOf("Chrome")||-1!==Ki.indexOf("Windows Phone"))&&window.history&&"function"==typeof window.history.pushState);function Gi(e,n){Ni();var t=window.history;try{if(n){var r=Ro({},t.state);r.key=Li(),t.replaceState(r,"",e)}else t.pushState({key:Ri(Pi())},"",e)}catch(t){window.location[n?"replace":"assign"](e)}}function Zi(e){Gi(e,!0)}function Ji(e,n,t){var r=function(o){o>=e.length?t():e[o]?n(e[o],(function(){r(o+1)})):r(o+1)};r(0)}var Xi={redirected:2,aborted:4,cancelled:8,duplicated:16};function Yi(e,n){return ea(e,n,Xi.redirected,'Redirected when going from "'+e.fullPath+'" to "'+function(e){if("string"==typeof e)return e;if("path"in e)return e.path;var n={};return na.forEach((function(t){t in e&&(n[t]=e[t])})),JSON.stringify(n,null,2)}(n)+'" via a navigation guard.')}function Qi(e,n){return ea(e,n,Xi.cancelled,'Navigation cancelled from "'+e.fullPath+'" to "'+n.fullPath+'" with a new navigation.')}function ea(e,n,t,r){var o=new Error(r);return o._isRouter=!0,o.from=e,o.to=n,o.type=t,o}var na=["params","query","hash"];function ta(e){return Object.prototype.toString.call(e).indexOf("Error")>-1}function ra(e,n){return ta(e)&&e._isRouter&&(null==n||e.type===n)}function oa(e){return function(n,t,r){var o=!1,i=0,a=null;ia(e,(function(e,n,t,s){if("function"==typeof e&&void 0===e.cid){o=!0,i++;var c,u=ca((function(n){var o;((o=n).__esModule||sa&&"Module"===o[Symbol.toStringTag])&&(n=n.default),e.resolved="function"==typeof n?n:ki.extend(n),t.components[s]=n,--i<=0&&r()})),l=ca((function(e){var n="Failed to resolve async component "+s+": "+e;a||(a=ta(e)?e:new Error(n),r(a))}));try{c=e(u,l)}catch(e){l(e)}if(c)if("function"==typeof c.then)c.then(u,l);else{var p=c.component;p&&"function"==typeof p.then&&p.then(u,l)}}})),o||r()}}function ia(e,n){return aa(e.map((function(e){return Object.keys(e.components).map((function(t){return n(e.components[t],e.instances[t],e,t)}))})))}function aa(e){return Array.prototype.concat.apply([],e)}var sa="function"==typeof Symbol&&"symbol"==typeof Symbol.toStringTag;function ca(e){var n=!1;return function(){for(var t=[],r=arguments.length;r--;)t[r]=arguments[r];if(!n)return n=!0,e.apply(this,t)}}var ua=function(e,n){this.router=e,this.base=function(e){if(!e)if(Ei){var n=document.querySelector("base");e=(e=n&&n.getAttribute("href")||"/").replace(/^https?:\/\/[^\/]+/,"")}else e="/";"/"!==e.charAt(0)&&(e="/"+e);return e.replace(/\/$/,"")}(n),this.current=Wo,this.pending=null,this.ready=!1,this.readyCbs=[],this.readyErrorCbs=[],this.errorCbs=[],this.listeners=[]};function la(e,n,t,r){var o=ia(e,(function(e,r,o,i){var a=function(e,n){"function"!=typeof e&&(e=ki.extend(e));return e.options[n]}(e,n);if(a)return Array.isArray(a)?a.map((function(e){return t(e,r,o,i)})):t(a,r,o,i)}));return aa(r?o.reverse():o)}function pa(e,n){if(n)return function(){return e.apply(n,arguments)}}ua.prototype.listen=function(e){this.cb=e},ua.prototype.onReady=function(e,n){this.ready?e():(this.readyCbs.push(e),n&&this.readyErrorCbs.push(n))},ua.prototype.onError=function(e){this.errorCbs.push(e)},ua.prototype.transitionTo=function(e,n,t){var r,o=this;try{r=this.router.match(e,this.current)}catch(e){throw this.errorCbs.forEach((function(n){n(e)})),e}var i=this.current;this.confirmTransition(r,(function(){o.updateRoute(r),n&&n(r),o.ensureURL(),o.router.afterHooks.forEach((function(e){e&&e(r,i)})),o.ready||(o.ready=!0,o.readyCbs.forEach((function(e){e(r)})))}),(function(e){t&&t(e),e&&!o.ready&&(ra(e,Xi.redirected)&&i===Wo||(o.ready=!0,o.readyErrorCbs.forEach((function(n){n(e)}))))}))},ua.prototype.confirmTransition=function(e,n,t){var r=this,o=this.current;this.pending=e;var i,a,s=function(e){!ra(e)&&ta(e)&&(r.errorCbs.length?r.errorCbs.forEach((function(n){n(e)})):console.error(e)),t&&t(e)},c=e.matched.length-1,u=o.matched.length-1;if(Jo(e,o)&&c===u&&e.matched[c]===o.matched[u])return this.ensureURL(),e.hash&&Di(this.router,o,e,!1),s(((a=ea(i=o,e,Xi.duplicated,'Avoided redundant navigation to current location: "'+i.fullPath+'".')).name="NavigationDuplicated",a));var l=function(e,n){var t,r=Math.max(e.length,n.length);for(t=0;t<r&&e[t]===n[t];t++);return{updated:n.slice(0,t),activated:n.slice(t),deactivated:e.slice(t)}}(this.current.matched,e.matched),p=l.updated,d=l.deactivated,f=l.activated,v=[].concat(function(e){return la(e,"beforeRouteLeave",pa,!0)}(d),this.router.beforeHooks,function(e){return la(e,"beforeRouteUpdate",pa)}(p),f.map((function(e){return e.beforeEnter})),oa(f)),h=function(n,t){if(r.pending!==e)return s(Qi(o,e));try{n(e,o,(function(n){!1===n?(r.ensureURL(!0),s(function(e,n){return ea(e,n,Xi.aborted,'Navigation aborted from "'+e.fullPath+'" to "'+n.fullPath+'" via a navigation guard.')}(o,e))):ta(n)?(r.ensureURL(!0),s(n)):"string"==typeof n||"object"==typeof n&&("string"==typeof n.path||"string"==typeof n.name)?(s(Yi(o,e)),"object"==typeof n&&n.replace?r.replace(n):r.push(n)):t(n)}))}catch(e){s(e)}};Ji(v,h,(function(){Ji(function(e){return la(e,"beforeRouteEnter",(function(e,n,t,r){return function(e,n,t){return function(r,o,i){return e(r,o,(function(e){"function"==typeof e&&(n.enteredCbs[t]||(n.enteredCbs[t]=[]),n.enteredCbs[t].push(e)),i(e)}))}}(e,t,r)}))}(f).concat(r.router.resolveHooks),h,(function(){if(r.pending!==e)return s(Qi(o,e));r.pending=null,n(e),r.router.app&&r.router.app.$nextTick((function(){Yo(e)}))}))}))},ua.prototype.updateRoute=function(e){this.current=e,this.cb&&this.cb(e)},ua.prototype.setupListeners=function(){},ua.prototype.teardown=function(){this.listeners.forEach((function(e){e()})),this.listeners=[],this.current=Wo,this.pending=null};var da=function(e){function n(n,t){e.call(this,n,t),this._startLocation=fa(this.base)}return e&&(n.__proto__=e),n.prototype=Object.create(e&&e.prototype),n.prototype.constructor=n,n.prototype.setupListeners=function(){var e=this;if(!(this.listeners.length>0)){var n=this.router,t=n.options.scrollBehavior,r=Wi&&t;r&&this.listeners.push(Bi());var o=function(){var t=e.current,o=fa(e.base);e.current===Wo&&o===e._startLocation||e.transitionTo(o,(function(e){r&&Di(n,e,t,!0)}))};window.addEventListener("popstate",o),this.listeners.push((function(){window.removeEventListener("popstate",o)}))}},n.prototype.go=function(e){window.history.go(e)},n.prototype.push=function(e,n,t){var r=this,o=this.current;this.transitionTo(e,(function(e){Gi(ti(r.base+e.fullPath)),Di(r.router,e,o,!1),n&&n(e)}),t)},n.prototype.replace=function(e,n,t){var r=this,o=this.current;this.transitionTo(e,(function(e){Zi(ti(r.base+e.fullPath)),Di(r.router,e,o,!1),n&&n(e)}),t)},n.prototype.ensureURL=function(e){if(fa(this.base)!==this.current.fullPath){var n=ti(this.base+this.current.fullPath);e?Gi(n):Zi(n)}},n.prototype.getCurrentLocation=function(){return fa(this.base)},n}(ua);function fa(e){var n=window.location.pathname,t=n.toLowerCase(),r=e.toLowerCase();return!e||t!==r&&0!==t.indexOf(ti(r+"/"))||(n=n.slice(e.length)),(n||"/")+window.location.search+window.location.hash}var va=function(e){function n(n,t,r){e.call(this,n,t),r&&function(e){var n=fa(e);if(!/^\/#/.test(n))return window.location.replace(ti(e+"/#"+n)),!0}(this.base)||ha()}return e&&(n.__proto__=e),n.prototype=Object.create(e&&e.prototype),n.prototype.constructor=n,n.prototype.setupListeners=function(){var e=this;if(!(this.listeners.length>0)){var n=this.router.options.scrollBehavior,t=Wi&&n;t&&this.listeners.push(Bi());var r=function(){var n=e.current;ha()&&e.transitionTo(ma(),(function(r){t&&Di(e.router,r,n,!0),Wi||ya(r.fullPath)}))},o=Wi?"popstate":"hashchange";window.addEventListener(o,r),this.listeners.push((function(){window.removeEventListener(o,r)}))}},n.prototype.push=function(e,n,t){var r=this,o=this.current;this.transitionTo(e,(function(e){ba(e.fullPath),Di(r.router,e,o,!1),n&&n(e)}),t)},n.prototype.replace=function(e,n,t){var r=this,o=this.current;this.transitionTo(e,(function(e){ya(e.fullPath),Di(r.router,e,o,!1),n&&n(e)}),t)},n.prototype.go=function(e){window.history.go(e)},n.prototype.ensureURL=function(e){var n=this.current.fullPath;ma()!==n&&(e?ba(n):ya(n))},n.prototype.getCurrentLocation=function(){return ma()},n}(ua);function ha(){var e=ma();return"/"===e.charAt(0)||(ya("/"+e),!1)}function ma(){var e=window.location.href,n=e.indexOf("#");return n<0?"":e=e.slice(n+1)}function ga(e){var n=window.location.href,t=n.indexOf("#");return(t>=0?n.slice(0,t):n)+"#"+e}function ba(e){Wi?Gi(ga(e)):window.location.hash=e}function ya(e){Wi?Zi(ga(e)):window.location.replace(ga(e))}var xa=function(e){function n(n,t){e.call(this,n,t),this.stack=[],this.index=-1}return e&&(n.__proto__=e),n.prototype=Object.create(e&&e.prototype),n.prototype.constructor=n,n.prototype.push=function(e,n,t){var r=this;this.transitionTo(e,(function(e){r.stack=r.stack.slice(0,r.index+1).concat(e),r.index++,n&&n(e)}),t)},n.prototype.replace=function(e,n,t){var r=this;this.transitionTo(e,(function(e){r.stack=r.stack.slice(0,r.index).concat(e),n&&n(e)}),t)},n.prototype.go=function(e){var n=this,t=this.index+e;if(!(t<0||t>=this.stack.length)){var r=this.stack[t];this.confirmTransition(r,(function(){var e=n.current;n.index=t,n.updateRoute(r),n.router.afterHooks.forEach((function(n){n&&n(r,e)}))}),(function(e){ra(e,Xi.duplicated)&&(n.index=t)}))}},n.prototype.getCurrentLocation=function(){var e=this.stack[this.stack.length-1];return e?e.fullPath:"/"},n.prototype.ensureURL=function(){},n}(ua),ja=function(e){void 0===e&&(e={}),this.app=null,this.apps=[],this.options=e,this.beforeHooks=[],this.resolveHooks=[],this.afterHooks=[],this.matcher=Oi(e.routes||[],this);var n=e.mode||"hash";switch(this.fallback="history"===n&&!Wi&&!1!==e.fallback,this.fallback&&(n="hash"),Ei||(n="abstract"),this.mode=n,n){case"history":this.history=new da(this,e.base);break;case"hash":this.history=new va(this,e.base,this.fallback);break;case"abstract":this.history=new xa(this,e.base);break;default:0}},ka={currentRoute:{configurable:!0}};function wa(e,n){return e.push(n),function(){var t=e.indexOf(n);t>-1&&e.splice(t,1)}}ja.prototype.match=function(e,n,t){return this.matcher.match(e,n,t)},ka.currentRoute.get=function(){return this.history&&this.history.current},ja.prototype.init=function(e){var n=this;if(this.apps.push(e),e.$once("hook:destroyed",(function(){var t=n.apps.indexOf(e);t>-1&&n.apps.splice(t,1),n.app===e&&(n.app=n.apps[0]||null),n.app||n.history.teardown()})),!this.app){this.app=e;var t=this.history;if(t instanceof da||t instanceof va){var r=function(e){t.setupListeners(),function(e){var r=t.current,o=n.options.scrollBehavior;Wi&&o&&"fullPath"in e&&Di(n,e,r,!1)}(e)};t.transitionTo(t.getCurrentLocation(),r,r)}t.listen((function(e){n.apps.forEach((function(n){n._route=e}))}))}},ja.prototype.beforeEach=function(e){return wa(this.beforeHooks,e)},ja.prototype.beforeResolve=function(e){return wa(this.resolveHooks,e)},ja.prototype.afterEach=function(e){return wa(this.afterHooks,e)},ja.prototype.onReady=function(e,n){this.history.onReady(e,n)},ja.prototype.onError=function(e){this.history.onError(e)},ja.prototype.push=function(e,n,t){var r=this;if(!n&&!t&&"undefined"!=typeof Promise)return new Promise((function(n,t){r.history.push(e,n,t)}));this.history.push(e,n,t)},ja.prototype.replace=function(e,n,t){var r=this;if(!n&&!t&&"undefined"!=typeof Promise)return new Promise((function(n,t){r.history.replace(e,n,t)}));this.history.replace(e,n,t)},ja.prototype.go=function(e){this.history.go(e)},ja.prototype.back=function(){this.go(-1)},ja.prototype.forward=function(){this.go(1)},ja.prototype.getMatchedComponents=function(e){var n=e?e.matched?e:this.resolve(e).route:this.currentRoute;return n?[].concat.apply([],n.matched.map((function(e){return Object.keys(e.components).map((function(n){return e.components[n]}))}))):[]},ja.prototype.resolve=function(e,n,t){var r=ji(e,n=n||this.history.current,t,this),o=this.match(r,n),i=o.redirectedFrom||o.fullPath;return{location:r,route:o,href:function(e,n,t){var r="hash"===t?"#"+n:n;return e?ti(e+"/"+r):r}(this.history.base,i,this.mode),normalizedTo:r,resolved:o}},ja.prototype.getRoutes=function(){return this.matcher.getRoutes()},ja.prototype.addRoute=function(e,n){this.matcher.addRoute(e,n),this.history.current!==Wo&&this.history.transitionTo(this.history.getCurrentLocation())},ja.prototype.addRoutes=function(e){this.matcher.addRoutes(e),this.history.current!==Wo&&this.history.transitionTo(this.history.getCurrentLocation())},Object.defineProperties(ja.prototype,ka),ja.install=function e(n){if(!e.installed||ki!==n){e.installed=!0,ki=n;var t=function(e){return void 0!==e},r=function(e,n){var r=e.$options._parentVnode;t(r)&&t(r=r.data)&&t(r=r.registerRouteInstance)&&r(e,n)};n.mixin({beforeCreate:function(){t(this.$options.router)?(this._routerRoot=this,this._router=this.$options.router,this._router.init(this),n.util.defineReactive(this,"_route",this._router.history.current)):this._routerRoot=this.$parent&&this.$parent._routerRoot||this,r(this,this)},destroyed:function(){r(this)}}),Object.defineProperty(n.prototype,"$router",{get:function(){return this._routerRoot._router}}),Object.defineProperty(n.prototype,"$route",{get:function(){return this._routerRoot._route}}),n.component("RouterView",Qo),n.component("RouterLink",_i);var o=n.config.optionMergeStrategies;o.beforeRouteEnter=o.beforeRouteLeave=o.beforeRouteUpdate=o.created}},ja.version="3.5.3",ja.isNavigationFailure=ra,ja.NavigationFailureType=Xi,ja.START_LOCATION=Wo,Ei&&window.Vue&&window.Vue.use(ja);var _a=ja;t(170),t(171),t(248),t(71),t(172),t(28),t(29),t(250);function Sa(e){e.locales&&Object.keys(e.locales).forEach((function(n){e.locales[n].path=n})),Object.freeze(e)}t(66),t(90),t(122);function Ea(e){return(Ea="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}var Ca=t(68),Ia=(t(181),t(16),t(43),t(223),t(224),{NotFound:function(){return Promise.all([t.e(0),t.e(4)]).then(t.bind(null,470))},Layout:function(){return Promise.all([t.e(0),t.e(2)]).then(t.bind(null,469))}}),Oa={"v-e1cf8cac":function(){return t.e(5).then(t.bind(null,471))},"v-ba836bea":function(){return t.e(6).then(t.bind(null,472))},"v-f1b43fb4":function(){return t.e(7).then(t.bind(null,473))},"v-34ee4bc8":function(){return t.e(8).then(t.bind(null,474))},"v-5eead728":function(){return t.e(9).then(t.bind(null,475))},"v-406493dc":function(){return t.e(10).then(t.bind(null,476))},"v-20fd0ac8":function(){return t.e(11).then(t.bind(null,477))},"v-0047f104":function(){return t.e(12).then(t.bind(null,478))},"v-1e5a2ae6":function(){return t.e(13).then(t.bind(null,479))},"v-25b5dfe7":function(){return t.e(14).then(t.bind(null,480))},"v-57dca324":function(){return t.e(15).then(t.bind(null,481))},"v-09030c8e":function(){return t.e(16).then(t.bind(null,482))},"v-c295ed24":function(){return t.e(17).then(t.bind(null,483))},"v-5bcbc459":function(){return t.e(18).then(t.bind(null,484))},"v-540fce4e":function(){return t.e(19).then(t.bind(null,485))},"v-294ec0d8":function(){return t.e(20).then(t.bind(null,486))},"v-50bc8525":function(){return t.e(21).then(t.bind(null,487))},"v-537ab085":function(){return t.e(22).then(t.bind(null,488))},"v-2f058aa5":function(){return t.e(23).then(t.bind(null,489))},"v-16d784a6":function(){return t.e(24).then(t.bind(null,490))},"v-d62f8670":function(){return t.e(25).then(t.bind(null,491))},"v-426728a0":function(){return t.e(26).then(t.bind(null,492))},"v-dfde8cf0":function(){return t.e(27).then(t.bind(null,493))},"v-78cb951a":function(){return t.e(28).then(t.bind(null,494))},"v-55a9d9cc":function(){return t.e(29).then(t.bind(null,495))},"v-73e7cad4":function(){return t.e(30).then(t.bind(null,496))},"v-528b907e":function(){return t.e(31).then(t.bind(null,497))},"v-2f9f667a":function(){return t.e(32).then(t.bind(null,498))},"v-c669bffc":function(){return t.e(33).then(t.bind(null,499))},"v-2fe63128":function(){return t.e(34).then(t.bind(null,500))},"v-1a9f2fa3":function(){return t.e(35).then(t.bind(null,501))},"v-c9d1abd6":function(){return t.e(36).then(t.bind(null,502))},"v-5b26d060":function(){return t.e(37).then(t.bind(null,503))},"v-53dee3ba":function(){return t.e(38).then(t.bind(null,504))},"v-05de217e":function(){return t.e(39).then(t.bind(null,505))},"v-394ea8e1":function(){return t.e(40).then(t.bind(null,506))},"v-506a742f":function(){return t.e(41).then(t.bind(null,507))},"v-614d7a7e":function(){return t.e(42).then(t.bind(null,508))},"v-c72e380a":function(){return t.e(43).then(t.bind(null,509))},"v-ebc99984":function(){return t.e(44).then(t.bind(null,510))}};function Aa(e){var n=Object.create(null);return function(t){return n[t]||(n[t]=e(t))}}var Ta=/-(\w)/g,Pa=Aa((function(e){return e.replace(Ta,(function(e,n){return n?n.toUpperCase():""}))})),$a=/\B([A-Z])/g,La=Aa((function(e){return e.replace($a,"-$1").toLowerCase()})),Ra=Aa((function(e){return e.charAt(0).toUpperCase()+e.slice(1)}));function za(e,n){if(n)return e(n)?e(n):n.includes("-")?e(Ra(Pa(n))):e(Ra(n))||e(La(n))}var Ba=Object.assign({},Ia,Oa),Da=function(e){return Ba[e]},Na=function(e){return Oa[e]},Ma=function(e){return Ia[e]},Ua=function(e){return Lo.component(e)};function Fa(e){return za(Na,e)}function Va(e){return za(Ma,e)}function qa(e){return za(Da,e)}function Ha(e){return za(Ua,e)}function Ka(){for(var e=arguments.length,n=new Array(e),t=0;t<e;t++)n[t]=arguments[t];return Promise.all(n.filter((function(e){return e})).map(function(){var e=Object(r.a)(regeneratorRuntime.mark((function e(n){var t;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(Ha(n)||!qa(n)){e.next=5;break}return e.next=3,qa(n)();case 3:t=e.sent,Lo.component(n,t.default);case 5:case"end":return e.stop()}}),e)})));return function(n){return e.apply(this,arguments)}}()))}function Wa(e,n){"undefined"!=typeof window&&window.__VUEPRESS__&&(window.__VUEPRESS__[e]=n)}var Ga=t(134),Za=(t(182),t(108),t(51),t(211)),Ja=t.n(Za),Xa={created:function(){if(this.siteMeta=this.$site.headTags.filter((function(e){return"meta"===Object(Ga.a)(e,1)[0]})).map((function(e){var n=Object(Ga.a)(e,2);n[0];return n[1]})),this.$ssrContext){var e=this.getMergedMetaTags();this.$ssrContext.title=this.$title,this.$ssrContext.lang=this.$lang,this.$ssrContext.pageMeta=(n=e)?n.map((function(e){var n="<meta";return Object.keys(e).forEach((function(t){n+=" ".concat(t,'="').concat(e[t],'"')})),n+">"})).join("\n    "):"",this.$ssrContext.canonicalLink=Qa(this.$canonicalUrl)}var n},mounted:function(){this.currentMetaTags=Object(Ca.a)(document.querySelectorAll("meta")),this.updateMeta(),this.updateCanonicalLink()},methods:{updateMeta:function(){document.title=this.$title,document.documentElement.lang=this.$lang;var e=this.getMergedMetaTags();this.currentMetaTags=es(e,this.currentMetaTags)},getMergedMetaTags:function(){var e=this.$page.frontmatter.meta||[];return Ja()([{name:"description",content:this.$description}],e,this.siteMeta,ns)},updateCanonicalLink:function(){Ya(),this.$canonicalUrl&&document.head.insertAdjacentHTML("beforeend",Qa(this.$canonicalUrl))}},watch:{$page:function(){this.updateMeta(),this.updateCanonicalLink()}},beforeDestroy:function(){es(null,this.currentMetaTags),Ya()}};function Ya(){var e=document.querySelector("link[rel='canonical']");e&&e.remove()}function Qa(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";return e?'<link href="'.concat(e,'" rel="canonical" />'):""}function es(e,n){if(n&&Object(Ca.a)(n).filter((function(e){return e.parentNode===document.head})).forEach((function(e){return document.head.removeChild(e)})),e)return e.map((function(e){var n=document.createElement("meta");return Object.keys(e).forEach((function(t){n.setAttribute(t,e[t])})),document.head.appendChild(n),n}))}function ns(e){for(var n=0,t=["name","property","itemprop"];n<t.length;n++){var r=t[n];if(e.hasOwnProperty(r))return e[r]+r}return JSON.stringify(e)}t(216);var ts=t(145),rs={mounted:function(){window.addEventListener("scroll",this.onScroll)},methods:{onScroll:t.n(ts)()((function(){this.setActiveHash()}),300),setActiveHash:function(){for(var e=this,n=[].slice.call(document.querySelectorAll(".sidebar-link")),t=[].slice.call(document.querySelectorAll(".header-anchor")).filter((function(e){return n.some((function(n){return n.hash===e.hash}))})),r=Math.max(window.pageYOffset,document.documentElement.scrollTop,document.body.scrollTop),o=Math.max(document.documentElement.scrollHeight,document.body.scrollHeight),i=window.innerHeight+r,a=0;a<t.length;a++){var s=t[a],c=t[a+1],u=0===a&&0===r||r>=s.parentElement.offsetTop+10&&(!c||r<c.parentElement.offsetTop-10),l=decodeURIComponent(this.$route.hash);if(u&&l!==decodeURIComponent(s.hash)){var p=s;if(i===o)for(var d=a+1;d<t.length;d++)if(l===decodeURIComponent(t[d].hash))return;return this.$vuepress.$set("disableScrollBehavior",!0),void this.$router.replace(decodeURIComponent(p.hash),(function(){e.$nextTick((function(){e.$vuepress.$set("disableScrollBehavior",!1)}))}))}}}},beforeDestroy:function(){window.removeEventListener("scroll",this.onScroll)}},os=(t(74),t(99)),is=t.n(os),as={mounted:function(){var e=this;is.a.configure({showSpinner:!1}),this.$router.beforeEach((function(e,n,t){e.path===n.path||Lo.component(e.name)||is.a.start(),t()})),this.$router.afterEach((function(){is.a.done(),e.isSidebarOpen=!1}))}};t(70),t(50),t(73),t(352);function ss(e,n){if(!(e instanceof n))throw new TypeError("Cannot call a class as a function")}t(97);function cs(e,n){for(var t=0;t<n.length;t++){var r=n[t];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function us(e,n,t){return n&&cs(e.prototype,n),t&&cs(e,t),Object.defineProperty(e,"prototype",{writable:!1}),e}t(353);var ls=function(){function e(){ss(this,e);this.containerEl=document.getElementById("message-container"),this.containerEl||(this.containerEl=document.createElement("div"),this.containerEl.id="message-container",document.body.appendChild(this.containerEl))}return us(e,[{key:"show",value:function(e){var n=this,t=e.text,r=void 0===t?"":t,o=e.duration,i=void 0===o?3e3:o,a=document.createElement("div");a.className="message move-in",a.innerHTML='\n      <i style="fill: #06a35a;font-size: 14px;display:inline-flex;align-items: center;">\n        <svg style="fill: #06a35a;font-size: 14px;" t="1572421810237" viewBox="0 0 1024 1024" version="1.1" xmlns="http://www.w3.org/2000/svg" p-id="2323" width="16" height="16"><path d="M822.811993 824.617989c-83.075838 81.99224-188.546032 124.613757-316.049383 127.86455-122.085362-3.250794-223.943563-45.87231-305.935802-127.86455s-124.613757-184.21164-127.86455-305.935802c3.250794-127.503351 45.87231-232.973545 127.86455-316.049383 81.99224-83.075838 184.21164-126.058554 305.935802-129.309347 127.503351 3.250794 232.973545 46.23351 316.049383 129.309347 83.075838 83.075838 126.058554 188.546032 129.309347 316.049383C949.231746 640.406349 905.887831 742.62575 822.811993 824.617989zM432.716755 684.111464c3.973192 3.973192 8.307584 5.779189 13.364374 6.140388 5.05679 0.361199 9.752381-1.444797 13.364374-5.417989l292.571429-287.514638c3.973192-3.973192 5.779189-8.307584 5.779189-13.364374 0-5.05679-1.805996-9.752381-5.779189-13.364374l1.805996 1.805996c-3.973192-3.973192-8.668783-5.779189-14.086772-6.140388-5.417989-0.361199-10.47478 1.444797-14.809171 5.417989l-264.397884 220.33157c-3.973192 3.250794-8.668783 4.695591-14.447972 4.695591-5.779189 0-10.835979-1.444797-15.53157-3.973192l-94.273016-72.962257c-4.334392-3.250794-9.391182-4.334392-14.447972-3.973192s-9.391182 3.250794-12.641975 7.585185l-2.889594 3.973192c-3.250794 4.334392-4.334392 9.391182-3.973192 14.809171 0.722399 5.417989 2.528395 10.11358 5.779189 14.086772L432.716755 684.111464z" p-id="2324"></path></svg>\n      </i>\n      <div class="text">'.concat(r,"</div>\n    "),this.containerEl.appendChild(a),i>0&&setTimeout((function(){n.close(a)}),i)}},{key:"close",value:function(e){e.className=e.className.replace("move-in",""),e.className+="move-out",e.addEventListener("animationend",(function(){e.remove()}))}}]),e}(),ps={mounted:function(){!!/Android|webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i.test(navigator.userAgent)||this.updateCopy()},updated:function(){!!/Android|webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i.test(navigator.userAgent)||this.updateCopy()},methods:{updateCopy:function(){var e=this;setTimeout((function(){(['div[class*="language-"] pre','div[class*="aside-code"] aside']instanceof Array||Array.isArray(['div[class*="language-"] pre','div[class*="aside-code"] aside']))&&['div[class*="language-"] pre','div[class*="aside-code"] aside'].forEach((function(n){document.querySelectorAll(n).forEach(e.generateCopyButton)}))}),1e3)},generateCopyButton:function(e){var n=this;if(!e.classList.contains("codecopy-enabled")){var t=document.createElement("i");t.className="code-copy",t.innerHTML='<svg  style="color:#aaa;font-size:14px" t="1572422231464" class="icon" viewBox="0 0 1024 1024" version="1.1" xmlns="http://www.w3.org/2000/svg" p-id="3201" width="14" height="14"><path d="M866.461538 39.384615H354.461538c-43.323077 0-78.769231 35.446154-78.76923 78.769231v39.384616h472.615384c43.323077 0 78.769231 35.446154 78.769231 78.76923v551.384616h39.384615c43.323077 0 78.769231-35.446154 78.769231-78.769231V118.153846c0-43.323077-35.446154-78.769231-78.769231-78.769231z m-118.153846 275.692308c0-43.323077-35.446154-78.769231-78.76923-78.769231H157.538462c-43.323077 0-78.769231 35.446154-78.769231 78.769231v590.769231c0 43.323077 35.446154 78.769231 78.769231 78.769231h512c43.323077 0 78.769231-35.446154 78.76923-78.769231V315.076923z m-354.461538 137.846154c0 11.815385-7.876923 19.692308-19.692308 19.692308h-157.538461c-11.815385 0-19.692308-7.876923-19.692308-19.692308v-39.384615c0-11.815385 7.876923-19.692308 19.692308-19.692308h157.538461c11.815385 0 19.692308 7.876923 19.692308 19.692308v39.384615z m157.538461 315.076923c0 11.815385-7.876923 19.692308-19.692307 19.692308H216.615385c-11.815385 0-19.692308-7.876923-19.692308-19.692308v-39.384615c0-11.815385 7.876923-19.692308 19.692308-19.692308h315.076923c11.815385 0 19.692308 7.876923 19.692307 19.692308v39.384615z m78.769231-157.538462c0 11.815385-7.876923 19.692308-19.692308 19.692308H216.615385c-11.815385 0-19.692308-7.876923-19.692308-19.692308v-39.384615c0-11.815385 7.876923-19.692308 19.692308-19.692308h393.846153c11.815385 0 19.692308 7.876923 19.692308 19.692308v39.384615z" p-id="3202"></path></svg>',t.title="Copy to clipboard",t.addEventListener("click",(function(){n.copyToClipboard(e.innerText)})),e.appendChild(t),e.classList.add("codecopy-enabled")}},copyToClipboard:function(e){var n=document.createElement("textarea");n.value=e,n.setAttribute("readonly",""),n.style.position="absolute",n.style.left="-9999px",document.body.appendChild(n);var t=document.getSelection().rangeCount>0&&document.getSelection().getRangeAt(0);n.select(),document.execCommand("copy"),(new ls).show({text:"复制成功",duration:1e3}),document.body.removeChild(n),t&&(document.getSelection().removeAllRanges(),document.getSelection().addRange(t))}}};t(226),t(102),t(101),t(135),t(355);!function(e,n){void 0===n&&(n={});var t=n.insertAt;if(e&&"undefined"!=typeof document){var r=document.head||document.getElementsByTagName("head")[0],o=document.createElement("style");o.type="text/css","top"===t&&r.firstChild?r.insertBefore(o,r.firstChild):r.appendChild(o),o.styleSheet?o.styleSheet.cssText=e:o.appendChild(document.createTextNode(e))}}("@media (max-width: 1000px) {\n  .vuepress-plugin-demo-block__h_code {\n    display: none;\n  }\n  .vuepress-plugin-demo-block__app {\n    margin-left: auto !important;\n    margin-right: auto !important;\n  }\n}\n.vuepress-plugin-demo-block__wrapper {\n  margin-top: 10px;\n  border: 1px solid #ebebeb;\n  border-radius: 4px;\n  transition: all 0.2s;\n}\n.vuepress-plugin-demo-block__wrapper.vuepress-plugin-demo-block__horizontal .vuepress-plugin-demo-block__display {\n  height: 400px;\n  display: flex;\n}\n.vuepress-plugin-demo-block__wrapper.vuepress-plugin-demo-block__horizontal .vuepress-plugin-demo-block__display .vuepress-plugin-demo-block__app {\n  width: 300px;\n  border: 1px solid #ebebeb;\n  box-shadow: 1px 1px 3px #ebebeb;\n  margin-right: 5px;\n  overflow: auto;\n}\n.vuepress-plugin-demo-block__wrapper.vuepress-plugin-demo-block__horizontal .vuepress-plugin-demo-block__display .vuepress-plugin-demo-block__h_code {\n  flex: 1;\n  overflow: auto;\n  height: 100%;\n}\n.vuepress-plugin-demo-block__wrapper.vuepress-plugin-demo-block__horizontal .vuepress-plugin-demo-block__display .vuepress-plugin-demo-block__h_code > pre {\n  overflow: visible;\n}\n.vuepress-plugin-demo-block__wrapper .vuepress-plugin-demo-block__display {\n  max-height: 400px;\n  overflow: auto;\n}\n.vuepress-plugin-demo-block__wrapper div {\n  box-sizing: border-box;\n}\n.vuepress-plugin-demo-block__wrapper:hover {\n  box-shadow: 0 0 11px rgba(33, 33, 33, 0.2);\n}\n.vuepress-plugin-demo-block__wrapper .vuepress-plugin-demo-block__code {\n  overflow: hidden;\n  height: 0;\n  padding: 0 !important;\n  background-color: #282c34;\n  border-radius: 0 !important;\n  transition: height 0.5s;\n}\n.vuepress-plugin-demo-block__wrapper .vuepress-plugin-demo-block__code pre {\n  margin: 0 !important;\n}\n.vuepress-plugin-demo-block__wrapper .vuepress-plugin-demo-block__display {\n  padding: 20px;\n  border-bottom: 1px solid #ebebeb;\n}\n.vuepress-plugin-demo-block__wrapper .vuepress-plugin-demo-block__footer {\n  position: relative;\n  text-align: center;\n}\n.vuepress-plugin-demo-block__wrapper .vuepress-plugin-demo-block__footer.vuepress-plugin-demo-block__show-link .vuepress-plugin-demo-block__jsfiddle,\n.vuepress-plugin-demo-block__wrapper .vuepress-plugin-demo-block__footer.vuepress-plugin-demo-block__show-link .vuepress-plugin-demo-block__codepen {\n  opacity: 1;\n}\n.vuepress-plugin-demo-block__wrapper .vuepress-plugin-demo-block__footer.vuepress-plugin-demo-block__show-link .vuepress-plugin-demo-block__expand::before {\n  border-top: none;\n  border-right: 6px solid transparent;\n  border-bottom: 6px solid #ccc;\n  border-left: 6px solid transparent;\n}\n.vuepress-plugin-demo-block__wrapper .vuepress-plugin-demo-block__footer:hover .vuepress-plugin-demo-block__jsfiddle,\n.vuepress-plugin-demo-block__wrapper .vuepress-plugin-demo-block__footer:hover .vuepress-plugin-demo-block__codepen,\n.vuepress-plugin-demo-block__wrapper .vuepress-plugin-demo-block__footer:hover .vuepress-plugin-demo-block__expand span,\n.vuepress-plugin-demo-block__wrapper .vuepress-plugin-demo-block__footer:hover .vuepress-plugin-demo-block__expand {\n  opacity: 1;\n}\n.vuepress-plugin-demo-block__wrapper .vuepress-plugin-demo-block__footer:hover .vuepress-plugin-demo-block__expand::before {\n  border-top-color: #3eaf7c !important;\n  border-bottom-color: #3eaf7c !important;\n}\n.vuepress-plugin-demo-block__wrapper .vuepress-plugin-demo-block__footer:hover svg {\n  fill: #3eaf7c !important;\n}\n.vuepress-plugin-demo-block__wrapper .vuepress-plugin-demo-block__footer .vuepress-plugin-demo-block__expand-text {\n  transition: all 0.5s;\n  opacity: 0;\n}\n.vuepress-plugin-demo-block__wrapper .vuepress-plugin-demo-block__footer form:nth-last-child(2) {\n  right: 50px;\n}\n.vuepress-plugin-demo-block__wrapper .vuepress-plugin-demo-block__footer form:last-child {\n  right: 10px;\n}\n.vuepress-plugin-demo-block__wrapper .vuepress-plugin-demo-block__footer .vuepress-plugin-demo-block__button {\n  border-color: transparent;\n  background-color: transparent;\n  font-size: 14px;\n  color: #3eaf7c;\n  cursor: pointer;\n  outline: none;\n  margin: 0;\n  width: 46px;\n  position: relative;\n}\n.vuepress-plugin-demo-block__wrapper .vuepress-plugin-demo-block__footer .vuepress-plugin-demo-block__button:hover::before {\n  content: attr(data-tip);\n  white-space: nowrap;\n  position: absolute;\n  top: -30px;\n  left: 50%;\n  color: #eee;\n  line-height: 1;\n  z-index: 1000;\n  border-radius: 4px;\n  padding: 6px;\n  -webkit-transform: translateX(-50%);\n          transform: translateX(-50%);\n  background-color: rgba(0, 0, 0, 0.8);\n}\n.vuepress-plugin-demo-block__wrapper .vuepress-plugin-demo-block__footer .vuepress-plugin-demo-block__button:hover::after {\n  content: '' !important;\n  display: block;\n  position: absolute;\n  left: 50%;\n  top: -5px;\n  -webkit-transform: translateX(-50%);\n          transform: translateX(-50%);\n  border: 5px solid transparent;\n  border-top-color: rgba(0, 0, 0, 0.8);\n}\n.vuepress-plugin-demo-block__wrapper .vuepress-plugin-demo-block__footer .vuepress-plugin-demo-block__button svg {\n  width: 34px;\n  height: 20px;\n  fill: #ccc;\n}\n.vuepress-plugin-demo-block__wrapper .vuepress-plugin-demo-block__footer .vuepress-plugin-demo-block__jsfiddle,\n.vuepress-plugin-demo-block__wrapper .vuepress-plugin-demo-block__footer .vuepress-plugin-demo-block__codepen {\n  position: absolute;\n  top: 10px;\n  transition: all 0.5s;\n}\n.vuepress-plugin-demo-block__wrapper .vuepress-plugin-demo-block__footer .vuepress-plugin-demo-block__expand {\n  position: relative;\n  width: 100px;\n  height: 40px;\n  margin: 0;\n  color: #3eaf7c;\n  font-size: 14px;\n  background-color: transparent;\n  border-color: transparent;\n  outline: none;\n  transition: all 0.5s;\n  cursor: pointer;\n}\n.vuepress-plugin-demo-block__wrapper .vuepress-plugin-demo-block__footer .vuepress-plugin-demo-block__expand::before {\n  content: \"\";\n  position: absolute;\n  top: 50%;\n  left: 50%;\n  width: 0;\n  height: 0;\n  border-top: 6px solid #ccc;\n  border-right: 6px solid transparent;\n  border-left: 6px solid transparent;\n  -webkit-transform: translate(-50%, -50%);\n          transform: translate(-50%, -50%);\n}\n");var ds={jsLib:[],cssLib:[],jsfiddle:!0,codepen:!0,codepenLayout:"left",codepenJsProcessor:"babel",codepenEditors:"101",horizontal:!1,vue:"https://cdn.jsdelivr.net/npm/vue/dist/vue.min.js",react:"https://cdn.jsdelivr.net/npm/react/umd/react.production.min.js",reactDOM:"https://cdn.jsdelivr.net/npm/react-dom/umd/react-dom.production.min.js"},fs={},vs=function(e){return'<div id="app">\n'.concat(e,"\n</div>")},hs=function(e){return window.$VUEPRESS_DEMO_BLOCK&&void 0!==window.$VUEPRESS_DEMO_BLOCK[e]?window.$VUEPRESS_DEMO_BLOCK[e]:ds[e]},ms=function e(n,t,r){var o=document.createElement(n);return t&&Object.keys(t).forEach((function(e){if(e.indexOf("data"))o[e]=t[e];else{var n=e.replace("data","");o.dataset[n]=t[e]}})),r&&r.forEach((function(n){var t=n.tag,r=n.attrs,i=n.children;o.appendChild(e(t,r,i))})),o},gs=function(e,n,t){var r,o=(r=e.querySelectorAll(".".concat(n)),Array.prototype.slice.call(r));return 1!==o.length||t?o:o[0]},bs=function(e,n){var t,r,o=e.match(/<style>([\s\S]+)<\/style>/),i=e.match(/<template>([\s\S]+)<\/template>/),a=e.match(/<script>([\s\S]+)<\/script>/),s={css:o&&o[1].replace(/^\n|\n$/g,""),html:i&&i[1].replace(/^\n|\n$/g,""),js:a&&a[1].replace(/^\n|\n$/g,""),jsLib:n.jsLib||[],cssLib:n.cssLib||[]};s.htmlTpl=vs(s.html),s.jsTpl=(t=s.js,r=t.replace(/export\s+default\s*?\{\n*/,"").replace(/\n*\}\s*$/,"").trim(),"new Vue({\n  el: '#app',\n  ".concat(r,"\n})")),s.script=function(e,n){var t=e.split(/export\s+default/),r="(function() {".concat(t[0]," ; return ").concat(t[1],"})()"),o=window.Babel?window.Babel.transform(r,{presets:["es2015"]}).code:r,i=[eval][0](o);return i.template=n,i}(s.js,s.html);var c=hs("vue");return s.jsLib.unshift(c),s},ys=function(e,n){var t,r=e.match(/<style>([\s\S]+)<\/style>/),o=e.match(/<html>([\s\S]+)<\/html>/),i=e.match(/<script>([\s\S]+)<\/script>/),a={css:r&&r[1].replace(/^\n|\n$/g,""),html:o&&o[1].replace(/^\n|\n$/g,""),js:i&&i[1].replace(/^\n|\n$/g,""),jsLib:n.jsLib||[],cssLib:n.cssLib||[]};return a.htmlTpl=a.html,a.jsTpl=a.js,a.script=(t=a.js,window.Babel?window.Babel.transform(t,{presets:["es2015"]}).code:t),a},xs=function(e){return e=e.replace("export default ","").replace(/App\.__style__(\s*)=(\s*)`([\s\S]*)?`/,""),e+='ReactDOM.render(React.createElement(App), document.getElementById("app"))'};function js(){var e=gs(document,"vuepress-plugin-demo-block__wrapper",!0);e.length?e.forEach((function(e){if("true"!==e.dataset.created){e.style.display="block";var n=gs(e,"vuepress-plugin-demo-block__code"),t=gs(e,"vuepress-plugin-demo-block__display"),r=gs(e,"vuepress-plugin-demo-block__footer"),o=gs(t,"vuepress-plugin-demo-block__app"),i=decodeURIComponent(e.dataset.code),a=decodeURIComponent(e.dataset.config),s=decodeURIComponent(e.dataset.type);a=a?JSON.parse(a):{};var c=n.querySelector("div").clientHeight,u="react"===s?function(e,n){var t=(0,window.Babel.transform)(e,{presets:["es2015","react"]}).code,r="(function(exports){var module={};module.exports=exports;".concat(t,";return module.exports.__esModule?module.exports.default:module.exports;})({})"),o=new Function("return ".concat(r))(),i={js:o,css:o.__style__||"",jsLib:n.jsLib||[],cssLib:n.cssLib||[],jsTpl:xs(e),htmlTpl:vs("")},a=hs("react"),s=hs("reactDOM");return i.jsLib.unshift(a,s),i}(i,a):"vanilla"===s?ys(i,a):bs(i,a),l=ms("button",{className:"".concat("vuepress-plugin-demo-block__expand")});if(r.appendChild(l),l.addEventListener("click",ks.bind(null,l,c,n,r)),hs("jsfiddle")&&r.appendChild(function(e){var n=e.css,t=e.htmlTpl,r=e.jsTpl,o=e.jsLib,i=e.cssLib,a=o.concat(i).concat(hs("cssLib")).concat(hs("jsLib")).join(",");return ms("form",{className:"vuepress-plugin-demo-block__jsfiddle",target:"_blank",action:"https://jsfiddle.net/api/post/library/pure/",method:"post"},[{tag:"input",attrs:{type:"hidden",name:"css",value:n}},{tag:"input",attrs:{type:"hidden",name:"html",value:t}},{tag:"input",attrs:{type:"hidden",name:"js",value:r}},{tag:"input",attrs:{type:"hidden",name:"panel_js",value:3}},{tag:"input",attrs:{type:"hidden",name:"wrap",value:1}},{tag:"input",attrs:{type:"hidden",name:"resources",value:a}},{tag:"button",attrs:{type:"submit",className:"vuepress-plugin-demo-block__button",innerHTML:'<?xml version="1.0" standalone="no"?><!DOCTYPE svg PUBLIC "-//W3C//DTD SVG 1.1//EN" "http://www.w3.org/Graphics/SVG/1.1/DTD/svg11.dtd"><svg t="1547088289967" class="icon" style="" viewBox="0 0 1170 1024" version="1.1" xmlns="http://www.w3.org/2000/svg" p-id="1952" xmlns:xlink="http://www.w3.org/1999/xlink" width="228.515625" height="200"><defs><style type="text/css"></style></defs><path d="M1028.571429 441.142857q63.428571 26.285714 102.571428 83.142857T1170.285714 650.857143q0 93.714286-67.428571 160.285714T940 877.714286q-2.285714 0-6.571429-0.285715t-6-0.285714H232q-97.142857-5.714286-164.571429-71.714286T0 645.142857q0-62.857143 31.428571-116t84-84q-6.857143-22.285714-6.857142-46.857143 0-65.714286 46.857142-112t113.714286-46.285714q54.285714 0 98.285714 33.142857 42.857143-88 127.142858-141.714286t186.571428-53.714285q94.857143 0 174.857143 46T982.571429 248.571429t46.571428 172q0 3.428571-0.285714 10.285714t-0.285714 10.285714zM267.428571 593.142857q0 69.714286 48 110.285714t118.857143 40.571429q78.285714 0 137.142857-56.571429-9.142857-11.428571-27.142857-32.285714T519.428571 626.285714q-38.285714 37.142857-82.285714 37.142857-31.428571 0-53.428571-19.142857T361.714286 594.285714q0-30.285714 22-49.714285t52.285714-19.428572q25.142857 0 48.285714 12t41.714286 31.428572 37.142857 42.857142 39.428572 46.857143 44 42.857143 55.428571 31.428572 69.428571 12q69.142857 0 116.857143-40.857143T936 594.857143q0-69.142857-48-109.714286t-118.285714-40.571428q-81.714286 0-137.714286 55.428571l53.142857 61.714286q37.714286-36.571429 81.142857-36.571429 29.714286 0 52.571429 18.857143t22.857143 48q0 32.571429-21.142857 52.285714t-53.714286 19.714286q-24.571429 0-47.142857-12t-41.142857-31.428571-37.428572-42.857143-39.714286-46.857143-44.285714-42.857143-55.142857-31.428571T434.285714 444.571429q-69.714286 0-118.285714 40.285714T267.428571 593.142857z" p-id="1953"></path></svg>',datatip:"JSFiddle"}}])}(u)),hs("codepen")&&r.appendChild(function(e){var n=e.css,t=e.htmlTpl,r=e.jsTpl,o=e.jsLib,i=e.cssLib,a=JSON.stringify({css:n,html:t,js:r,js_external:o.concat(hs("jsLib")).join(";"),css_external:i.concat(hs("cssLib")).join(";"),layout:hs("codepenLayout"),js_pre_processor:hs("codepenJsProcessor"),editors:hs("codepenEditors")});return ms("form",{className:"vuepress-plugin-demo-block__codepen",target:"_blank",action:"https://codepen.io/pen/define",method:"post"},[{tag:"input",attrs:{type:"hidden",name:"data",value:a}},{tag:"button",attrs:{type:"submit",innerHTML:'<?xml version="1.0" standalone="no"?><!DOCTYPE svg PUBLIC "-//W3C//DTD SVG 1.1//EN" "http://www.w3.org/Graphics/SVG/1.1/DTD/svg11.dtd"><svg t="1547088271207" class="icon" style="" viewBox="0 0 1024 1024" version="1.1" xmlns="http://www.w3.org/2000/svg" p-id="1737" xmlns:xlink="http://www.w3.org/1999/xlink" width="200" height="200"><defs><style type="text/css"></style></defs><path d="M123.428571 668l344.571429 229.714286v-205.142857L277.142857 565.142857z m-35.428571-82.285714l110.285714-73.714286-110.285714-73.714286v147.428572z m468 312l344.571429-229.714286-153.714286-102.857143-190.857143 127.428572v205.142857z m-44-281.714286l155.428571-104-155.428571-104-155.428571 104zM277.142857 458.857143l190.857143-127.428572V126.285714L123.428571 356z m548.571429 53.142857l110.285714 73.714286V438.285714z m-78.857143-53.142857l153.714286-102.857143-344.571429-229.714286v205.142857z m277.142857-102.857143v312q0 23.428571-19.428571 36.571429l-468 312q-12 7.428571-24.571429 7.428571t-24.571429-7.428571L19.428571 704.571429q-19.428571-13.142857-19.428571-36.571429V356q0-23.428571 19.428571-36.571429L487.428571 7.428571q12-7.428571 24.571429-7.428571t24.571429 7.428571l468 312q19.428571 13.142857 19.428571 36.571429z" p-id="1738"></path></svg>',className:"vuepress-plugin-demo-block__button",datatip:"Codepen"}}])}(u)),void 0!==a.horizontal?a.horizontal:hs("horizontal")){e.classList.add("vuepress-plugin-demo-block__horizontal");var p=n.firstChild.cloneNode(!0);p.classList.add("vuepress-plugin-demo-block__h_code"),t.appendChild(p)}if(u.css&&function(e){if(!fs[e]){var n=ms("style",{innerHTML:e});document.body.appendChild(n),fs[e]=!0}}(u.css),"react"===s)ReactDOM.render(React.createElement(u.js),o);else if("vue"===s){var d=(new(Vue.extend(u.script))).$mount();o.appendChild(d.$el)}else"vanilla"===s&&(o.innerHTML=u.html,new Function("return (function(){".concat(u.script,"})()"))());e.dataset.created="true"}})):setTimeout((function(e){js()}),300)}function ks(e,n,t,r){var o="1"!==e.dataset.isExpand;t.style.height=o?"".concat(n,"px"):0,o?r.classList.add("vuepress-plugin-demo-block__show-link"):r.classList.remove("vuepress-plugin-demo-block__show-link"),e.dataset.isExpand=o?"1":"0"}var ws={mounted:function(){window.$VUEPRESS_DEMO_BLOCK={jsfiddle:!1,codepen:!0,horizontal:!1},js()},updated:function(){js()}},_s=(t(215),"auto"),Ss="zoom-in",Es="zoom-out",Cs="grab",Is="move";function Os(e,n,t){var r=!(arguments.length>3&&void 0!==arguments[3])||arguments[3],o={passive:!1};r?e.addEventListener(n,t,o):e.removeEventListener(n,t,o)}function As(e,n){if(e){var t=new Image;t.onload=function(){n&&n(t)},t.src=e}}function Ts(e){return e.dataset.original?e.dataset.original:"A"===e.parentNode.tagName?e.parentNode.getAttribute("href"):null}function Ps(e,n,t){!function(e){var n=$s,t=Ls;if(e.transition){var r=e.transition;delete e.transition,e[n]=r}if(e.transform){var o=e.transform;delete e.transform,e[t]=o}}(n);var r=e.style,o={};for(var i in n)t&&(o[i]=r[i]||""),r[i]=n[i];return o}var $s="transition",Ls="transform",Rs="transform",zs="transitionend";var Bs=function(){},Ds={enableGrab:!0,preloadImage:!1,closeOnWindowResize:!0,transitionDuration:.4,transitionTimingFunction:"cubic-bezier(0.4, 0, 0, 1)",bgColor:"rgb(255, 255, 255)",bgOpacity:1,scaleBase:1,scaleExtra:.5,scrollThreshold:40,zIndex:998,customSize:null,onOpen:Bs,onClose:Bs,onGrab:Bs,onMove:Bs,onRelease:Bs,onBeforeOpen:Bs,onBeforeClose:Bs,onBeforeGrab:Bs,onBeforeRelease:Bs,onImageLoading:Bs,onImageLoaded:Bs},Ns={init:function(e){var n,t;n=this,t=e,Object.getOwnPropertyNames(Object.getPrototypeOf(n)).forEach((function(e){n[e]=n[e].bind(t)}))},click:function(e){if(e.preventDefault(),Us(e))return window.open(this.target.srcOriginal||e.currentTarget.src,"_blank");this.shown?this.released?this.close():this.release():this.open(e.currentTarget)},scroll:function(){var e=document.documentElement||document.body.parentNode||document.body,n=window.pageXOffset||e.scrollLeft,t=window.pageYOffset||e.scrollTop;null===this.lastScrollPosition&&(this.lastScrollPosition={x:n,y:t});var r=this.lastScrollPosition.x-n,o=this.lastScrollPosition.y-t,i=this.options.scrollThreshold;(Math.abs(o)>=i||Math.abs(r)>=i)&&(this.lastScrollPosition=null,this.close())},keydown:function(e){(function(e){return"Escape"===(e.key||e.code)||27===e.keyCode})(e)&&(this.released?this.close():this.release(this.close))},mousedown:function(e){if(Ms(e)&&!Us(e)){e.preventDefault();var n=e.clientX,t=e.clientY;this.pressTimer=setTimeout(function(){this.grab(n,t)}.bind(this),200)}},mousemove:function(e){this.released||this.move(e.clientX,e.clientY)},mouseup:function(e){Ms(e)&&!Us(e)&&(clearTimeout(this.pressTimer),this.released?this.close():this.release())},touchstart:function(e){e.preventDefault();var n=e.touches[0],t=n.clientX,r=n.clientY;this.pressTimer=setTimeout(function(){this.grab(t,r)}.bind(this),200)},touchmove:function(e){if(!this.released){var n=e.touches[0],t=n.clientX,r=n.clientY;this.move(t,r)}},touchend:function(e){(function(e){e.targetTouches.length})(e)||(clearTimeout(this.pressTimer),this.released?this.close():this.release())},clickOverlay:function(){this.close()},resizeWindow:function(){this.close()}};function Ms(e){return 0===e.button}function Us(e){return e.metaKey||e.ctrlKey}var Fs={init:function(e){this.el=document.createElement("div"),this.instance=e,this.parent=document.body,Ps(this.el,{position:"fixed",top:0,left:0,right:0,bottom:0,opacity:0}),this.updateStyle(e.options),Os(this.el,"click",e.handler.clickOverlay.bind(e))},updateStyle:function(e){Ps(this.el,{zIndex:e.zIndex,backgroundColor:e.bgColor,transition:"opacity\n        "+e.transitionDuration+"s\n        "+e.transitionTimingFunction})},insert:function(){this.parent.appendChild(this.el)},remove:function(){this.parent.removeChild(this.el)},fadeIn:function(){this.el.offsetWidth,this.el.style.opacity=this.instance.options.bgOpacity},fadeOut:function(){this.el.style.opacity=0}},Vs="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},qs=function(){function e(e,n){for(var t=0;t<n.length;t++){var r=n[t];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(n,t,r){return t&&e(n.prototype,t),r&&e(n,r),n}}(),Hs=Object.assign||function(e){for(var n=1;n<arguments.length;n++){var t=arguments[n];for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])}return e},Ks={init:function(e,n){this.el=e,this.instance=n,this.srcThumbnail=this.el.getAttribute("src"),this.srcset=this.el.getAttribute("srcset"),this.srcOriginal=Ts(this.el),this.rect=this.el.getBoundingClientRect(),this.translate=null,this.scale=null,this.styleOpen=null,this.styleClose=null},zoomIn:function(){var e=this.instance.options,n=e.zIndex,t=e.enableGrab,r=e.transitionDuration,o=e.transitionTimingFunction;this.translate=this.calculateTranslate(),this.scale=this.calculateScale(),this.styleOpen={position:"relative",zIndex:n+1,cursor:t?Cs:Es,transition:Rs+"\n        "+r+"s\n        "+o,transform:"translate3d("+this.translate.x+"px, "+this.translate.y+"px, 0px)\n        scale("+this.scale.x+","+this.scale.y+")",height:this.rect.height+"px",width:this.rect.width+"px"},this.el.offsetWidth,this.styleClose=Ps(this.el,this.styleOpen,!0)},zoomOut:function(){this.el.offsetWidth,Ps(this.el,{transform:"none"})},grab:function(e,n,t){var r=Ws(),o=r.x-e,i=r.y-n;Ps(this.el,{cursor:Is,transform:"translate3d(\n        "+(this.translate.x+o)+"px, "+(this.translate.y+i)+"px, 0px)\n        scale("+(this.scale.x+t)+","+(this.scale.y+t)+")"})},move:function(e,n,t){var r=Ws(),o=r.x-e,i=r.y-n;Ps(this.el,{transition:Rs,transform:"translate3d(\n        "+(this.translate.x+o)+"px, "+(this.translate.y+i)+"px, 0px)\n        scale("+(this.scale.x+t)+","+(this.scale.y+t)+")"})},restoreCloseStyle:function(){Ps(this.el,this.styleClose)},restoreOpenStyle:function(){Ps(this.el,this.styleOpen)},upgradeSource:function(){if(this.srcOriginal){var e=this.el.parentNode;this.srcset&&this.el.removeAttribute("srcset");var n=this.el.cloneNode(!1);n.setAttribute("src",this.srcOriginal),n.style.position="fixed",n.style.visibility="hidden",e.appendChild(n),setTimeout(function(){this.el.setAttribute("src",this.srcOriginal),e.removeChild(n)}.bind(this),50)}},downgradeSource:function(){this.srcOriginal&&(this.srcset&&this.el.setAttribute("srcset",this.srcset),this.el.setAttribute("src",this.srcThumbnail))},calculateTranslate:function(){var e=Ws(),n=this.rect.left+this.rect.width/2,t=this.rect.top+this.rect.height/2;return{x:e.x-n,y:e.y-t}},calculateScale:function(){var e=this.el.dataset,n=e.zoomingHeight,t=e.zoomingWidth,r=this.instance.options,o=r.customSize,i=r.scaleBase;if(!o&&n&&t)return{x:t/this.rect.width,y:n/this.rect.height};if(o&&"object"===(void 0===o?"undefined":Vs(o)))return{x:o.width/this.rect.width,y:o.height/this.rect.height};var a=this.rect.width/2,s=this.rect.height/2,c=Ws(),u={x:c.x-a,y:c.y-s},l=u.x/a,p=u.y/s,d=i+Math.min(l,p);if(o&&"string"==typeof o){var f=t||this.el.naturalWidth,v=n||this.el.naturalHeight,h=parseFloat(o)*f/(100*this.rect.width),m=parseFloat(o)*v/(100*this.rect.height);if(d>h||d>m)return{x:h,y:m}}return{x:d,y:d}}};function Ws(){var e=document.documentElement;return{x:Math.min(e.clientWidth,window.innerWidth)/2,y:Math.min(e.clientHeight,window.innerHeight)/2}}function Gs(e,n,t){["mousedown","mousemove","mouseup","touchstart","touchmove","touchend"].forEach((function(r){Os(e,r,n[r],t)}))}var Zs=function(){function e(n){!function(e,n){if(!(e instanceof n))throw new TypeError("Cannot call a class as a function")}(this,e),this.target=Object.create(Ks),this.overlay=Object.create(Fs),this.handler=Object.create(Ns),this.body=document.body,this.shown=!1,this.lock=!1,this.released=!0,this.lastScrollPosition=null,this.pressTimer=null,this.options=Hs({},Ds,n),this.overlay.init(this),this.handler.init(this)}return qs(e,[{key:"listen",value:function(e){if("string"==typeof e)for(var n=document.querySelectorAll(e),t=n.length;t--;)this.listen(n[t]);else"IMG"===e.tagName&&(e.style.cursor=Ss,Os(e,"click",this.handler.click),this.options.preloadImage&&As(Ts(e)));return this}},{key:"config",value:function(e){return e?(Hs(this.options,e),this.overlay.updateStyle(this.options),this):this.options}},{key:"open",value:function(e){var n=this,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.options.onOpen;if(!this.shown&&!this.lock){var r="string"==typeof e?document.querySelector(e):e;if("IMG"===r.tagName){if(this.options.onBeforeOpen(r),this.target.init(r,this),!this.options.preloadImage){var o=this.target.srcOriginal;null!=o&&(this.options.onImageLoading(r),As(o,this.options.onImageLoaded))}this.shown=!0,this.lock=!0,this.target.zoomIn(),this.overlay.insert(),this.overlay.fadeIn(),Os(document,"scroll",this.handler.scroll),Os(document,"keydown",this.handler.keydown),this.options.closeOnWindowResize&&Os(window,"resize",this.handler.resizeWindow);var i=function e(){Os(r,zs,e,!1),n.lock=!1,n.target.upgradeSource(),n.options.enableGrab&&Gs(document,n.handler,!0),t(r)};return Os(r,zs,i),this}}}},{key:"close",value:function(){var e=this,n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.options.onClose;if(this.shown&&!this.lock){var t=this.target.el;this.options.onBeforeClose(t),this.lock=!0,this.body.style.cursor=_s,this.overlay.fadeOut(),this.target.zoomOut(),Os(document,"scroll",this.handler.scroll,!1),Os(document,"keydown",this.handler.keydown,!1),this.options.closeOnWindowResize&&Os(window,"resize",this.handler.resizeWindow,!1);var r=function r(){Os(t,zs,r,!1),e.shown=!1,e.lock=!1,e.target.downgradeSource(),e.options.enableGrab&&Gs(document,e.handler,!1),e.target.restoreCloseStyle(),e.overlay.remove(),n(t)};return Os(t,zs,r),this}}},{key:"grab",value:function(e,n){var t=arguments.length>2&&void 0!==arguments[2]?arguments[2]:this.options.scaleExtra,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:this.options.onGrab;if(this.shown&&!this.lock){var o=this.target.el;this.options.onBeforeGrab(o),this.released=!1,this.target.grab(e,n,t);var i=function e(){Os(o,zs,e,!1),r(o)};return Os(o,zs,i),this}}},{key:"move",value:function(e,n){var t=arguments.length>2&&void 0!==arguments[2]?arguments[2]:this.options.scaleExtra,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:this.options.onMove;if(this.shown&&!this.lock){this.released=!1,this.body.style.cursor=Is,this.target.move(e,n,t);var o=this.target.el,i=function e(){Os(o,zs,e,!1),r(o)};return Os(o,zs,i),this}}},{key:"release",value:function(){var e=this,n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.options.onRelease;if(this.shown&&!this.lock){var t=this.target.el;this.options.onBeforeRelease(t),this.lock=!0,this.body.style.cursor=_s,this.target.restoreOpenStyle();var r=function r(){Os(t,zs,r,!1),e.lock=!1,e.released=!0,n(t)};return Os(t,zs,r),this}}}]),e}(),Js=".theme-vdoing-content img:not(.no-zoom)",Xs=JSON.parse('{"bgColor":"rgba(0,0,0,0.6)"}'),Ys=Number("500"),Qs=function(){function e(){ss(this,e),this.instance=new Zs(Xs)}return us(e,[{key:"update",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Js;"undefined"!=typeof window&&this.instance.listen(e)}},{key:"updateDelay",value:function(){var e=this,n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Js,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:Ys;setTimeout((function(){return e.update(n)}),t)}}]),e}(),ec=[Xa,rs,as,ps,ws,{watch:{"$page.path":function(){void 0!==this.$vuepress.zooming&&this.$vuepress.zooming.updateDelay()}},mounted:function(){this.$vuepress.zooming=new Qs,this.$vuepress.zooming.updateDelay()}}],nc={name:"GlobalLayout",computed:{layout:function(){var e=this.getLayout();return Wa("layout",e),Lo.component(e)}},methods:{getLayout:function(){if(this.$page.path){var e=this.$page.frontmatter.layout;return e&&(this.$vuepress.getLayoutAsyncComponent(e)||this.$vuepress.getVueComponent(e))?e:"Layout"}return"NotFound"}}},tc=t(20),rc=Object(tc.a)(nc,(function(){var e=this.$createElement;return(this._self._c||e)(this.layout,{tag:"component"})}),[],!1,null,null,null).exports;!function(e,n,t){var r;switch(n){case"components":e[n]||(e[n]={}),Object.assign(e[n],t);break;case"mixins":e[n]||(e[n]=[]),(r=e[n]).push.apply(r,Object(Ca.a)(t));break;default:throw new Error("Unknown option name.")}}(rc,"mixins",ec);var oc=[{name:"v-e1cf8cac",path:"/pages/358991/",component:rc,beforeEnter:function(e,n,t){Ka("Layout","v-e1cf8cac").then(t)}},{path:"/pages/358991/index.html",redirect:"/pages/358991/"},{path:"/30.项目文档/00.di/00.快速开始.html",redirect:"/pages/358991/"},{name:"v-ba836bea",path:"/pages/64784b/",component:rc,beforeEnter:function(e,n,t){Ka("Layout","v-ba836bea").then(t)}},{path:"/pages/64784b/index.html",redirect:"/pages/64784b/"},{path:"/30.项目文档/00.di/01.API参考.html",redirect:"/pages/64784b/"},{name:"v-f1b43fb4",path:"/pages/44ea26/",component:rc,beforeEnter:function(e,n,t){Ka("Layout","v-f1b43fb4").then(t)}},{path:"/pages/44ea26/index.html",redirect:"/pages/44ea26/"},{path:"/30.项目文档/00.di/02.教程.html",redirect:"/pages/44ea26/"},{name:"v-34ee4bc8",path:"/project/di/",component:rc,beforeEnter:function(e,n,t){Ka("Layout","v-34ee4bc8").then(t)}},{path:"/project/di/index.html",redirect:"/project/di/"},{path:"/30.项目文档/00.di/目录.html",redirect:"/project/di/"},{name:"v-5eead728",path:"/pages/46481f/",component:rc,beforeEnter:function(e,n,t){Ka("Layout","v-5eead728").then(t)}},{path:"/pages/46481f/index.html",redirect:"/pages/46481f/"},{path:"/30.项目文档/01.use-vue-service/00.快速开始.html",redirect:"/pages/46481f/"},{name:"v-406493dc",path:"/pages/36ae88/",component:rc,beforeEnter:function(e,n,t){Ka("Layout","v-406493dc").then(t)}},{path:"/pages/36ae88/index.html",redirect:"/pages/36ae88/"},{path:"/30.项目文档/01.use-vue-service/90.接口文档.html",redirect:"/pages/36ae88/"},{name:"v-20fd0ac8",path:"/pages/a03917/",component:rc,beforeEnter:function(e,n,t){Ka("Layout","v-20fd0ac8").then(t)}},{path:"/pages/a03917/index.html",redirect:"/pages/a03917/"},{path:"/30.项目文档/01.use-vue-service/advance.html",redirect:"/pages/a03917/"},{name:"v-0047f104",path:"/pages/4497fd/",component:rc,beforeEnter:function(e,n,t){Ka("Layout","v-0047f104").then(t)}},{path:"/pages/4497fd/index.html",redirect:"/pages/4497fd/"},{path:"/30.项目文档/01.use-vue-service/base.html",redirect:"/pages/4497fd/"},{name:"v-1e5a2ae6",path:"/pages/a64f21/",component:rc,beforeEnter:function(e,n,t){Ka("Layout","v-1e5a2ae6").then(t)}},{path:"/pages/a64f21/index.html",redirect:"/pages/a64f21/"},{path:"/30.项目文档/01.use-vue-service/component.html",redirect:"/pages/a64f21/"},{name:"v-25b5dfe7",path:"/pages/60d8c4/",component:rc,beforeEnter:function(e,n,t){Ka("Layout","v-25b5dfe7").then(t)}},{path:"/pages/60d8c4/index.html",redirect:"/pages/60d8c4/"},{path:"/30.项目文档/01.use-vue-service/",redirect:"/pages/60d8c4/"},{name:"v-57dca324",path:"/project/use-vue-service/",component:rc,beforeEnter:function(e,n,t){Ka("Layout","v-57dca324").then(t)}},{path:"/project/use-vue-service/index.html",redirect:"/project/use-vue-service/"},{path:"/30.项目文档/01.use-vue-service/目录.html",redirect:"/project/use-vue-service/"},{name:"v-09030c8e",path:"/pages/ac9306/",component:rc,beforeEnter:function(e,n,t){Ka("Layout","v-09030c8e").then(t)}},{path:"/pages/ac9306/index.html",redirect:"/pages/ac9306/"},{path:"/30.项目文档/02.use-react-service/000.快速入门.html",redirect:"/pages/ac9306/"},{name:"v-c295ed24",path:"/project/use-react-service/",component:rc,beforeEnter:function(e,n,t){Ka("Layout","v-c295ed24").then(t)}},{path:"/project/use-react-service/index.html",redirect:"/project/use-react-service/"},{path:"/30.项目文档/02.use-react-service/目录.html",redirect:"/project/use-react-service/"},{name:"v-5bcbc459",path:"/pages/550423/",component:rc,beforeEnter:function(e,n,t){Ka("Layout","v-5bcbc459").then(t)}},{path:"/pages/550423/index.html",redirect:"/pages/550423/"},{path:"/30.项目文档/03.use-solid-service/000.快速入门.html",redirect:"/pages/550423/"},{name:"v-540fce4e",path:"/project/use-solid-service/",component:rc,beforeEnter:function(e,n,t){Ka("Layout","v-540fce4e").then(t)}},{path:"/project/use-solid-service/index.html",redirect:"/project/use-solid-service/"},{path:"/30.项目文档/03.use-solid-service/目录.html",redirect:"/project/use-solid-service/"},{name:"v-294ec0d8",path:"/project/",component:rc,beforeEnter:function(e,n,t){Ka("Layout","v-294ec0d8").then(t)}},{path:"/project/index.html",redirect:"/project/"},{path:"/30.项目文档/目录.html",redirect:"/project/"},{name:"v-50bc8525",path:"/archives/",component:rc,beforeEnter:function(e,n,t){Ka("Layout","v-50bc8525").then(t)}},{path:"/archives/index.html",redirect:"/archives/"},{path:"/@pages/archivesPage.html",redirect:"/archives/"},{name:"v-537ab085",path:"/categories/",component:rc,beforeEnter:function(e,n,t){Ka("Layout","v-537ab085").then(t)}},{path:"/categories/index.html",redirect:"/categories/"},{path:"/@pages/categoriesPage.html",redirect:"/categories/"},{name:"v-2f058aa5",path:"/tags/",component:rc,beforeEnter:function(e,n,t){Ka("Layout","v-2f058aa5").then(t)}},{path:"/tags/index.html",redirect:"/tags/"},{path:"/@pages/tagsPage.html",redirect:"/tags/"},{name:"v-16d784a6",path:"/pages/c8faae/",component:rc,beforeEnter:function(e,n,t){Ka("Layout","v-16d784a6").then(t)}},{path:"/pages/c8faae/index.html",redirect:"/pages/c8faae/"},{path:"/_posts/技术/best-practices.html",redirect:"/pages/c8faae/"},{name:"v-d62f8670",path:"/pages/46748c/",component:rc,beforeEnter:function(e,n,t){Ka("Layout","v-d62f8670").then(t)}},{path:"/pages/46748c/index.html",redirect:"/pages/46748c/"},{path:"/_posts/技术/circular_dependency.html",redirect:"/pages/46748c/"},{name:"v-426728a0",path:"/pages/45cf91/",component:rc,beforeEnter:function(e,n,t){Ka("Layout","v-426728a0").then(t)}},{path:"/pages/45cf91/index.html",redirect:"/pages/45cf91/"},{path:"/_posts/技术/communication-between-components.html",redirect:"/pages/45cf91/"},{name:"v-dfde8cf0",path:"/pages/747704/",component:rc,beforeEnter:function(e,n,t){Ka("Layout","v-dfde8cf0").then(t)}},{path:"/pages/747704/index.html",redirect:"/pages/747704/"},{path:"/_posts/技术/component-and-service.html",redirect:"/pages/747704/"},{name:"v-78cb951a",path:"/pages/6bada4/",component:rc,beforeEnter:function(e,n,t){Ka("Layout","v-78cb951a").then(t)}},{path:"/pages/6bada4/index.html",redirect:"/pages/6bada4/"},{path:"/_posts/技术/dependency-injection.html",redirect:"/pages/6bada4/"},{name:"v-55a9d9cc",path:"/pages/bfd17a/",component:rc,beforeEnter:function(e,n,t){Ka("Layout","v-55a9d9cc").then(t)}},{path:"/pages/bfd17a/index.html",redirect:"/pages/bfd17a/"},{path:"/_posts/技术/frame-analysis.html",redirect:"/pages/bfd17a/"},{name:"v-73e7cad4",path:"/pages/8b25d1/",component:rc,beforeEnter:function(e,n,t){Ka("Layout","v-73e7cad4").then(t)}},{path:"/pages/8b25d1/index.html",redirect:"/pages/8b25d1/"},{path:"/_posts/技术/framework-comparison.html",redirect:"/pages/8b25d1/"},{name:"v-528b907e",path:"/pages/37da4b/",component:rc,beforeEnter:function(e,n,t){Ka("Layout","v-528b907e").then(t)}},{path:"/pages/37da4b/index.html",redirect:"/pages/37da4b/"},{path:"/_posts/技术/frontend-stage.html",redirect:"/pages/37da4b/"},{name:"v-2f9f667a",path:"/pages/f9d7e8/",component:rc,beforeEnter:function(e,n,t){Ka("Layout","v-2f9f667a").then(t)}},{path:"/pages/f9d7e8/index.html",redirect:"/pages/f9d7e8/"},{path:"/_posts/技术/gitee自动同步和部署.html",redirect:"/pages/f9d7e8/"},{name:"v-c669bffc",path:"/pages/8ab175/",component:rc,beforeEnter:function(e,n,t){Ka("Layout","v-c669bffc").then(t)}},{path:"/pages/8ab175/index.html",redirect:"/pages/8ab175/"},{path:"/_posts/技术/json schema入门.html",redirect:"/pages/8ab175/"},{name:"v-2fe63128",path:"/pages/8b786e/",component:rc,beforeEnter:function(e,n,t){Ka("Layout","v-2fe63128").then(t)}},{path:"/pages/8b786e/index.html",redirect:"/pages/8b786e/"},{path:"/_posts/技术/reactive-analysis.html",redirect:"/pages/8b786e/"},{name:"v-1a9f2fa3",path:"/pages/5b7b92/",component:rc,beforeEnter:function(e,n,t){Ka("Layout","v-1a9f2fa3").then(t)}},{path:"/pages/5b7b92/index.html",redirect:"/pages/5b7b92/"},{path:"/_posts/技术/",redirect:"/pages/5b7b92/"},{name:"v-c9d1abd6",path:"/pages/7dfa32/",component:rc,beforeEnter:function(e,n,t){Ka("Layout","v-c9d1abd6").then(t)}},{path:"/pages/7dfa32/index.html",redirect:"/pages/7dfa32/"},{path:"/_posts/技术/代理方案调研.html",redirect:"/pages/7dfa32/"},{name:"v-5b26d060",path:"/pages/3d42c5/",component:rc,beforeEnter:function(e,n,t){Ka("Layout","v-5b26d060").then(t)}},{path:"/pages/3d42c5/index.html",redirect:"/pages/3d42c5/"},{path:"/_posts/技术/代码托管服务总结.html",redirect:"/pages/3d42c5/"},{name:"v-53dee3ba",path:"/pages/7426c9/",component:rc,beforeEnter:function(e,n,t){Ka("Layout","v-53dee3ba").then(t)}},{path:"/pages/7426c9/index.html",redirect:"/pages/7426c9/"},{path:"/_posts/技术/公共服务.html",redirect:"/pages/7426c9/"},{name:"v-05de217e",path:"/pages/cd1a6e/",component:rc,beforeEnter:function(e,n,t){Ka("Layout","v-05de217e").then(t)}},{path:"/pages/cd1a6e/index.html",redirect:"/pages/cd1a6e/"},{path:"/_posts/技术/技术内容.html",redirect:"/pages/cd1a6e/"},{name:"v-394ea8e1",path:"/pages/de158a/",component:rc,beforeEnter:function(e,n,t){Ka("Layout","v-394ea8e1").then(t)}},{path:"/pages/de158a/index.html",redirect:"/pages/de158a/"},{path:"/_posts/生活/名言金句.html",redirect:"/pages/de158a/"},{name:"v-506a742f",path:"/pages/1d6b00/",component:rc,beforeEnter:function(e,n,t){Ka("Layout","v-506a742f").then(t)}},{path:"/pages/1d6b00/index.html",redirect:"/pages/1d6b00/"},{path:"/_posts/生活/德州扑克之夜.html",redirect:"/pages/1d6b00/"},{name:"v-614d7a7e",path:"/pages/4c0878/",component:rc,beforeEnter:function(e,n,t){Ka("Layout","v-614d7a7e").then(t)}},{path:"/pages/4c0878/index.html",redirect:"/pages/4c0878/"},{path:"/_posts/生活/生活内容.html",redirect:"/pages/4c0878/"},{name:"v-c72e380a",path:"/pages/67fd5e/",component:rc,beforeEnter:function(e,n,t){Ka("Layout","v-c72e380a").then(t)}},{path:"/pages/67fd5e/index.html",redirect:"/pages/67fd5e/"},{path:"/_posts/生活/电影观看记录.html",redirect:"/pages/67fd5e/"},{name:"v-ebc99984",path:"/",component:rc,beforeEnter:function(e,n,t){Ka("Layout","v-ebc99984").then(t)}},{path:"/index.html",redirect:"/"},{path:"*",component:rc}],ic={title:"kaokei's blog",description:"web前端技术博客,专注web前端学习与总结。JavaScript,js,ES6,TypeScript,vue,React,python,css3,html5,Node,git,github等技术文章。",base:"/",headTags:[["link",{rel:"icon",href:"/img/favicon.ico"}],["meta",{name:"keywords",content:"前端博客,个人技术博客,前端,前端开发,前端框架,web前端,前端面试题,技术文档,学习,面试,JavaScript,js,ES6,TypeScript,vue,python,css3,html5,Node,git,github,markdown"}],["meta",{name:"baidu-site-verification",content:"code-JzonidIhwe"}],["meta",{name:"theme-color",content:"#11a8cd"}],["script",{"data-ad-client":"ca-pub-3912182864105528",async:"async",src:"https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"}]],pages:[{title:"快速开始DI",frontmatter:{title:"快速开始DI",date:"2021-12-17T10:30:44.000Z",permalink:"/pages/358991/",categories:["项目文档","di"],tags:["依赖注入"]},regularPath:"/30.%E9%A1%B9%E7%9B%AE%E6%96%87%E6%A1%A3/00.di/00.%E5%BF%AB%E9%80%9F%E5%BC%80%E5%A7%8B.html",relativePath:"30.项目文档/00.di/00.快速开始.md",key:"v-e1cf8cac",path:"/pages/358991/",headers:[{level:2,title:"安装",slug:"安装",normalizedTitle:"安装",charIndex:14},{level:2,title:"基本使用",slug:"基本使用",normalizedTitle:"基本使用",charIndex:240},{level:2,title:"使用建议",slug:"使用建议",normalizedTitle:"使用建议",charIndex:953}],headersStr:"安装 基本使用 使用建议",content:'# 快速开始 DI\n\n\n# 安装\n\nnpm install @kaokei/di reflect-metadata\n\n\n注意到我们同时安装了 reflect-metadata，这是因为我们需要获取 ts 提供的类型信息。\n\n还需要注意本库是强依赖 typescript 环境的，需要在 tsconfig.js 文件中配置如下两个字段。\n\n提示\n\n"emitDecoratorMetadata": true,\n"experimentalDecorators": true,\n\n\n# 基本使用\n\n最常见的使用场景就是代替手动 new 一个类来获取实力对象，可以通过本库自动获取对象。\n\nimport { Injectable, Injector } from "@kaokei/di";\n\n@Injectable()\nexport class LoggerService {\n  public log(...msg: any[]) {\n    console.log("from logger service ==>", ...msg);\n  }\n}\n\n@Injectable()\nexport class CountService {\n  public count = 0;\n  constructor(private logger: LoggerService) {}\n\n  public addOne() {\n    this.count++;\n    this.logger.log("addOne ==> ", this.count);\n  }\n}\n\n// 实例化一个注入器对象\nconst injector = new Injector();\n\n// 通过注入器对象获取CountService类的实例对象\n// 并且本库会自动注入LoggerService类的实例对象作为CountService的依赖\nconst countService = injector.get(CountService);\n\n// 注意到我们并没有手动的维护LoggerService的注入过程\n// 但是this.logger.log依然可以打印出相应的日志\ncountService.addOne();\n\n\n\n# 使用建议\n\n建议直接看源码即可，总共也就 400 行代码。\n\n建议搭配测试用例服用效果更佳。单元测试覆盖率已经达到 100%。',normalizedContent:'# 快速开始 di\n\n\n# 安装\n\nnpm install @kaokei/di reflect-metadata\n\n\n注意到我们同时安装了 reflect-metadata，这是因为我们需要获取 ts 提供的类型信息。\n\n还需要注意本库是强依赖 typescript 环境的，需要在 tsconfig.js 文件中配置如下两个字段。\n\n提示\n\n"emitdecoratormetadata": true,\n"experimentaldecorators": true,\n\n\n# 基本使用\n\n最常见的使用场景就是代替手动 new 一个类来获取实力对象，可以通过本库自动获取对象。\n\nimport { injectable, injector } from "@kaokei/di";\n\n@injectable()\nexport class loggerservice {\n  public log(...msg: any[]) {\n    console.log("from logger service ==>", ...msg);\n  }\n}\n\n@injectable()\nexport class countservice {\n  public count = 0;\n  constructor(private logger: loggerservice) {}\n\n  public addone() {\n    this.count++;\n    this.logger.log("addone ==> ", this.count);\n  }\n}\n\n// 实例化一个注入器对象\nconst injector = new injector();\n\n// 通过注入器对象获取countservice类的实例对象\n// 并且本库会自动注入loggerservice类的实例对象作为countservice的依赖\nconst countservice = injector.get(countservice);\n\n// 注意到我们并没有手动的维护loggerservice的注入过程\n// 但是this.logger.log依然可以打印出相应的日志\ncountservice.addone();\n\n\n\n# 使用建议\n\n建议直接看源码即可，总共也就 400 行代码。\n\n建议搭配测试用例服用效果更佳。单元测试覆盖率已经达到 100%。',charsets:{cjk:!0},lastUpdated:"2021/12/31, 23:17:28"},{title:"API参考",frontmatter:{title:"API参考",date:"2021-12-19T20:48:09.000Z",permalink:"/pages/64784b/",categories:["项目文档","di"],tags:[null]},regularPath:"/30.%E9%A1%B9%E7%9B%AE%E6%96%87%E6%A1%A3/00.di/01.API%E5%8F%82%E8%80%83.html",relativePath:"30.项目文档/00.di/01.API参考.md",key:"v-ba836bea",path:"/pages/64784b/",headers:[{level:2,title:"Injector",slug:"injector",normalizedTitle:"injector",charIndex:13},{level:2,title:"@Injectable",slug:"injectable",normalizedTitle:"@injectable",charIndex:1163},{level:2,title:"@Inject",slug:"inject",normalizedTitle:"@inject",charIndex:373},{level:2,title:"@Self",slug:"self",normalizedTitle:"@self",charIndex:2652},{level:2,title:"@Skip",slug:"skip",normalizedTitle:"@skip",charIndex:3890},{level:2,title:"@Optional",slug:"optional",normalizedTitle:"@optional",charIndex:3896},{level:2,title:"forwardRef",slug:"forwardref",normalizedTitle:"forwardref",charIndex:4893},{level:2,title:"InjectionKey",slug:"injectionkey",normalizedTitle:"injectionkey",charIndex:5335}],headersStr:"Injector @Injectable @Inject @Self @Skip @Optional forwardRef InjectionKey",content:'# API 参考\n\n\n# Injector\n\n本身是一个类，提供了依赖注入的核心功能。\n\n主要逻辑是通过配置 providers 来生成 injector 实例，然后通过 injector.get 来自动化获取服务实例，从而避免手动维护依赖关系。\n\n参数：\n\n第一个参数：providers，代表 provider 的配置信息，类型是数组\n\n第二个参数：parent，代表父级 injector，类型还是 Injector\n\n第三个参数：options，代表 injector 的配置属性，类型是一个普通对象\n\n提示\n\noptions.beforeCacheHook\n\n这个配置项是一个函数，作用是在缓存服务对象之前的一个钩子。目前是用来是服务对象响应化。\n\noptions.mergePropertyHook\n\n这个配置项是一个函数，作用是通过@Inject 注入的属性需要合并到类实例上。目前主要还是为了通过这个钩子保持属性合并后的响应能力。\n\n用法：\n\nconst injector = new Injector([\n  SomeClass,\n  {\n    provide: someUseValueToken,\n    useValue: \'someValue\',\n  },\n  {\n    provide: someUseClassToken,\n    useClass: SomeClass,\n  },\n  {\n    provide: someUseExistingToken,\n    useExisting: AnotherExistingToken,\n  },\n  {\n    provide: someUseFactoryToken,\n    useFactory: (dep1, dep2, dep3...) => {\n      return someValue\n    },\n    deps: [dep1Token, dep2Token, dep3Token...],\n  },\n]);\n\nconst service1 = injector.get(SomeClass);\nconst service2 = injector.get(someUseValueToken);\nconst service3 = injector.get(someUseClassToken);\nconst service4 = injector.get(someUseExistingToken);\nconst service5 = injector.get(someUseFactoryToken);\n\n\n目前提供了以上 5 种配置 provider 的方式，这里主要是参考了 Angular 的概念。\n\n实际上@Injectable 也是另外一种配置 provider 的方式。只不过这种方式只会在root injector中生效。\n\n\n# @Injectable\n\n标志类是可注入的，只有通过@Injectable声明过的类才会参与到依赖注入的过程中。\n\n参数：无\n\n用法：\n\n@Injectable()\nexport class LoggerService {\n  public log(...msg: any[]) {\n    console.log("from logger service ==>", ...msg);\n  }\n}\n\n\n\n# @Inject\n\n使用在类的构造函数的参数中和类的实例属性中，作用是手动声明该参数/属性的依赖注入的 token。\n\n首先需要明确一点就是这个装饰器并不是必须的。而是作为某些场景的补充手段。\n\n一般情况下如果指定构造函数的参数的类型/实例属性的类型是某个类。这时候依赖注入对应的 token 就是这个类，那么@Inejct就不是必须的。\n\n但是如果参数类型/属性类型是 interface 或者基本类型。那么就必须要通过@Inject来手动指定依赖注入的 token 了。\n\n因为这个时候默认获取到的 token 其实是 Object/Boolean/Number/String 这些构造函数。那么根据默认逻辑就是实例化这些类。\n\n// 返回空对象{}\nnew Object();\n// 返回Boolean(false)对象\nnew Boolean();\n// 返回Number(0)对象\nnew Number();\n// 返回String(\'\')对象\nnew String();\n\n\n以上这些实例化对象绝大多数场景并不会是我们想要的逻辑。所以需要借助@Inject来替换以上的默认逻辑。\n\n参数：除了 js 中的 Falsy 的任意值，常见的比如类、字符串、Symbol。\n\n用法：\n\ntype Theme = "white" | "black" | "dark" | "light";\nconst themeToken: Theme = Symbol();\n\n@Injectable()\nexport class CountService {\n  public count = 0;\n\n  // 这里演示了实例属性的类型是一个类型，而不是一个类\n  // 所以必须手动指定属性的依赖注入token是themeToken\n  // 注意这里并没有演示具体怎么通过themeToken获取到真正的theme的逻辑，这个逻辑需要在Injector中配置\n  @Inject(themeToken)\n  public theme!: Theme;\n\n  // 这里演示了@Inject注入一个类\n  // 实际上这里并不需要使用@Inject，因为LoggerService本身就是一个类，所以默认就会注入LoggerService对应的类实例\n  // 这里演示了通过@Inject手动配置依赖注入的token变成AnotherLoggerService，这里也体现了依赖注入的灵活性\n  constructor(@Inject(AnotherLoggerService) private logger: LoggerService) {}\n\n  public addOne() {\n    this.count++;\n    this.logger.log("addOne ==> ", this.count);\n  }\n}\n\n\n\n# @Self\n\n必须要意识到 Injector 最大的特色就是支持层级 Injector。直观的表述就是每一个 injector 都可以设置它的parent injector。\n\n类似的数据结构就是 dom 树，每一个 dom 节点都可以有它的parent node。\n\n正是因为层级结构，所以存在如下这样的逻辑。当我们调用如下代码时。\n\nconst injector = new Injector();\nconst parentInjector = new Injector();\ninjector.parent = parentInjector;\ninjector.get(LoggerService);\n\n\n以上代码的执行逻辑是这样的，因为 injector 中并没有配置 LoggerService，所以在 injector 并不能提供相应的服务对象。\n\n所以会自动进入 parentInjector 中寻找 LoggerService。虽然在 parentInjector 中也没有配置 LoggerService。\n\n但是因为 parentInjector 已经没有 parent，也就是作为root injector，它会自动尝试实例化 LoggerService。\n\n有了以上背景知识，就能理解@Self的作用了。就是强制指定injector.get只会在当前 injector 中寻找相应的服务，而不会从 parentInjector 中寻找服务。\n\n参数：boolean | undefined，当不传参数时，默认为 true\n\n用法：\n\n@Injectable()\nexport class CountService {\n  public count = 0;\n\n  // 这里配置了@Self\n  // 但是实际上还需要看Injector本身的配置\n  // 也就是一定要保证当前injector中存在LoggerService配置\n  constructor(@Self() private logger: LoggerService) {}\n\n  public addOne() {\n    this.count++;\n    this.logger.log("addOne ==> ", this.count);\n  }\n}\n\n\n提示\n\n需要注意@Self作为一个装饰器，应该在类的构造函数的参数/类的实例属性上使用。 实际上injector.get(token, options)存在第二个参数options，这个 options 中可以指定 self、skip、optional 参数。\n\ninjector.get(LoggerService, { self: true, skip: true, optional: true });\n\n\n实际上类的依赖注入的实现过程中就是调用的 injector.get 来实现的。也就是本库会把@Self、@Skip、@Optional这些装饰器转化为injector.get的第二个参数。\n\n\n# @Skip\n\n基本作用类似@Self，只不过功能正好相反，一开始就会跳过当前 injector，而是直接从 parentInjector 中寻找服务。\n\n参数：boolean | undefined，当不传参数时，默认为 true\n\n用法：\n\n@Injectable()\nexport class CountService {\n  public count = 0;\n\n  // 这里配置了@Skip\n  // 但是实际上还需要看Injector的配置\n  // 也就是一定要保证父级或者祖先injector中存在LoggerService配置\n  constructor(@Skip() private logger: LoggerService) {}\n\n  public addOne() {\n    this.count++;\n    this.logger.log("addOne ==> ", this.count);\n  }\n}\n\n\n\n# @Optional\n\n本库作为依赖注入工具，必须处理一个场景就是当本库找不到对应的服务的时候，应该怎么处理。\n\n目前的处理逻辑是，默认会抛出TokenNotFoundError异常。\n\n但是如果我们认为某个服务是可选的，可以配置@Optional，这样当本库找不到对应的服务的时候，就会返回 undefined，而不是抛出异常了。\n\n参数：boolean | undefined，当不传参数时，默认为 true\n\n用法：\n\n@Injectable()\nexport class CountService {\n  public count = 0;\n\n  // 这里配置了@Optional\n  // 所以logger应该是可选属性\n  constructor(@Optional() private logger?: LoggerService) {}\n\n  public addOne() {\n    this.count++;\n    // 因为this.logger可能是undefined\n    // 所以应该使用可选调用?.\n    this.logger?.log("addOne ==> ", this.count);\n  }\n}\n\n\n\n# forwardRef\n\n这个函数是为了解决@Inject的时候存在循环依赖的问题的。\n\n参数：Function，类似这样的() => someToken\n\n用法：\n\ninterface IA {\n  name: string;\n  b: IB;\n}\ninterface IB {\n  name: string;\n  b: IA;\n}\nclass A {\n  public name = "A";\n  // 类A依赖类B\n  @Inject(forwardRef(() => B))\n  public b!: IB;\n}\nclass B {\n  public name = "B";\n  // 类B依赖类A\n  @Inject(forwardRef(() => A))\n  public a!: IA;\n}\n\n\n以上代码演示了 AB 两个类互相依赖，如果缺少 forwardRef，会导致代码编译失败。因为装饰器是立即执行的，所以导致 A 依赖 B 的时候，B 还没有准备好。\n\n\n# InjectionKey\n\n类似 vue 中的 InjectionKey，主要是为了解决类型推导的问题。\n\n注意到 InjectionKey 不是一个函数，而是一个类型范型。\n\n注意到类本身可以自己实例化，而且自带类型信息。但是对于字符串和 Symbol 是没有更多的业务类型信息的。\n\n用法：\n\n// 这里logger1自动推导为LoggerService类型\nconst logger1 = injector.get(LoggerService);\n\n// 假设LoggerServiceStringToken这个token已经指向LoggerService\n// 虽然运行时logger2确实是一个LoggerService类的实例\n// 但是已经丢失了typescript的类型信息\nconst logger2 = injector.get("LoggerServiceStringToken");\n\nconst LoggerServiceStringTokenWithType: InjectionKey<LoggerService> =\n  "LoggerServiceStringToken";\n// 虽然logger3和logger2在运行时并没有什么区别，但是logger3已经可以推导出为LoggerService类型\nconst logger3 = injector.get(LoggerServiceStringTokenWithType);\n',normalizedContent:'# api 参考\n\n\n# injector\n\n本身是一个类，提供了依赖注入的核心功能。\n\n主要逻辑是通过配置 providers 来生成 injector 实例，然后通过 injector.get 来自动化获取服务实例，从而避免手动维护依赖关系。\n\n参数：\n\n第一个参数：providers，代表 provider 的配置信息，类型是数组\n\n第二个参数：parent，代表父级 injector，类型还是 injector\n\n第三个参数：options，代表 injector 的配置属性，类型是一个普通对象\n\n提示\n\noptions.beforecachehook\n\n这个配置项是一个函数，作用是在缓存服务对象之前的一个钩子。目前是用来是服务对象响应化。\n\noptions.mergepropertyhook\n\n这个配置项是一个函数，作用是通过@inject 注入的属性需要合并到类实例上。目前主要还是为了通过这个钩子保持属性合并后的响应能力。\n\n用法：\n\nconst injector = new injector([\n  someclass,\n  {\n    provide: someusevaluetoken,\n    usevalue: \'somevalue\',\n  },\n  {\n    provide: someuseclasstoken,\n    useclass: someclass,\n  },\n  {\n    provide: someuseexistingtoken,\n    useexisting: anotherexistingtoken,\n  },\n  {\n    provide: someusefactorytoken,\n    usefactory: (dep1, dep2, dep3...) => {\n      return somevalue\n    },\n    deps: [dep1token, dep2token, dep3token...],\n  },\n]);\n\nconst service1 = injector.get(someclass);\nconst service2 = injector.get(someusevaluetoken);\nconst service3 = injector.get(someuseclasstoken);\nconst service4 = injector.get(someuseexistingtoken);\nconst service5 = injector.get(someusefactorytoken);\n\n\n目前提供了以上 5 种配置 provider 的方式，这里主要是参考了 angular 的概念。\n\n实际上@injectable 也是另外一种配置 provider 的方式。只不过这种方式只会在root injector中生效。\n\n\n# @injectable\n\n标志类是可注入的，只有通过@injectable声明过的类才会参与到依赖注入的过程中。\n\n参数：无\n\n用法：\n\n@injectable()\nexport class loggerservice {\n  public log(...msg: any[]) {\n    console.log("from logger service ==>", ...msg);\n  }\n}\n\n\n\n# @inject\n\n使用在类的构造函数的参数中和类的实例属性中，作用是手动声明该参数/属性的依赖注入的 token。\n\n首先需要明确一点就是这个装饰器并不是必须的。而是作为某些场景的补充手段。\n\n一般情况下如果指定构造函数的参数的类型/实例属性的类型是某个类。这时候依赖注入对应的 token 就是这个类，那么@inejct就不是必须的。\n\n但是如果参数类型/属性类型是 interface 或者基本类型。那么就必须要通过@inject来手动指定依赖注入的 token 了。\n\n因为这个时候默认获取到的 token 其实是 object/boolean/number/string 这些构造函数。那么根据默认逻辑就是实例化这些类。\n\n// 返回空对象{}\nnew object();\n// 返回boolean(false)对象\nnew boolean();\n// 返回number(0)对象\nnew number();\n// 返回string(\'\')对象\nnew string();\n\n\n以上这些实例化对象绝大多数场景并不会是我们想要的逻辑。所以需要借助@inject来替换以上的默认逻辑。\n\n参数：除了 js 中的 falsy 的任意值，常见的比如类、字符串、symbol。\n\n用法：\n\ntype theme = "white" | "black" | "dark" | "light";\nconst themetoken: theme = symbol();\n\n@injectable()\nexport class countservice {\n  public count = 0;\n\n  // 这里演示了实例属性的类型是一个类型，而不是一个类\n  // 所以必须手动指定属性的依赖注入token是themetoken\n  // 注意这里并没有演示具体怎么通过themetoken获取到真正的theme的逻辑，这个逻辑需要在injector中配置\n  @inject(themetoken)\n  public theme!: theme;\n\n  // 这里演示了@inject注入一个类\n  // 实际上这里并不需要使用@inject，因为loggerservice本身就是一个类，所以默认就会注入loggerservice对应的类实例\n  // 这里演示了通过@inject手动配置依赖注入的token变成anotherloggerservice，这里也体现了依赖注入的灵活性\n  constructor(@inject(anotherloggerservice) private logger: loggerservice) {}\n\n  public addone() {\n    this.count++;\n    this.logger.log("addone ==> ", this.count);\n  }\n}\n\n\n\n# @self\n\n必须要意识到 injector 最大的特色就是支持层级 injector。直观的表述就是每一个 injector 都可以设置它的parent injector。\n\n类似的数据结构就是 dom 树，每一个 dom 节点都可以有它的parent node。\n\n正是因为层级结构，所以存在如下这样的逻辑。当我们调用如下代码时。\n\nconst injector = new injector();\nconst parentinjector = new injector();\ninjector.parent = parentinjector;\ninjector.get(loggerservice);\n\n\n以上代码的执行逻辑是这样的，因为 injector 中并没有配置 loggerservice，所以在 injector 并不能提供相应的服务对象。\n\n所以会自动进入 parentinjector 中寻找 loggerservice。虽然在 parentinjector 中也没有配置 loggerservice。\n\n但是因为 parentinjector 已经没有 parent，也就是作为root injector，它会自动尝试实例化 loggerservice。\n\n有了以上背景知识，就能理解@self的作用了。就是强制指定injector.get只会在当前 injector 中寻找相应的服务，而不会从 parentinjector 中寻找服务。\n\n参数：boolean | undefined，当不传参数时，默认为 true\n\n用法：\n\n@injectable()\nexport class countservice {\n  public count = 0;\n\n  // 这里配置了@self\n  // 但是实际上还需要看injector本身的配置\n  // 也就是一定要保证当前injector中存在loggerservice配置\n  constructor(@self() private logger: loggerservice) {}\n\n  public addone() {\n    this.count++;\n    this.logger.log("addone ==> ", this.count);\n  }\n}\n\n\n提示\n\n需要注意@self作为一个装饰器，应该在类的构造函数的参数/类的实例属性上使用。 实际上injector.get(token, options)存在第二个参数options，这个 options 中可以指定 self、skip、optional 参数。\n\ninjector.get(loggerservice, { self: true, skip: true, optional: true });\n\n\n实际上类的依赖注入的实现过程中就是调用的 injector.get 来实现的。也就是本库会把@self、@skip、@optional这些装饰器转化为injector.get的第二个参数。\n\n\n# @skip\n\n基本作用类似@self，只不过功能正好相反，一开始就会跳过当前 injector，而是直接从 parentinjector 中寻找服务。\n\n参数：boolean | undefined，当不传参数时，默认为 true\n\n用法：\n\n@injectable()\nexport class countservice {\n  public count = 0;\n\n  // 这里配置了@skip\n  // 但是实际上还需要看injector的配置\n  // 也就是一定要保证父级或者祖先injector中存在loggerservice配置\n  constructor(@skip() private logger: loggerservice) {}\n\n  public addone() {\n    this.count++;\n    this.logger.log("addone ==> ", this.count);\n  }\n}\n\n\n\n# @optional\n\n本库作为依赖注入工具，必须处理一个场景就是当本库找不到对应的服务的时候，应该怎么处理。\n\n目前的处理逻辑是，默认会抛出tokennotfounderror异常。\n\n但是如果我们认为某个服务是可选的，可以配置@optional，这样当本库找不到对应的服务的时候，就会返回 undefined，而不是抛出异常了。\n\n参数：boolean | undefined，当不传参数时，默认为 true\n\n用法：\n\n@injectable()\nexport class countservice {\n  public count = 0;\n\n  // 这里配置了@optional\n  // 所以logger应该是可选属性\n  constructor(@optional() private logger?: loggerservice) {}\n\n  public addone() {\n    this.count++;\n    // 因为this.logger可能是undefined\n    // 所以应该使用可选调用?.\n    this.logger?.log("addone ==> ", this.count);\n  }\n}\n\n\n\n# forwardref\n\n这个函数是为了解决@inject的时候存在循环依赖的问题的。\n\n参数：function，类似这样的() => sometoken\n\n用法：\n\ninterface ia {\n  name: string;\n  b: ib;\n}\ninterface ib {\n  name: string;\n  b: ia;\n}\nclass a {\n  public name = "a";\n  // 类a依赖类b\n  @inject(forwardref(() => b))\n  public b!: ib;\n}\nclass b {\n  public name = "b";\n  // 类b依赖类a\n  @inject(forwardref(() => a))\n  public a!: ia;\n}\n\n\n以上代码演示了 ab 两个类互相依赖，如果缺少 forwardref，会导致代码编译失败。因为装饰器是立即执行的，所以导致 a 依赖 b 的时候，b 还没有准备好。\n\n\n# injectionkey\n\n类似 vue 中的 injectionkey，主要是为了解决类型推导的问题。\n\n注意到 injectionkey 不是一个函数，而是一个类型范型。\n\n注意到类本身可以自己实例化，而且自带类型信息。但是对于字符串和 symbol 是没有更多的业务类型信息的。\n\n用法：\n\n// 这里logger1自动推导为loggerservice类型\nconst logger1 = injector.get(loggerservice);\n\n// 假设loggerservicestringtoken这个token已经指向loggerservice\n// 虽然运行时logger2确实是一个loggerservice类的实例\n// 但是已经丢失了typescript的类型信息\nconst logger2 = injector.get("loggerservicestringtoken");\n\nconst loggerservicestringtokenwithtype: injectionkey<loggerservice> =\n  "loggerservicestringtoken";\n// 虽然logger3和logger2在运行时并没有什么区别，但是logger3已经可以推导出为loggerservice类型\nconst logger3 = injector.get(loggerservicestringtokenwithtype);\n',charsets:{cjk:!0},lastUpdated:"2021/12/31, 23:17:28"},{title:"教程",frontmatter:{title:"教程",date:"2021-12-19T20:48:18.000Z",permalink:"/pages/44ea26/",categories:["项目文档","di"],tags:[null]},regularPath:"/30.%E9%A1%B9%E7%9B%AE%E6%96%87%E6%A1%A3/00.di/02.%E6%95%99%E7%A8%8B.html",relativePath:"30.项目文档/00.di/02.教程.md",key:"v-f1b43fb4",path:"/pages/44ea26/",headersStr:null,content:"",normalizedContent:"",charsets:{},lastUpdated:"2021/12/31, 23:17:28"},{title:"di",frontmatter:{pageComponent:{name:"Catalogue",data:{path:"30.项目文档/00.di",imgUrl:"/img/web.png",description:"di"}},title:"di",permalink:"/project/di",sidebar:!1,article:!1,comment:!1,editLink:!1,date:"2021-12-17T10:25:37.000Z"},regularPath:"/30.%E9%A1%B9%E7%9B%AE%E6%96%87%E6%A1%A3/00.di/%E7%9B%AE%E5%BD%95.html",relativePath:"30.项目文档/00.di/目录.md",key:"v-34ee4bc8",path:"/project/di/",headersStr:null,content:"",normalizedContent:"",charsets:{},lastUpdated:"2021/12/31, 23:17:28"},{title:"快速开始use-vue-service",frontmatter:{title:"快速开始use-vue-service",date:"2021-12-17T10:30:48.000Z",permalink:"/pages/46481f/",categories:["项目文档","use-vue-service"],tags:[null]},regularPath:"/30.%E9%A1%B9%E7%9B%AE%E6%96%87%E6%A1%A3/01.use-vue-service/00.%E5%BF%AB%E9%80%9F%E5%BC%80%E5%A7%8B.html",relativePath:"30.项目文档/01.use-vue-service/00.快速开始.md",key:"v-5eead728",path:"/pages/46481f/",headers:[{level:2,title:"安装",slug:"安装",normalizedTitle:"安装",charIndex:717},{level:2,title:"示例代码",slug:"示例代码",normalizedTitle:"示例代码",charIndex:782}],headersStr:"安装 示例代码",content:'# 快速开始 use-vue-service\n\n----------------------------------------\n\nhome: true title: "@kaokei/use-vue-service" icon: home heroImage: /logo.png heroText: "@kaokei/use-vue-service" tagline: 基于 vue3.x 的轻量级依赖注入库 action:\n\n * text: 快速上手 💡 link: guide/ type: primary\n\nfeatures:\n\n * title: 数据管理 🔐 details: 通过服务来管理数据，可以代替 vuex 的\n\n * title: 依赖注入 🎨 details: 通过 typescript 的 decorator 实现依赖注入\n\n * title: 支持类组件 🔧 details: 同时支持 vue composition api 和类组件\n\n * title: 致敬 angular 📡 details: 参考并实现了部分类似 angular 的服务解析机制\n\n * title: 易上手 🌙 details: 核心 api 只有 3 个，非常容易上手\n\n * title: 更多特性 ✨ details: 更多特性开发中。。。\n\nfooter: MIT Licensed | Copyright © 2021-present-1.0.2 kaokei copyrightText: false\n\n----------------------------------------\n\n\n# 安装\n\nnpm install -S reflect-metadata @kaokei/use-vue-service\n\n\n\n# 示例代码\n\nimport { useService } from "@kaokei/use-vue-service";\nimport { SomeService } from "./some.service.ts";\n\nconst someService = useService(SomeService);\n',normalizedContent:'# 快速开始 use-vue-service\n\n----------------------------------------\n\nhome: true title: "@kaokei/use-vue-service" icon: home heroimage: /logo.png herotext: "@kaokei/use-vue-service" tagline: 基于 vue3.x 的轻量级依赖注入库 action:\n\n * text: 快速上手 💡 link: guide/ type: primary\n\nfeatures:\n\n * title: 数据管理 🔐 details: 通过服务来管理数据，可以代替 vuex 的\n\n * title: 依赖注入 🎨 details: 通过 typescript 的 decorator 实现依赖注入\n\n * title: 支持类组件 🔧 details: 同时支持 vue composition api 和类组件\n\n * title: 致敬 angular 📡 details: 参考并实现了部分类似 angular 的服务解析机制\n\n * title: 易上手 🌙 details: 核心 api 只有 3 个，非常容易上手\n\n * title: 更多特性 ✨ details: 更多特性开发中。。。\n\nfooter: mit licensed | copyright © 2021-present-1.0.2 kaokei copyrighttext: false\n\n----------------------------------------\n\n\n# 安装\n\nnpm install -s reflect-metadata @kaokei/use-vue-service\n\n\n\n# 示例代码\n\nimport { useservice } from "@kaokei/use-vue-service";\nimport { someservice } from "./some.service.ts";\n\nconst someservice = useservice(someservice);\n',charsets:{cjk:!0},lastUpdated:"2021/12/31, 23:17:28"},{title:"接口文档",frontmatter:{title:"接口文档",date:"2021-12-19T16:48:30.000Z",permalink:"/pages/36ae88/",categories:["项目文档","use-vue-service"],tags:[null]},regularPath:"/30.%E9%A1%B9%E7%9B%AE%E6%96%87%E6%A1%A3/01.use-vue-service/90.%E6%8E%A5%E5%8F%A3%E6%96%87%E6%A1%A3.html",relativePath:"30.项目文档/01.use-vue-service/90.接口文档.md",key:"v-406493dc",path:"/pages/36ae88/",headers:[{level:2,title:"简介",slug:"简介",normalizedTitle:"简介",charIndex:11},{level:2,title:"Inject 装饰器函数",slug:"inject-装饰器函数",normalizedTitle:"inject 装饰器函数",charIndex:390},{level:2,title:"Skip 装饰器函数",slug:"skip-装饰器函数",normalizedTitle:"skip 装饰器函数",charIndex:1267},{level:2,title:"Self 装饰器函数",slug:"self-装饰器函数",normalizedTitle:"self 装饰器函数",charIndex:2281},{level:2,title:"Optional 装饰器函数",slug:"optional-装饰器函数",normalizedTitle:"optional 装饰器函数",charIndex:3034},{level:2,title:"Injectable 装饰器函数",slug:"injectable-装饰器函数",normalizedTitle:"injectable 装饰器函数",charIndex:4278},{level:2,title:"Component 装饰器函数",slug:"component-装饰器函数",normalizedTitle:"component 装饰器函数",charIndex:4776},{level:2,title:"declareProviders 函数",slug:"declareproviders-函数",normalizedTitle:"declareproviders 函数",charIndex:5119},{level:2,title:"useService 函数",slug:"useservice-函数",normalizedTitle:"useservice 函数",charIndex:6795}],headersStr:"简介 Inject 装饰器函数 Skip 装饰器函数 Self 装饰器函数 Optional 装饰器函数 Injectable 装饰器函数 Component 装饰器函数 declareProviders 函数 useService 函数",content:'# 接口文档\n\n\n# 简介\n\n当前一共有 8 个 API，具体如下：\n\n# 提供依赖注入能力\n\n这些 api 是从@kaokei/di中导出的，是用来定义服务的。而且还可以在类组件中使用（除了 Injectable）。\n\n * Inject\n * Self\n * Skip\n * Optional\n * Injectable\n\n# 类组件专用\n\n * Component\n\n# Option 组件专用\n\n因为在 Option 组件中不能使用@Inject 的方式来注入服务。只能手动调用 useService 来获取服务实例。 同样在类组件中可以使用 Component 来定义 providers，但是在 Option 组件中不能使用装饰器。所以也提供了一个方法 declareProviders。\n\n * declareProviders\n * useService\n\n\n# Inject 装饰器函数\n\nimport { Injectable } from "@kaokei/use-vue-service";\nimport { LoggerService } from "./logger.service.ts";\n\n@Injectable()\nexport class CountService {\n  @Inject(LoggerService)\n  private logger1: LoggerService,\n\n  constructor(\n    @Inject(LoggerService) private logger2: LoggerService,\n  ) {}\n}\n\n\n装饰器目前只能用在类上面，所以可以在类组件和类服务上使用。\n\n参考示例代码，可以看出来@Inject装饰器可以在实例属性以及类的构造函数的参数上使用。\n\n@Inject 的作用是在当前类实例化的时候，Injector 会自动帮助我们注入相应的实例属性和构造函数参数。\n\n@Inject 有一个必填的参数，作为需要注入的服务标识符。\n\n在实例属性上，@Inject 是必须的。如果没有这个装饰器，那么就是一个普通的属性。\n\n在构造函数的参数上，如果参数类型是类，比如这里的 logger2 的类型是 LoggerService 是一个类。那么这里其实是可以不使用@Inject 的。代码如下：\n\nconstructor(\n  private logger2: LoggerService,\n) {}\n\n\n注意：最初的设计在实例属性上，如果属性的类型是一个类，@Inject 的参数是可以省略的，因为装饰器是可以获取到正确的类型的。最终为了代码一致性，把这个特性去掉了，强制要求@Inject 必须指定参数。总结起来就是只有构造函数中可以不使用@Inject，但是如果使用@Inejct 都必须指定参数。还有一点需要注意，实例属性和构造函数的参数的类型可以是interface，但是@Inject 的参数不能是interface。\n\n\n# Skip 装饰器函数\n\nimport { Injectable, Skip } from "@kaokei/use-vue-service";\nimport { LoggerService } from "./logger.service.ts";\n\n@Injectable()\nexport class CountService {\n  @Skip()\n  @Inject(LoggerService)\n  private logger1: LoggerService,\n\n  constructor(\n    @Skip()\n    @Inject(LoggerService)\n    private logger2: LoggerService,\n  ) {}\n}\n\n\n同样是属于装饰器函数，配合@Inject 一起使用。\n\n@Skip 主要是控制@Inject 的行为，在没有@Skip 时，@Inject 会从当前的 Injector 中获取对应的服务，如果找不到则会自动从其父级 Injector 中寻找对应的服务，最终一直到根 Injector 中寻找服务。那么@Skip 的作用就是默认从当前的 Injector 的父级 Injector 开始寻找服务，即跳过当前 Injector。\n\n这样的场景不是很多见，比如当前组件中有一个 Student 服务，代表某个学生，显然我们可以直接@Inject 获取一个 Student 服务。假设其父组件中维护也维护着一个 Student 服务，并且父组件中已经有一个服务实例代表该班级最优秀的学生。那么如果在当前的子组件中想要获取这个最优秀的学生就需要用到@Skip 功能了。\n\n我知道有些同学的脑洞比较大，假设有一个更加复杂的场景，在班级最优秀的学生上面还有年级最优秀、学校最优秀、全市最优秀、全国最优秀、全球最优秀。。。那么如何在最底层的组件中获取以上服务实例呢？答案就是做不到。应该说只是借助@Skip 是做不到这个功能的。具体方法可以参考这里。\n\n其实一开始我是有实现@Skip(number)这个功能的，比如@Skip(5)就是向上跳过 5 层。最终考虑到这样的场景毕竟不是很常见的场景，反而因为实现这个功能降低了整个代码的效率。所以最终是去掉了这个功能。\n\n@Skip 有一个缺点，它可能不是从像你理解的那样跳过当前的 Injector。参考这里\n\n\n# Self 装饰器函数\n\nimport { Injectable, Self } from "@kaokei/use-vue-service";\nimport { LoggerService } from "./logger.service.ts";\n\n@Injectable()\nexport class CountService {\n  @Self()\n  @Inject(LoggerService)\n  private logger1: LoggerService,\n\n  constructor(\n    @Self()\n    @Inject(LoggerService)\n    private logger2: LoggerService,\n  ) {}\n}\n\n\n同样是属于装饰器函数，配合@Inject 一起使用。\n\n根据函数名应该已经猜到其作用了。它控制了@Inject 只会从当前所属的 Injector 中获取服务实例。 咋一看似乎没什么实际用处。仔细一分析还真是没什么实际作用。\n\n因为是借鉴的 Angular 的 API，所以就给实现了。\n\n我的理解它最大的作用应该是起到警告的作用。比如我只想从当前 Injector 中获取 LoggerService，那么我必须要保证当前 Injector 中已经配置了 LoggerService 的 provider。如果我们手动已经保证了这一点，那么有没有@Self 是没有什么影响的。但是如果无意间我们删除了这个 provider，那么@Self 就会报错找不到服务。如果没有@Self 就有可能自动从更父级的 Injector 中寻找到 LoggerService，使得程序没有抛出异常，但是这可能不是我们想要的业务逻辑。\n\n\n# Optional 装饰器函数\n\nimport { Injectable, Optional, Self, Skip } from "@kaokei/use-vue-service";\nimport { LoggerService } from "./logger.service.ts";\n\n@Injectable()\nexport class CountService {\n  @Optional()\n  @Inject(LoggerService)\n  private logger1: LoggerService,\n\n  @Optional()\n  @Self()\n  @Inject(LoggerService)\n  private logger2: LoggerService,\n\n  @Optional()\n  @Skip()\n  @Inject(LoggerService)\n  private logger3: LoggerService,\n\n  constructor(\n    @Optional()\n    @Inject(LoggerService)\n    private logger4: LoggerService,\n\n    @Optional()\n    @Self()\n    @Inject(LoggerService)\n    private logger5: LoggerService,\n\n    @Optional()\n    @Skip()\n    @Inject(LoggerService)\n    private logger6: LoggerService,\n  ) {}\n}\n\n\n同样是属于装饰器函数，配合@Inject 一起使用。\n\n之前我们有提到当 Injector 找不到对应的服务的 provider 时，会抛出异常。如果认为某个属性可以是非必须的，就可以使用@Optional，这时如果找不到 provider，就会返回undefined。\n\n注意：因为实例属性可能是 undefined，那么在调用实例属性的方法时就应该判空，像这样this.logger1?.log(\'hello world\');\n\n注意：默认情况下，如果服务的标识符是一个类，那么在找不到这个服务的 provider 时，就会直接实例化这个类当作服务实例。当然如果有@Self 控制@Inject 的话，就不会自动实例化类了。\n\n注意：上面提到的@Self 控制@Inject，所以就不会自动实例化类了。这在本库中是没有问题的。因为本库提供了一个默认的 Injector 作为根 Injector。实际上在@kaokei/di这个库中的实现要稍微复杂一些，当你手动实例时一个 Injector，并且没有指定父级 Injector 时，它自己就会作为根 Injector，而根 Injector 则又会自动实例化类了。具体代码可以参考这里。\n\n\n# Injectable 装饰器函数\n\nimport { Injectable } from "@kaokei/use-vue-service";\n\n@Injectable()\nexport class LoggerService {\n  public log(...msg: any[]) {\n    console.log("from logger service ==>", ...msg);\n  }\n}\n\n\nInjectable 这个 api 是最简单的 api，只需要在定义服务类的时候，作为类的装饰器使用即可。\n\nInjectable 内部的实现是非常简单的，只是利用了 reflect-metadata 库简单的记录了服务类的构造函数的参数的类型信息。以便在后续实例化服务类的时候需要使用这些类型信息。\n\n可以理解为在构造函数的参数如果是类的时候，就可以不使用@Inject 的原因就在于@Injectable 已经收集到这些类的信息了。\n\n注意：虽然对于没有构造函数的类可以不使用@Injectable，但是为了保持一致性，还是尽量所有的服务类都使用@Injectable。\n\n\n# Component 装饰器函数\n\n@Component({\n  providers: [\n    {\n      provide: COUNTER_THEME,\n      useValue: "red",\n    },\n    CounterService,\n  ],\n})\nexport default class Person extends Vue.with(Props) {\n  // ...\n}\n\n\n从示例代码中可以看出，@Component 作为类的装饰器，其参数是和vue-class-component@8.x中的@Options 函数基本是一致的。\n\n只不过在@Options 的基础上，@Component 还增加了一个参数，就是 providers，其效果就是 declareProviders 函数的作用，用于声明当前组件关联的 Injector 所需要的 providers。\n\n如果当前组件不需要 providers 参数，就可以这样写：\n\n@Component()\nexport default class Person extends Vue.with(Props) {\n  // ...\n}\n\n\n关于 Component 这个 api 则是特意给类组件用的。它有三个作用：\n\n * 第一个作用是对 vue-class-component@8.x 中的@Options的封装；\n * 第二个作用是通过参数 providers 实现了 declareProviders 函数的功能；\n * 第三个作用是实现了类组件具有依赖注入的能力。\n   * 当然这里的注入是有限制的，只能注入实例属性，而不能注入构造函数参数。\n   * 类组件只能注入别的服务，而不能把类组件当作服务注入。这点在 Angular 中是被支持的，但是我觉得这个功能过于强大了，不符合数据驱动视图的原则。\n\n注意：vue-class-component在之前版本中都是使用的@Component这个装饰器，只是在版本 8 中修改为@Options了，正好本库可以捡个漏。\n\n\n# declareProviders 函数\n\n只能在 setup 函数中使用。\n\ndeclareProviders([\n  SomeService,\n  {\n    provide: SomeService,\n    useClass: SomeService,\n  },\n  {\n    provide: SomeService,\n    useClass: SomeOtherService,\n  },\n  {\n    provide: SomeService,\n    useValue: someServiceInstance,\n  },\n  {\n    provide: SomeService,\n    useExisting: SomeOtherService,\n  },\n  {\n    provide: SomeService,\n    useFactory: (dependService1, dependService2, dependService3) => {\n      return someServiceInstance;\n    },\n    deps: [DependService1, DependService2, DependService3],\n  },\n]);\n\n\n可以一次性定义多个服务的 provider。以上列出了所有 provide 的形式。\n\n在解释其作用之前，我们必须了解 Injector 是类似 dom 树一样的树状结构，每个 Injector 都有一个父级 Injector，直到根 Injector 的父级为 null。\n\n当我们在组件的 setup 函数中调用了 declareProviders，就意味着这个组件关联了一个新的 Injector，这个 Injector 会根据我们刚才配置的 providers 来生成服务实例。\n\n想象一下，如果整个应用中所有的服务都是不同的，都是全局单例的。那么我们可能不需要使用declareProviders，把所有服务都放到根 Injector 中即可。\n\n但是如果我们想要实现服务实例的生命周期和某个组件保持一致，最常见的场景就是路由组件。那么显然我们应该把服务定义在对应的路由组件中，而不是在根 Injector 中。\n\n除了控制服务实例的生命周期，另一个功能就是可以实现同一个服务的多例效果。显而易见如果我们在不同的组件中调用declareProviders，并且配置了同一个服务。那么在获取服务实例时就能得到同一个服务的不同实例。\n\n注意：declareProviders在同一个 setup 中只能调用一次，而且应该在最顶部调用。\n\n\n# useService 函数\n\n只能在 setup 函数中使用。\n\nconst someService = useService(SomeService);\n\nconst [someService1, someService2, someService3] = useService([\n  SomeService1,\n  SomeService2,\n  SomeService3,\n]);\n\nconst someService = useService(SomeService, {\n  skip: true,\n  optional: true,\n  defaultValue: "somwService",\n});\n\nconst someService = useService(SomeService, {\n  self: true,\n  optional: true,\n  defaultValue: "somwService",\n});\n\n\n我们可以一次获取单个服务的实例对象，也可以一次性获取多个服务的实例对象。而且可以指定第二个参数来控制 useService 的解析过程。\n\nuseService 的作用非常类似@Inject。尤其是第二个参数，支持这些属性：\n\n * self 对应@Self\n * skip 对应@Skip\n * optional 对应@Optional\n * defaultValue 没有对应的装饰器函数，因为可以直接使用=来赋值默认值\n\n注意到 useService 非常优秀的一点就是返回值都是自带类型的，所以可以非常方便的使用.来知道这个类有哪些属性和方法。\n\n另外一点就是其返回值已经是 reactive 的，可以直接在 vue 模版中绑定。',normalizedContent:'# 接口文档\n\n\n# 简介\n\n当前一共有 8 个 api，具体如下：\n\n# 提供依赖注入能力\n\n这些 api 是从@kaokei/di中导出的，是用来定义服务的。而且还可以在类组件中使用（除了 injectable）。\n\n * inject\n * self\n * skip\n * optional\n * injectable\n\n# 类组件专用\n\n * component\n\n# option 组件专用\n\n因为在 option 组件中不能使用@inject 的方式来注入服务。只能手动调用 useservice 来获取服务实例。 同样在类组件中可以使用 component 来定义 providers，但是在 option 组件中不能使用装饰器。所以也提供了一个方法 declareproviders。\n\n * declareproviders\n * useservice\n\n\n# inject 装饰器函数\n\nimport { injectable } from "@kaokei/use-vue-service";\nimport { loggerservice } from "./logger.service.ts";\n\n@injectable()\nexport class countservice {\n  @inject(loggerservice)\n  private logger1: loggerservice,\n\n  constructor(\n    @inject(loggerservice) private logger2: loggerservice,\n  ) {}\n}\n\n\n装饰器目前只能用在类上面，所以可以在类组件和类服务上使用。\n\n参考示例代码，可以看出来@inject装饰器可以在实例属性以及类的构造函数的参数上使用。\n\n@inject 的作用是在当前类实例化的时候，injector 会自动帮助我们注入相应的实例属性和构造函数参数。\n\n@inject 有一个必填的参数，作为需要注入的服务标识符。\n\n在实例属性上，@inject 是必须的。如果没有这个装饰器，那么就是一个普通的属性。\n\n在构造函数的参数上，如果参数类型是类，比如这里的 logger2 的类型是 loggerservice 是一个类。那么这里其实是可以不使用@inject 的。代码如下：\n\nconstructor(\n  private logger2: loggerservice,\n) {}\n\n\n注意：最初的设计在实例属性上，如果属性的类型是一个类，@inject 的参数是可以省略的，因为装饰器是可以获取到正确的类型的。最终为了代码一致性，把这个特性去掉了，强制要求@inject 必须指定参数。总结起来就是只有构造函数中可以不使用@inject，但是如果使用@inejct 都必须指定参数。还有一点需要注意，实例属性和构造函数的参数的类型可以是interface，但是@inject 的参数不能是interface。\n\n\n# skip 装饰器函数\n\nimport { injectable, skip } from "@kaokei/use-vue-service";\nimport { loggerservice } from "./logger.service.ts";\n\n@injectable()\nexport class countservice {\n  @skip()\n  @inject(loggerservice)\n  private logger1: loggerservice,\n\n  constructor(\n    @skip()\n    @inject(loggerservice)\n    private logger2: loggerservice,\n  ) {}\n}\n\n\n同样是属于装饰器函数，配合@inject 一起使用。\n\n@skip 主要是控制@inject 的行为，在没有@skip 时，@inject 会从当前的 injector 中获取对应的服务，如果找不到则会自动从其父级 injector 中寻找对应的服务，最终一直到根 injector 中寻找服务。那么@skip 的作用就是默认从当前的 injector 的父级 injector 开始寻找服务，即跳过当前 injector。\n\n这样的场景不是很多见，比如当前组件中有一个 student 服务，代表某个学生，显然我们可以直接@inject 获取一个 student 服务。假设其父组件中维护也维护着一个 student 服务，并且父组件中已经有一个服务实例代表该班级最优秀的学生。那么如果在当前的子组件中想要获取这个最优秀的学生就需要用到@skip 功能了。\n\n我知道有些同学的脑洞比较大，假设有一个更加复杂的场景，在班级最优秀的学生上面还有年级最优秀、学校最优秀、全市最优秀、全国最优秀、全球最优秀。。。那么如何在最底层的组件中获取以上服务实例呢？答案就是做不到。应该说只是借助@skip 是做不到这个功能的。具体方法可以参考这里。\n\n其实一开始我是有实现@skip(number)这个功能的，比如@skip(5)就是向上跳过 5 层。最终考虑到这样的场景毕竟不是很常见的场景，反而因为实现这个功能降低了整个代码的效率。所以最终是去掉了这个功能。\n\n@skip 有一个缺点，它可能不是从像你理解的那样跳过当前的 injector。参考这里\n\n\n# self 装饰器函数\n\nimport { injectable, self } from "@kaokei/use-vue-service";\nimport { loggerservice } from "./logger.service.ts";\n\n@injectable()\nexport class countservice {\n  @self()\n  @inject(loggerservice)\n  private logger1: loggerservice,\n\n  constructor(\n    @self()\n    @inject(loggerservice)\n    private logger2: loggerservice,\n  ) {}\n}\n\n\n同样是属于装饰器函数，配合@inject 一起使用。\n\n根据函数名应该已经猜到其作用了。它控制了@inject 只会从当前所属的 injector 中获取服务实例。 咋一看似乎没什么实际用处。仔细一分析还真是没什么实际作用。\n\n因为是借鉴的 angular 的 api，所以就给实现了。\n\n我的理解它最大的作用应该是起到警告的作用。比如我只想从当前 injector 中获取 loggerservice，那么我必须要保证当前 injector 中已经配置了 loggerservice 的 provider。如果我们手动已经保证了这一点，那么有没有@self 是没有什么影响的。但是如果无意间我们删除了这个 provider，那么@self 就会报错找不到服务。如果没有@self 就有可能自动从更父级的 injector 中寻找到 loggerservice，使得程序没有抛出异常，但是这可能不是我们想要的业务逻辑。\n\n\n# optional 装饰器函数\n\nimport { injectable, optional, self, skip } from "@kaokei/use-vue-service";\nimport { loggerservice } from "./logger.service.ts";\n\n@injectable()\nexport class countservice {\n  @optional()\n  @inject(loggerservice)\n  private logger1: loggerservice,\n\n  @optional()\n  @self()\n  @inject(loggerservice)\n  private logger2: loggerservice,\n\n  @optional()\n  @skip()\n  @inject(loggerservice)\n  private logger3: loggerservice,\n\n  constructor(\n    @optional()\n    @inject(loggerservice)\n    private logger4: loggerservice,\n\n    @optional()\n    @self()\n    @inject(loggerservice)\n    private logger5: loggerservice,\n\n    @optional()\n    @skip()\n    @inject(loggerservice)\n    private logger6: loggerservice,\n  ) {}\n}\n\n\n同样是属于装饰器函数，配合@inject 一起使用。\n\n之前我们有提到当 injector 找不到对应的服务的 provider 时，会抛出异常。如果认为某个属性可以是非必须的，就可以使用@optional，这时如果找不到 provider，就会返回undefined。\n\n注意：因为实例属性可能是 undefined，那么在调用实例属性的方法时就应该判空，像这样this.logger1?.log(\'hello world\');\n\n注意：默认情况下，如果服务的标识符是一个类，那么在找不到这个服务的 provider 时，就会直接实例化这个类当作服务实例。当然如果有@self 控制@inject 的话，就不会自动实例化类了。\n\n注意：上面提到的@self 控制@inject，所以就不会自动实例化类了。这在本库中是没有问题的。因为本库提供了一个默认的 injector 作为根 injector。实际上在@kaokei/di这个库中的实现要稍微复杂一些，当你手动实例时一个 injector，并且没有指定父级 injector 时，它自己就会作为根 injector，而根 injector 则又会自动实例化类了。具体代码可以参考这里。\n\n\n# injectable 装饰器函数\n\nimport { injectable } from "@kaokei/use-vue-service";\n\n@injectable()\nexport class loggerservice {\n  public log(...msg: any[]) {\n    console.log("from logger service ==>", ...msg);\n  }\n}\n\n\ninjectable 这个 api 是最简单的 api，只需要在定义服务类的时候，作为类的装饰器使用即可。\n\ninjectable 内部的实现是非常简单的，只是利用了 reflect-metadata 库简单的记录了服务类的构造函数的参数的类型信息。以便在后续实例化服务类的时候需要使用这些类型信息。\n\n可以理解为在构造函数的参数如果是类的时候，就可以不使用@inject 的原因就在于@injectable 已经收集到这些类的信息了。\n\n注意：虽然对于没有构造函数的类可以不使用@injectable，但是为了保持一致性，还是尽量所有的服务类都使用@injectable。\n\n\n# component 装饰器函数\n\n@component({\n  providers: [\n    {\n      provide: counter_theme,\n      usevalue: "red",\n    },\n    counterservice,\n  ],\n})\nexport default class person extends vue.with(props) {\n  // ...\n}\n\n\n从示例代码中可以看出，@component 作为类的装饰器，其参数是和vue-class-component@8.x中的@options 函数基本是一致的。\n\n只不过在@options 的基础上，@component 还增加了一个参数，就是 providers，其效果就是 declareproviders 函数的作用，用于声明当前组件关联的 injector 所需要的 providers。\n\n如果当前组件不需要 providers 参数，就可以这样写：\n\n@component()\nexport default class person extends vue.with(props) {\n  // ...\n}\n\n\n关于 component 这个 api 则是特意给类组件用的。它有三个作用：\n\n * 第一个作用是对 vue-class-component@8.x 中的@options的封装；\n * 第二个作用是通过参数 providers 实现了 declareproviders 函数的功能；\n * 第三个作用是实现了类组件具有依赖注入的能力。\n   * 当然这里的注入是有限制的，只能注入实例属性，而不能注入构造函数参数。\n   * 类组件只能注入别的服务，而不能把类组件当作服务注入。这点在 angular 中是被支持的，但是我觉得这个功能过于强大了，不符合数据驱动视图的原则。\n\n注意：vue-class-component在之前版本中都是使用的@component这个装饰器，只是在版本 8 中修改为@options了，正好本库可以捡个漏。\n\n\n# declareproviders 函数\n\n只能在 setup 函数中使用。\n\ndeclareproviders([\n  someservice,\n  {\n    provide: someservice,\n    useclass: someservice,\n  },\n  {\n    provide: someservice,\n    useclass: someotherservice,\n  },\n  {\n    provide: someservice,\n    usevalue: someserviceinstance,\n  },\n  {\n    provide: someservice,\n    useexisting: someotherservice,\n  },\n  {\n    provide: someservice,\n    usefactory: (dependservice1, dependservice2, dependservice3) => {\n      return someserviceinstance;\n    },\n    deps: [dependservice1, dependservice2, dependservice3],\n  },\n]);\n\n\n可以一次性定义多个服务的 provider。以上列出了所有 provide 的形式。\n\n在解释其作用之前，我们必须了解 injector 是类似 dom 树一样的树状结构，每个 injector 都有一个父级 injector，直到根 injector 的父级为 null。\n\n当我们在组件的 setup 函数中调用了 declareproviders，就意味着这个组件关联了一个新的 injector，这个 injector 会根据我们刚才配置的 providers 来生成服务实例。\n\n想象一下，如果整个应用中所有的服务都是不同的，都是全局单例的。那么我们可能不需要使用declareproviders，把所有服务都放到根 injector 中即可。\n\n但是如果我们想要实现服务实例的生命周期和某个组件保持一致，最常见的场景就是路由组件。那么显然我们应该把服务定义在对应的路由组件中，而不是在根 injector 中。\n\n除了控制服务实例的生命周期，另一个功能就是可以实现同一个服务的多例效果。显而易见如果我们在不同的组件中调用declareproviders，并且配置了同一个服务。那么在获取服务实例时就能得到同一个服务的不同实例。\n\n注意：declareproviders在同一个 setup 中只能调用一次，而且应该在最顶部调用。\n\n\n# useservice 函数\n\n只能在 setup 函数中使用。\n\nconst someservice = useservice(someservice);\n\nconst [someservice1, someservice2, someservice3] = useservice([\n  someservice1,\n  someservice2,\n  someservice3,\n]);\n\nconst someservice = useservice(someservice, {\n  skip: true,\n  optional: true,\n  defaultvalue: "somwservice",\n});\n\nconst someservice = useservice(someservice, {\n  self: true,\n  optional: true,\n  defaultvalue: "somwservice",\n});\n\n\n我们可以一次获取单个服务的实例对象，也可以一次性获取多个服务的实例对象。而且可以指定第二个参数来控制 useservice 的解析过程。\n\nuseservice 的作用非常类似@inject。尤其是第二个参数，支持这些属性：\n\n * self 对应@self\n * skip 对应@skip\n * optional 对应@optional\n * defaultvalue 没有对应的装饰器函数，因为可以直接使用=来赋值默认值\n\n注意到 useservice 非常优秀的一点就是返回值都是自带类型的，所以可以非常方便的使用.来知道这个类有哪些属性和方法。\n\n另外一点就是其返回值已经是 reactive 的，可以直接在 vue 模版中绑定。',charsets:{cjk:!0},lastUpdated:"2021/12/31, 23:17:28"},{title:"进阶教程",frontmatter:{author:"kaokei",title:"进阶教程",date:"2021-12-19T16:51:01.000Z",permalink:"/pages/a03917/",categories:["项目文档","use-vue-service"],tags:[null]},regularPath:"/30.%E9%A1%B9%E7%9B%AE%E6%96%87%E6%A1%A3/01.use-vue-service/advance.html",relativePath:"30.项目文档/01.use-vue-service/advance.md",key:"v-20fd0ac8",path:"/pages/a03917/",headers:[{level:2,title:"简介",slug:"简介",normalizedTitle:"简介",charIndex:2},{level:2,title:"解答问题",slug:"解答问题",normalizedTitle:"解答问题",charIndex:76},{level:2,title:"给组件绑定 Injector",slug:"给组件绑定-injector",normalizedTitle:"给组件绑定 injector",charIndex:912},{level:3,title:"定义 A 组件-没有 declareProviders",slug:"定义-a-组件-没有-declareproviders",normalizedTitle:"定义 a 组件-没有 declareproviders",charIndex:2264},{level:3,title:"定义 B 组件-使用 declareProviders",slug:"定义-b-组件-使用-declareproviders",normalizedTitle:"定义 b 组件-使用 declareproviders",charIndex:2847},{level:2,title:"在服务中注入其他服务",slug:"在服务中注入其他服务",normalizedTitle:"在服务中注入其他服务",charIndex:4904},{level:3,title:"没有依赖的服务",slug:"没有依赖的服务",normalizedTitle:"没有依赖的服务",charIndex:5631},{level:3,title:"通过构造函数注入依赖",slug:"通过构造函数注入依赖",normalizedTitle:"通过构造函数注入依赖",charIndex:5970},{level:3,title:"通过实例属性注入依赖",slug:"通过实例属性注入依赖",normalizedTitle:"通过实例属性注入依赖",charIndex:7553},{level:2,title:"参考文章",slug:"参考文章",normalizedTitle:"参考文章",charIndex:8468}],headersStr:"简介 解答问题 给组件绑定 Injector 定义 A 组件-没有 declareProviders 定义 B 组件-使用 declareProviders 在服务中注入其他服务 没有依赖的服务 通过构造函数注入依赖 通过实例属性注入依赖 参考文章",content:'# 简介\n\n本教程继续介绍下面 2 个 api，可以用来支持更加复杂场景的需求。\n\n * declareProviders\n * Inject\n\n\n# 解答问题\n\n上篇文章中，即基础教程中提到的三个问题，如下：\n\n * 为什么我们不自己 new CountService()，而要通过 useService 获取实例对象？\n * useService(CountService) 这里并没有传递 LoggerService，那么这里是如何初始化 LoggerService 的？\n * 在不同的组件中调用 useService(CountService)，获取到的实例是不是同一个对象？\n\n其实这三个问题可以用一个名词来解答，就是依赖注入。\n\n第一个问题的答案就是，因为我们要使用依赖注入，我们要通过依赖注入来获取实例对象，而不是通过手动 new 来获取实例对象。至于为什么需要依赖注入，这是因为依赖注入相对于手动 new 更具有优势。\n\n第二个问题的答案就是，useService 会自动帮我们实例化一个 LoggerService 的实例，并且传递给 CountService 构造函数。这也是依赖注入其中一个最重要的优势的体现。依赖注入框架会自动帮助我们实现依赖的注入，包括依赖的依赖的注入，这是一个递归的注入过程。\n\n第三个问题的答案就是，useService 有一个非常重要的特性，在同一个Injector中同一个服务一定是单例的。 所以默认情况下，在不同的组件中调用 useService(CountService)，获取到的实例是同一个对象，这种默认的特性正好完美的解决了跨组件通信的问题。具体体现在当任意一个组件内修改了 countService.count 属性，两个组件都会重新渲染。\n\n当然，针对特定的复杂场景我们可能需要实现一个服务可以有多个实例，我们可以有两种做法。第一种是使用不同的 Injector，不同 Injector 中的服务都是互相独立的。第二种就是在同一个 Injector 中，可以针对同一个服务取不同的名字，这样让 Injector 以为是不同的服务，从而得到多个实例。\n\n\n# 给组件绑定 Injector\n\n默认情况下，本库提供了一个全局的根 Injector，它的生命周期是和应用一致的。所以如果是用户信息这类全局性质的数据，那么默认的 Injector 就能满足需求了。\n\n但是如果是某个页面的业务数据，我们期望进入页面的时候初始化数据，离开页面的时候应该销毁数据。那么就应该把这个服务关联到这个页面对应的组件上。这样服务的生命周期就和页面的生命周期一致了。\n\n我们可以借助 declareProviders 来关联组件和 Injector。\n\nimport { declareProviders } from "@kaokei/use-vue-service";\n\n\n在介绍如何使用 declareProviders 函数之前，我们必须弄清楚 useService 是如何工作的。前面已经介绍过 useService 是一个 hooks 函数，是只能在 setup 函数中使用的。\n\n我们还知道一个 vue 项目，最终的产出物就是一棵 vue 组件树，然后 vue 框架会通过 vue 组件树渲染成 dom 树。这个渲染细节我们暂时不用去关心，这里只需要关注 vue 组件树，在这棵树中，任意一个组件节点都有它的父节点，直到根结点。\n\n当我们在某个组件中调用 useService(CountService) 函数时，它会首先从当前组件关联的 Injector 中寻找是否存在 CountService 服务的 provider。如果没有找到，则进入到父组件关联的 Injector 中寻找 CountService 的 provider。如果还没有找到，则继续到更上一层父组件中寻找，直到找到相应服务的 provider，那么就通过这个 provider 获取一个对象出来。这个对象就是 useService(CountService)的返回值。当然还有一种情况就是直到根组件都没有找到 provider，针对这种情况，useService 做了一层 fallbak 机制，就是把 CountService 类当作默认 provider，然后用这个默认的 provider 来获取实例对象。\n\n通过上面简单的介绍，我们应该对 useService 解析机制有一个大概的认识，它和 js 中的原型链的解析机制以及 nodejs 中的 node_modules 解析机制都是非常相似的，应该不是很难理解。\n\n通过上面的介绍，我们知道默认情况下，在不同的组件中调用 useService(CountService)时，肯定是都找不到对应的 provider 的，最终都会冒泡到根组件上，在根组件对应的 Injector 中使用 CountService 类作为默认的 provider 获取实例对象，又因为同一个 Injector 中，同一个服务只有一个实例，所以不同的组件中获取到的是同一个 countService 实例对象。\n\n接下来介绍如何通过 declareProviders 函数来关联组件和 Injector。\n\n> 注意：有关根组件和根 Injector 的关系上面的介绍在某些细节上存在一些瑕疵，但是不妨碍理解整体的工作机制。具体细节差别可以参考这里\n\n\n# 定义 A 组件-没有 declareProviders\n\n<template>\n  <div>\n    <span>{{ countService.count }}</span>\n    <button type="button" @click="countService.addOne()">+1</button>\n  </div>\n</template>\n<script lang="ts">\nimport { defineComponent } from "vue";\nimport { useService } from "@kaokei/use-vue-service";\nimport { CountService } from "../services/count.service";\n\nexport default defineComponent({\n  setup() {\n    // 返回的就是CountService类的实例\n    // 并且是reactive的\n    const countService = useService(CountService);\n    return {\n      // 可以在模板中直接绑定数据和事件\n      countService\n    };\n  }\n});\n<\/script>\n\n\n\n# 定义 B 组件-使用 declareProviders\n\n<template>\n  <div>\n    <span>{{ countService.count }}</span>\n    <button type="button" @click="countService.addOne()">+1</button>\n  </div>\n</template>\n<script lang="ts">\nimport { defineComponent } from "vue";\nimport { useService } from "@kaokei/use-vue-service";\nimport { CountService } from "../services/count.service";\n\nexport default defineComponent({\n  setup() {\n    // 手动定义CountService服务的provider\n    // 这里就是在当前组件上关联了一个新的Injector\n    declareProviders([CountService]);\n    // 返回的就是CountService类的实例\n    // 并且是reactive的\n    const countService = useService(CountService);\n    return {\n      // 可以在模板中直接绑定数据和事件\n      countService\n    };\n  }\n});\n<\/script>\n\n\n对比上面的 A 组件和 B 组件，我们发现唯一的差别就是 B 组件中调用了declareProviders([CountService]);，这行代码的功能就是在 B 组件关联了一个新的 Injector，并且配置了 CountService 这个服务的 provider。\n\n这行代码其实是一种简写，完整的代码应该是这样的：\n\ndeclareProviders([\n  {\n    provide: CountService,\n    useClass: CountService\n  }\n]);\n\n\n从完整的代码里，我们应该可以明确的看出来，其中provide属性定义了服务的名字，也就是指定了是哪个服务，一般称之为服务标识符。useClass属性则是指定了如何生成服务的实例。provide 和 useClass 所在的对象被称为 provider。关于具体的 provider 解释，具体可以参考这里。\n\n我们还能发现 declareProviders 函数的参数是一个数组，其实是一个 provider 数组，这是很好理解的，因为一个组件是可以依赖多个不同的服务的，所以可以通过 declareProviders 函数一次性注册多个服务的 provider 的。\n\n接下来开始分析 A 组件和 B 组件中 useService 的差异了。\n\n在 A 组件中，因为没有使用 declareProviders，所以在当前组件以及父组件中都没有找到 CountService 服务的 provider，一直到根组件中都没有找到 provider，所以只能使用默认的 provider 获取实例对象。然后作为 useService 函数的返回值。\n\n在 B 组件中，因为 B 组件本身就已经定义了 CountService 服务的 provider，所以不用到父组件中去寻找了，更不需要到根组件中寻找了。直接在当前组件关联的 Injector 中获取服务的实例对象，然后作为 useService 函数的返回值。\n\n最后的总结就是 A 组件中的 countService 对象是在根组件关联的 Injector 中，B 组件中的 countService 对象是在 B 组件关联的 Injector 中。\n\n这样我们就达成了我扪想要的效果了，即通过 declareProviders 手动管理服务的位置，从而管理服务的生命周期，其实也是管理了该服务对哪个组件（及其子孙组件）可见，达到类似作用域的功能。同时我们也客观上实现了同一个服务可以具有多个实例对象，这里的意思是指根 Injector 和 B 组件关联的 Injector 中都有 CountService 实例对象。\n\n这里还是要多说一句，一开始我们一直强调同一个服务在同一个 Injector 下只有一个实例，这是默认行为。然后这里我们又花费了大篇文章介绍怎么实现同一个服务获取多个实例对象。看起来有些冲突，或者说是多此一举。实际上并不是这样的，这是因为业务的复杂性决定的，大多数简单的场景下我们是不需要 declareProviders 的，但是当业务场景足够复杂的时候，我们还是需要一种机制去实现多例的功能。为了满足不同的业务场景，我们肯定是需要提供这种基础能力的。\n\n\n# 在服务中注入其他服务\n\n在之前的介绍中我们一直用类来描述服务，但是实际上服务不仅仅只能是类来描述。\n\n本质上服务应该是数据和方法的集合体，极端场景也可以没有数据或方法，那么服务就退化为数据和方法了。所以有时候文档中会使用数据来代指服务。\n\n现在再反过来思考类和服务之间的关系，显然类本身是“不太能”直接作为服务来使用的，而应该是作为服务的工厂，通过类的实例化来生成服务对象。\n\n所以类只不过是生成服务对象的一种方式而已，我们还可以直接配置一个函数，然后把这个函数的返回值作为服务。\n\n最直接的情况就是我们不再需要一个生产服务的过程，而是直接配置服务本身。这个服务本身可以是对象、字符串、数字、布尔值、函数。甚至如果你愿意的话可以直接配置一个类作为服务本身（虽然我暂时还没有遇到这个场景）。\n\n还有另外一个问题也需要考虑，现在我们回归到使用类来描述服务，如果这个服务并不是象我们之前所举的例子 LoggerService 那么简单，没有任何依赖，而是具有非常复杂的依赖结构。比如这样的：\n\nA --\x3e B、C、D\nB --\x3e C、D\nC --\x3e D、E\nD --\x3e E、F\nE --\x3e F\nF 没有依赖\n\n\n考虑到这样复杂的场景，当我们使用useService(A)的时候，显然依赖注入框架本身是需要分析这种依赖关系的，然后依次实例化 F、E、D、C、B，最后才是实例化 A。\n\n而且这个例子中也特意规避了循环依赖的场景，本库已经支持了部分循环依赖，对于不支持的循环依赖也会有准确的异常报错。\n\n让我们再回归一下话题，不考虑依赖入住背后复杂的实现，我们现在需要做的应该是如何在代码成面来描述这种依赖关系。这里就需要借助@Inject这个装饰器了。\n\n\n# 没有依赖的服务\n\nimport { Injectable } from "@kaokei/use-vue-service";\n\n@Injectable()\nexport class LoggerService {\n  public log(...msg: any[]) {\n    console.log("from logger service ==>", ...msg);\n  }\n}\n\n\n很显然这是最简单的场景，这个服务没有任何的依赖，只需要使用@Injectable()这个装饰器声明一下这个服务可注入即可。\n\n> 实际上这里可以不用@Injectable()也是没问题的，只不过为了一致性，所有的服务都使用@Injectable()声明一下是一个良好的习惯。\n\n\n# 通过构造函数注入依赖\n\nimport { Injectable, Inject } from "@kaokei/use-vue-service";\nimport { LoggerService } from "./logger.service.ts";\n\nconst someStringServiceToken = "stringServiceToken";\nconst someNumberServiceToken = "numberServiceToken";\n\n@Injectable()\nexport class CountService {\n  public count = 0;\n  constructor(\n    private logger: LoggerService,\n    @Inject(LoggerService) private logger2: LoggerService,\n    @Inject(someStringServiceToken) private someStringService: string,\n    @Inject(someNumberServiceToken) private someNumberService: number\n  ) {}\n\n  public addOne() {\n    this.count++;\n    this.logger.log("addOne ==> ", this.count);\n  }\n}\n\n\n这里展示了常见的几种注入方式。\n\n第一种方式：不使用@Inject，直接使用private logger: LoggerService。我们会得到一个 logger 实例属性，logger 的类型是 LoggerService。\n\n第二种方式：使用了@Inject，其效果是和第一种完全一致的。第一种方式可以看作第二种方式的简写。 第二种方式中有两个 LoggerService，第一个出现在@Inject(LoggerService)，功能是指定了具体是哪个服务，起到服务标识符的作用。 第二个出现在private logger2: LoggerService，功能是指定了 logger2 的类型是 LoggerService。\n\n第三种和第四种方式是一致的，只不过分别是 string 类型和 number 类型而已。但是这里是一定需要使用@Inject 了。因为如果不通过@Inject 来指定是哪个服务，就会导致使用string来作为服务标识符，最终得到 string 的实例，即new String()得到一个空字符串。这显然不是我们想要的。对于 number 类型也是同理，我们会得到数字 0。但是我们使用了@Inject 就不一样了。我们已经指定了这里的服务就是someStringServiceToken，然后就会通过这个 token 找到对应的服务，并且我们也同时指定了 someStringService 的类型是 string。唯一需要注意的是因为我们注入的不是类服务，而是字符串/数字类型的服务，是没有办法提供默认的 provider 的，也就是说我们必须要手动调用 declareProviders 来指定 provider。\n\ndeclareProviders([\n  {\n    provide: someStringServiceToken,\n    useValue: "hello world"\n  },\n  {\n    provide: someNumberServiceToken,\n    useValue: 123456\n  }\n]);\n\n\n如果没有明确指定服务，则会直接导致注入服务的过程找不到服务而抛出异常。\n\n\n# 通过实例属性注入依赖\n\nimport { Injectable, Inject } from "@kaokei/use-vue-service";\nimport { LoggerService } from "./logger.service.ts";\n\nconst someStringServiceToken = "stringServiceToken";\nconst someNumberServiceToken = "numberServiceToken";\n\n@Injectable()\nexport class CountService {\n  public count = 0;\n\n  @Inject(LoggerService)\n  public logger!: LoggerService;\n\n  @Inject(someStringServiceToken)\n  public someStringService!: string;\n\n  @Inject(someNumberServiceToken)\n  public someNumberService!: number;\n\n  public addOne() {\n    this.count++;\n    this.logger.log("addOne ==> ", this.count);\n  }\n}\n\n\n这个例子的效果是和上面通过构造函数注入依赖是一致的。有几点需要注意一下。\n\n第一点：所有待注入的属性都必须明确使用@Inject，比如 count 属性就不是注入属性，那么就不需要使用@Inject 了。\n\n第二点：@Inject 的参数是必填项，必须手动指定服务标识符。\n\n第三点：可以给实例属性赋值默认值，但是正常情况下是没有意义的，因为一定会被注入的数据覆盖掉，除非指定了服务是@Optional 的，而且确实没有找到该服务才会使用这个默认值。如果没有指定默认值，那么我们应该使用!:来强制指定该属性是非空的。\n\n第四点：和上方的构造函数的注入依赖是同样的道理，我们也必须给字符串/数字类型的服务手动声明 provider。\n\n\n# 参考文章\n\n * 依赖注入 和 new 一个实例有什么区别吗？\n * 不使用依赖注入到处 new 的优缺点？\n * 自动注入到底比 new 好在哪？\n * 为什么我们需要依赖注入？\n * 为什么前端会出现依赖注入这种东西，什么场景下会用到？',normalizedContent:'# 简介\n\n本教程继续介绍下面 2 个 api，可以用来支持更加复杂场景的需求。\n\n * declareproviders\n * inject\n\n\n# 解答问题\n\n上篇文章中，即基础教程中提到的三个问题，如下：\n\n * 为什么我们不自己 new countservice()，而要通过 useservice 获取实例对象？\n * useservice(countservice) 这里并没有传递 loggerservice，那么这里是如何初始化 loggerservice 的？\n * 在不同的组件中调用 useservice(countservice)，获取到的实例是不是同一个对象？\n\n其实这三个问题可以用一个名词来解答，就是依赖注入。\n\n第一个问题的答案就是，因为我们要使用依赖注入，我们要通过依赖注入来获取实例对象，而不是通过手动 new 来获取实例对象。至于为什么需要依赖注入，这是因为依赖注入相对于手动 new 更具有优势。\n\n第二个问题的答案就是，useservice 会自动帮我们实例化一个 loggerservice 的实例，并且传递给 countservice 构造函数。这也是依赖注入其中一个最重要的优势的体现。依赖注入框架会自动帮助我们实现依赖的注入，包括依赖的依赖的注入，这是一个递归的注入过程。\n\n第三个问题的答案就是，useservice 有一个非常重要的特性，在同一个injector中同一个服务一定是单例的。 所以默认情况下，在不同的组件中调用 useservice(countservice)，获取到的实例是同一个对象，这种默认的特性正好完美的解决了跨组件通信的问题。具体体现在当任意一个组件内修改了 countservice.count 属性，两个组件都会重新渲染。\n\n当然，针对特定的复杂场景我们可能需要实现一个服务可以有多个实例，我们可以有两种做法。第一种是使用不同的 injector，不同 injector 中的服务都是互相独立的。第二种就是在同一个 injector 中，可以针对同一个服务取不同的名字，这样让 injector 以为是不同的服务，从而得到多个实例。\n\n\n# 给组件绑定 injector\n\n默认情况下，本库提供了一个全局的根 injector，它的生命周期是和应用一致的。所以如果是用户信息这类全局性质的数据，那么默认的 injector 就能满足需求了。\n\n但是如果是某个页面的业务数据，我们期望进入页面的时候初始化数据，离开页面的时候应该销毁数据。那么就应该把这个服务关联到这个页面对应的组件上。这样服务的生命周期就和页面的生命周期一致了。\n\n我们可以借助 declareproviders 来关联组件和 injector。\n\nimport { declareproviders } from "@kaokei/use-vue-service";\n\n\n在介绍如何使用 declareproviders 函数之前，我们必须弄清楚 useservice 是如何工作的。前面已经介绍过 useservice 是一个 hooks 函数，是只能在 setup 函数中使用的。\n\n我们还知道一个 vue 项目，最终的产出物就是一棵 vue 组件树，然后 vue 框架会通过 vue 组件树渲染成 dom 树。这个渲染细节我们暂时不用去关心，这里只需要关注 vue 组件树，在这棵树中，任意一个组件节点都有它的父节点，直到根结点。\n\n当我们在某个组件中调用 useservice(countservice) 函数时，它会首先从当前组件关联的 injector 中寻找是否存在 countservice 服务的 provider。如果没有找到，则进入到父组件关联的 injector 中寻找 countservice 的 provider。如果还没有找到，则继续到更上一层父组件中寻找，直到找到相应服务的 provider，那么就通过这个 provider 获取一个对象出来。这个对象就是 useservice(countservice)的返回值。当然还有一种情况就是直到根组件都没有找到 provider，针对这种情况，useservice 做了一层 fallbak 机制，就是把 countservice 类当作默认 provider，然后用这个默认的 provider 来获取实例对象。\n\n通过上面简单的介绍，我们应该对 useservice 解析机制有一个大概的认识，它和 js 中的原型链的解析机制以及 nodejs 中的 node_modules 解析机制都是非常相似的，应该不是很难理解。\n\n通过上面的介绍，我们知道默认情况下，在不同的组件中调用 useservice(countservice)时，肯定是都找不到对应的 provider 的，最终都会冒泡到根组件上，在根组件对应的 injector 中使用 countservice 类作为默认的 provider 获取实例对象，又因为同一个 injector 中，同一个服务只有一个实例，所以不同的组件中获取到的是同一个 countservice 实例对象。\n\n接下来介绍如何通过 declareproviders 函数来关联组件和 injector。\n\n> 注意：有关根组件和根 injector 的关系上面的介绍在某些细节上存在一些瑕疵，但是不妨碍理解整体的工作机制。具体细节差别可以参考这里\n\n\n# 定义 a 组件-没有 declareproviders\n\n<template>\n  <div>\n    <span>{{ countservice.count }}</span>\n    <button type="button" @click="countservice.addone()">+1</button>\n  </div>\n</template>\n<script lang="ts">\nimport { definecomponent } from "vue";\nimport { useservice } from "@kaokei/use-vue-service";\nimport { countservice } from "../services/count.service";\n\nexport default definecomponent({\n  setup() {\n    // 返回的就是countservice类的实例\n    // 并且是reactive的\n    const countservice = useservice(countservice);\n    return {\n      // 可以在模板中直接绑定数据和事件\n      countservice\n    };\n  }\n});\n<\/script>\n\n\n\n# 定义 b 组件-使用 declareproviders\n\n<template>\n  <div>\n    <span>{{ countservice.count }}</span>\n    <button type="button" @click="countservice.addone()">+1</button>\n  </div>\n</template>\n<script lang="ts">\nimport { definecomponent } from "vue";\nimport { useservice } from "@kaokei/use-vue-service";\nimport { countservice } from "../services/count.service";\n\nexport default definecomponent({\n  setup() {\n    // 手动定义countservice服务的provider\n    // 这里就是在当前组件上关联了一个新的injector\n    declareproviders([countservice]);\n    // 返回的就是countservice类的实例\n    // 并且是reactive的\n    const countservice = useservice(countservice);\n    return {\n      // 可以在模板中直接绑定数据和事件\n      countservice\n    };\n  }\n});\n<\/script>\n\n\n对比上面的 a 组件和 b 组件，我们发现唯一的差别就是 b 组件中调用了declareproviders([countservice]);，这行代码的功能就是在 b 组件关联了一个新的 injector，并且配置了 countservice 这个服务的 provider。\n\n这行代码其实是一种简写，完整的代码应该是这样的：\n\ndeclareproviders([\n  {\n    provide: countservice,\n    useclass: countservice\n  }\n]);\n\n\n从完整的代码里，我们应该可以明确的看出来，其中provide属性定义了服务的名字，也就是指定了是哪个服务，一般称之为服务标识符。useclass属性则是指定了如何生成服务的实例。provide 和 useclass 所在的对象被称为 provider。关于具体的 provider 解释，具体可以参考这里。\n\n我们还能发现 declareproviders 函数的参数是一个数组，其实是一个 provider 数组，这是很好理解的，因为一个组件是可以依赖多个不同的服务的，所以可以通过 declareproviders 函数一次性注册多个服务的 provider 的。\n\n接下来开始分析 a 组件和 b 组件中 useservice 的差异了。\n\n在 a 组件中，因为没有使用 declareproviders，所以在当前组件以及父组件中都没有找到 countservice 服务的 provider，一直到根组件中都没有找到 provider，所以只能使用默认的 provider 获取实例对象。然后作为 useservice 函数的返回值。\n\n在 b 组件中，因为 b 组件本身就已经定义了 countservice 服务的 provider，所以不用到父组件中去寻找了，更不需要到根组件中寻找了。直接在当前组件关联的 injector 中获取服务的实例对象，然后作为 useservice 函数的返回值。\n\n最后的总结就是 a 组件中的 countservice 对象是在根组件关联的 injector 中，b 组件中的 countservice 对象是在 b 组件关联的 injector 中。\n\n这样我们就达成了我扪想要的效果了，即通过 declareproviders 手动管理服务的位置，从而管理服务的生命周期，其实也是管理了该服务对哪个组件（及其子孙组件）可见，达到类似作用域的功能。同时我们也客观上实现了同一个服务可以具有多个实例对象，这里的意思是指根 injector 和 b 组件关联的 injector 中都有 countservice 实例对象。\n\n这里还是要多说一句，一开始我们一直强调同一个服务在同一个 injector 下只有一个实例，这是默认行为。然后这里我们又花费了大篇文章介绍怎么实现同一个服务获取多个实例对象。看起来有些冲突，或者说是多此一举。实际上并不是这样的，这是因为业务的复杂性决定的，大多数简单的场景下我们是不需要 declareproviders 的，但是当业务场景足够复杂的时候，我们还是需要一种机制去实现多例的功能。为了满足不同的业务场景，我们肯定是需要提供这种基础能力的。\n\n\n# 在服务中注入其他服务\n\n在之前的介绍中我们一直用类来描述服务，但是实际上服务不仅仅只能是类来描述。\n\n本质上服务应该是数据和方法的集合体，极端场景也可以没有数据或方法，那么服务就退化为数据和方法了。所以有时候文档中会使用数据来代指服务。\n\n现在再反过来思考类和服务之间的关系，显然类本身是“不太能”直接作为服务来使用的，而应该是作为服务的工厂，通过类的实例化来生成服务对象。\n\n所以类只不过是生成服务对象的一种方式而已，我们还可以直接配置一个函数，然后把这个函数的返回值作为服务。\n\n最直接的情况就是我们不再需要一个生产服务的过程，而是直接配置服务本身。这个服务本身可以是对象、字符串、数字、布尔值、函数。甚至如果你愿意的话可以直接配置一个类作为服务本身（虽然我暂时还没有遇到这个场景）。\n\n还有另外一个问题也需要考虑，现在我们回归到使用类来描述服务，如果这个服务并不是象我们之前所举的例子 loggerservice 那么简单，没有任何依赖，而是具有非常复杂的依赖结构。比如这样的：\n\na --\x3e b、c、d\nb --\x3e c、d\nc --\x3e d、e\nd --\x3e e、f\ne --\x3e f\nf 没有依赖\n\n\n考虑到这样复杂的场景，当我们使用useservice(a)的时候，显然依赖注入框架本身是需要分析这种依赖关系的，然后依次实例化 f、e、d、c、b，最后才是实例化 a。\n\n而且这个例子中也特意规避了循环依赖的场景，本库已经支持了部分循环依赖，对于不支持的循环依赖也会有准确的异常报错。\n\n让我们再回归一下话题，不考虑依赖入住背后复杂的实现，我们现在需要做的应该是如何在代码成面来描述这种依赖关系。这里就需要借助@inject这个装饰器了。\n\n\n# 没有依赖的服务\n\nimport { injectable } from "@kaokei/use-vue-service";\n\n@injectable()\nexport class loggerservice {\n  public log(...msg: any[]) {\n    console.log("from logger service ==>", ...msg);\n  }\n}\n\n\n很显然这是最简单的场景，这个服务没有任何的依赖，只需要使用@injectable()这个装饰器声明一下这个服务可注入即可。\n\n> 实际上这里可以不用@injectable()也是没问题的，只不过为了一致性，所有的服务都使用@injectable()声明一下是一个良好的习惯。\n\n\n# 通过构造函数注入依赖\n\nimport { injectable, inject } from "@kaokei/use-vue-service";\nimport { loggerservice } from "./logger.service.ts";\n\nconst somestringservicetoken = "stringservicetoken";\nconst somenumberservicetoken = "numberservicetoken";\n\n@injectable()\nexport class countservice {\n  public count = 0;\n  constructor(\n    private logger: loggerservice,\n    @inject(loggerservice) private logger2: loggerservice,\n    @inject(somestringservicetoken) private somestringservice: string,\n    @inject(somenumberservicetoken) private somenumberservice: number\n  ) {}\n\n  public addone() {\n    this.count++;\n    this.logger.log("addone ==> ", this.count);\n  }\n}\n\n\n这里展示了常见的几种注入方式。\n\n第一种方式：不使用@inject，直接使用private logger: loggerservice。我们会得到一个 logger 实例属性，logger 的类型是 loggerservice。\n\n第二种方式：使用了@inject，其效果是和第一种完全一致的。第一种方式可以看作第二种方式的简写。 第二种方式中有两个 loggerservice，第一个出现在@inject(loggerservice)，功能是指定了具体是哪个服务，起到服务标识符的作用。 第二个出现在private logger2: loggerservice，功能是指定了 logger2 的类型是 loggerservice。\n\n第三种和第四种方式是一致的，只不过分别是 string 类型和 number 类型而已。但是这里是一定需要使用@inject 了。因为如果不通过@inject 来指定是哪个服务，就会导致使用string来作为服务标识符，最终得到 string 的实例，即new string()得到一个空字符串。这显然不是我们想要的。对于 number 类型也是同理，我们会得到数字 0。但是我们使用了@inject 就不一样了。我们已经指定了这里的服务就是somestringservicetoken，然后就会通过这个 token 找到对应的服务，并且我们也同时指定了 somestringservice 的类型是 string。唯一需要注意的是因为我们注入的不是类服务，而是字符串/数字类型的服务，是没有办法提供默认的 provider 的，也就是说我们必须要手动调用 declareproviders 来指定 provider。\n\ndeclareproviders([\n  {\n    provide: somestringservicetoken,\n    usevalue: "hello world"\n  },\n  {\n    provide: somenumberservicetoken,\n    usevalue: 123456\n  }\n]);\n\n\n如果没有明确指定服务，则会直接导致注入服务的过程找不到服务而抛出异常。\n\n\n# 通过实例属性注入依赖\n\nimport { injectable, inject } from "@kaokei/use-vue-service";\nimport { loggerservice } from "./logger.service.ts";\n\nconst somestringservicetoken = "stringservicetoken";\nconst somenumberservicetoken = "numberservicetoken";\n\n@injectable()\nexport class countservice {\n  public count = 0;\n\n  @inject(loggerservice)\n  public logger!: loggerservice;\n\n  @inject(somestringservicetoken)\n  public somestringservice!: string;\n\n  @inject(somenumberservicetoken)\n  public somenumberservice!: number;\n\n  public addone() {\n    this.count++;\n    this.logger.log("addone ==> ", this.count);\n  }\n}\n\n\n这个例子的效果是和上面通过构造函数注入依赖是一致的。有几点需要注意一下。\n\n第一点：所有待注入的属性都必须明确使用@inject，比如 count 属性就不是注入属性，那么就不需要使用@inject 了。\n\n第二点：@inject 的参数是必填项，必须手动指定服务标识符。\n\n第三点：可以给实例属性赋值默认值，但是正常情况下是没有意义的，因为一定会被注入的数据覆盖掉，除非指定了服务是@optional 的，而且确实没有找到该服务才会使用这个默认值。如果没有指定默认值，那么我们应该使用!:来强制指定该属性是非空的。\n\n第四点：和上方的构造函数的注入依赖是同样的道理，我们也必须给字符串/数字类型的服务手动声明 provider。\n\n\n# 参考文章\n\n * 依赖注入 和 new 一个实例有什么区别吗？\n * 不使用依赖注入到处 new 的优缺点？\n * 自动注入到底比 new 好在哪？\n * 为什么我们需要依赖注入？\n * 为什么前端会出现依赖注入这种东西，什么场景下会用到？',charsets:{cjk:!0},lastUpdated:"2021/12/31, 23:17:28"},{title:"基础教程",frontmatter:{author:"kaokei",title:"基础教程",date:"2021-12-19T16:51:01.000Z",permalink:"/pages/4497fd/",categories:["项目文档","use-vue-service"],tags:[null]},regularPath:"/30.%E9%A1%B9%E7%9B%AE%E6%96%87%E6%A1%A3/01.use-vue-service/base.html",relativePath:"30.项目文档/01.use-vue-service/base.md",key:"v-0047f104",path:"/pages/4497fd/",headers:[{level:2,title:"简介",slug:"简介",normalizedTitle:"简介",charIndex:2},{level:2,title:"使用步骤",slug:"使用步骤",normalizedTitle:"使用步骤",charIndex:80},{level:3,title:"定义服务",slug:"定义服务",normalizedTitle:"定义服务",charIndex:89},{level:3,title:"获取服务",slug:"获取服务",normalizedTitle:"获取服务",charIndex:771}],headersStr:"简介 使用步骤 定义服务 获取服务",content:'# 简介\n\n本教程介绍最基础的两个 api，通过这两个 api 来大概认识一下怎么使用本库。\n\n * Injectable\n * useService\n\n\n# 使用步骤\n\n\n# 定义服务\n\nimport { Injectable } from "@kaokei/use-vue-service";\n\n@Injectable()\nexport class LoggerService {\n  public log(...msg: any[]) {\n    console.log("from logger service ==>", ...msg);\n  }\n}\n\n@Injectable()\nexport class CountService {\n  public count = 0;\n  constructor(private logger: LoggerService) {}\n\n  public addOne() {\n    this.count++;\n    this.logger.log("addOne ==> ", this.count);\n  }\n}\n\n\n从上面的代码可以看出来，我们采用类来描述服务。服务就是 typescript 中普通的类，并没有引入新的概念。 所以这里是非常简单易上手的，只要记住使用@Injectable标记该类是可注入的服务即可。\n\n另一点需要注意的是注意到上面 LoggerService 是没有依赖的，但是 CountService 是依赖 LoggerService 的。 因为 LoggerService 出现在 CountService 的构造函数中。最终 CountService 就会有一个 logger 实例属性，且logger 的类型就是 LoggerService。\n\n\n# 获取服务\n\n<template>\n  <div>\n    <span>{{ countService.count }}</span>\n    <button type="button" @click="countService.addOne()">+1</button>\n  </div>\n</template>\n<script lang="ts">\nimport { defineComponent } from "vue";\nimport { useService } from "@kaokei/use-vue-service";\nimport { CountService } from "../services/count.service";\n\nexport default defineComponent({\n  setup() {\n    // 返回的就是CountService类的实例\n    // 并且是reactive的\n    const countService = useService(CountService);\n    return {\n      // 可以在模板中直接绑定数据和事件\n      countService\n    };\n  }\n});\n<\/script>\n\n\n注意这里是一个 vue 组件的源代码，我们使用 defineComponent 定义组件。很明显最关键的一行代码就是const countService = useService(CountService);。本库提供了一个方法useService，该方法从名字可以看出来是一个 hooks 方法，只能用在setup函数中。\n\n在这个例子中，我们传入参数CountService，返回一个对象countService，注意 countService 的类型就是 CountService，也就是说 countService 是 CountService 类的一个实例。\n\n正如上面代码中的注释所说，countService 对象本身是一个 reactive 对象，所以 vue 模版可以直接渲染 countService.count，当 countService.count 变化时，组件也会自动更新。\n\n到这里为止，聪明的你一定已经发现了很多问题。\n\n * 为什么我们不自己 new CountService()，而要通过 useService 获取实例对象？\n * useService(CountService) 这里并没有传递 LoggerService，那么这里是如何初始化 LoggerService 的？\n * 在不同的组件中调用 useService(CountService)，获取到的实例是不是同一个对象？\n\n这些问题的解答可以参考这里',normalizedContent:'# 简介\n\n本教程介绍最基础的两个 api，通过这两个 api 来大概认识一下怎么使用本库。\n\n * injectable\n * useservice\n\n\n# 使用步骤\n\n\n# 定义服务\n\nimport { injectable } from "@kaokei/use-vue-service";\n\n@injectable()\nexport class loggerservice {\n  public log(...msg: any[]) {\n    console.log("from logger service ==>", ...msg);\n  }\n}\n\n@injectable()\nexport class countservice {\n  public count = 0;\n  constructor(private logger: loggerservice) {}\n\n  public addone() {\n    this.count++;\n    this.logger.log("addone ==> ", this.count);\n  }\n}\n\n\n从上面的代码可以看出来，我们采用类来描述服务。服务就是 typescript 中普通的类，并没有引入新的概念。 所以这里是非常简单易上手的，只要记住使用@injectable标记该类是可注入的服务即可。\n\n另一点需要注意的是注意到上面 loggerservice 是没有依赖的，但是 countservice 是依赖 loggerservice 的。 因为 loggerservice 出现在 countservice 的构造函数中。最终 countservice 就会有一个 logger 实例属性，且logger 的类型就是 loggerservice。\n\n\n# 获取服务\n\n<template>\n  <div>\n    <span>{{ countservice.count }}</span>\n    <button type="button" @click="countservice.addone()">+1</button>\n  </div>\n</template>\n<script lang="ts">\nimport { definecomponent } from "vue";\nimport { useservice } from "@kaokei/use-vue-service";\nimport { countservice } from "../services/count.service";\n\nexport default definecomponent({\n  setup() {\n    // 返回的就是countservice类的实例\n    // 并且是reactive的\n    const countservice = useservice(countservice);\n    return {\n      // 可以在模板中直接绑定数据和事件\n      countservice\n    };\n  }\n});\n<\/script>\n\n\n注意这里是一个 vue 组件的源代码，我们使用 definecomponent 定义组件。很明显最关键的一行代码就是const countservice = useservice(countservice);。本库提供了一个方法useservice，该方法从名字可以看出来是一个 hooks 方法，只能用在setup函数中。\n\n在这个例子中，我们传入参数countservice，返回一个对象countservice，注意 countservice 的类型就是 countservice，也就是说 countservice 是 countservice 类的一个实例。\n\n正如上面代码中的注释所说，countservice 对象本身是一个 reactive 对象，所以 vue 模版可以直接渲染 countservice.count，当 countservice.count 变化时，组件也会自动更新。\n\n到这里为止，聪明的你一定已经发现了很多问题。\n\n * 为什么我们不自己 new countservice()，而要通过 useservice 获取实例对象？\n * useservice(countservice) 这里并没有传递 loggerservice，那么这里是如何初始化 loggerservice 的？\n * 在不同的组件中调用 useservice(countservice)，获取到的实例是不是同一个对象？\n\n这些问题的解答可以参考这里',charsets:{cjk:!0},lastUpdated:"2021/12/31, 23:17:28"},{title:"如何使用类组件",frontmatter:{author:"kaokei",title:"如何使用类组件",date:"2021-12-19T16:51:01.000Z",permalink:"/pages/a64f21/",categories:["项目文档","use-vue-service"],tags:[null]},regularPath:"/30.%E9%A1%B9%E7%9B%AE%E6%96%87%E6%A1%A3/01.use-vue-service/component.html",relativePath:"30.项目文档/01.use-vue-service/component.md",key:"v-1e5a2ae6",path:"/pages/a64f21/",headers:[{level:2,title:"简介",slug:"简介",normalizedTitle:"简介",charIndex:2},{level:2,title:"类组件与 Option 组件的区别",slug:"类组件与-option-组件的区别",normalizedTitle:"类组件与 option 组件的区别",charIndex:349},{level:3,title:"setup 的不同",slug:"setup-的不同",normalizedTitle:"setup 的不同",charIndex:371},{level:3,title:"computed 的不同",slug:"computed-的不同",normalizedTitle:"computed 的不同",charIndex:626},{level:3,title:"watch 的不同",slug:"watch-的不同",normalizedTitle:"watch 的不同",charIndex:787},{level:3,title:"类组件转化为 Option 组件",slug:"类组件转化为-option-组件",normalizedTitle:"类组件转化为 option 组件",charIndex:900},{level:2,title:"使用类组件",slug:"使用类组件",normalizedTitle:"使用类组件",charIndex:28},{level:2,title:"参考文章",slug:"参考文章",normalizedTitle:"参考文章",charIndex:3367}],headersStr:"简介 类组件与 Option 组件的区别 setup 的不同 computed 的不同 watch 的不同 类组件转化为 Option 组件 使用类组件 参考文章",content:'# 简介\n\n本教程继续介绍下面这个 api，进而掌握如何使用类组件，以及在类组件中使用依赖注入能力。\n\n * Component\n\n整体上来说不太推荐使用类组件，但是有些人比较偏爱类组件，所以本库也支持类组件的依赖注入。\n\n不推荐的原因主要是因为 vue 并不是本身就支持类组件，而是需要借助vue-class-component这个库才能实现支持类组件。虽然这个库也是官方维护的。但毕竟不是原生支持的。\n\n其实我本身还是比较喜欢类组件的，因为如果整个项目包括服务和组件都是类，整体是比较一致的。只是类组件毕竟不是原生支持的，感觉还是不够顺手。\n\n不管怎么说，整个项目要不全都用类组件，要不全都用 Option 组件，不要部分组件用类，另一部分组件又用 Option。至少要保持风格统一。\n\n\n# 类组件与 Option 组件的区别\n\n\n# setup 的不同\n\n在 Option 组件中，只有一个 setup 函数，意味着只有一个闭包，我可以在这个闭包内基于已有的数据派生出其他数据。\n\n但是在类组件中，虽然也可以使用 setup 函数，但是含义已经不一样了，它是对实例属性的延迟初始化的一种方式。\n\n而且本质也不一样，类组件需要借助vue-class-component库才能使用。而且这里的 setup 也是从 vue-class-component 导入的函数。但是在 Option 组件中，setup 只是组件的一个预定义属性而已。\n\n\n# computed 的不同\n\n在 Option 组件中，我们可以在 setup 闭包中使用const computedValue = computed(() => {})，然后导出这个 computedValue 即可。\n\n但是在类组件中，我们则是通过定义 getter 函数来实现 computed 属性的功能。\n\n\n# watch 的不同\n\n在 Option 组件中，我们可以在 setup 闭包中使用watchEffect()来定义 watch 功能。\n\n但是在类组件中，这个已经不在类中定义了，只能在装饰器中定义 watch 属性。\n\n\n# 类组件转化为 Option 组件\n\n通过观察 vue-class-component 的源码，我们可以发现类组件虽然看上去像是一个类，但是最终还是被转换为 Option 组件了。\n\n而且为了获取类的的实例属性，必须得实例化一次。这意味着类组件的构造函数会被执行两次。所以在 vue 的类组件的构造函数中不能定义有副作用的逻辑，实际上是不建议定义类组件的构造函数的。\n\n\n# 使用类组件\n\n如何在 vue 中使用类组件的具体官方文档可以参考这里，当然目前这个文档是 vue2.x 的，vue3.x 的文档还没有出来，可以参考这里。\n\n本库在vue-class-component@next的基础上新增了一个 api，从而可以实现依赖注入的能力。\n\n<template>\n  <div class="container" :style="{ background: bgTheme }">\n    <span class="title">{{ name || "defaultName" }}:</span>\n    <button class="decrementBtn" type="button" @click="counter.decrement">\n      -\n    </button>\n    <span class="countNum">{{ counter?.count }}</span>\n    <button class="incrementBtn" type="button" @click="counter.increment">\n      +\n    </button>\n  </div>\n</template>\n\n<script lang="ts">\nimport { Vue } from "vue-class-component";\n\nimport { Component, Inject } from "@kaokei/use-vue-service";\n\nimport { COUNTER_THEME } from "@services/service.context.ts";\nimport { SwitchService } from "@services/switch.service.ts";\nimport { CounterService } from "@services/counter.service.ts";\n\nclass Props {\n  name?: string;\n  bgColor?: string;\n}\n\n@Component({\n  providers: [\n    {\n      provide: COUNTER_THEME,\n      useValue: "red"\n    },\n    CounterService\n  ]\n})\nexport default class Person extends Vue.with(Props) {\n  @Inject(COUNTER_THEME)\n  public theme!: string;\n\n  @Inject(CounterService)\n  public counter!: CounterService;\n\n  @Inject(SwitchService)\n  public switchService!: SwitchService;\n\n  public get bgTheme() {\n    if (this.switchService.counterStatus === 1) {\n      return this.bgColor || this.theme;\n    } else {\n      return "transparent";\n    }\n  }\n}\n<\/script>\n\n\n这份示例代码中有很多可以说一说的地方。\n\n第一点：export default class Person extends Vue.with(Props)这行代码是vue-class-component规定的模板代码，并不是本库的要求。\n\n第二点：虽然 Person 是一个组件，但是整体上来看也可以理解为一个服务，可以利用@Inject注入其他的服务。需要特别注意的地方时，在普通服务中，我们可以在类的构造函数中声明依赖，但是在类组件中则不能通过构造函数声明依赖。只能通过实例属性来声明依赖。这是因为 vue 类组件的构造函数已经定义好了参数constructor(props: Record<string, any>, ctx: SetupContext)。而且由于类组件在转化为 Option 组件的时候，实际上会调用两次构造函数，所以是不建议在类组件的构造函数中增加其他逻辑的。\n\n第三点：定义了 bgTheme 这个 getter 函数，其功能相当于 vue 中的 computed 属性。\n\n第四点：也是最重要的一点，使用@Component()这个装饰器来定义类组件。这里有一个取巧的地方，就是在 vue-class-component@7.x 及之前的版本中，都是采用的@Component()这个装饰器定义类组件的，但是在 vue-class-component@8.x 中，已经改为@Options()来定义类组件了。所以本库正好可以占用@Component这个 API。本库提供的@Component与 vue-class-component@8.x 提供的@Options的区别主要有两点：\n\n * @Options 支持的参数，@Component 都是支持的。而且额外支持了 providers 这个参数，这个参数可以代替 declareProviders 函数。\n\n * @Component 是对@Options 的封装，同时支持了依赖注入的能力。\n\n\n# 参考文章\n\n * Vue Class Component 官网',normalizedContent:'# 简介\n\n本教程继续介绍下面这个 api，进而掌握如何使用类组件，以及在类组件中使用依赖注入能力。\n\n * component\n\n整体上来说不太推荐使用类组件，但是有些人比较偏爱类组件，所以本库也支持类组件的依赖注入。\n\n不推荐的原因主要是因为 vue 并不是本身就支持类组件，而是需要借助vue-class-component这个库才能实现支持类组件。虽然这个库也是官方维护的。但毕竟不是原生支持的。\n\n其实我本身还是比较喜欢类组件的，因为如果整个项目包括服务和组件都是类，整体是比较一致的。只是类组件毕竟不是原生支持的，感觉还是不够顺手。\n\n不管怎么说，整个项目要不全都用类组件，要不全都用 option 组件，不要部分组件用类，另一部分组件又用 option。至少要保持风格统一。\n\n\n# 类组件与 option 组件的区别\n\n\n# setup 的不同\n\n在 option 组件中，只有一个 setup 函数，意味着只有一个闭包，我可以在这个闭包内基于已有的数据派生出其他数据。\n\n但是在类组件中，虽然也可以使用 setup 函数，但是含义已经不一样了，它是对实例属性的延迟初始化的一种方式。\n\n而且本质也不一样，类组件需要借助vue-class-component库才能使用。而且这里的 setup 也是从 vue-class-component 导入的函数。但是在 option 组件中，setup 只是组件的一个预定义属性而已。\n\n\n# computed 的不同\n\n在 option 组件中，我们可以在 setup 闭包中使用const computedvalue = computed(() => {})，然后导出这个 computedvalue 即可。\n\n但是在类组件中，我们则是通过定义 getter 函数来实现 computed 属性的功能。\n\n\n# watch 的不同\n\n在 option 组件中，我们可以在 setup 闭包中使用watcheffect()来定义 watch 功能。\n\n但是在类组件中，这个已经不在类中定义了，只能在装饰器中定义 watch 属性。\n\n\n# 类组件转化为 option 组件\n\n通过观察 vue-class-component 的源码，我们可以发现类组件虽然看上去像是一个类，但是最终还是被转换为 option 组件了。\n\n而且为了获取类的的实例属性，必须得实例化一次。这意味着类组件的构造函数会被执行两次。所以在 vue 的类组件的构造函数中不能定义有副作用的逻辑，实际上是不建议定义类组件的构造函数的。\n\n\n# 使用类组件\n\n如何在 vue 中使用类组件的具体官方文档可以参考这里，当然目前这个文档是 vue2.x 的，vue3.x 的文档还没有出来，可以参考这里。\n\n本库在vue-class-component@next的基础上新增了一个 api，从而可以实现依赖注入的能力。\n\n<template>\n  <div class="container" :style="{ background: bgtheme }">\n    <span class="title">{{ name || "defaultname" }}:</span>\n    <button class="decrementbtn" type="button" @click="counter.decrement">\n      -\n    </button>\n    <span class="countnum">{{ counter?.count }}</span>\n    <button class="incrementbtn" type="button" @click="counter.increment">\n      +\n    </button>\n  </div>\n</template>\n\n<script lang="ts">\nimport { vue } from "vue-class-component";\n\nimport { component, inject } from "@kaokei/use-vue-service";\n\nimport { counter_theme } from "@services/service.context.ts";\nimport { switchservice } from "@services/switch.service.ts";\nimport { counterservice } from "@services/counter.service.ts";\n\nclass props {\n  name?: string;\n  bgcolor?: string;\n}\n\n@component({\n  providers: [\n    {\n      provide: counter_theme,\n      usevalue: "red"\n    },\n    counterservice\n  ]\n})\nexport default class person extends vue.with(props) {\n  @inject(counter_theme)\n  public theme!: string;\n\n  @inject(counterservice)\n  public counter!: counterservice;\n\n  @inject(switchservice)\n  public switchservice!: switchservice;\n\n  public get bgtheme() {\n    if (this.switchservice.counterstatus === 1) {\n      return this.bgcolor || this.theme;\n    } else {\n      return "transparent";\n    }\n  }\n}\n<\/script>\n\n\n这份示例代码中有很多可以说一说的地方。\n\n第一点：export default class person extends vue.with(props)这行代码是vue-class-component规定的模板代码，并不是本库的要求。\n\n第二点：虽然 person 是一个组件，但是整体上来看也可以理解为一个服务，可以利用@inject注入其他的服务。需要特别注意的地方时，在普通服务中，我们可以在类的构造函数中声明依赖，但是在类组件中则不能通过构造函数声明依赖。只能通过实例属性来声明依赖。这是因为 vue 类组件的构造函数已经定义好了参数constructor(props: record<string, any>, ctx: setupcontext)。而且由于类组件在转化为 option 组件的时候，实际上会调用两次构造函数，所以是不建议在类组件的构造函数中增加其他逻辑的。\n\n第三点：定义了 bgtheme 这个 getter 函数，其功能相当于 vue 中的 computed 属性。\n\n第四点：也是最重要的一点，使用@component()这个装饰器来定义类组件。这里有一个取巧的地方，就是在 vue-class-component@7.x 及之前的版本中，都是采用的@component()这个装饰器定义类组件的，但是在 vue-class-component@8.x 中，已经改为@options()来定义类组件了。所以本库正好可以占用@component这个 api。本库提供的@component与 vue-class-component@8.x 提供的@options的区别主要有两点：\n\n * @options 支持的参数，@component 都是支持的。而且额外支持了 providers 这个参数，这个参数可以代替 declareproviders 函数。\n\n * @component 是对@options 的封装，同时支持了依赖注入的能力。\n\n\n# 参考文章\n\n * vue class component 官网',charsets:{cjk:!0},lastUpdated:"2021/12/31, 23:17:28"},{title:"使用指南",frontmatter:{author:"kaokei",title:"使用指南",date:"2021-12-19T16:51:01.000Z",permalink:"/pages/60d8c4/",categories:["项目文档","use-vue-service"],tags:[null]},regularPath:"/30.%E9%A1%B9%E7%9B%AE%E6%96%87%E6%A1%A3/01.use-vue-service/",relativePath:"30.项目文档/01.use-vue-service/readme.md",key:"v-25b5dfe7",path:"/pages/60d8c4/",headers:[{level:2,title:"简介",slug:"简介",normalizedTitle:"简介",charIndex:2},{level:2,title:"快速搭建项目",slug:"快速搭建项目",normalizedTitle:"快速搭建项目",charIndex:107},{level:2,title:"注意",slug:"注意",normalizedTitle:"注意",charIndex:189}],headersStr:"简介 快速搭建项目 注意",content:'# 简介\n\n本库基于 vue3.x 的 reactive 特性，借鉴了 angular 的 service 的实现机制，在 vue 环境中实现了基于服务的依赖注入，可以替代 vuex 更加方便的管理数据。\n\n\n# 快速搭建项目\n\n 1. 建议使用@vue/cli来初始化项目。\n\nnpm install -g @vue/cli\nvue create projectName\n\n\n注意：手动选择 vue 版本 vue3 以及 typescript 选项，取消 vuex 选项，我们不再需要 vuex。\n\n 2. 在 tsconfig.json 文件中新增以下两行\n\n"experimentalDecorators": true,\n"emitDecoratorMetadata": true,\n\n\n 3. 安装 npm 包\n\nnpm install -S reflect-metadata @kaokei/use-vue-service\n\n\n如果还没有安装 vue-class-component\n\nnpm install -S vue-class-component@next\n\n\n本库的定位是一个轻量级的依赖注入实现，它并不是一个框架。而且对项目的侵入性比较小。本库所有的依赖包括：\n\n * typescript：依赖装饰器特性\n   * 需要 tsc 编译器，而不能是 esbuild 编译器\n   * 需要开启实验特性\n * vue3.x：依赖 provide/inject/reactive 等特性\n * reflect-metadata：获取类型信息\n * vue-class-component：支持类组件\n\n 4. 定义服务\n\n接下来就是开始写代码了，第一步就是定义服务，我们采用类来定义服务，并使用@Injectable()来表明服务可注入。\n\n注意：后续文章有介绍如何定义服务\n\n 5. 组织服务\n\n第二步是组织这些定义好的服务，所谓组织服务其实就是定义这些服务的作用域。组织方式参考了 angular 的实现方式。\n\n注意：后续文章有介绍如何组织服务\n\n 6. 使用服务\n\n第三步就是通过 api 获取服务实例，拿到服务实例后，就能读取服务的状态以及调用服务的方法更新服务的状态。\n\n这里再回顾一下我们定义服务的时候采用的是类的形式。服务的实例就是类的实例。所以服务的状态就是类的实例的属性，所以可以调用类的实例的方法更新属性。 同时服务已经被reactive处理过，vue 模版可以直接渲染服务的状态。当服务的状态变化时，vue 模版也会自动更新。\n\nimport { useService } from "@kaokei/use-vue-service";\nimport { SomeService } from "./some.service.ts";\n\nconst someService = useService(SomeService);\n\n\n<template>\n  <div>{{ someService.name }}: {{ someService.age }}</div>\n  <button type="button" @click="someService.agePlusOne">年龄+1</button>\n</template>\n\n\n\n# 注意\n\n虽然 vue 官网比较推荐使用 vite 搭建项目，但是这里暂时还不能使用 vite 搭建项目。\n\n因为 vite 使用的是 esbuild 而不是 tsc 编译 ts 代码。而 esbuild 暂时还不支持装饰器特性，本库最大的特点就是依赖注入，它是通过装饰器来实现的。',normalizedContent:'# 简介\n\n本库基于 vue3.x 的 reactive 特性，借鉴了 angular 的 service 的实现机制，在 vue 环境中实现了基于服务的依赖注入，可以替代 vuex 更加方便的管理数据。\n\n\n# 快速搭建项目\n\n 1. 建议使用@vue/cli来初始化项目。\n\nnpm install -g @vue/cli\nvue create projectname\n\n\n注意：手动选择 vue 版本 vue3 以及 typescript 选项，取消 vuex 选项，我们不再需要 vuex。\n\n 2. 在 tsconfig.json 文件中新增以下两行\n\n"experimentaldecorators": true,\n"emitdecoratormetadata": true,\n\n\n 3. 安装 npm 包\n\nnpm install -s reflect-metadata @kaokei/use-vue-service\n\n\n如果还没有安装 vue-class-component\n\nnpm install -s vue-class-component@next\n\n\n本库的定位是一个轻量级的依赖注入实现，它并不是一个框架。而且对项目的侵入性比较小。本库所有的依赖包括：\n\n * typescript：依赖装饰器特性\n   * 需要 tsc 编译器，而不能是 esbuild 编译器\n   * 需要开启实验特性\n * vue3.x：依赖 provide/inject/reactive 等特性\n * reflect-metadata：获取类型信息\n * vue-class-component：支持类组件\n\n 4. 定义服务\n\n接下来就是开始写代码了，第一步就是定义服务，我们采用类来定义服务，并使用@injectable()来表明服务可注入。\n\n注意：后续文章有介绍如何定义服务\n\n 5. 组织服务\n\n第二步是组织这些定义好的服务，所谓组织服务其实就是定义这些服务的作用域。组织方式参考了 angular 的实现方式。\n\n注意：后续文章有介绍如何组织服务\n\n 6. 使用服务\n\n第三步就是通过 api 获取服务实例，拿到服务实例后，就能读取服务的状态以及调用服务的方法更新服务的状态。\n\n这里再回顾一下我们定义服务的时候采用的是类的形式。服务的实例就是类的实例。所以服务的状态就是类的实例的属性，所以可以调用类的实例的方法更新属性。 同时服务已经被reactive处理过，vue 模版可以直接渲染服务的状态。当服务的状态变化时，vue 模版也会自动更新。\n\nimport { useservice } from "@kaokei/use-vue-service";\nimport { someservice } from "./some.service.ts";\n\nconst someservice = useservice(someservice);\n\n\n<template>\n  <div>{{ someservice.name }}: {{ someservice.age }}</div>\n  <button type="button" @click="someservice.ageplusone">年龄+1</button>\n</template>\n\n\n\n# 注意\n\n虽然 vue 官网比较推荐使用 vite 搭建项目，但是这里暂时还不能使用 vite 搭建项目。\n\n因为 vite 使用的是 esbuild 而不是 tsc 编译 ts 代码。而 esbuild 暂时还不支持装饰器特性，本库最大的特点就是依赖注入，它是通过装饰器来实现的。',charsets:{cjk:!0},lastUpdated:"2021/12/31, 23:17:28"},{title:"use-vue-service",frontmatter:{pageComponent:{name:"Catalogue",data:{path:"30.项目文档/01.use-vue-service",imgUrl:"/img/web.png",description:"use-vue-service"}},title:"use-vue-service",permalink:"/project/use-vue-service",sidebar:!1,article:!1,comment:!1,editLink:!1,date:"2021-12-17T10:25:40.000Z"},regularPath:"/30.%E9%A1%B9%E7%9B%AE%E6%96%87%E6%A1%A3/01.use-vue-service/%E7%9B%AE%E5%BD%95.html",relativePath:"30.项目文档/01.use-vue-service/目录.md",key:"v-57dca324",path:"/project/use-vue-service/",headersStr:null,content:"",normalizedContent:"",charsets:{},lastUpdated:"2021/12/31, 23:17:28"},{title:"快速入门",frontmatter:{title:"快速入门",date:"2021-12-17T10:30:51.000Z",permalink:"/pages/ac9306/",categories:["项目文档","use-react-service"],tags:[null]},regularPath:"/30.%E9%A1%B9%E7%9B%AE%E6%96%87%E6%A1%A3/02.use-react-service/000.%E5%BF%AB%E9%80%9F%E5%85%A5%E9%97%A8.html",relativePath:"30.项目文档/02.use-react-service/000.快速入门.md",key:"v-09030c8e",path:"/pages/ac9306/",headersStr:null,content:"# 干了第一碗鸡汤\n\n干了这碗鸡汤，我们都是中国人。\n\n快速入门use-react-service\n\nTBD...",normalizedContent:"# 干了第一碗鸡汤\n\n干了这碗鸡汤，我们都是中国人。\n\n快速入门use-react-service\n\ntbd...",charsets:{cjk:!0},lastUpdated:"2021/12/31, 23:17:28"},{title:"use-react-service",frontmatter:{pageComponent:{name:"Catalogue",data:{path:"30.项目文档/02.use-react-service",imgUrl:"/img/web.png",description:"use-react-service"}},title:"use-react-service",permalink:"/project/use-react-service",sidebar:!1,article:!1,comment:!1,editLink:!1,date:"2021-12-17T10:25:42.000Z"},regularPath:"/30.%E9%A1%B9%E7%9B%AE%E6%96%87%E6%A1%A3/02.use-react-service/%E7%9B%AE%E5%BD%95.html",relativePath:"30.项目文档/02.use-react-service/目录.md",key:"v-c295ed24",path:"/project/use-react-service/",headersStr:null,content:"",normalizedContent:"",charsets:{},lastUpdated:"2021/12/31, 23:17:28"},{title:"快速入门",frontmatter:{title:"快速入门",date:"2021-12-17T10:30:54.000Z",permalink:"/pages/550423/",categories:["项目文档","use-solid-service"],tags:[null]},regularPath:"/30.%E9%A1%B9%E7%9B%AE%E6%96%87%E6%A1%A3/03.use-solid-service/000.%E5%BF%AB%E9%80%9F%E5%85%A5%E9%97%A8.html",relativePath:"30.项目文档/03.use-solid-service/000.快速入门.md",key:"v-5bcbc459",path:"/pages/550423/",headersStr:null,content:"# 干了第一碗鸡汤\n\n干了这碗鸡汤，我们都是中国人。\n\n快速入门use-solid-service\n\nTBD...",normalizedContent:"# 干了第一碗鸡汤\n\n干了这碗鸡汤，我们都是中国人。\n\n快速入门use-solid-service\n\ntbd...",charsets:{cjk:!0},lastUpdated:"2021/12/31, 23:17:28"},{title:"use-solid-service",frontmatter:{pageComponent:{name:"Catalogue",data:{path:"30.项目文档/03.use-solid-service",imgUrl:"/img/web.png",description:"use-solid-service"}},title:"use-solid-service",permalink:"/project/use-solid-service",sidebar:!1,article:!1,comment:!1,editLink:!1,date:"2021-12-17T10:25:45.000Z"},regularPath:"/30.%E9%A1%B9%E7%9B%AE%E6%96%87%E6%A1%A3/03.use-solid-service/%E7%9B%AE%E5%BD%95.html",relativePath:"30.项目文档/03.use-solid-service/目录.md",key:"v-540fce4e",path:"/project/use-solid-service/",headersStr:null,content:"",normalizedContent:"",charsets:{},lastUpdated:"2021/12/31, 23:17:28"},{title:"项目文档",frontmatter:{pageComponent:{name:"Catalogue",data:{path:"30.项目文档",imgUrl:"/img/web.png",description:"项目文档"}},title:"项目文档",permalink:"/project",sidebar:!1,article:!1,comment:!1,editLink:!1,date:"2021-12-17T11:18:27.000Z"},regularPath:"/30.%E9%A1%B9%E7%9B%AE%E6%96%87%E6%A1%A3/%E7%9B%AE%E5%BD%95.html",relativePath:"30.项目文档/目录.md",key:"v-294ec0d8",path:"/project/",headersStr:null,content:"",normalizedContent:"",charsets:{},lastUpdated:"2021/12/31, 23:17:28"},{title:"归档",frontmatter:{archivesPage:!0,title:"归档",permalink:"/archives/",article:!1},regularPath:"/@pages/archivesPage.html",relativePath:"@pages/archivesPage.md",key:"v-50bc8525",path:"/archives/",headersStr:null,content:"",normalizedContent:"",charsets:{},lastUpdated:"2021/12/31, 23:17:28"},{title:"分类",frontmatter:{categoriesPage:!0,title:"分类",permalink:"/categories/",article:!1},regularPath:"/@pages/categoriesPage.html",relativePath:"@pages/categoriesPage.md",key:"v-537ab085",path:"/categories/",headersStr:null,content:"",normalizedContent:"",charsets:{},lastUpdated:"2021/12/31, 23:17:28"},{title:"标签",frontmatter:{tagsPage:!0,title:"标签",permalink:"/tags/",article:!1},regularPath:"/@pages/tagsPage.html",relativePath:"@pages/tagsPage.md",key:"v-2f058aa5",path:"/tags/",headersStr:null,content:"",normalizedContent:"",charsets:{},lastUpdated:"2021/12/31, 23:17:28"},{title:"最佳实践指导",frontmatter:{author:"kaokei",title:"最佳实践指导",date:"2021-12-19T16:52:54.000Z",permalink:"/pages/c8faae/",sidebar:!1,categories:["技术"],tags:[null]},regularPath:"/_posts/%E6%8A%80%E6%9C%AF/best-practices.html",relativePath:"_posts/技术/best-practices.md",key:"v-16d784a6",path:"/pages/c8faae/",headers:[{level:2,title:"最佳实践",slug:"最佳实践",normalizedTitle:"最佳实践",charIndex:2},{level:2,title:"@skip 只能跳过一层 Injector",slug:"skip-只能跳过一层-injector",normalizedTitle:"@skip 只能跳过一层 injector",charIndex:760},{level:2,title:"@Skip 和@Self 本身的缺陷",slug:"skip-和-self-本身的缺陷",normalizedTitle:"@skip 和@self 本身的缺陷",charIndex:1317},{level:2,title:"@kaokei/di 支持默认值",slug:"kaokei-di-支持默认值",normalizedTitle:"@kaokei/di 支持默认值",charIndex:2009},{level:2,title:"useExisting vs useClass",slug:"useexisting-vs-useclass",normalizedTitle:"useexisting vs useclass",charIndex:2147},{level:2,title:"使用 InjectionKey 保留类型信息",slug:"使用-injectionkey-保留类型信息",normalizedTitle:"使用 injectionkey 保留类型信息",charIndex:2406},{level:2,title:"根组件和根 Injector 的关系",slug:"根组件和根-injector-的关系",normalizedTitle:"根组件和根 injector 的关系",charIndex:2800},{level:2,title:"禁止使用 watch",slug:"禁止使用-watch",normalizedTitle:"禁止使用 watch",charIndex:3160}],headersStr:"最佳实践 @skip 只能跳过一层 Injector @Skip 和@Self 本身的缺陷 @kaokei/di 支持默认值 useExisting vs useClass 使用 InjectionKey 保留类型信息 根组件和根 Injector 的关系 禁止使用 watch",content:"# 最佳实践\n\ndeclareProviders 一定要在 setup 的顶部使用。如果先调用了 useService，然后再调用 declareProviders，就会导致获取的服务可能不是我们期望的。\n\n虽然基于服务的依赖注入用起来很方便，但是也不应该滥用，还是需要考虑使用场景。我建议在容器组件中使用服务是比较适合的。但是在受控组件中还是推荐使用 props/emit 的方式进行交互。\n\n建议自己基于 axios/superagent 封装自己的 HttpClientService 然后基于 HttpClientService 封装自己的 DaoService 我个人建议是一个项目只需要一个 DaoService，并不需要按照模块划分成多个。当然你也可以按照领域划分成不同的 DaoService，只是我认为过于繁琐了。 我理解一个项目大多数情况下很难超过 200 条接口。维护在一个服务中是可以接受的。 再然后 StudentService，TeacherService，ClassService 这些业务 Service 直接注入 DaoService 即可。\n\n数据的生命周期应该和组件的生命周期一致，当组件销毁时，数据也应该跟着销毁。 子组件的生命周期应该受到父组件的生命周期的约束。当父组件销毁时，子组件也要跟着销毁。 如果子组件的销毁完全只受父组件控制，那么可以把所有数据都放在父组件中即可。因为这样也可以保证父子组件和数据的生命周期是一致的。 如果子组件也会绑定到子路由，则相应的数据也可以绑定到该子组件。还是在保证子组件的数据和子组件的生命周期一致。 目前来看，数据默认会绑定到全局。其他情况数据应该绑定到路由组件，以及子路由组件上。\n\n不建议通过 props 传递 service\n\n\n# @skip 只能跳过一层 Injector\n\n目前我们只实现了@Skip 向上跳过一层 Injector。\n\n其实一开始我是打算实现@Skip(number)来指定向上跳过若干层。后来发现实现这个功能增加很多的复杂度，又考虑到这个功能的使用场景不是很多，所以给废弃了。\n\n那么如果确实需要跳过多层来获取服务呢？应该怎么实现呢？\n\n其实可以借助 useClass 来实现，比如现在有一个服务是 UserService。那么我们可以在各个组件中这样定义 provider。\n\n//爷爷组件中\n{\n  provide: 'aUserService',\n  useClass: UserService\n}\n// 父亲组件中\n{\n  provide: 'bUserService',\n  useClass: UserService\n}\n// 儿子组件中\n{\n  provide: 'cUserService',\n  useClass: UserService\n}\n\n\n那么我们在最底层组件中随时可以获取任意的服务，因为他们的 provide 都不一样。比如这样：\n\n// 孙子组件中可以直接获取到爷爷组件中的服务。\nconst aUserService = useService('aUserService');\n\n\n\n# @Skip 和@Self 本身的缺陷\n\n这个问题解释起来还比较复杂，主要是涉及到 provide/inject 的实现机制。也就是 vue 中 context 是如何工作的。最好是自己看源码，这里稍微解释一下。\n\n每个组件实例上都有一个属性是provides，这个对象默认是指向父组件的provides属性，根组件的provides属性是 null。\n\n当在某个组件中调用 provide 方法时，则会把其父组件的provides属性当作原型创建一个空对象Object.create(parent.provides);，然后给这个空对象设置刚才调用 provide 方法的数据。\n\n按照这个逻辑，其实整个 provides 对象是构成一条完整的原型链的。但是问题就在于，如果一个子组件中没有调用 provide 方法，那么其provides属性是直接等于父组件的provides属性的。\n\n翻译一下上面的话的含义就是，如果在父组件中调用了declareProviders()，但是子组件中没有调用这个方法，那么在子组件中通过useService获取服务时，是直接从父组件所关联的 Injector 开始查找服务的。这样就导致@Skip和@Self和我们正常理解的意思稍微有一些偏差。\n\n这里确实需要人为的注意一下，当你使用@Skip 和@Self 时，当前组件一定是调用了declareProviders()的，否则除非你明确的知道你在做什么。\n\n注意：declareProviders 是依赖 provide 实现的，useService 是依赖 inject 来实现的。\n\n\n# @kaokei/di 支持默认值\n\n依赖注入框架并没有单独实现一个@DefaultValue 这样的装饰器，因为可以直接使用赋值语句来设置默认值。\n\n但是需要注意默认值只有在设置@Optional 装饰器，并且确实没有找到该服务时才会生效，其余情况下是不会起作用的。\n\n\n# useExisting vs useClass\n\n参考 Angular 的文档，可以更好的了解他两的区别。\n\n解释 useExisting 和 useClass 的区别。\n\n使用 useClass，只要 provide 的名字不一样，就算 useClass 指向的服务相同。那么也算是不同的服务，最终相当于得到了同一个服务的多个实例。\n\nuseExisting 则是刚好相反，即使 provide 不相同，但是只要 useExisting 指向的服务是存在的，则立即返回这个服务实例。并不会创建一个新的实例。\n\n\n# 使用 InjectionKey 保留类型信息\n\n参考 Angular 的文档\n\n只不过语法稍微有些区别。\n\nimport { InjectionKey } from \"@kaokei/use-vue-service\";\ntype SomeServiceKey = InjectionKey<SomeService>;\nconst someServiceKey: SomeServiceKey = symbol();\n\n// someService的类型就是SomeService\n// 这就是InjectionKey所起到的作用\n// 如果SomeService是一个类的话，其实是没有必要这样做的\n// 但是如果SomeService是一个接口的话，则只能这样做才能保留类型信息\nconst someService = useService(someServiceKey);\n\n\n\n# 根组件和根 Injector 的关系\n\n前面的文章中一直有说到根组件和根 Injector 是绑定的，实际上这么描述是不够准确的。\n\n本库自带了一个全局唯一的根 Injector，如果整个应用只有一个根组件，可以理解为根组件和根 Injector 是绑定的。\n\n但是整个应用是可能有多个根组件的，在 vue 中，我们可以多次调用 createApp 来创建多个根组件。每个根组件都是独立的。这样就导致根 Injector 还是处在最顶层。我们可以手动调用\n\napp1.use(本库);\napp2.use(本库);\n\n\n上面的代码的作用是手动给每个根组件绑定一个 Injector。这样就能做到某些服务只给某个 app 使用。\n\n实际上我到现在都没有遇到过一个应用中有多个根组件的场景。所以也不用太关心这个问题。\n\n\n# 禁止使用 watch\n\nwatch 有两个优势。\n\n第一，watch 某个属性，属性变化时更新 10 个属性。如果通过 computed 来实现的话，就需要重复 10 遍代码。\n\n第二，watch 某个属性，属性变化时执行某些副作用，比如请求某个 api、输出日志等。这种功能显然是不能通过 computed 来实现的。\n\n既然如此，为什么还是不建议使用 watch 呢？\n\n因为第一点出现的场景不会特别夸张，就算有 2，3 个属性共同依赖某个属性，那也是建议都写成 computed，而不是把更新逻辑放在 watch 中。\n\n第二点我建议是在触发事件的地方去手动调用更新逻辑，而不是依赖数据驱动副作用。\n\n总结以上两点的本质原因在于，我们可以利用数据驱动模版更新，但是我们不应该利用数据驱动其他副作用。\n\n这涉及到心智模型的问题，我期望的心智模型是数据驱动模版，模版响应事件，在事件中修改数据，数据反过来又驱动模版更新。\n\n这中间最多可以接受 computed 对数据层做一层聚合，但是仍然可以看作是数据层的一部分。\n\n但是如果引入了 watch 就不一样了。因为它破坏了这个简单的心智模型。\n\n第一点、数据变化了不仅仅会驱动模版更新，还会触发 watch 中定义的副作用，谁也不知道这个副作用最终又是怎么影响数据和模版的。\n\n第二点、原本的逻辑是模版响应事件，我们直接在事件中更新数据，数据再反应到模版上。但是引入 watch 之后，我们可能会写出这样的代码：我们在事件中只会更新某个数据，然后在 watch 中观察这个数据，然后执行相应的副作用，最终修改了我们想要的数据，数据驱动模版更新。\n\n很明显我们发现心智模型不一样了，变得更加复杂了。",normalizedContent:"# 最佳实践\n\ndeclareproviders 一定要在 setup 的顶部使用。如果先调用了 useservice，然后再调用 declareproviders，就会导致获取的服务可能不是我们期望的。\n\n虽然基于服务的依赖注入用起来很方便，但是也不应该滥用，还是需要考虑使用场景。我建议在容器组件中使用服务是比较适合的。但是在受控组件中还是推荐使用 props/emit 的方式进行交互。\n\n建议自己基于 axios/superagent 封装自己的 httpclientservice 然后基于 httpclientservice 封装自己的 daoservice 我个人建议是一个项目只需要一个 daoservice，并不需要按照模块划分成多个。当然你也可以按照领域划分成不同的 daoservice，只是我认为过于繁琐了。 我理解一个项目大多数情况下很难超过 200 条接口。维护在一个服务中是可以接受的。 再然后 studentservice，teacherservice，classservice 这些业务 service 直接注入 daoservice 即可。\n\n数据的生命周期应该和组件的生命周期一致，当组件销毁时，数据也应该跟着销毁。 子组件的生命周期应该受到父组件的生命周期的约束。当父组件销毁时，子组件也要跟着销毁。 如果子组件的销毁完全只受父组件控制，那么可以把所有数据都放在父组件中即可。因为这样也可以保证父子组件和数据的生命周期是一致的。 如果子组件也会绑定到子路由，则相应的数据也可以绑定到该子组件。还是在保证子组件的数据和子组件的生命周期一致。 目前来看，数据默认会绑定到全局。其他情况数据应该绑定到路由组件，以及子路由组件上。\n\n不建议通过 props 传递 service\n\n\n# @skip 只能跳过一层 injector\n\n目前我们只实现了@skip 向上跳过一层 injector。\n\n其实一开始我是打算实现@skip(number)来指定向上跳过若干层。后来发现实现这个功能增加很多的复杂度，又考虑到这个功能的使用场景不是很多，所以给废弃了。\n\n那么如果确实需要跳过多层来获取服务呢？应该怎么实现呢？\n\n其实可以借助 useclass 来实现，比如现在有一个服务是 userservice。那么我们可以在各个组件中这样定义 provider。\n\n//爷爷组件中\n{\n  provide: 'auserservice',\n  useclass: userservice\n}\n// 父亲组件中\n{\n  provide: 'buserservice',\n  useclass: userservice\n}\n// 儿子组件中\n{\n  provide: 'cuserservice',\n  useclass: userservice\n}\n\n\n那么我们在最底层组件中随时可以获取任意的服务，因为他们的 provide 都不一样。比如这样：\n\n// 孙子组件中可以直接获取到爷爷组件中的服务。\nconst auserservice = useservice('auserservice');\n\n\n\n# @skip 和@self 本身的缺陷\n\n这个问题解释起来还比较复杂，主要是涉及到 provide/inject 的实现机制。也就是 vue 中 context 是如何工作的。最好是自己看源码，这里稍微解释一下。\n\n每个组件实例上都有一个属性是provides，这个对象默认是指向父组件的provides属性，根组件的provides属性是 null。\n\n当在某个组件中调用 provide 方法时，则会把其父组件的provides属性当作原型创建一个空对象object.create(parent.provides);，然后给这个空对象设置刚才调用 provide 方法的数据。\n\n按照这个逻辑，其实整个 provides 对象是构成一条完整的原型链的。但是问题就在于，如果一个子组件中没有调用 provide 方法，那么其provides属性是直接等于父组件的provides属性的。\n\n翻译一下上面的话的含义就是，如果在父组件中调用了declareproviders()，但是子组件中没有调用这个方法，那么在子组件中通过useservice获取服务时，是直接从父组件所关联的 injector 开始查找服务的。这样就导致@skip和@self和我们正常理解的意思稍微有一些偏差。\n\n这里确实需要人为的注意一下，当你使用@skip 和@self 时，当前组件一定是调用了declareproviders()的，否则除非你明确的知道你在做什么。\n\n注意：declareproviders 是依赖 provide 实现的，useservice 是依赖 inject 来实现的。\n\n\n# @kaokei/di 支持默认值\n\n依赖注入框架并没有单独实现一个@defaultvalue 这样的装饰器，因为可以直接使用赋值语句来设置默认值。\n\n但是需要注意默认值只有在设置@optional 装饰器，并且确实没有找到该服务时才会生效，其余情况下是不会起作用的。\n\n\n# useexisting vs useclass\n\n参考 angular 的文档，可以更好的了解他两的区别。\n\n解释 useexisting 和 useclass 的区别。\n\n使用 useclass，只要 provide 的名字不一样，就算 useclass 指向的服务相同。那么也算是不同的服务，最终相当于得到了同一个服务的多个实例。\n\nuseexisting 则是刚好相反，即使 provide 不相同，但是只要 useexisting 指向的服务是存在的，则立即返回这个服务实例。并不会创建一个新的实例。\n\n\n# 使用 injectionkey 保留类型信息\n\n参考 angular 的文档\n\n只不过语法稍微有些区别。\n\nimport { injectionkey } from \"@kaokei/use-vue-service\";\ntype someservicekey = injectionkey<someservice>;\nconst someservicekey: someservicekey = symbol();\n\n// someservice的类型就是someservice\n// 这就是injectionkey所起到的作用\n// 如果someservice是一个类的话，其实是没有必要这样做的\n// 但是如果someservice是一个接口的话，则只能这样做才能保留类型信息\nconst someservice = useservice(someservicekey);\n\n\n\n# 根组件和根 injector 的关系\n\n前面的文章中一直有说到根组件和根 injector 是绑定的，实际上这么描述是不够准确的。\n\n本库自带了一个全局唯一的根 injector，如果整个应用只有一个根组件，可以理解为根组件和根 injector 是绑定的。\n\n但是整个应用是可能有多个根组件的，在 vue 中，我们可以多次调用 createapp 来创建多个根组件。每个根组件都是独立的。这样就导致根 injector 还是处在最顶层。我们可以手动调用\n\napp1.use(本库);\napp2.use(本库);\n\n\n上面的代码的作用是手动给每个根组件绑定一个 injector。这样就能做到某些服务只给某个 app 使用。\n\n实际上我到现在都没有遇到过一个应用中有多个根组件的场景。所以也不用太关心这个问题。\n\n\n# 禁止使用 watch\n\nwatch 有两个优势。\n\n第一，watch 某个属性，属性变化时更新 10 个属性。如果通过 computed 来实现的话，就需要重复 10 遍代码。\n\n第二，watch 某个属性，属性变化时执行某些副作用，比如请求某个 api、输出日志等。这种功能显然是不能通过 computed 来实现的。\n\n既然如此，为什么还是不建议使用 watch 呢？\n\n因为第一点出现的场景不会特别夸张，就算有 2，3 个属性共同依赖某个属性，那也是建议都写成 computed，而不是把更新逻辑放在 watch 中。\n\n第二点我建议是在触发事件的地方去手动调用更新逻辑，而不是依赖数据驱动副作用。\n\n总结以上两点的本质原因在于，我们可以利用数据驱动模版更新，但是我们不应该利用数据驱动其他副作用。\n\n这涉及到心智模型的问题，我期望的心智模型是数据驱动模版，模版响应事件，在事件中修改数据，数据反过来又驱动模版更新。\n\n这中间最多可以接受 computed 对数据层做一层聚合，但是仍然可以看作是数据层的一部分。\n\n但是如果引入了 watch 就不一样了。因为它破坏了这个简单的心智模型。\n\n第一点、数据变化了不仅仅会驱动模版更新，还会触发 watch 中定义的副作用，谁也不知道这个副作用最终又是怎么影响数据和模版的。\n\n第二点、原本的逻辑是模版响应事件，我们直接在事件中更新数据，数据再反应到模版上。但是引入 watch 之后，我们可能会写出这样的代码：我们在事件中只会更新某个数据，然后在 watch 中观察这个数据，然后执行相应的副作用，最终修改了我们想要的数据，数据驱动模版更新。\n\n很明显我们发现心智模型不一样了，变得更加复杂了。",charsets:{cjk:!0},lastUpdated:"2021/12/31, 23:17:28"},{title:"circular_dependency",frontmatter:{title:"circular_dependency",date:"2021-12-19T18:08:57.000Z",permalink:"/pages/46748c/",sidebar:!1,categories:["技术"],tags:[null]},regularPath:"/_posts/%E6%8A%80%E6%9C%AF/circular_dependency.html",relativePath:"_posts/技术/circular_dependency.md",key:"v-d62f8670",path:"/pages/46748c/",headers:[{level:3,title:"循环依赖",slug:"循环依赖",normalizedTitle:"循环依赖",charIndex:2},{level:3,title:"对循环依赖的态度",slug:"对循环依赖的态度",normalizedTitle:"对循环依赖的态度",charIndex:591},{level:3,title:"关于循环依赖的讨论",slug:"关于循环依赖的讨论",normalizedTitle:"关于循环依赖的讨论",charIndex:740},{level:3,title:"大佬怎么解决循环依赖的",slug:"大佬怎么解决循环依赖的",normalizedTitle:"大佬怎么解决循环依赖的",charIndex:977}],headersStr:"循环依赖 对循环依赖的态度 关于循环依赖的讨论 大佬怎么解决循环依赖的",content:"# 循环依赖\n\n一般来讲循环依赖在不同的场景下有不同的含义。\n\n举个例子：\n\n小明眼睛看不见，小王腿走不了路。所以小明要看书时就需要小王来帮忙。小王要走路的时候就需要小明来帮忙。\n\n这个例子中，可以很明显的看出来小明和小王之间是存在互相依赖的。但是这种互相依赖具体是不是循环依赖取决于具体的场景。\n\n考虑这样的场景，就是循环依赖了。小明要看书，请求小王帮忙读书，小王说读书可以是可以，但是我一直坐在椅子上，没有力气读书，你背我走一走吧，小明说你先帮我读书，我再被你走路，小王说你先背我走路，我再帮你读书。\n\n像这种同一时刻，两种资源同时互相依赖即可称为循环依赖。\n\n再回归到 es6 中，在 es6 的模块定义的时候，一般“较少”有循环依赖的场景。但是互相依赖的场景则是非常常见的。\n\n比如调用 A 模块中的 a 方法时，会调用 B 模块中的 b 方法。就算 b 方法再次调用 a 方法，只要这种循环调用会中止即可，这也只是互相依赖，而不是循环依赖。\n\n上面说到的“较少”有循环依赖的场景。常见场景有这两个：\n\n场景一：A extends B 同时 B extends A，即 extends 关键字会导致循环依赖。 场景二：@decorator(A) class B {} 同时 @decorator(B) class A {}。装饰器也是立即执行的，也会导致循环依赖。\n\n\n# 对循环依赖的态度\n\n业务中应该尽量避免循环依赖，如果实在避免不了，那么就需要仔细分析各个模块之间的依赖关系。需要手动解耦各个模块。使之变为互相依赖。\n\n目前的 es6/babel/typescript 都不能直接帮我们解决这种循环依赖，但是应该有相应的提示信息辅助我们发现潜在的循环依赖。\n\n\n# 关于循环依赖的讨论\n\n看了半天，总结起来就是问题是客观存在的，只能具体问题具体分析。并不存在一劳永逸的方案。\n\nHow to solve this basic ES6-module circular dependency problem?\n\nTypeScript needs to support circular references between classes in separate files.\n\nAngular 2 Forward Reference\n\n\n# 大佬怎么解决循环依赖的\n\n我没能复现这种解决方案，感觉并不能解决问题\n\nHow to fix nasty circular dependency issues once and for all in JavaScript & TypeScript\n\nHow to fix this ES6 module circular dependency?\n\nKnown Limitation: Classes as identifiers and circular dependencies\n\nInversifyJS Circular dependencies",normalizedContent:"# 循环依赖\n\n一般来讲循环依赖在不同的场景下有不同的含义。\n\n举个例子：\n\n小明眼睛看不见，小王腿走不了路。所以小明要看书时就需要小王来帮忙。小王要走路的时候就需要小明来帮忙。\n\n这个例子中，可以很明显的看出来小明和小王之间是存在互相依赖的。但是这种互相依赖具体是不是循环依赖取决于具体的场景。\n\n考虑这样的场景，就是循环依赖了。小明要看书，请求小王帮忙读书，小王说读书可以是可以，但是我一直坐在椅子上，没有力气读书，你背我走一走吧，小明说你先帮我读书，我再被你走路，小王说你先背我走路，我再帮你读书。\n\n像这种同一时刻，两种资源同时互相依赖即可称为循环依赖。\n\n再回归到 es6 中，在 es6 的模块定义的时候，一般“较少”有循环依赖的场景。但是互相依赖的场景则是非常常见的。\n\n比如调用 a 模块中的 a 方法时，会调用 b 模块中的 b 方法。就算 b 方法再次调用 a 方法，只要这种循环调用会中止即可，这也只是互相依赖，而不是循环依赖。\n\n上面说到的“较少”有循环依赖的场景。常见场景有这两个：\n\n场景一：a extends b 同时 b extends a，即 extends 关键字会导致循环依赖。 场景二：@decorator(a) class b {} 同时 @decorator(b) class a {}。装饰器也是立即执行的，也会导致循环依赖。\n\n\n# 对循环依赖的态度\n\n业务中应该尽量避免循环依赖，如果实在避免不了，那么就需要仔细分析各个模块之间的依赖关系。需要手动解耦各个模块。使之变为互相依赖。\n\n目前的 es6/babel/typescript 都不能直接帮我们解决这种循环依赖，但是应该有相应的提示信息辅助我们发现潜在的循环依赖。\n\n\n# 关于循环依赖的讨论\n\n看了半天，总结起来就是问题是客观存在的，只能具体问题具体分析。并不存在一劳永逸的方案。\n\nhow to solve this basic es6-module circular dependency problem?\n\ntypescript needs to support circular references between classes in separate files.\n\nangular 2 forward reference\n\n\n# 大佬怎么解决循环依赖的\n\n我没能复现这种解决方案，感觉并不能解决问题\n\nhow to fix nasty circular dependency issues once and for all in javascript & typescript\n\nhow to fix this es6 module circular dependency?\n\nknown limitation: classes as identifiers and circular dependencies\n\ninversifyjs circular dependencies",charsets:{cjk:!0},lastUpdated:"2021/12/31, 23:17:28"},{title:"组件间通信方式",frontmatter:{author:"kaokei",title:"组件间通信方式",date:"2021-12-19T16:52:54.000Z",permalink:"/pages/45cf91/",sidebar:!1,categories:["技术"],tags:[null]},regularPath:"/_posts/%E6%8A%80%E6%9C%AF/communication-between-components.html",relativePath:"_posts/技术/communication-between-components.md",key:"v-426728a0",path:"/pages/45cf91/",headers:[{level:2,title:"父子组件",slug:"父子组件",normalizedTitle:"父子组件",charIndex:14},{level:2,title:"爷孙组件",slug:"爷孙组件",normalizedTitle:"爷孙组件",charIndex:238},{level:2,title:"兄弟组件",slug:"兄弟组件",normalizedTitle:"兄弟组件",charIndex:380},{level:2,title:"事件总线",slug:"事件总线",normalizedTitle:"事件总线",charIndex:597},{level:2,title:"redux or vuex",slug:"redux-or-vuex",normalizedTitle:"redux or vuex",charIndex:810},{level:2,title:"本库的实现方式",slug:"本库的实现方式",normalizedTitle:"本库的实现方式",charIndex:1060}],headersStr:"父子组件 爷孙组件 兄弟组件 事件总线 redux or vuex 本库的实现方式",content:"# 组件间通信方式\n\n\n# 父子组件\n\n父组件通过 props 传递数据给子组件 父组件监听子组件 emit 出来的事件，接受子组件的数据\n\n注意点一 父组件不仅仅可以传递数据给子组件，也可以传递函数给子组件，然后在子组件中调用该函数，从而修改父组件中的数据。这种方式也是可以的，而且这也是 react 中的常规操作。\n\n注意点二 子组件 emit 事件，如果是自定义事件，那么只会传递给父组件。父组件的父组件是接受不到该事件的。但是如果是原生事件，那么就能接收到。\n\n\n# 爷孙组件\n\n注意这里的爷孙并不是特指爷爷和孙子，而是指那些组件层级大于等于 2 层的组件。\n\n对于这种组件关系，我们仍然可以通过 props 一层层地去传递数据到最底层组件，也可以通过一层层的 emit 事件传递到最顶层组件。\n\n但是这显然加大了工作量，而且不利于代码维护。\n\n\n# 兄弟组件\n\n通常需要考虑把兄弟组件都需要的数据提升到最近的公共父组件中，这样每个兄弟组件都只需要和父组件进行沟通即可，即通过 props 和 emit 来转化为爷孙组件/父子组件的通信方式。这样只要父组件中的数据变化了，那么两个兄弟组件都会得到更新。\n\n还有一种场景，就是 A 组件 emit 事件到父组件中，父组件监听该事件，然后通过 ref 直接调用 B 组件中的方法。反过来也可以实现 B 组件触发 A 组件中的方法。\n\n\n# 事件总线\n\n还有一种方式则是通过公共事件总线来传递消息。const bus = new Vue(); 在任意组件中可以\n\nbus.$on('eventName', eventHandler);\nbus.$emit('eventName');\n\n\n这是一种功能非常强大的手段，可以做到整个页面中任意组件之间的通信，但是同时也是非常糟糕的一种设计。因为我们只能通过全局搜索才能找到哪些组件会触发事件，哪些组件会接受事件。\n\n\n# redux or vuex\n\nredux 和 vuex 都是全局唯一数据源。然后通过 dispatch 一个字符串来更新数据。\n\n和事件总线一样，通过字符串来触发更新逻辑对于开发来说是非常效率低下的。\n\n但是相对于事件总线来说要友好一些，主要是因为 dispatch 之后的逻辑非常明确，就是修改 store 中的数据。至于有哪些组件依赖了 store 中的数据则不是我们需要关心的。但是事件总线方案中，我们是需要时刻关心有哪些组件中订阅了某个事件的，至少需要保证事件不重名，否则就乱套了。\n\n\n# 本库的实现方式\n\n考虑 props 和 emit 的本质其实是把数据和方法分割开了。那么本库的实现方式正好与此相反。\n\n我们把数据和方法集合到一起变成一个对象，我们称之为服务。然后通过 provide/inject 的技术，可以方便的在任意组件中获取这个服务。只要我们获取到这个对象，我们可以在模版中渲染这个对象的数据，我们可以直接调用这个对象的方法。\n\n因为这个对象本身就是 reactive 的，所以只要数据变化了，所有依赖这个服务的组件都会自动更新。\n\n由于是通过 provide/inject 来获取的服务，所以是可以跨越多个组件层级直接获取服务对象的。\n\n因为服务对象是一个类的实例，所以数据类型是非常明确的，避免了上述字符串丢失类型的问题。\n\n我们还可以控制 provide 的位置，去控制服务对象的范围。因为服务是和组件关联的，当组件销毁的时候，服务也会跟着销毁，间接控制了服务的生命周期。\n\n虽然本库功能很强大，但是不意味着在整个项目中全部使用它，实际上本库还是比较适合那些容器组件。而对于那些受控组件则还是建议使用 props/emit 技术。",normalizedContent:"# 组件间通信方式\n\n\n# 父子组件\n\n父组件通过 props 传递数据给子组件 父组件监听子组件 emit 出来的事件，接受子组件的数据\n\n注意点一 父组件不仅仅可以传递数据给子组件，也可以传递函数给子组件，然后在子组件中调用该函数，从而修改父组件中的数据。这种方式也是可以的，而且这也是 react 中的常规操作。\n\n注意点二 子组件 emit 事件，如果是自定义事件，那么只会传递给父组件。父组件的父组件是接受不到该事件的。但是如果是原生事件，那么就能接收到。\n\n\n# 爷孙组件\n\n注意这里的爷孙并不是特指爷爷和孙子，而是指那些组件层级大于等于 2 层的组件。\n\n对于这种组件关系，我们仍然可以通过 props 一层层地去传递数据到最底层组件，也可以通过一层层的 emit 事件传递到最顶层组件。\n\n但是这显然加大了工作量，而且不利于代码维护。\n\n\n# 兄弟组件\n\n通常需要考虑把兄弟组件都需要的数据提升到最近的公共父组件中，这样每个兄弟组件都只需要和父组件进行沟通即可，即通过 props 和 emit 来转化为爷孙组件/父子组件的通信方式。这样只要父组件中的数据变化了，那么两个兄弟组件都会得到更新。\n\n还有一种场景，就是 a 组件 emit 事件到父组件中，父组件监听该事件，然后通过 ref 直接调用 b 组件中的方法。反过来也可以实现 b 组件触发 a 组件中的方法。\n\n\n# 事件总线\n\n还有一种方式则是通过公共事件总线来传递消息。const bus = new vue(); 在任意组件中可以\n\nbus.$on('eventname', eventhandler);\nbus.$emit('eventname');\n\n\n这是一种功能非常强大的手段，可以做到整个页面中任意组件之间的通信，但是同时也是非常糟糕的一种设计。因为我们只能通过全局搜索才能找到哪些组件会触发事件，哪些组件会接受事件。\n\n\n# redux or vuex\n\nredux 和 vuex 都是全局唯一数据源。然后通过 dispatch 一个字符串来更新数据。\n\n和事件总线一样，通过字符串来触发更新逻辑对于开发来说是非常效率低下的。\n\n但是相对于事件总线来说要友好一些，主要是因为 dispatch 之后的逻辑非常明确，就是修改 store 中的数据。至于有哪些组件依赖了 store 中的数据则不是我们需要关心的。但是事件总线方案中，我们是需要时刻关心有哪些组件中订阅了某个事件的，至少需要保证事件不重名，否则就乱套了。\n\n\n# 本库的实现方式\n\n考虑 props 和 emit 的本质其实是把数据和方法分割开了。那么本库的实现方式正好与此相反。\n\n我们把数据和方法集合到一起变成一个对象，我们称之为服务。然后通过 provide/inject 的技术，可以方便的在任意组件中获取这个服务。只要我们获取到这个对象，我们可以在模版中渲染这个对象的数据，我们可以直接调用这个对象的方法。\n\n因为这个对象本身就是 reactive 的，所以只要数据变化了，所有依赖这个服务的组件都会自动更新。\n\n由于是通过 provide/inject 来获取的服务，所以是可以跨越多个组件层级直接获取服务对象的。\n\n因为服务对象是一个类的实例，所以数据类型是非常明确的，避免了上述字符串丢失类型的问题。\n\n我们还可以控制 provide 的位置，去控制服务对象的范围。因为服务是和组件关联的，当组件销毁的时候，服务也会跟着销毁，间接控制了服务的生命周期。\n\n虽然本库功能很强大，但是不意味着在整个项目中全部使用它，实际上本库还是比较适合那些容器组件。而对于那些受控组件则还是建议使用 props/emit 技术。",charsets:{cjk:!0},lastUpdated:"2021/12/31, 23:17:28"},{title:"组件与服务",frontmatter:{author:"kaokei",title:"组件与服务",date:"2021-12-19T16:52:54.000Z",permalink:"/pages/747704/",sidebar:!1,categories:["技术"],tags:[null]},regularPath:"/_posts/%E6%8A%80%E6%9C%AF/component-and-service.html",relativePath:"_posts/技术/component-and-service.md",key:"v-dfde8cf0",path:"/pages/747704/",headers:[{level:2,title:"option 组件，类组件和服务的关系",slug:"option-组件-类组件和服务的关系",normalizedTitle:"option 组件，类组件和服务的关系",charIndex:2},{level:2,title:"为什么使用类来作为服务",slug:"为什么使用类来作为服务",normalizedTitle:"为什么使用类来作为服务",charIndex:426},{level:2,title:"类组件是如何收集数据的",slug:"类组件是如何收集数据的",normalizedTitle:"类组件是如何收集数据的",charIndex:575},{level:2,title:"如何在类组件中使用 setup",slug:"如何在类组件中使用-setup",normalizedTitle:"如何在类组件中使用 setup",charIndex:1551},{level:2,title:"如何使用 declareProviders",slug:"如何使用-declareproviders",normalizedTitle:"如何使用 declareproviders",charIndex:2604}],headersStr:"option 组件，类组件和服务的关系 为什么使用类来作为服务 类组件是如何收集数据的 如何在类组件中使用 setup 如何使用 declareProviders",content:"# option 组件，类组件和服务的关系\n\noption 组件本身就是一个对象，这个对象预定义了一套属性，比如 data、methods、components 等。\n\n类组件看起来像是一个类，只不过是把一部分 option 组件中的属性定义为类的成员属性。另一部分不支持的属性还是需要借助vue-class-component这个库来支持。比如 watch 属性，只能定义在@Options这个装饰器中。总之看上去会有点不伦不类。 通过深入分析vue-class-component这个库，可以发现最终这个类还是被转化成 option 组件了，所以从性能上来看也并不推荐使用类组件。 当然类组件也是有优势的，比如在 angular 中，组件只能是类，大多数服务也是类，而且都可以使用依赖注入，整体上来看是比较一致的。\n\n服务可以是任意数据或者任意方法或者数据和方法的集合。在依赖注入框架中，大多数服务被定义成类，因为类对依赖注入是最友好的。\n\n\n# 为什么使用类来作为服务\n\n类是一种抽象，而类的实例化过程就是从抽象到具体的转变。正是因为存在这一实例化的过程，所以就存在干预这个过程的机会。\n\n类本身是一个语法糖，每个实例独享数据，但是共享方法。在存在多个实例时也是一种性能优化。\n\n而且类是支持装饰器的，装饰器则是提供了一种声明式语法。\n\n\n# 类组件是如何收集数据的\n\n查看vue-class-component的源码可以知道，类组件会被转化为 Option 组件，而且会自动生成一个 setup 函数作为该组件的属性。setup 函数的返回值其实就是类组件的所有实例属性。 而且注意到类会在 setup 中被实例化，才能收集到实例属性。 还可以观察到__s属性，这个属性其实就是我们使用的import { setup } from 'vue-class-component'，这个setup函数的返回值的属性。其定义在这里。\n\n以上的介绍是指vue-class-component的正常工作逻辑。也就是@Options的工作逻辑。如果是使用了本库的@Component这个装饰器。则又有一些不同。\n\n在@Component中，会对上面生成的 setup 属性再次进行一次包装，再生成一个新的 setup 属性。在这个新的 setup 函数中实现我们自己的依赖注入逻辑。粗略的概括起来就是首先根据类来获取需要注入的数据 A，然后在计算出原属 setup 函数的返回值 B，最后合并数据 A 和数据 B 得到最终返回值 C。这个 C 就是新的 setup 函数的返回值。\n\n所以可以发现当前类组件的依赖注入是在 setup 执行完之后才注入的。\n\n这个目前还算不上是缺陷，因为类组件的 setup 函数是 vue-class-component 固定实现的，并不含有业务逻辑。\n\n意味着该原始 setup 函数中并不会访问类的实例属性。本质是 vue-class-component 提供的 setup 函数本身不能访问this.$data。\n\n它只能访问this.$props $emit $attrs $slots。\n\n需要注意 setup 不是类组件的合法方法，意味着我们不能在类组件中定义 setup 方法。\n\n注意虽然 option 组件中的 setup 函数虽然也是只能访问 props 和 ctx，但是一个组件只有一个 setup 函数，在该 setup 函数内部定义的数据，是可以衍生出新数据的。\n\n但是现在类组件中每个实例属性都对应一个 setup 函数，这些 setup 函数是互相独立的，没有办法做到数据之间的衍生。倒是可以通过定义 getter 方法来定义新数据。\n\n\n# 如何在类组件中使用 setup\n\n首先在 vue 中存在两种组件形式，一种是 Option 组件，即直接声明一个对象，然后配置固定的某些属性即代表一个组件。还有一种形式是类组件。\n\n类组件本身是不被 vue 支持的，需要借助 vue-class-component 才能工作。还好 vue-class-component 也是 vue 官方支持的。\n\n在 Option 组件中，我们可以直接配置 setup 属性。但是在类组件中，我们不能在类中直接写一个 setup 属性/或者 setup 函数。\n\n实际上在类组件的类中只能写特定的属性和方法。比如生命周期函数，其他函数都相当于 Option 组件中的 methods 中定义的方法。\n\n类组件中的属性则相当于 Option 组件中的 data 定义的数据。\n\n我们可以发现，在 Option 组件还有其他的属性或者方法似乎不知道在什么地方定义了。\n\n比如 watch 属性，computed 属性，setup 函数，props 属性，directives 属性，components 属性。\n\n对于 computed 属性应该定义为类的 getter 方法。\n\n对于 setup，则需要import { setup } from 'vue-class-component'，然后使用 setup 函数初始化类的属性。\n\n对于 props 属性，则需要class MyComponent extends Vue.with(SomeProps) {}，可以参考这里\n\n其他的属性和函数都需要在@Options装饰器中定义。可以参考这里\n\n顺便提一句，我本以为在类组件中使用 setup，就像在 Option 组件中一样简单，直接在类中定义 setup 方法就可以了。但是实际上这样是行不通的。\n\n如果我们在类组件中定义 setup 方法，那么最终会被 vue-class-component 覆盖掉。实际上 vue-class-component 内部会自动生成一个 setup 函数来收集数据。\n\n所以需要使用 vue-class-component 提供的 setup 函数来延迟初始化类的属性。\n\n根据官方 issue 来看，不能在类中定义 setup 方法的原因是，我们不能根据 setup 方法的返回值类型来修改类的类型。这里的意思是指 setup 的返回值应该设置为类的成员属性，我们可以在运行时做到这一点，但是在类型提示方面做不到。\n\n\n# 如何使用 declareProviders\n\n可以说在 99%的场景中我们都不需要使用 declareProviders，除非业务足够复杂。\n\n当我们不使用 declareProviders 时，意味着所有的服务都是全局的，那么所有的服务的生命周期都是全局的。\n\n如果我们的业务稍微复杂一点，我们可以在页面路由层面使用 declareProviders，这样这些服务的生命周期就是路由级别的，当切换路由的时候，这些服务也会被卸载。\n\n如果我们的业务更加复杂，可以在 2 级路由，3 级路由都这样操作。\n\n上面提到的都是针对路由的操作，之所以首先提到路由，是因为路由的切换，我们可以非常明显的感受到页面的更新，也就是某些组件的卸载和某些组件的创建。这同时也是生命周期的体现。\n\n那么在有生命周期的地方，我们都是可以使用 declareProviders 的。比如复杂的弹窗，tabs 切换。但是实际上我觉得没有必要把服务的生命周期卡的这么死，稍微把服务的生命周期提升一点也是无伤大雅的。\n\n还有一种场景就是某个组件本身需要使用 declareProviders，即我们希望每个组件实例都有自己的服务实例，而不是所有的组件共享服务。比如 Table 组件我们可以提供一个选择了 table 的哪些行的、以及全选/取消全选这种服务。显然我们希望这个服务是每个 table 组件独享的。",normalizedContent:"# option 组件，类组件和服务的关系\n\noption 组件本身就是一个对象，这个对象预定义了一套属性，比如 data、methods、components 等。\n\n类组件看起来像是一个类，只不过是把一部分 option 组件中的属性定义为类的成员属性。另一部分不支持的属性还是需要借助vue-class-component这个库来支持。比如 watch 属性，只能定义在@options这个装饰器中。总之看上去会有点不伦不类。 通过深入分析vue-class-component这个库，可以发现最终这个类还是被转化成 option 组件了，所以从性能上来看也并不推荐使用类组件。 当然类组件也是有优势的，比如在 angular 中，组件只能是类，大多数服务也是类，而且都可以使用依赖注入，整体上来看是比较一致的。\n\n服务可以是任意数据或者任意方法或者数据和方法的集合。在依赖注入框架中，大多数服务被定义成类，因为类对依赖注入是最友好的。\n\n\n# 为什么使用类来作为服务\n\n类是一种抽象，而类的实例化过程就是从抽象到具体的转变。正是因为存在这一实例化的过程，所以就存在干预这个过程的机会。\n\n类本身是一个语法糖，每个实例独享数据，但是共享方法。在存在多个实例时也是一种性能优化。\n\n而且类是支持装饰器的，装饰器则是提供了一种声明式语法。\n\n\n# 类组件是如何收集数据的\n\n查看vue-class-component的源码可以知道，类组件会被转化为 option 组件，而且会自动生成一个 setup 函数作为该组件的属性。setup 函数的返回值其实就是类组件的所有实例属性。 而且注意到类会在 setup 中被实例化，才能收集到实例属性。 还可以观察到__s属性，这个属性其实就是我们使用的import { setup } from 'vue-class-component'，这个setup函数的返回值的属性。其定义在这里。\n\n以上的介绍是指vue-class-component的正常工作逻辑。也就是@options的工作逻辑。如果是使用了本库的@component这个装饰器。则又有一些不同。\n\n在@component中，会对上面生成的 setup 属性再次进行一次包装，再生成一个新的 setup 属性。在这个新的 setup 函数中实现我们自己的依赖注入逻辑。粗略的概括起来就是首先根据类来获取需要注入的数据 a，然后在计算出原属 setup 函数的返回值 b，最后合并数据 a 和数据 b 得到最终返回值 c。这个 c 就是新的 setup 函数的返回值。\n\n所以可以发现当前类组件的依赖注入是在 setup 执行完之后才注入的。\n\n这个目前还算不上是缺陷，因为类组件的 setup 函数是 vue-class-component 固定实现的，并不含有业务逻辑。\n\n意味着该原始 setup 函数中并不会访问类的实例属性。本质是 vue-class-component 提供的 setup 函数本身不能访问this.$data。\n\n它只能访问this.$props $emit $attrs $slots。\n\n需要注意 setup 不是类组件的合法方法，意味着我们不能在类组件中定义 setup 方法。\n\n注意虽然 option 组件中的 setup 函数虽然也是只能访问 props 和 ctx，但是一个组件只有一个 setup 函数，在该 setup 函数内部定义的数据，是可以衍生出新数据的。\n\n但是现在类组件中每个实例属性都对应一个 setup 函数，这些 setup 函数是互相独立的，没有办法做到数据之间的衍生。倒是可以通过定义 getter 方法来定义新数据。\n\n\n# 如何在类组件中使用 setup\n\n首先在 vue 中存在两种组件形式，一种是 option 组件，即直接声明一个对象，然后配置固定的某些属性即代表一个组件。还有一种形式是类组件。\n\n类组件本身是不被 vue 支持的，需要借助 vue-class-component 才能工作。还好 vue-class-component 也是 vue 官方支持的。\n\n在 option 组件中，我们可以直接配置 setup 属性。但是在类组件中，我们不能在类中直接写一个 setup 属性/或者 setup 函数。\n\n实际上在类组件的类中只能写特定的属性和方法。比如生命周期函数，其他函数都相当于 option 组件中的 methods 中定义的方法。\n\n类组件中的属性则相当于 option 组件中的 data 定义的数据。\n\n我们可以发现，在 option 组件还有其他的属性或者方法似乎不知道在什么地方定义了。\n\n比如 watch 属性，computed 属性，setup 函数，props 属性，directives 属性，components 属性。\n\n对于 computed 属性应该定义为类的 getter 方法。\n\n对于 setup，则需要import { setup } from 'vue-class-component'，然后使用 setup 函数初始化类的属性。\n\n对于 props 属性，则需要class mycomponent extends vue.with(someprops) {}，可以参考这里\n\n其他的属性和函数都需要在@options装饰器中定义。可以参考这里\n\n顺便提一句，我本以为在类组件中使用 setup，就像在 option 组件中一样简单，直接在类中定义 setup 方法就可以了。但是实际上这样是行不通的。\n\n如果我们在类组件中定义 setup 方法，那么最终会被 vue-class-component 覆盖掉。实际上 vue-class-component 内部会自动生成一个 setup 函数来收集数据。\n\n所以需要使用 vue-class-component 提供的 setup 函数来延迟初始化类的属性。\n\n根据官方 issue 来看，不能在类中定义 setup 方法的原因是，我们不能根据 setup 方法的返回值类型来修改类的类型。这里的意思是指 setup 的返回值应该设置为类的成员属性，我们可以在运行时做到这一点，但是在类型提示方面做不到。\n\n\n# 如何使用 declareproviders\n\n可以说在 99%的场景中我们都不需要使用 declareproviders，除非业务足够复杂。\n\n当我们不使用 declareproviders 时，意味着所有的服务都是全局的，那么所有的服务的生命周期都是全局的。\n\n如果我们的业务稍微复杂一点，我们可以在页面路由层面使用 declareproviders，这样这些服务的生命周期就是路由级别的，当切换路由的时候，这些服务也会被卸载。\n\n如果我们的业务更加复杂，可以在 2 级路由，3 级路由都这样操作。\n\n上面提到的都是针对路由的操作，之所以首先提到路由，是因为路由的切换，我们可以非常明显的感受到页面的更新，也就是某些组件的卸载和某些组件的创建。这同时也是生命周期的体现。\n\n那么在有生命周期的地方，我们都是可以使用 declareproviders 的。比如复杂的弹窗，tabs 切换。但是实际上我觉得没有必要把服务的生命周期卡的这么死，稍微把服务的生命周期提升一点也是无伤大雅的。\n\n还有一种场景就是某个组件本身需要使用 declareproviders，即我们希望每个组件实例都有自己的服务实例，而不是所有的组件共享服务。比如 table 组件我们可以提供一个选择了 table 的哪些行的、以及全选/取消全选这种服务。显然我们希望这个服务是每个 table 组件独享的。",charsets:{cjk:!0},lastUpdated:"2021/12/31, 23:17:28"},{title:"依赖注入",frontmatter:{author:"kaokei",title:"依赖注入",date:"2021-12-19T16:52:54.000Z",permalink:"/pages/6bada4/",sidebar:!1,categories:["技术"],tags:[null]},regularPath:"/_posts/%E6%8A%80%E6%9C%AF/dependency-injection.html",relativePath:"_posts/技术/dependency-injection.md",key:"v-78cb951a",path:"/pages/6bada4/",headers:[{level:2,title:"什么是依赖注入",slug:"什么是依赖注入",normalizedTitle:"什么是依赖注入",charIndex:2},{level:2,title:"依赖注入 vs import/export",slug:"依赖注入-vs-import-export",normalizedTitle:"依赖注入 vs import/export",charIndex:4174},{level:2,title:"图解",slug:"图解",normalizedTitle:"图解",charIndex:4443},{level:2,title:"什么是 provider",slug:"什么是-provider",normalizedTitle:"什么是 provider",charIndex:4515}],headersStr:"什么是依赖注入 依赖注入 vs import/export 图解 什么是 provider",content:'# 什么是依赖注入\n\n关于依赖注入的概念可以参考 Angular 的文档，Angular 中的依赖注入。\n\n首先不得不提到的一点是什么是依赖注入，我在网上搜索了很多文章，专业术语也有很多，看的我迷迷糊糊的。我尝试记录一下我自己的理解。\n\n首先从名字入手，依赖注入可以分成依赖和注入。\n\n# 什么是依赖？\n\n在讨论依赖之前，必须先了解什么是服务，不考虑边界情况下，可以把服务理解为数据和方法的集合，即一个对象既包含数据又包含方法就可以称为为服务。\n\n一般我们会通过实例化一个类来得到这个对象。我们可以想象的到这个类的某个实例属性有可能又是另一个类的实例对象。这个过程可以一直进行下去。比如这样的依赖关系图：\n\nA --\x3e B、C、D\nB --\x3e C、D\nC --\x3e D、E\nD --\x3e E、F\nE --\x3e F\nF 没有依赖\n\n\n上面的依赖图代表 A 这个类有三个实例属性b、c、d分别是B、C、D这三个类的实例对象。意味着A类是依赖B、C、D这 3 个类的。 而B类又是依赖C、D这两个类的。依次类推我们可以知道C、D、E这三个类的依赖，注意到F类是没有依赖的。\n\n具体从类的角度来讲，可以在 2 个地方来描述这种依赖关系。 第 1 个地方是在实例属性上声明该属性是另一个类的实例。 第 2 个地方就是在类的构造函数中声明参数是某个类的实例属性。 示例代码如下：\n\nimport { Injectable } from "@kaokei/use-vue-service";\n\n@Injectable()\nexport class LoggerService {\n  public log(...msg: any[]) {\n    console.log("from logger service ==>", ...msg);\n  }\n}\n\n@Injectable()\nexport class CountService {\n  public count = 0; // 该属性是普通属性，不是依赖\n\n  @Inject(LoggerService)\n  public logger!: LoggerService; // 该属性是依赖\n\n  constructor(\n    private logger2: LoggerService // 该参数是依赖\n  ) {}\n\n  public addOne() {\n    this.count++;\n    this.logger.log("from logger addOne ==> ", this.count);\n    this.logger2.log("from logger2 addOne ==> ", this.count);\n  }\n}\n\n\n# 什么是注入呢？\n\n在谈论注入之前，我们先来看看，如果没有依赖注入框架，我们怎么实例化 CountService 呢？\n\n显然在我们调用构造函数之前，我们需要提前准备好参数。即const logger = new LoggerService();。\n\n然后就可以调用构造函数了，const countService = new CountService(logger);。此时我们就完成了 CountService 的实例化。\n\n但是似乎还有一个缺陷，就是现在这个实例仍然缺少一个实例属性logger。最简单的解决办法就是countService.logger = logger;。\n\n这样我们终于完成了全部的实例化过程。注意到这里我们复用了logger对象。即 logger 属性和 logger2 属性指向了同一个对象。\n\n这个例子只是演示实例化过程。实际业务中应该很少会有两个属性指向同一个对象。\n\n其实无意中我们已经介绍了两种注入服务的方式的手动实现版本，即构造函数参数注入和属性注入。\n\n这里再顺嘴提一句还存在另一种注入方式，就是setter注入，简单介绍就是在类中定义一个方法，在方法内设置属性值。然后再调用该方法。类似这样：countService.setLogger(logger);。在有些依赖注入框架中优先建议使用setter注入，而不建议使用属性注入。不过本库只是实现了属性注入，而不支持setter注入。\n\n书归正传，上面详细介绍了依赖注入的手动实现过程。那么依赖注入框架的作用就是把上面的过程自动化。\n\n通过依赖注入框架，我们可以这样来获取 countService 实例对象。\n\nconst countService = useService(CountService);\n\n\n和上面的手动的实例化过程对比，是不是发现这样写的代码就简单多了，这就是依赖注入框架的魅力，实际上依赖关系越复杂，依赖注入框架的优势就越明显。\n\n这里再多嘴说一句，从上面的分析来看，useService 这个函数是用来获取实例的，但却不一定是必须的。\n\n比如在 angular 中，就不需要这样一个函数来获取实例。因为 angular 应用中组件的形式只能是类，在这个组件类中就可以直接使用@Inject 来注入服务了。\n\n但是在 Vue 中，Vue 组件的形式有两种，一种是类组件，这种情况我们也可以不使用 useService，可以直接使用@Inject 来注入服务；另一种情况则是 Option 组件，因为 Option 组件不是类，所以不能使用装饰器。只能使用 useService 这种类似 hooks 的方法类获取实例对象。\n\n我的总结是依赖注入实在没有什么技术含量，也没有什么高大上的地方。不要被陌生的技术名词给吓到了。 本质上就是 Key-Value 的魔法。比如：\n\ndefineKeyValue("tokenA", "valueA"); // 内部使用map来记录对应关系\nconst value = getValueByKey("tokenA"); // 再通过map.get(key)获取数据即可\n\n\n可以说这就是最简单的依赖注入的简单实现。但是它实在是太简单了，处理的场景有限，所以价值不大。至少要再加上类的实例化能力。\n\ndefineKeyValue("tokenA", ClassA); // 内部使用map来记录对应关系\nconst value = getValueByKey("tokenA"); // 再通过map.get(key)获取到ClassA，然后实例化一个实例返回\n\n\n当然如果要处理 ClassA 依赖 ClassB 这种场景，就需要其他方面的支持。比如 typescript 以及 decorator。因为这属于技术问题，不属于概念问题，这里不再细述。\n\n现在我们这个简易的依赖注入库实现了两种能力，如果判断是类，则去实例化；否值直接返回。我们可以沿着这个思路继续添加新能力。比如如果是普通函数，那么就当作普通函数来执行，然后把这个函数的返回值当作服务返回，这样我们就有三种能力了。\n\n主要是介绍这种扩展的思路，只要有这种扩展的思路，我们就可以继续扩展更多的能力，无非就是添加一个if-else分支的事情。\n\n排除掉这种扩展思路本身，我们的依赖注入框架还有什么局限性吗？\n\n其实还有命名空间单一的问题。显然上面所有的数据都处于同一个全局命名空间下。因为defineKeyValue和getValueByKey是一个全局函数。那么所有的配置信息就只有一份。这种状况在大多数场景应该也没有什么问题。但是确实还可以继续提升一下。\n\n我们需要继续引入一个新的概念，就是Injector。通过下面的伪代码我们可以快速了解什么是 Injector。\n\nconst parentInjector = new Injector();\nconst childInjector = new Injector();\nchildInjector.parent = parentInjector;\n\nparentInjector.defineKeyValue("tokenA", ClassA);\nchildInjector.defineKeyValue("tokenB", ClassB);\n\n// 注意到childInjector中并没有定义tokenA，但是仍然可以获取到服务实例\nconst serviceA = childInjector.getValueByKey("tokenA");\nconst serviceB = childInjector.getValueByKey("tokenB");\n\n\n从以上伪代码中可以看出，之所以引入 Injector 这个概念主要是为了避免只有全局一份配置信息。我们可以做到每次实例化一个 Injector 对象，这个 Injector 对象就具有依赖注入的能力；除此之外我们还可以给 Injector 对象增加一个 parent 属性，从而可以把 Injector 对象关联起来，如果当前 Injector 对象中找不到某个服务，就会从其 parent Injector 对象中寻找服务，直到根 Injector 为空。\n\n以上是从依赖注入框架的角度来思考的，和具体业务是无关的。考虑到在前端的场景下，应该怎样去结合呢？\n\n本库参考 angular 把 Injector 绑定在组件上，默认根 Injector 是绑定在根组件上，可以理解为公共的全局的命名空间。\n\n如果在业务上认为某个数据和某个组件是绑定的，就需要用到 declareProviders([CountService])。这行代码意味着当前组件会关联一个 Injector，并且配置了一个 CountService 服务。同时也意味着，在当前组件及其子孙组件中调用 useService 时，一定会从这个 Injector 中获取到 CountService 服务实例（前提是子孙组件不再定义同样的服务declareProviders([CountService])）。\n\n这种寻找机制和原型链寻找属性的机制非常相似，也就是底层的命名空间中的同名属性会覆盖上层命名空间的同名属性。\n\n\n# 依赖注入 vs import/export\n\n 1. import/export 适合单例\n 2. import/export 强制依赖某个实例/具体的数据，不存在干预服务创建过程的可能性。\n 3. 依赖注入解藕了依赖声明和依赖的实例化。比如声明依赖 LoggerService，但是可以通过配置修改为 OtherLoggerService 的实例\n 4. Vue3 跨组件共享数据，为何要用 provide/inject？直接 export/import 数据行吗？\n 5. 前端什么时候用 import 什么时候用依赖注入?\n\n\n# 图解\n\n通过图片中不同的颜色可以区分出 declareProviders 划分出来不同的命名空间，这也是本库的 logo 的来源。\n\n\n\n\n# 什么是 provider\n\n因为本库的依赖注入的思想是来自于 angular，所以大家可以直接查看angular 的官方文档。这里我再说说我的理解。\n\nprovider 字面意思就是提供者，这里具体一点就是服务的提供者。提到服务，我们必须了解两个概念：服务名字和服务来源。最常见的 provider 如下：\n\n{\n  provide: AppleService, // 这是服务名字\n  useClass: AppleService, // 这是服务来源\n}\n\n\n服务提供者是用来解决一个问题：服务是怎么来的？\n\n最简单的场景就是配置的是什么，就把这个当作服务。还可以实例化一个类来当作服务，还可以执行某个函数，把返回值当作服务。这些在上面已经介绍过了。\n\n总结起来就是 provider 是一种规范，从 provider 中我们可以获取服务标识符、服务创建机制、创建服务所需要的东西。\n\n服务标识符意味着当我们获取服务时需要提供的标识符。\n\n服务创建机制也是必须的，因为我们可能是没有办法只从服务标识符中推导出如何创建一个服务的，比如我们没有办法准确区分一个类和一个普通函数，也就没有办法知道怎么去创建这个服务，是应该 new 这个函数，还是直接调用这个函数。\n\n当我们指定useClass时，显然是想要通过类的实例化来创建一个服务，虽然我们可以直接把服务标识符来当作类来使用，但是我们仍然支持useClass:AnotherService，从而达到实际提供服务的类和服务标识符的类的解耦。',normalizedContent:'# 什么是依赖注入\n\n关于依赖注入的概念可以参考 angular 的文档，angular 中的依赖注入。\n\n首先不得不提到的一点是什么是依赖注入，我在网上搜索了很多文章，专业术语也有很多，看的我迷迷糊糊的。我尝试记录一下我自己的理解。\n\n首先从名字入手，依赖注入可以分成依赖和注入。\n\n# 什么是依赖？\n\n在讨论依赖之前，必须先了解什么是服务，不考虑边界情况下，可以把服务理解为数据和方法的集合，即一个对象既包含数据又包含方法就可以称为为服务。\n\n一般我们会通过实例化一个类来得到这个对象。我们可以想象的到这个类的某个实例属性有可能又是另一个类的实例对象。这个过程可以一直进行下去。比如这样的依赖关系图：\n\na --\x3e b、c、d\nb --\x3e c、d\nc --\x3e d、e\nd --\x3e e、f\ne --\x3e f\nf 没有依赖\n\n\n上面的依赖图代表 a 这个类有三个实例属性b、c、d分别是b、c、d这三个类的实例对象。意味着a类是依赖b、c、d这 3 个类的。 而b类又是依赖c、d这两个类的。依次类推我们可以知道c、d、e这三个类的依赖，注意到f类是没有依赖的。\n\n具体从类的角度来讲，可以在 2 个地方来描述这种依赖关系。 第 1 个地方是在实例属性上声明该属性是另一个类的实例。 第 2 个地方就是在类的构造函数中声明参数是某个类的实例属性。 示例代码如下：\n\nimport { injectable } from "@kaokei/use-vue-service";\n\n@injectable()\nexport class loggerservice {\n  public log(...msg: any[]) {\n    console.log("from logger service ==>", ...msg);\n  }\n}\n\n@injectable()\nexport class countservice {\n  public count = 0; // 该属性是普通属性，不是依赖\n\n  @inject(loggerservice)\n  public logger!: loggerservice; // 该属性是依赖\n\n  constructor(\n    private logger2: loggerservice // 该参数是依赖\n  ) {}\n\n  public addone() {\n    this.count++;\n    this.logger.log("from logger addone ==> ", this.count);\n    this.logger2.log("from logger2 addone ==> ", this.count);\n  }\n}\n\n\n# 什么是注入呢？\n\n在谈论注入之前，我们先来看看，如果没有依赖注入框架，我们怎么实例化 countservice 呢？\n\n显然在我们调用构造函数之前，我们需要提前准备好参数。即const logger = new loggerservice();。\n\n然后就可以调用构造函数了，const countservice = new countservice(logger);。此时我们就完成了 countservice 的实例化。\n\n但是似乎还有一个缺陷，就是现在这个实例仍然缺少一个实例属性logger。最简单的解决办法就是countservice.logger = logger;。\n\n这样我们终于完成了全部的实例化过程。注意到这里我们复用了logger对象。即 logger 属性和 logger2 属性指向了同一个对象。\n\n这个例子只是演示实例化过程。实际业务中应该很少会有两个属性指向同一个对象。\n\n其实无意中我们已经介绍了两种注入服务的方式的手动实现版本，即构造函数参数注入和属性注入。\n\n这里再顺嘴提一句还存在另一种注入方式，就是setter注入，简单介绍就是在类中定义一个方法，在方法内设置属性值。然后再调用该方法。类似这样：countservice.setlogger(logger);。在有些依赖注入框架中优先建议使用setter注入，而不建议使用属性注入。不过本库只是实现了属性注入，而不支持setter注入。\n\n书归正传，上面详细介绍了依赖注入的手动实现过程。那么依赖注入框架的作用就是把上面的过程自动化。\n\n通过依赖注入框架，我们可以这样来获取 countservice 实例对象。\n\nconst countservice = useservice(countservice);\n\n\n和上面的手动的实例化过程对比，是不是发现这样写的代码就简单多了，这就是依赖注入框架的魅力，实际上依赖关系越复杂，依赖注入框架的优势就越明显。\n\n这里再多嘴说一句，从上面的分析来看，useservice 这个函数是用来获取实例的，但却不一定是必须的。\n\n比如在 angular 中，就不需要这样一个函数来获取实例。因为 angular 应用中组件的形式只能是类，在这个组件类中就可以直接使用@inject 来注入服务了。\n\n但是在 vue 中，vue 组件的形式有两种，一种是类组件，这种情况我们也可以不使用 useservice，可以直接使用@inject 来注入服务；另一种情况则是 option 组件，因为 option 组件不是类，所以不能使用装饰器。只能使用 useservice 这种类似 hooks 的方法类获取实例对象。\n\n我的总结是依赖注入实在没有什么技术含量，也没有什么高大上的地方。不要被陌生的技术名词给吓到了。 本质上就是 key-value 的魔法。比如：\n\ndefinekeyvalue("tokena", "valuea"); // 内部使用map来记录对应关系\nconst value = getvaluebykey("tokena"); // 再通过map.get(key)获取数据即可\n\n\n可以说这就是最简单的依赖注入的简单实现。但是它实在是太简单了，处理的场景有限，所以价值不大。至少要再加上类的实例化能力。\n\ndefinekeyvalue("tokena", classa); // 内部使用map来记录对应关系\nconst value = getvaluebykey("tokena"); // 再通过map.get(key)获取到classa，然后实例化一个实例返回\n\n\n当然如果要处理 classa 依赖 classb 这种场景，就需要其他方面的支持。比如 typescript 以及 decorator。因为这属于技术问题，不属于概念问题，这里不再细述。\n\n现在我们这个简易的依赖注入库实现了两种能力，如果判断是类，则去实例化；否值直接返回。我们可以沿着这个思路继续添加新能力。比如如果是普通函数，那么就当作普通函数来执行，然后把这个函数的返回值当作服务返回，这样我们就有三种能力了。\n\n主要是介绍这种扩展的思路，只要有这种扩展的思路，我们就可以继续扩展更多的能力，无非就是添加一个if-else分支的事情。\n\n排除掉这种扩展思路本身，我们的依赖注入框架还有什么局限性吗？\n\n其实还有命名空间单一的问题。显然上面所有的数据都处于同一个全局命名空间下。因为definekeyvalue和getvaluebykey是一个全局函数。那么所有的配置信息就只有一份。这种状况在大多数场景应该也没有什么问题。但是确实还可以继续提升一下。\n\n我们需要继续引入一个新的概念，就是injector。通过下面的伪代码我们可以快速了解什么是 injector。\n\nconst parentinjector = new injector();\nconst childinjector = new injector();\nchildinjector.parent = parentinjector;\n\nparentinjector.definekeyvalue("tokena", classa);\nchildinjector.definekeyvalue("tokenb", classb);\n\n// 注意到childinjector中并没有定义tokena，但是仍然可以获取到服务实例\nconst servicea = childinjector.getvaluebykey("tokena");\nconst serviceb = childinjector.getvaluebykey("tokenb");\n\n\n从以上伪代码中可以看出，之所以引入 injector 这个概念主要是为了避免只有全局一份配置信息。我们可以做到每次实例化一个 injector 对象，这个 injector 对象就具有依赖注入的能力；除此之外我们还可以给 injector 对象增加一个 parent 属性，从而可以把 injector 对象关联起来，如果当前 injector 对象中找不到某个服务，就会从其 parent injector 对象中寻找服务，直到根 injector 为空。\n\n以上是从依赖注入框架的角度来思考的，和具体业务是无关的。考虑到在前端的场景下，应该怎样去结合呢？\n\n本库参考 angular 把 injector 绑定在组件上，默认根 injector 是绑定在根组件上，可以理解为公共的全局的命名空间。\n\n如果在业务上认为某个数据和某个组件是绑定的，就需要用到 declareproviders([countservice])。这行代码意味着当前组件会关联一个 injector，并且配置了一个 countservice 服务。同时也意味着，在当前组件及其子孙组件中调用 useservice 时，一定会从这个 injector 中获取到 countservice 服务实例（前提是子孙组件不再定义同样的服务declareproviders([countservice])）。\n\n这种寻找机制和原型链寻找属性的机制非常相似，也就是底层的命名空间中的同名属性会覆盖上层命名空间的同名属性。\n\n\n# 依赖注入 vs import/export\n\n 1. import/export 适合单例\n 2. import/export 强制依赖某个实例/具体的数据，不存在干预服务创建过程的可能性。\n 3. 依赖注入解藕了依赖声明和依赖的实例化。比如声明依赖 loggerservice，但是可以通过配置修改为 otherloggerservice 的实例\n 4. vue3 跨组件共享数据，为何要用 provide/inject？直接 export/import 数据行吗？\n 5. 前端什么时候用 import 什么时候用依赖注入?\n\n\n# 图解\n\n通过图片中不同的颜色可以区分出 declareproviders 划分出来不同的命名空间，这也是本库的 logo 的来源。\n\n\n\n\n# 什么是 provider\n\n因为本库的依赖注入的思想是来自于 angular，所以大家可以直接查看angular 的官方文档。这里我再说说我的理解。\n\nprovider 字面意思就是提供者，这里具体一点就是服务的提供者。提到服务，我们必须了解两个概念：服务名字和服务来源。最常见的 provider 如下：\n\n{\n  provide: appleservice, // 这是服务名字\n  useclass: appleservice, // 这是服务来源\n}\n\n\n服务提供者是用来解决一个问题：服务是怎么来的？\n\n最简单的场景就是配置的是什么，就把这个当作服务。还可以实例化一个类来当作服务，还可以执行某个函数，把返回值当作服务。这些在上面已经介绍过了。\n\n总结起来就是 provider 是一种规范，从 provider 中我们可以获取服务标识符、服务创建机制、创建服务所需要的东西。\n\n服务标识符意味着当我们获取服务时需要提供的标识符。\n\n服务创建机制也是必须的，因为我们可能是没有办法只从服务标识符中推导出如何创建一个服务的，比如我们没有办法准确区分一个类和一个普通函数，也就没有办法知道怎么去创建这个服务，是应该 new 这个函数，还是直接调用这个函数。\n\n当我们指定useclass时，显然是想要通过类的实例化来创建一个服务，虽然我们可以直接把服务标识符来当作类来使用，但是我们仍然支持useclass:anotherservice，从而达到实际提供服务的类和服务标识符的类的解耦。',charsets:{cjk:!0},lastUpdated:"2021/12/31, 23:17:28"},{title:"前端常见库的理解",frontmatter:{author:"kaokei",title:"前端常见库的理解",date:"2021-12-19T16:52:54.000Z",permalink:"/pages/bfd17a/",sidebar:!1,categories:["技术"],tags:[null]},regularPath:"/_posts/%E6%8A%80%E6%9C%AF/frame-analysis.html",relativePath:"_posts/技术/frame-analysis.md",key:"v-55a9d9cc",path:"/pages/bfd17a/",headers:[{level:2,title:"常见库的理解",slug:"常见库的理解",normalizedTitle:"常见库的理解",charIndex:2},{level:2,title:"定义服务的方式",slug:"定义服务的方式",normalizedTitle:"定义服务的方式",charIndex:193},{level:2,title:"redux 以及 react-redux",slug:"redux-以及-react-redux",normalizedTitle:"redux 以及 react-redux",charIndex:675},{level:2,title:"对比 vuex 和 redux 的区别 todo",slug:"对比-vuex-和-redux-的区别-todo",normalizedTitle:"对比 vuex 和 redux 的区别 todo",charIndex:2742},{level:2,title:"mobx 和 mobx-react",slug:"mobx-和-mobx-react",normalizedTitle:"mobx 和 mobx-react",charIndex:2802},{level:2,title:"mobx-state-tree",slug:"mobx-state-tree",normalizedTitle:"mobx-state-tree",charIndex:3809},{level:2,title:"redux-thunk",slug:"redux-thunk",normalizedTitle:"redux-thunk",charIndex:5092},{level:2,title:"redux-saga",slug:"redux-saga",normalizedTitle:"redux-saga",charIndex:5917},{level:2,title:"redux-observable",slug:"redux-observable",normalizedTitle:"redux-observable",charIndex:8040},{level:2,title:"dva",slug:"dva",normalizedTitle:"dva",charIndex:6088},{level:2,title:"rematch",slug:"rematch",normalizedTitle:"rematch",charIndex:10154},{level:2,title:"composition-api",slug:"composition-api",normalizedTitle:"composition-api",charIndex:10204},{level:2,title:"rxjs",slug:"rxjs",normalizedTitle:"rxjs",charIndex:8108},{level:2,title:"vue-rx",slug:"vue-rx",normalizedTitle:"vue-rx",charIndex:10601},{level:2,title:"Recoil todo",slug:"recoil-todo",normalizedTitle:"recoil todo",charIndex:11359},{level:2,title:"immer",slug:"immer",normalizedTitle:"immer",charIndex:11445},{level:2,title:"concent",slug:"concent",normalizedTitle:"concent",charIndex:12825},{level:2,title:"dob",slug:"dob",normalizedTitle:"dob",charIndex:13768},{level:2,title:"xreact",slug:"xreact",normalizedTitle:"xreact",charIndex:13923},{level:2,title:"stamen",slug:"stamen",normalizedTitle:"stamen",charIndex:15231},{level:2,title:"redux-arena",slug:"redux-arena",normalizedTitle:"redux-arena",charIndex:15658},{level:2,title:"各个库的特性总结",slug:"各个库的特性总结",normalizedTitle:"各个库的特性总结",charIndex:15903},{level:2,title:"vue 和 react 的数据驱动的区别",slug:"vue-和-react-的数据驱动的区别",normalizedTitle:"vue 和 react 的数据驱动的区别",charIndex:16109},{level:2,title:"其他参考文章",slug:"其他参考文章",normalizedTitle:"其他参考文章",charIndex:16250}],headersStr:"常见库的理解 定义服务的方式 redux 以及 react-redux 对比 vuex 和 redux 的区别 todo mobx 和 mobx-react mobx-state-tree redux-thunk redux-saga redux-observable dva rematch composition-api rxjs vue-rx Recoil todo immer concent dob xreact stamen redux-arena 各个库的特性总结 vue 和 react 的数据驱动的区别 其他参考文章",content:"# 常见库的理解\n\n简单记录一下常见库的个人理解，把这些库放在一起对比后可以比较方便的知道各个库的不同，以及凸显 @kaokei/use-vue-service 的差异点和必要性。\n\n可以从这几个方面来分析库的不同点。\n\n * 如何定义服务\n * 如何组织/组合/管理/注册服务\n * 如何获取服务\n * 数据如何驱动模板\n\n这里的服务的定义是：特定领域相关数据和方法的集合。\n\n\n# 定义服务的方式\n\n 1. class\n\n// 定义服务\nclass Counter {\n  count: 0;\n}\n\nconst counter1 = new Counter(); // 获取服务实例\nconst counter2 = new Counter(); // 获取服务实例\n\n\n 2. function\n\n// 定义服务\nfunction getCounter() {\n  return {\n    count: 0\n  }\n}\n\nconst counter1 = getCounter(); // 获取服务实例\nconst counter2 = getCounter(); // 获取服务实例\n\n\n 3. 对象字面量\n\nconst Counter = {\n  count: 0\n}\n\n\n注意这里第 3 种方式是单例模式，如果想要多个实例，只能使用 deepClone 来复制数据了。实际上没有哪个库是采用这种方式。\n\n这里只是想明确一下服务声明和服务本身是两个不同的概念。服务定义可以有多种不同的形式，但是服务本身就是一个普通 js 对象。\n\n\n# redux 以及 react-redux\n\n\n\n * reduxjs/redux\n * reduxjs/react-redux\n * redux 中文文档\n * 官网 github demo\n * 官网文档 examples\n * 官网文档 中间件选择\n\nredux 本身的概念比较简单，而且是和具体 UI 框架无关的。所以必须要配合 react-redux 一起使用才能更好的在 react 中使用。\n\n// 观察redux的主要API调用\nconst rootReducer = combineReducers({subReducer1, subReducer2});\nconst store = createStore(rootReducer);\nstore.subscribe(() => console.log(store.getState()));\nstore.dispatch({type: 'someType'});\n\n\n第一点需要弄明白的就是 reducer 的定义。reducer 本身是一个纯函数，是和 redux 无关的。\n\n但是函数签名必须满足：(previousState = initialState, action) => newState，其实这也是和类所表达的服务是一个东西，是数据和方法的封装。\n\n其中 state 部分就是数据，但是要注意这里的 state 部分，虽然说 reducer 是一个纯函数，但其实并不够纯，因为 initalState 必然属于闭包中的一个变量值。\n\n而 action 部分就是方法。只不过这里的 action 部分使用的是 type 字段，类型是字符串而已。\n\n再看 combineReducers 只是组合服务的一种方式而已。\n\n然后再通过 createStore 创建一个全局 store，通过 store 来管理这些服务，最重要的一种管理方式就是只能通过 store.dispatch 来修改数据。\n\n又因为 store 是全局的，我们可以通过单例模式，import 到需要的模块中，就达到获取服务的目的了。\n\n而 store.subscribe 则是实现数据驱动模板更新的最底层的机制。\n\n如果不使用 react-redux，可以参考这个简单的例子。\n\n这个例子中可以明显看出来如何通过 store.subscribe 来实现数据变化进而驱动模板更新。但是这样操作的性能太低了。\n\n再来看看 react-redux，它是基于 redux 的连接 react 和 redux 的库，基本特性和 redux 一致，主要是解决了 store 中数据变化时，模版也会自动更新。\n\n主要 api 是 connect 和 Provider。\n\nProvider 通过 context 提供了全局的 store，是为了 conenct 服务的。在 connect 中可以随时通过 context 获取到 store。从而读取数据。\n\nconnect 本身是是一个函数，该函数返回值是一个高阶组件。注意高阶组件是一个函数，而不是组件。这个高阶组件函数可以包裹我们自己的组件，返回一个新组件。\n\n该高阶组件可以通过闭包拿到 connect 提供的 mapStateToProps 和 mapDispatchToProps，通过这两个函数再加上 context 中的 store，就可以获取到相应数据和方法了。\n\n其中数据部分是：store+mapStateToProps=>newState，其中方法部分是：store.dispatch+mapDispatchToProps=>newActions。\n\n目前为止还只能解决组件第一次渲染的时候获取数据的问题，关键还是要解决数据变化的时候，组件如何响应更新。\n\n实际上还是需要依赖 store.subscribe 这个 api，会在组件 mounted 时注册一个监听器，卸载组件时取消监听器。\n\n该监听器每次会重新从 store 获取数据，并和缓存中的数据做对比，如果数据有变化，那么执行 setState 操作，从而更新组件。\n\nredux 的缺点是模版代码很多，而且在 reducer 中已经定义了数据和方法了，在 connect 中还是需要再次定义数据和方法。再加上 action、actionCreator 等等。\n\n> 使用 reduce 表达服务，使用闭包中的 initialState 作为服务的初始值 使用 combineReducers 来组合服务 使用 createStore 来管理服务 使用 Provider 提供全局的 store，组件使用 connect 来订阅 store 中的数据和方法 组件通过 store.dispatch 来修改数据，当 store 中数据变化时，因为 connect 订阅了 store，所以会接收到 store.subscribe 的通知，从而可以更新组件\n\n\n# 对比 vuex 和 redux 的区别 todo\n\nmutable 和 immutable 自顶向下 直接触达\n\n\n# mobx 和 mobx-react\n\n\n\n * mobxjs/mobx\n * mobxjs/mobx-react\n * mobx 官方例子\n * 参考官方文档\n\nmobx 和 vue 非常像，可以说大部分能力 vue 已经天生支持了，剩下的就是如何组织代码的区别而已。\n\nmobx 使用步骤\n\n 1. 定义可观察数据，可以是对象或者类。这里依赖 mobx 的 observable 这个 API。\n 2. 定义组件。这里依赖 mobx-react 的 observer 这个 API。\n 3. 通过依赖注入 store 到组件，依赖 mobx-react 的 Provider 和 inject 两个 API\n 4. 然后我们只要改变了数据，组件就会自动更新。\n\n再对比 vue3 中的实现，第 1 步其实就是 reactive 这个 api，第 2 步中 vue 组件默认就是会观察 reactive 数据的，所以也不需要 observer 这个 API。至于第 3 步确实还没有比较好的复用数据的方式。这也就是 @kaokei/use-vue-service 主要做的事情。\n\n参考这个demo，分析如下：\n\n 1. 采用类来定义服务，但是需要具体声明各个属性和方法的性质，比如@observable @computed @action\n 2. 然后导出一个类的实例，这里就能看出来至少在这个项目中服务都是单例的，如果需要多例，就需要自己手动 new 多个实例。\n 3. 然后在根组件使用 Provider，这个 Provider 比较特殊，可以注入任意个值。\n 4. 然后在组件中就可以@inject('articlesStore')类似这样注入服务，然后就可以通过 this.props 获取到特定 store 数据。\n 5. 因为定义组件时，会将组件当作参数传递给 observer 函数，所以当数据有变化时，observer 函数就会更新组件。\n\n再参考这个demo\n\n这里没有使用 Provider，而是通过 props 从根组件一层层传递服务，这也是一种方式，但是就略显麻烦，但是证明了只要能获取到 store，就可以使用该 store 的数据和方法。而且能看出来，相比于 redux 和 react-redux，mobx 和 mobx-react 结合的更加紧密，完全不能独立分开使用。\n\n\n# mobx-state-tree\n\n\n\n * mobxjs/mobx-state-tree\n\nmobx-state-tree 虽然是基于 mobx 的，但是定位应该是和 mobx 是一样的，只不过在于组织代码方面有所区别。\n\n参考这个例子\n\n可以发现居然还可以和 redux 相结合，虽然我觉得有点脱裤子放屁了。这里面有很多的重复性工作。\n\n依赖 redux 的 Provider 来提供全局单一数据源，然后依赖 connect 订阅数据源。\n\n在定义 mobx-state-tree 的模型的 actions 时，需要 actions 常量作为方法名。\n\n在 mapDispatchToProps 时也需要 actions 常量生成方法名，关键是组件中的 props 还是需要定义一摸一样的方法名来接受 props。\n\n总之就是非常繁琐，而且耦合非常严重，但是确实可以工作，而且能非常明确的看出来 mobx-state-tree 具体做了什么工作，没有做什么工作。\n\n注意 mobx-state-tree 非常明显的语法特征：\n\nconst SomeStore = types.model(\"modelName\").props({someProps}).views({someViews}).actions({someActions})\n\n看起来狂拽酷炫吊炸天，实际上就是一个类的换一种写法，也就是 mobx-state-tree 中服务的定义形式。\n\n需要注意的是 mobx-state-tree 自带一套类型系统，尤其是其中的 Model 类型，是可以嵌套的。从而可以形成一个 state-tree。\n\n还有一点就是实际使用 mobx-state-tree 时，还是需要我们手动初始化 Model 的。\n\nconst someStore = SomeStore.create(initialState)\n\n参考这个例子\n\n这个例子可以明显看出来 mobx-state-tree 是代替了 mobx，并且配合 mobx-react 来工作的。\n\n上面有分析过，主要就是 Provider 和 inject 注入 store，并且 mobx-state-tree 是依赖 mobx 的，所以数据本身也是响应式的。\n\n可以明显看出来，mobx-state-tree 和 mobx 的区别在于组织代码的区别。\n\n * mobx 是采用类来组织数据和方法。\n * mobx-state-tree 是基于自带的类型定义采用链式方法调用来定义数据和方法。并且 Model 本身就是类型，也就意味着 Model 是可以嵌套的，所以这也是 mobx-state-tree 名称的来源，因为 Model 就是 state，嵌套之后就会形成一颗树。但是 mobx 中的类则不能相互嵌套形成复杂的“类树”。\n\n可以看出来 mobx-state-tree 这个库相比于 mobx 更加的 opinionated，它有一套自己的代码组织方式。但是我现在觉得单一数据源就是有原罪的。\n\n\n# redux-thunk\n\n\n\n * reduxjs/redux-thunk\n\n这个是 redux 的中间件，而且是官方的中间件。用来解决 redux 本身不支持异步更新的缺点。如果看了源代码会惊讶的发现只有十几行代码。\n\n原来的 store.dispatch 只支持对象作为参数，经过 redux-thunk 中间件的加持就可以额外支持 dispatch 一个函数了，而且函数的第一个参数还是 dispatch，意味着我们可以在函数内部再次调用 dispatch。在函数内部我们可以写条件判断逻辑，可以异步执行 dispatch。\n\n再加上 async/await 的加持，基本可以解决所有异步问题。而且可以避免深度回调的噩梦。\n\n再来说说问题的本质。redux 本身只是提供了 store 来保存数据，通过 store.dispatch 来更新数据。它本身并不支持异步更新和条件更新。\n\n实际上这只是客观描述这个现状，这本身并不是一个问题。问题在于我们非要把这些条件逻辑和异步逻辑放到 redux 中来管理而已。\n\n通过 redux-thunk 的加持，我们可以这样写代码：\n\nstore.dispatch((dispatch) => {\n  setTimeout(function() {\n    dispatch({\n      type: 'add',\n      payload: 1\n    });\n  }, 5000);\n})\n\n\n但是实际上没有 redux-thunk 中间件，我们可以这样写代码：\n\nsetTimeout(function() {\n  store.dispatch({\n    type: 'add',\n    payload: 1\n  })\n}, 5000)\n\n\n只不过缺点是没有纳入 redux 中被管理起来，我们可能需要把这些逻辑抽取出来，放到一个公共的模块中。然后 import 到当前模块中使用。\n\n\n# redux-saga\n\n\n\n * redux-saga/redux-saga\n * redux-saga 中文文档\n * Vuex、Flux、Redux、Redux-saga、Dva、MobX\n * Redux-Saga 漫谈\n * 彻彻底底教会你使用 Redux-saga(包含样例代码)\n * redux-saga 实现原理及 umi, dva 设计思想解析\n * redux-saga 实践总结\n\nsaga 是英语 传奇 的意思。它的思想是 拦截。\n\n同样是 redux 的中间件，和 redux-thunk 一样都是为了解决 redux 解决不了的副作用的问题。\n\n据说是用来解决复杂异步场景下的问题。\n\n我没有 redux-saga 的使用经验，之前尝试入门过好几次，每次都是放弃了，是真正的从入门到放弃。这次因为要写总结，还是硬着头皮看了一些文章，大概弄明白了 saga 的原理。\n\n像 redux-thunk、redux-promise 这些中间件都是特别简单的，源代码都没有几行。总体思路都是增强 store.dispatch 函数的能力。\n\n原始 store.dispatch 只支持 dispatch 普通对象，redux-thunk 中间件则可以支持 dispatch 函数，redux-promise 中间件则可以 dispatch promise。\n\n针对 redux-thunk 分析 store.dispatch(action)，如果 action 是函数，那么就执行这个函数，而且函数参数就是 dispatch，这样在 action 内部可以再次使用 dispatch 去真正的 dispatch 一个普通对象，达到修改 store 中数据的效果。\n\n对比分析一下 redux-saga，它也是增强了 store.dispatch 能力，但是不像 redux-thunk 是判断 action 本身是不是函数来执行不同的策略。redux-saga 虽然增强了 store.dispatch 的能力，但是它还是只能 dispatch 普通对象，这就意味着我们很难从 store.dispatch 区分我们到底是 dispatch 一个普通 action，还是一个 saga action。因为它们的格式都是:\n\n{\n  type: 'ACTION_NAME',\n  payload: some_data\n}\n\n\n那么 redux-saga 是如何增强 store.dispatch 的呢？我的理解是基于字符串匹配的。因为在使用 redux-saga 时，第一步是定义 saga，然后是需要注册 saga，注册的时候，其实就是配置 ACTION_NAME 和 saga 的映射。\n\n那么当用户手动 store.dispatch 一个普通对象时，redux-saga 这个中间件会去自己注册的 saga 列表中去找有没有对应的 ACTION_NAME，如果找到了该 ACTION_NAME，那么就执行该 ACTION_NAME 对应的 saga 函数。剩下的逻辑和 redux-thunk 是一样的，thunk 本身就是一个普通函数，只是具有访问 dispatch 的能力，这样我们就可以随意在 thunk 函数中调用 dispatch 函数来更新 store 中的数据。saga 也是一个函数，它倒是不能直接访问 dispatch 函数，但是提供了更多更复杂的函数来帮助我们处理副作用、异步逻辑。其中的 put 函数就是类似 dispatch 的能力。还有一点需要注意，类似 put 这类的 effect function 是从从全局包导入的。import { call, put, takeEvery, takeLatest } from 'redux-saga/effects'，这意味着他们是全局唯一的，也意味着他们是单例的，也意味着全局 store 也是单例的，但是在 redux-thunk 是可以实现多例的。\n\n如果要是找不到对应的 ACTION_NAME，那么就走正常的 redux 原始的 store.dispatch 逻辑，也就是直接通过 reducer 来消费该 action，最终修改了 store 中的数据。这里还可以再强调一点，正常 redux 的逻辑是由多个 reducer 组合而成的，这些 reducer 内部会消费 action，隐含逻辑是所有 reducer 中的 ACTION_NAME 都是全局的，是不能同名的，否则可能会引起逻辑错误。\n\n总结就是 redux-thunk 是通过类型来判断当前 action 到底是函数，还是普通对象。redux-saga 则是通过字符串匹配来检查到底是 saga action，还是原来的普通的 action。\n\n还有一点区别是 redux-saga 是需要常驻内存的监听器的，redux-thunk 则不需要。\n\n有人说 redux-saga 是通过事件监听机制来实现的，或者说观察者订阅者模式实现的，但是底层还是依赖字符串匹配。\n\n\n# redux-observable\n\n\n\n * redux-observable/redux-observable\n\n看名字就知道是基于 rxjs 的 redux 的中间件。我没有使用过该库，只是看了看文档。\n\n因为我有过 angular 的开发经验，所以对 rxjs 还算比较熟悉。当我在熟悉 redux-saga 的过程中，我就发现其 api 的设计和 rxjs 非常相似。这里的相似是指操作符部分。\n\nrxjs 中提供了很多的操作符函数来帮助我们操作流，redux-saga 中提供了很多 effect function 来帮助我们操作副作用。\n\n再来看 redux-observable 的 api，我发现 redux-saga 和 redux-observable 非常相似。这里的相似是指架构设计部分。\n\nredux-saga 中主要概念是 saga，对应 redux-observable 中主要概念是 epic。通过声明式的语句定义好这些 saga 或者 epic，然后在通过 combine 函数组合成 rootSaga 或者 rootEpic。\n\n在注册完 redux 中间件后，即 applyMiddle 后，还需要 run(rootSaga)或者 run(rootEpic)。\n\n不管是 saga 还是 epic，他们的思想都是通过 store.dispatch(plain action)来触发异步调用，并调用另一些 store.dispatch(plain action)。\n\n本质都是要根据字符串匹配找到对应的 saga 或者 epic，然后执行相应的异步逻辑。该异步逻辑又会通过 dispatch(plain action)来修改 store 中的数据。\n\n\n# dva\n\n\n\n * dvajs/dva\n * 一图胜千言, 何况是四图? 图解 DVA\n * Dva 源码解析\n\ndva 首先是一个基于 redux 和 redux-saga 的数据流方案，然后为了简化开发体验，dva 还额外内置了 react-router 和 fetch，所以也可以理解为一个轻量级的应用框架。\n\n通过官方介绍，可以知道 dva 是通过组合 redux、redux-saga、react-router、fetch、antd 这些项目必须的常用库，以及采用约定大于配置的思想定义了自己的开发规范。并且提供了 dva-cli 脚手架快速初始化项目目录。\n\napp.model({\n  namespace: 'count', // 全局store的一级属性\n  state: { // store.count的子属性\n    record: 0,\n    current: 0,\n  },\n  reducers: { // redux概念中的reducers\n    add(state) {},\n    minus(state) {},\n  },\n  effects: { // redux-saga概念中的saga\n    *add(action, { call, put }) {\n      yield call(delay, 1000);\n      yield put({ type: 'minus' });\n    },\n  },\n  subscriptions: { // 新增加的概念，主要是帮助我们订阅其他事件\n    keyboardWatcher({ dispatch }) {\n      key('⌘+up, ctrl+up', () => { dispatch({type:'add'}) });\n    },\n  },\n});\n\n\n可以看出主要特点是把 store 及 saga 统一为一个 model 的概念, 写在一个 js 文件里面，增加了一个 Subscriptions, 用于收集其他来源的 action, eg: 键盘操作\n\n可以把 dva 理解为换一种方式组织 react、redux、saga 代码。虽然看起来没有新东西，但是确实有助于管理代码，提升开发效率，所以又有人说 dva 只是 react 开发的一种最佳实践。\n\n再回过头看看上面的示例代码，其他属性都不用太关心，唯有 namespace 是必须要要关心的，目前我知道有两个作用：\n\n第一：自动作为全局 store 的一级属性，意味着在 connect 时，必须以 namespace 作为参数解构。 第二：prefixNamespace 函数使用 reduce 对每一个 model 做处理，为 model 的 reducers 和 effects 中的方法添加了 namespace 的前缀。解决了 redux 中 action 重名的问题，以及 saga 中 action 重名的问题。\n\n可以直接指定namespace来跨model通信\nyield call({ type: 'namespace/foo' });\nyield take({ type: 'namespace/bar' });\n\n\n\n# rematch\n\n\n\n * rematch/rematch\n * rematch 官方文档\n\n\n# composition-api\n\n\n\n * vuejs/composition-api\n\n\n# rxjs\n\n\n\n * ReactiveX/rxjs\n\n有人说 rxjs 和 promise 非常像，确实如此。但是随着学习的深入，就会发现差别越来越大。\n\n * promise 只有单个值，observable 则可以有多个值。\n * promise 函数是立即执行的，observable 则是订阅后才执行的。\n * promise 不能被取消，observable 则可以取消订阅。\n * promise 没有提供便利的操作符函数，observable 则提供了一系列强大的操作符函数。\n * 以上这些差异最终导致 promise 是需要使用的时候才去使用的，是命令式的；observable 则容易上瘾，我自己容易把所有的业务逻辑变成 observable 的衍变逻辑，是声明式的。\n\n\n# vue-rx\n\n\n\n * vuejs/vue-rx\n\nnew Vue({\n  // requires `Rx` passed to Vue.use() to expose `Subject`\n  domStreams: ['plus$'],\n  subscriptions () {\n    // use this.plus$\n  }\n})\n\n<button v-stream:click=\"{ subject: plus$, data: someData }\">+</button>\n\n\n作为 Vue 的插件，我们可以通过 subscriptions 属性声明 observable 属性，可以通过 domStreams 属性声明流式事件。\n\n唯一不习惯的是 subscriptions 声明的属性一般没有$后缀，因为在模版中使用的时候确实不是 observable 对象，但是有时候我们确实又想知道这个变量到底是不是流。\n\n总之没有在 angular 使用的这么舒服，并且和 vue 本身的配合还是有一些不和谐的地方。subscriptions 对象本身每个属性都是流，但是我们实际使用的时候，已经变成普通数据了，就像 data 属性声明的那些属性一样。这就导致一些问题。\n\n第一、认知方面的转变，我们定义的是流，使用的时候却是数据，只不过该数据会被流驱动修改。\n\n第二、所有流式 api 都只能在 subscriptions 内部使用，其他地方都不能（不建议）使用流相关的 api。\n\n第三、官网中有说到，因为初始化顺序问题，导致不能直接在 watch 中观察 subscriptions。这也是 subscriptions 和 data 的区别。\n\n第四、新增加了很多概念以及 api，有上手成本。\n\n\n# Recoil todo\n\n\n\n * Recoil 仓库\n * Recoil 官方文档\n * 如何评价 Facebook 的 React 状态管理库 Recoil？\n\n\n# immer\n\n\n\n * immerjs/immer\n * immutable-js/immutable-js\n * 官方文档\n * immer.js:也许更适合你的 immutable js 库\n\nimmerjs 和 immutable-js 都是用来实现 immutable 效果的库。我自己之前一直没有意识到我在写代码的时候，也会不自觉的使用了 immutable 特性。比如：\n\nconst baseArray = [1, 2, 3];\nconst baseObj = { name: 'zhangsan', age: 12 };\n\nconst newArray = baseArray.map(val => val + 1);\nconst newArray = [...baseArray];\nconst newObj = {...baseObj, age: 13};\n\n\n但是这些方式都属于浅拷贝，有时候我们需要处理复杂的 json 数据，就需要用到深拷贝，比如lodash.deepClone。\n\n但是每次修改都需要深拷贝的话，性能方面比较差，所以就有了 immerjs 和 immutable-js，他们的实现原理都是只会拷贝修改部分的数据，没有修改过的数据则不会拷贝。\n\nimmutable-js 的特点是采用 fromJS 和 toJS，可以将普通 js 类型和 immutable-js 自带的类型之间转化，所有的修改都需要嗲用 immutable-js 自带的类型的特定方法去修改数据，但是最终消费数据的时候，还是需要采用 toJS 转化为普通对象。\n\n这种转换来转换去的操作，我不是很喜欢，而且 api 众多，上手成本过高。但是优点是兼容性比较好。\n\n反果类 immerjs 这个库只是提供了 produce 这个函数来实现 immutable 特性。参考如下代码：\n\nimport produce from \"immer\"\n\nconst baseState = [\n    {\n        todo: \"Learn typescript\",\n        done: true\n    },\n    {\n        todo: \"Try immer\",\n        done: false\n    }\n]\n\nconst nextState = produce(baseState, draftState => {\n    draftState.push({todo: \"Tweet about it\"})\n    draftState[1].done = true\n})\n\n\n观察示例代码，使用 produce 函数，可以通过 reducer 的处理 baseState，得到一个新的对象 nextState。说实话，我光看这个示例代码没有办法想出来它底层原理是如何实现的。当然最简单的实现肯定是先把 baseState 深拷贝一份，然后当作参数传递给 draftState，然后返回值就是 nextState 了。但是显然这么做完全不需要 immerjs 了，用户只需要一个深拷贝函数就行了。因为这并没有实现只拷贝修改的部分。上面参考文章中有提到它内部其实是用到了 Proxy 来实现的，具体可以看那篇文章。\n\n\n# concent\n\n\n\n * concentjs/concent\n * concent 知乎专栏\n * concent minimal-example\n * concent complete-example\n\n从服务的角度来理解就非常容易理解 concent 的思路，当然有些细节不看源码还是不太了解。\n\n观察官网的示例代码，通过对象的形式定义服务，并且通过 run 函数注册服务。需要注意这里的服务可以包含数据 state，computed，也有方法 reducer，甚至还有 watch 和 lifecycle。\n\n注意官网一直说的是 module，我这里说的是服务，虽然名词不一样，但是指的是一个东西。需要注意这里的服务的标识符号是字符串。那么在使用服务的时候。 在类组件上使用@register(\"counter\")，在函数组件上使用useConcent(\"counter\");。可以明显看出来服务的标识符就是字符串。\n\n另外@register 和 useConcent 这两个 api 不仅仅是只能接受一个字符串来代表一个服务，或者说 module。\n\n在知乎专栏这篇文章中有展示其他使用方式，比如：\n\nuseConcent('login');\nuseConcent({connect: ['login']});\nuseConcent({module: \"login\", state: spState});\nuseConcent({module: \"login\", state: spState, setup});\nuseConcent({setup, state: iState, props});\nuseConcent({state: iState});\n\n\n可以看出来目前就有 connect，module，state，setup，props 这些属性，注意到 module 本身也是有 state 的，组件本身也是有 state 的；connect 和 module 的区别是什么？setup 又是做什么的？ 总体来说还是太复杂了。\n\n不清楚服务，或者说 module 是否支持多例，主要是看到示例代码中有关生命周期部分的注释有提到多例，但是不清楚如何实现的。\n\n\n# dob\n\n\n\n * dobjs/dob\n * 要不要支持一下国产的 dob?\n\n理念与 mobx 相同，使用 proxy 让使用过程更流畅，数组不会搞成纯对象，有依赖注入最佳实践，还能配合 redux。\n\n只是看了看官网的示例代码，感觉和 mobx 非常像，api 一样，代码组织方式都基本是一样的。\n\n\n# xreact\n\n\n\n * reactive-react/xreact\n * FP, FRP, observable, declarative, monadic, composable, reactivex, fantasyland\n\n这个项目应该类似 vue-rx，但是对于这种项目我个人理解价值不大。我的理解是像 rxjs 这种库，就像 jquery、lodash 一样，就是一种工具库。我们使用这些工具库也不需要专门的 react-jquery，react-lodash。 像 xreact，vue-rx 这种库，一般都是 opinionated library，提供自己的开发规范。当然如果认可这种开发规范，对开发效率应该是有提升的。但是我还是更愿意自己手写 rxjs 代码，就像在 angular 中一样。\n\n我硬着头皮看了看官方文档，比我想的要复杂得多，并没有像 vue-rx 那样是在 vue 基础上增加了很少的概念，xreact 增加的概念就比较多了。官方文档介绍了如何使用 xreact，一共分成 3 步：\n\n第一步：定义视图组件，也叫受控组件、展示组件、无状态组件\n\n这里还是 react 的概念，只不过对 props 有固定的要求，即必须含有 props.actions 属性，该属性包含了改变数据的所有方法。\n\n第二步：定义 Plan\n\n这里开始出现 xreact 特有的概念了，plan 本身就是一个函数，只不过对入参和出参有固定的要求。\n\n入参是 intent$, 本身是一个流，其中的值就是 action。\n\n出参是一个对象，包含 update$ 和 actions 两个属性。update$ 类似于 redux 中的 reducer，actions 属性则是类似于 redux 中的 action creator\n\n这里需要注意第一步中定义组件时也有一个 actions，我的理解是这两个 actions 虽然有关联，但是不完全一致，其中 props.actions 更加像 redux 中的 store.dispatch(action)\n\n我看了一下项目的 package.json，本身是不依赖 redux 的，所以应该是自己实现了类似的 api，但是似乎没有发现类似 combineReducers 的函数。\n\n目前我看到的示例代码都是一个 plan 对应一个组件，似乎没有类似 combinePlan 这样的函数来组合 plan。\n\n第三步：我认为就是链接 plan 和组件\n\n但是命名有点过于简约了。比如 X、 x。\n\n<X x={rx}>\n  <Counter />\n</X>,\n\n猜测功能应该类似于\n\n<Provider store={store}>\n  <Counter />\n</Provider>\n\n\n还有一点也需要注意：\n\nimport {x, X} from 'xreact/lib/x'\nconst Counter = x(plan)(CounterView)\n\n\n这里的 x 是一个函数，但是<X x={rx}>中的 x 只是一个 props 属性\n\n\n# stamen\n\n\n\n * forsigner/stamen\n * 简洁的 React 状态管理库 - Stamen - 该文档太旧了，和最新版本的 api 不太一致\n * Stamen 文档\n\nStamen 是一个 immutable React 状态管理库。api 非常简洁，内部采用 immer 实现 immutable 特性。\n\n我刚开始看的是知乎的文章，后来才看的是 github 主页，发现知乎的文章是 2018 年的，最新版本已经有很大变化了。\n\n只看最新版本的话，api 变得特别像 redux 和 dva 了。\n\n通过 createStore 返回 useStore 和 dispatch，其中 useStore 可以获取数据，dispatch 可以修改数据。\n\n多 store 的实现，依赖 import/export 来手动导入导出。\n\n组件依赖多个 store 的场景，需要重命名 useStore 和 dispatch。\n\n\n# redux-arena\n\n\n\n * hapood/redux-arena\n * 全新的 redux 模块化框架，redux-arena\n\n我的理解 redux-arena 的特点是依赖 react、redux、redux-saga、immutable 实现 state、saga、action、Component 在组件级别可复用。\n\n如果把 state、saga、action 理解为服务的一种形式，这句话可以解释为实现服务在组件层面可复用。是不是有 angular 的味道了。\n\n\n# 各个库的特性总结\n\n * 如何定义服务\n   * 类\n   * 工厂函数\n   * 函数链式调用\n   * reducer\n * 如何组织/组合服务\n   * 依赖注入\n   * combineReducers\n   * 单例还是多例\n * 如何获取服务\n   * 自动初始化还是手动初始化\n   * 全局 Provider+connect 还是手动 import 还是依赖注入\n * 数据如何驱动模板\n\n\n# vue 和 react 的数据驱动的区别\n\nimmutable 和 mutable react 是修改完数据后再次执行函数组件或者 render 函数来更新视图 vue 是视图订阅数据，数据变更后通知视图更新。 xxx 场景下，理论上 vue 的效率要比 react 高。\n\n\n# 其他参考文章\n\n * Redux 与它的中间件：redux-thunk，redux-actions，redux-promise，redux-saga\n * redux 异步处理之 redux-thunk 和 redux-saga—阿楠\n * redux-thunk 和 redux-saga 的区别？\n * 异步方案选型 redux-saga 和 redux-thunk（async/await）\n * Redux 源码解析\n * Rectx - 通过引入基类提供默认的 setState 方式管理数据\n * 除 Redux 外，目前还有哪些状态管理解决方案？1\n * 除 Redux 外，目前还有哪些状态管理解决方案？2\n * 除 Redux 外，目前还有哪些状态管理解决方案？3\n * 除 Redux 外，目前还有哪些状态管理解决方案？4\n * 两种状态管理模型\n * Redux 数据流管理架构有什么致命缺陷,未来会如何改进？1\n * Redux 数据流管理架构有什么致命缺陷,未来会如何改进？2\n * Redux 数据流管理架构有什么致命缺陷,未来会如何改进？3\n * 鬼才！我居然把 Vue3 的原理用到了 React 上？\n * Vue 3 核心原理 -- reactivity 自己实现\n * React Hooks 是否可以改为用类似 Vue 3 Composition API 的方式实现？1\n * React Hooks 是否可以改为用类似 Vue 3 Composition API 的方式实现？2\n * React Hooks 是否可以改为用类似 Vue 3 Composition API 的方式实现？3",normalizedContent:"# 常见库的理解\n\n简单记录一下常见库的个人理解，把这些库放在一起对比后可以比较方便的知道各个库的不同，以及凸显 @kaokei/use-vue-service 的差异点和必要性。\n\n可以从这几个方面来分析库的不同点。\n\n * 如何定义服务\n * 如何组织/组合/管理/注册服务\n * 如何获取服务\n * 数据如何驱动模板\n\n这里的服务的定义是：特定领域相关数据和方法的集合。\n\n\n# 定义服务的方式\n\n 1. class\n\n// 定义服务\nclass counter {\n  count: 0;\n}\n\nconst counter1 = new counter(); // 获取服务实例\nconst counter2 = new counter(); // 获取服务实例\n\n\n 2. function\n\n// 定义服务\nfunction getcounter() {\n  return {\n    count: 0\n  }\n}\n\nconst counter1 = getcounter(); // 获取服务实例\nconst counter2 = getcounter(); // 获取服务实例\n\n\n 3. 对象字面量\n\nconst counter = {\n  count: 0\n}\n\n\n注意这里第 3 种方式是单例模式，如果想要多个实例，只能使用 deepclone 来复制数据了。实际上没有哪个库是采用这种方式。\n\n这里只是想明确一下服务声明和服务本身是两个不同的概念。服务定义可以有多种不同的形式，但是服务本身就是一个普通 js 对象。\n\n\n# redux 以及 react-redux\n\n\n\n * reduxjs/redux\n * reduxjs/react-redux\n * redux 中文文档\n * 官网 github demo\n * 官网文档 examples\n * 官网文档 中间件选择\n\nredux 本身的概念比较简单，而且是和具体 ui 框架无关的。所以必须要配合 react-redux 一起使用才能更好的在 react 中使用。\n\n// 观察redux的主要api调用\nconst rootreducer = combinereducers({subreducer1, subreducer2});\nconst store = createstore(rootreducer);\nstore.subscribe(() => console.log(store.getstate()));\nstore.dispatch({type: 'sometype'});\n\n\n第一点需要弄明白的就是 reducer 的定义。reducer 本身是一个纯函数，是和 redux 无关的。\n\n但是函数签名必须满足：(previousstate = initialstate, action) => newstate，其实这也是和类所表达的服务是一个东西，是数据和方法的封装。\n\n其中 state 部分就是数据，但是要注意这里的 state 部分，虽然说 reducer 是一个纯函数，但其实并不够纯，因为 initalstate 必然属于闭包中的一个变量值。\n\n而 action 部分就是方法。只不过这里的 action 部分使用的是 type 字段，类型是字符串而已。\n\n再看 combinereducers 只是组合服务的一种方式而已。\n\n然后再通过 createstore 创建一个全局 store，通过 store 来管理这些服务，最重要的一种管理方式就是只能通过 store.dispatch 来修改数据。\n\n又因为 store 是全局的，我们可以通过单例模式，import 到需要的模块中，就达到获取服务的目的了。\n\n而 store.subscribe 则是实现数据驱动模板更新的最底层的机制。\n\n如果不使用 react-redux，可以参考这个简单的例子。\n\n这个例子中可以明显看出来如何通过 store.subscribe 来实现数据变化进而驱动模板更新。但是这样操作的性能太低了。\n\n再来看看 react-redux，它是基于 redux 的连接 react 和 redux 的库，基本特性和 redux 一致，主要是解决了 store 中数据变化时，模版也会自动更新。\n\n主要 api 是 connect 和 provider。\n\nprovider 通过 context 提供了全局的 store，是为了 conenct 服务的。在 connect 中可以随时通过 context 获取到 store。从而读取数据。\n\nconnect 本身是是一个函数，该函数返回值是一个高阶组件。注意高阶组件是一个函数，而不是组件。这个高阶组件函数可以包裹我们自己的组件，返回一个新组件。\n\n该高阶组件可以通过闭包拿到 connect 提供的 mapstatetoprops 和 mapdispatchtoprops，通过这两个函数再加上 context 中的 store，就可以获取到相应数据和方法了。\n\n其中数据部分是：store+mapstatetoprops=>newstate，其中方法部分是：store.dispatch+mapdispatchtoprops=>newactions。\n\n目前为止还只能解决组件第一次渲染的时候获取数据的问题，关键还是要解决数据变化的时候，组件如何响应更新。\n\n实际上还是需要依赖 store.subscribe 这个 api，会在组件 mounted 时注册一个监听器，卸载组件时取消监听器。\n\n该监听器每次会重新从 store 获取数据，并和缓存中的数据做对比，如果数据有变化，那么执行 setstate 操作，从而更新组件。\n\nredux 的缺点是模版代码很多，而且在 reducer 中已经定义了数据和方法了，在 connect 中还是需要再次定义数据和方法。再加上 action、actioncreator 等等。\n\n> 使用 reduce 表达服务，使用闭包中的 initialstate 作为服务的初始值 使用 combinereducers 来组合服务 使用 createstore 来管理服务 使用 provider 提供全局的 store，组件使用 connect 来订阅 store 中的数据和方法 组件通过 store.dispatch 来修改数据，当 store 中数据变化时，因为 connect 订阅了 store，所以会接收到 store.subscribe 的通知，从而可以更新组件\n\n\n# 对比 vuex 和 redux 的区别 todo\n\nmutable 和 immutable 自顶向下 直接触达\n\n\n# mobx 和 mobx-react\n\n\n\n * mobxjs/mobx\n * mobxjs/mobx-react\n * mobx 官方例子\n * 参考官方文档\n\nmobx 和 vue 非常像，可以说大部分能力 vue 已经天生支持了，剩下的就是如何组织代码的区别而已。\n\nmobx 使用步骤\n\n 1. 定义可观察数据，可以是对象或者类。这里依赖 mobx 的 observable 这个 api。\n 2. 定义组件。这里依赖 mobx-react 的 observer 这个 api。\n 3. 通过依赖注入 store 到组件，依赖 mobx-react 的 provider 和 inject 两个 api\n 4. 然后我们只要改变了数据，组件就会自动更新。\n\n再对比 vue3 中的实现，第 1 步其实就是 reactive 这个 api，第 2 步中 vue 组件默认就是会观察 reactive 数据的，所以也不需要 observer 这个 api。至于第 3 步确实还没有比较好的复用数据的方式。这也就是 @kaokei/use-vue-service 主要做的事情。\n\n参考这个demo，分析如下：\n\n 1. 采用类来定义服务，但是需要具体声明各个属性和方法的性质，比如@observable @computed @action\n 2. 然后导出一个类的实例，这里就能看出来至少在这个项目中服务都是单例的，如果需要多例，就需要自己手动 new 多个实例。\n 3. 然后在根组件使用 provider，这个 provider 比较特殊，可以注入任意个值。\n 4. 然后在组件中就可以@inject('articlesstore')类似这样注入服务，然后就可以通过 this.props 获取到特定 store 数据。\n 5. 因为定义组件时，会将组件当作参数传递给 observer 函数，所以当数据有变化时，observer 函数就会更新组件。\n\n再参考这个demo\n\n这里没有使用 provider，而是通过 props 从根组件一层层传递服务，这也是一种方式，但是就略显麻烦，但是证明了只要能获取到 store，就可以使用该 store 的数据和方法。而且能看出来，相比于 redux 和 react-redux，mobx 和 mobx-react 结合的更加紧密，完全不能独立分开使用。\n\n\n# mobx-state-tree\n\n\n\n * mobxjs/mobx-state-tree\n\nmobx-state-tree 虽然是基于 mobx 的，但是定位应该是和 mobx 是一样的，只不过在于组织代码方面有所区别。\n\n参考这个例子\n\n可以发现居然还可以和 redux 相结合，虽然我觉得有点脱裤子放屁了。这里面有很多的重复性工作。\n\n依赖 redux 的 provider 来提供全局单一数据源，然后依赖 connect 订阅数据源。\n\n在定义 mobx-state-tree 的模型的 actions 时，需要 actions 常量作为方法名。\n\n在 mapdispatchtoprops 时也需要 actions 常量生成方法名，关键是组件中的 props 还是需要定义一摸一样的方法名来接受 props。\n\n总之就是非常繁琐，而且耦合非常严重，但是确实可以工作，而且能非常明确的看出来 mobx-state-tree 具体做了什么工作，没有做什么工作。\n\n注意 mobx-state-tree 非常明显的语法特征：\n\nconst somestore = types.model(\"modelname\").props({someprops}).views({someviews}).actions({someactions})\n\n看起来狂拽酷炫吊炸天，实际上就是一个类的换一种写法，也就是 mobx-state-tree 中服务的定义形式。\n\n需要注意的是 mobx-state-tree 自带一套类型系统，尤其是其中的 model 类型，是可以嵌套的。从而可以形成一个 state-tree。\n\n还有一点就是实际使用 mobx-state-tree 时，还是需要我们手动初始化 model 的。\n\nconst somestore = somestore.create(initialstate)\n\n参考这个例子\n\n这个例子可以明显看出来 mobx-state-tree 是代替了 mobx，并且配合 mobx-react 来工作的。\n\n上面有分析过，主要就是 provider 和 inject 注入 store，并且 mobx-state-tree 是依赖 mobx 的，所以数据本身也是响应式的。\n\n可以明显看出来，mobx-state-tree 和 mobx 的区别在于组织代码的区别。\n\n * mobx 是采用类来组织数据和方法。\n * mobx-state-tree 是基于自带的类型定义采用链式方法调用来定义数据和方法。并且 model 本身就是类型，也就意味着 model 是可以嵌套的，所以这也是 mobx-state-tree 名称的来源，因为 model 就是 state，嵌套之后就会形成一颗树。但是 mobx 中的类则不能相互嵌套形成复杂的“类树”。\n\n可以看出来 mobx-state-tree 这个库相比于 mobx 更加的 opinionated，它有一套自己的代码组织方式。但是我现在觉得单一数据源就是有原罪的。\n\n\n# redux-thunk\n\n\n\n * reduxjs/redux-thunk\n\n这个是 redux 的中间件，而且是官方的中间件。用来解决 redux 本身不支持异步更新的缺点。如果看了源代码会惊讶的发现只有十几行代码。\n\n原来的 store.dispatch 只支持对象作为参数，经过 redux-thunk 中间件的加持就可以额外支持 dispatch 一个函数了，而且函数的第一个参数还是 dispatch，意味着我们可以在函数内部再次调用 dispatch。在函数内部我们可以写条件判断逻辑，可以异步执行 dispatch。\n\n再加上 async/await 的加持，基本可以解决所有异步问题。而且可以避免深度回调的噩梦。\n\n再来说说问题的本质。redux 本身只是提供了 store 来保存数据，通过 store.dispatch 来更新数据。它本身并不支持异步更新和条件更新。\n\n实际上这只是客观描述这个现状，这本身并不是一个问题。问题在于我们非要把这些条件逻辑和异步逻辑放到 redux 中来管理而已。\n\n通过 redux-thunk 的加持，我们可以这样写代码：\n\nstore.dispatch((dispatch) => {\n  settimeout(function() {\n    dispatch({\n      type: 'add',\n      payload: 1\n    });\n  }, 5000);\n})\n\n\n但是实际上没有 redux-thunk 中间件，我们可以这样写代码：\n\nsettimeout(function() {\n  store.dispatch({\n    type: 'add',\n    payload: 1\n  })\n}, 5000)\n\n\n只不过缺点是没有纳入 redux 中被管理起来，我们可能需要把这些逻辑抽取出来，放到一个公共的模块中。然后 import 到当前模块中使用。\n\n\n# redux-saga\n\n\n\n * redux-saga/redux-saga\n * redux-saga 中文文档\n * vuex、flux、redux、redux-saga、dva、mobx\n * redux-saga 漫谈\n * 彻彻底底教会你使用 redux-saga(包含样例代码)\n * redux-saga 实现原理及 umi, dva 设计思想解析\n * redux-saga 实践总结\n\nsaga 是英语 传奇 的意思。它的思想是 拦截。\n\n同样是 redux 的中间件，和 redux-thunk 一样都是为了解决 redux 解决不了的副作用的问题。\n\n据说是用来解决复杂异步场景下的问题。\n\n我没有 redux-saga 的使用经验，之前尝试入门过好几次，每次都是放弃了，是真正的从入门到放弃。这次因为要写总结，还是硬着头皮看了一些文章，大概弄明白了 saga 的原理。\n\n像 redux-thunk、redux-promise 这些中间件都是特别简单的，源代码都没有几行。总体思路都是增强 store.dispatch 函数的能力。\n\n原始 store.dispatch 只支持 dispatch 普通对象，redux-thunk 中间件则可以支持 dispatch 函数，redux-promise 中间件则可以 dispatch promise。\n\n针对 redux-thunk 分析 store.dispatch(action)，如果 action 是函数，那么就执行这个函数，而且函数参数就是 dispatch，这样在 action 内部可以再次使用 dispatch 去真正的 dispatch 一个普通对象，达到修改 store 中数据的效果。\n\n对比分析一下 redux-saga，它也是增强了 store.dispatch 能力，但是不像 redux-thunk 是判断 action 本身是不是函数来执行不同的策略。redux-saga 虽然增强了 store.dispatch 的能力，但是它还是只能 dispatch 普通对象，这就意味着我们很难从 store.dispatch 区分我们到底是 dispatch 一个普通 action，还是一个 saga action。因为它们的格式都是:\n\n{\n  type: 'action_name',\n  payload: some_data\n}\n\n\n那么 redux-saga 是如何增强 store.dispatch 的呢？我的理解是基于字符串匹配的。因为在使用 redux-saga 时，第一步是定义 saga，然后是需要注册 saga，注册的时候，其实就是配置 action_name 和 saga 的映射。\n\n那么当用户手动 store.dispatch 一个普通对象时，redux-saga 这个中间件会去自己注册的 saga 列表中去找有没有对应的 action_name，如果找到了该 action_name，那么就执行该 action_name 对应的 saga 函数。剩下的逻辑和 redux-thunk 是一样的，thunk 本身就是一个普通函数，只是具有访问 dispatch 的能力，这样我们就可以随意在 thunk 函数中调用 dispatch 函数来更新 store 中的数据。saga 也是一个函数，它倒是不能直接访问 dispatch 函数，但是提供了更多更复杂的函数来帮助我们处理副作用、异步逻辑。其中的 put 函数就是类似 dispatch 的能力。还有一点需要注意，类似 put 这类的 effect function 是从从全局包导入的。import { call, put, takeevery, takelatest } from 'redux-saga/effects'，这意味着他们是全局唯一的，也意味着他们是单例的，也意味着全局 store 也是单例的，但是在 redux-thunk 是可以实现多例的。\n\n如果要是找不到对应的 action_name，那么就走正常的 redux 原始的 store.dispatch 逻辑，也就是直接通过 reducer 来消费该 action，最终修改了 store 中的数据。这里还可以再强调一点，正常 redux 的逻辑是由多个 reducer 组合而成的，这些 reducer 内部会消费 action，隐含逻辑是所有 reducer 中的 action_name 都是全局的，是不能同名的，否则可能会引起逻辑错误。\n\n总结就是 redux-thunk 是通过类型来判断当前 action 到底是函数，还是普通对象。redux-saga 则是通过字符串匹配来检查到底是 saga action，还是原来的普通的 action。\n\n还有一点区别是 redux-saga 是需要常驻内存的监听器的，redux-thunk 则不需要。\n\n有人说 redux-saga 是通过事件监听机制来实现的，或者说观察者订阅者模式实现的，但是底层还是依赖字符串匹配。\n\n\n# redux-observable\n\n\n\n * redux-observable/redux-observable\n\n看名字就知道是基于 rxjs 的 redux 的中间件。我没有使用过该库，只是看了看文档。\n\n因为我有过 angular 的开发经验，所以对 rxjs 还算比较熟悉。当我在熟悉 redux-saga 的过程中，我就发现其 api 的设计和 rxjs 非常相似。这里的相似是指操作符部分。\n\nrxjs 中提供了很多的操作符函数来帮助我们操作流，redux-saga 中提供了很多 effect function 来帮助我们操作副作用。\n\n再来看 redux-observable 的 api，我发现 redux-saga 和 redux-observable 非常相似。这里的相似是指架构设计部分。\n\nredux-saga 中主要概念是 saga，对应 redux-observable 中主要概念是 epic。通过声明式的语句定义好这些 saga 或者 epic，然后在通过 combine 函数组合成 rootsaga 或者 rootepic。\n\n在注册完 redux 中间件后，即 applymiddle 后，还需要 run(rootsaga)或者 run(rootepic)。\n\n不管是 saga 还是 epic，他们的思想都是通过 store.dispatch(plain action)来触发异步调用，并调用另一些 store.dispatch(plain action)。\n\n本质都是要根据字符串匹配找到对应的 saga 或者 epic，然后执行相应的异步逻辑。该异步逻辑又会通过 dispatch(plain action)来修改 store 中的数据。\n\n\n# dva\n\n\n\n * dvajs/dva\n * 一图胜千言, 何况是四图? 图解 dva\n * dva 源码解析\n\ndva 首先是一个基于 redux 和 redux-saga 的数据流方案，然后为了简化开发体验，dva 还额外内置了 react-router 和 fetch，所以也可以理解为一个轻量级的应用框架。\n\n通过官方介绍，可以知道 dva 是通过组合 redux、redux-saga、react-router、fetch、antd 这些项目必须的常用库，以及采用约定大于配置的思想定义了自己的开发规范。并且提供了 dva-cli 脚手架快速初始化项目目录。\n\napp.model({\n  namespace: 'count', // 全局store的一级属性\n  state: { // store.count的子属性\n    record: 0,\n    current: 0,\n  },\n  reducers: { // redux概念中的reducers\n    add(state) {},\n    minus(state) {},\n  },\n  effects: { // redux-saga概念中的saga\n    *add(action, { call, put }) {\n      yield call(delay, 1000);\n      yield put({ type: 'minus' });\n    },\n  },\n  subscriptions: { // 新增加的概念，主要是帮助我们订阅其他事件\n    keyboardwatcher({ dispatch }) {\n      key('⌘+up, ctrl+up', () => { dispatch({type:'add'}) });\n    },\n  },\n});\n\n\n可以看出主要特点是把 store 及 saga 统一为一个 model 的概念, 写在一个 js 文件里面，增加了一个 subscriptions, 用于收集其他来源的 action, eg: 键盘操作\n\n可以把 dva 理解为换一种方式组织 react、redux、saga 代码。虽然看起来没有新东西，但是确实有助于管理代码，提升开发效率，所以又有人说 dva 只是 react 开发的一种最佳实践。\n\n再回过头看看上面的示例代码，其他属性都不用太关心，唯有 namespace 是必须要要关心的，目前我知道有两个作用：\n\n第一：自动作为全局 store 的一级属性，意味着在 connect 时，必须以 namespace 作为参数解构。 第二：prefixnamespace 函数使用 reduce 对每一个 model 做处理，为 model 的 reducers 和 effects 中的方法添加了 namespace 的前缀。解决了 redux 中 action 重名的问题，以及 saga 中 action 重名的问题。\n\n可以直接指定namespace来跨model通信\nyield call({ type: 'namespace/foo' });\nyield take({ type: 'namespace/bar' });\n\n\n\n# rematch\n\n\n\n * rematch/rematch\n * rematch 官方文档\n\n\n# composition-api\n\n\n\n * vuejs/composition-api\n\n\n# rxjs\n\n\n\n * reactivex/rxjs\n\n有人说 rxjs 和 promise 非常像，确实如此。但是随着学习的深入，就会发现差别越来越大。\n\n * promise 只有单个值，observable 则可以有多个值。\n * promise 函数是立即执行的，observable 则是订阅后才执行的。\n * promise 不能被取消，observable 则可以取消订阅。\n * promise 没有提供便利的操作符函数，observable 则提供了一系列强大的操作符函数。\n * 以上这些差异最终导致 promise 是需要使用的时候才去使用的，是命令式的；observable 则容易上瘾，我自己容易把所有的业务逻辑变成 observable 的衍变逻辑，是声明式的。\n\n\n# vue-rx\n\n\n\n * vuejs/vue-rx\n\nnew vue({\n  // requires `rx` passed to vue.use() to expose `subject`\n  domstreams: ['plus$'],\n  subscriptions () {\n    // use this.plus$\n  }\n})\n\n<button v-stream:click=\"{ subject: plus$, data: somedata }\">+</button>\n\n\n作为 vue 的插件，我们可以通过 subscriptions 属性声明 observable 属性，可以通过 domstreams 属性声明流式事件。\n\n唯一不习惯的是 subscriptions 声明的属性一般没有$后缀，因为在模版中使用的时候确实不是 observable 对象，但是有时候我们确实又想知道这个变量到底是不是流。\n\n总之没有在 angular 使用的这么舒服，并且和 vue 本身的配合还是有一些不和谐的地方。subscriptions 对象本身每个属性都是流，但是我们实际使用的时候，已经变成普通数据了，就像 data 属性声明的那些属性一样。这就导致一些问题。\n\n第一、认知方面的转变，我们定义的是流，使用的时候却是数据，只不过该数据会被流驱动修改。\n\n第二、所有流式 api 都只能在 subscriptions 内部使用，其他地方都不能（不建议）使用流相关的 api。\n\n第三、官网中有说到，因为初始化顺序问题，导致不能直接在 watch 中观察 subscriptions。这也是 subscriptions 和 data 的区别。\n\n第四、新增加了很多概念以及 api，有上手成本。\n\n\n# recoil todo\n\n\n\n * recoil 仓库\n * recoil 官方文档\n * 如何评价 facebook 的 react 状态管理库 recoil？\n\n\n# immer\n\n\n\n * immerjs/immer\n * immutable-js/immutable-js\n * 官方文档\n * immer.js:也许更适合你的 immutable js 库\n\nimmerjs 和 immutable-js 都是用来实现 immutable 效果的库。我自己之前一直没有意识到我在写代码的时候，也会不自觉的使用了 immutable 特性。比如：\n\nconst basearray = [1, 2, 3];\nconst baseobj = { name: 'zhangsan', age: 12 };\n\nconst newarray = basearray.map(val => val + 1);\nconst newarray = [...basearray];\nconst newobj = {...baseobj, age: 13};\n\n\n但是这些方式都属于浅拷贝，有时候我们需要处理复杂的 json 数据，就需要用到深拷贝，比如lodash.deepclone。\n\n但是每次修改都需要深拷贝的话，性能方面比较差，所以就有了 immerjs 和 immutable-js，他们的实现原理都是只会拷贝修改部分的数据，没有修改过的数据则不会拷贝。\n\nimmutable-js 的特点是采用 fromjs 和 tojs，可以将普通 js 类型和 immutable-js 自带的类型之间转化，所有的修改都需要嗲用 immutable-js 自带的类型的特定方法去修改数据，但是最终消费数据的时候，还是需要采用 tojs 转化为普通对象。\n\n这种转换来转换去的操作，我不是很喜欢，而且 api 众多，上手成本过高。但是优点是兼容性比较好。\n\n反果类 immerjs 这个库只是提供了 produce 这个函数来实现 immutable 特性。参考如下代码：\n\nimport produce from \"immer\"\n\nconst basestate = [\n    {\n        todo: \"learn typescript\",\n        done: true\n    },\n    {\n        todo: \"try immer\",\n        done: false\n    }\n]\n\nconst nextstate = produce(basestate, draftstate => {\n    draftstate.push({todo: \"tweet about it\"})\n    draftstate[1].done = true\n})\n\n\n观察示例代码，使用 produce 函数，可以通过 reducer 的处理 basestate，得到一个新的对象 nextstate。说实话，我光看这个示例代码没有办法想出来它底层原理是如何实现的。当然最简单的实现肯定是先把 basestate 深拷贝一份，然后当作参数传递给 draftstate，然后返回值就是 nextstate 了。但是显然这么做完全不需要 immerjs 了，用户只需要一个深拷贝函数就行了。因为这并没有实现只拷贝修改的部分。上面参考文章中有提到它内部其实是用到了 proxy 来实现的，具体可以看那篇文章。\n\n\n# concent\n\n\n\n * concentjs/concent\n * concent 知乎专栏\n * concent minimal-example\n * concent complete-example\n\n从服务的角度来理解就非常容易理解 concent 的思路，当然有些细节不看源码还是不太了解。\n\n观察官网的示例代码，通过对象的形式定义服务，并且通过 run 函数注册服务。需要注意这里的服务可以包含数据 state，computed，也有方法 reducer，甚至还有 watch 和 lifecycle。\n\n注意官网一直说的是 module，我这里说的是服务，虽然名词不一样，但是指的是一个东西。需要注意这里的服务的标识符号是字符串。那么在使用服务的时候。 在类组件上使用@register(\"counter\")，在函数组件上使用useconcent(\"counter\");。可以明显看出来服务的标识符就是字符串。\n\n另外@register 和 useconcent 这两个 api 不仅仅是只能接受一个字符串来代表一个服务，或者说 module。\n\n在知乎专栏这篇文章中有展示其他使用方式，比如：\n\nuseconcent('login');\nuseconcent({connect: ['login']});\nuseconcent({module: \"login\", state: spstate});\nuseconcent({module: \"login\", state: spstate, setup});\nuseconcent({setup, state: istate, props});\nuseconcent({state: istate});\n\n\n可以看出来目前就有 connect，module，state，setup，props 这些属性，注意到 module 本身也是有 state 的，组件本身也是有 state 的；connect 和 module 的区别是什么？setup 又是做什么的？ 总体来说还是太复杂了。\n\n不清楚服务，或者说 module 是否支持多例，主要是看到示例代码中有关生命周期部分的注释有提到多例，但是不清楚如何实现的。\n\n\n# dob\n\n\n\n * dobjs/dob\n * 要不要支持一下国产的 dob?\n\n理念与 mobx 相同，使用 proxy 让使用过程更流畅，数组不会搞成纯对象，有依赖注入最佳实践，还能配合 redux。\n\n只是看了看官网的示例代码，感觉和 mobx 非常像，api 一样，代码组织方式都基本是一样的。\n\n\n# xreact\n\n\n\n * reactive-react/xreact\n * fp, frp, observable, declarative, monadic, composable, reactivex, fantasyland\n\n这个项目应该类似 vue-rx，但是对于这种项目我个人理解价值不大。我的理解是像 rxjs 这种库，就像 jquery、lodash 一样，就是一种工具库。我们使用这些工具库也不需要专门的 react-jquery，react-lodash。 像 xreact，vue-rx 这种库，一般都是 opinionated library，提供自己的开发规范。当然如果认可这种开发规范，对开发效率应该是有提升的。但是我还是更愿意自己手写 rxjs 代码，就像在 angular 中一样。\n\n我硬着头皮看了看官方文档，比我想的要复杂得多，并没有像 vue-rx 那样是在 vue 基础上增加了很少的概念，xreact 增加的概念就比较多了。官方文档介绍了如何使用 xreact，一共分成 3 步：\n\n第一步：定义视图组件，也叫受控组件、展示组件、无状态组件\n\n这里还是 react 的概念，只不过对 props 有固定的要求，即必须含有 props.actions 属性，该属性包含了改变数据的所有方法。\n\n第二步：定义 plan\n\n这里开始出现 xreact 特有的概念了，plan 本身就是一个函数，只不过对入参和出参有固定的要求。\n\n入参是 intent$, 本身是一个流，其中的值就是 action。\n\n出参是一个对象，包含 update$ 和 actions 两个属性。update$ 类似于 redux 中的 reducer，actions 属性则是类似于 redux 中的 action creator\n\n这里需要注意第一步中定义组件时也有一个 actions，我的理解是这两个 actions 虽然有关联，但是不完全一致，其中 props.actions 更加像 redux 中的 store.dispatch(action)\n\n我看了一下项目的 package.json，本身是不依赖 redux 的，所以应该是自己实现了类似的 api，但是似乎没有发现类似 combinereducers 的函数。\n\n目前我看到的示例代码都是一个 plan 对应一个组件，似乎没有类似 combineplan 这样的函数来组合 plan。\n\n第三步：我认为就是链接 plan 和组件\n\n但是命名有点过于简约了。比如 x、 x。\n\n<x x={rx}>\n  <counter />\n</x>,\n\n猜测功能应该类似于\n\n<provider store={store}>\n  <counter />\n</provider>\n\n\n还有一点也需要注意：\n\nimport {x, x} from 'xreact/lib/x'\nconst counter = x(plan)(counterview)\n\n\n这里的 x 是一个函数，但是<x x={rx}>中的 x 只是一个 props 属性\n\n\n# stamen\n\n\n\n * forsigner/stamen\n * 简洁的 react 状态管理库 - stamen - 该文档太旧了，和最新版本的 api 不太一致\n * stamen 文档\n\nstamen 是一个 immutable react 状态管理库。api 非常简洁，内部采用 immer 实现 immutable 特性。\n\n我刚开始看的是知乎的文章，后来才看的是 github 主页，发现知乎的文章是 2018 年的，最新版本已经有很大变化了。\n\n只看最新版本的话，api 变得特别像 redux 和 dva 了。\n\n通过 createstore 返回 usestore 和 dispatch，其中 usestore 可以获取数据，dispatch 可以修改数据。\n\n多 store 的实现，依赖 import/export 来手动导入导出。\n\n组件依赖多个 store 的场景，需要重命名 usestore 和 dispatch。\n\n\n# redux-arena\n\n\n\n * hapood/redux-arena\n * 全新的 redux 模块化框架，redux-arena\n\n我的理解 redux-arena 的特点是依赖 react、redux、redux-saga、immutable 实现 state、saga、action、component 在组件级别可复用。\n\n如果把 state、saga、action 理解为服务的一种形式，这句话可以解释为实现服务在组件层面可复用。是不是有 angular 的味道了。\n\n\n# 各个库的特性总结\n\n * 如何定义服务\n   * 类\n   * 工厂函数\n   * 函数链式调用\n   * reducer\n * 如何组织/组合服务\n   * 依赖注入\n   * combinereducers\n   * 单例还是多例\n * 如何获取服务\n   * 自动初始化还是手动初始化\n   * 全局 provider+connect 还是手动 import 还是依赖注入\n * 数据如何驱动模板\n\n\n# vue 和 react 的数据驱动的区别\n\nimmutable 和 mutable react 是修改完数据后再次执行函数组件或者 render 函数来更新视图 vue 是视图订阅数据，数据变更后通知视图更新。 xxx 场景下，理论上 vue 的效率要比 react 高。\n\n\n# 其他参考文章\n\n * redux 与它的中间件：redux-thunk，redux-actions，redux-promise，redux-saga\n * redux 异步处理之 redux-thunk 和 redux-saga—阿楠\n * redux-thunk 和 redux-saga 的区别？\n * 异步方案选型 redux-saga 和 redux-thunk（async/await）\n * redux 源码解析\n * rectx - 通过引入基类提供默认的 setstate 方式管理数据\n * 除 redux 外，目前还有哪些状态管理解决方案？1\n * 除 redux 外，目前还有哪些状态管理解决方案？2\n * 除 redux 外，目前还有哪些状态管理解决方案？3\n * 除 redux 外，目前还有哪些状态管理解决方案？4\n * 两种状态管理模型\n * redux 数据流管理架构有什么致命缺陷,未来会如何改进？1\n * redux 数据流管理架构有什么致命缺陷,未来会如何改进？2\n * redux 数据流管理架构有什么致命缺陷,未来会如何改进？3\n * 鬼才！我居然把 vue3 的原理用到了 react 上？\n * vue 3 核心原理 -- reactivity 自己实现\n * react hooks 是否可以改为用类似 vue 3 composition api 的方式实现？1\n * react hooks 是否可以改为用类似 vue 3 composition api 的方式实现？2\n * react hooks 是否可以改为用类似 vue 3 composition api 的方式实现？3",charsets:{cjk:!0},lastUpdated:"2021/12/31, 23:17:28"},{title:"前端框架浅显对比",frontmatter:{author:"kaokei",title:"前端框架浅显对比",date:"2021-12-19T16:52:54.000Z",permalink:"/pages/8b25d1/",sidebar:!1,categories:["技术"],tags:[null]},regularPath:"/_posts/%E6%8A%80%E6%9C%AF/framework-comparison.html",relativePath:"_posts/技术/framework-comparison.md",key:"v-73e7cad4",path:"/pages/8b25d1/",headers:[{level:2,title:"vue、react 以及 Angular 对比",slug:"vue、react-以及-angular-对比",normalizedTitle:"vue、react 以及 angular 对比",charIndex:2},{level:2,title:"常见库的实现对比",slug:"常见库的实现对比",normalizedTitle:"常见库的实现对比",charIndex:4512},{level:2,title:"需要解决的问题",slug:"需要解决的问题",normalizedTitle:"需要解决的问题",charIndex:7718},{level:2,title:"vue 和 react 的数据驱动的区别",slug:"vue-和-react-的数据驱动的区别",normalizedTitle:"vue 和 react 的数据驱动的区别",charIndex:7817}],headersStr:"vue、react 以及 Angular 对比 常见库的实现对比 需要解决的问题 vue 和 react 的数据驱动的区别",content:"# vue、react 以及 Angular 对比\n\n我第一个接触的框架是 vue，在 vue 之前我用的是 jquery。\n\n这里可以先对比一下 jquery 是如何写代码的。其实关键还是数据和视图的同步工作。\n\n比如某个变量的值改变了（先暂时不管是怎么改变的），现在要把这个数据反应到视图上，就必须首先使用 jquery 获取到相应的 dom，然后修改 dom 的属性。如果是大范围的视图变化，可能还需要相应的前端模版技术配合，比如 underscore 或者 handlebars。\n\n如果用户点击了某个按钮，我们需要响应用户的点击事件。 前提是我们先要使用 jquery 注册 click 事件。 然后在事件内部，我们先获取 input 的数据，然后按照业务逻辑更新内存中的变量。 更新完变量同时后可能还需要更新其他依赖这个变量的 dom。\n\n综上，可以看出来前端的主要工作一直都是保持数据和视图的一致性。\n\n后来我开始使用 vue 来开发页面。整个过程完全不一样了。 我们定义初始数据，然后开发模版，并把数据和模版绑定。 同时在模版上监听事件。在事件处理器内部我们还是只需要更新数据即可。 整个过程完全不需要操作 dom。只要我们更新了数据，视图会自动更新。\n\n人们常说 vue 是数据驱动的。这里非常明显的能感觉到和 jquery 不一样的地方，并且大大提升了开发效率。可以非常明显的感受到数据驱动的优势。\n\n后来我又接触了 react，刚开始接触 react，最难的莫过于 jsx，搞不懂 jsx 和 js 之间的关系。后来理解之后就逐渐喜欢上 react 了。\n\n可以这样理解 jsx React.createElement(type, props, children); 这是一个函数调用，返回一个对象，就是一个普通的 js 对象，了解到这些就够了。 之后我就发现 jsx 代码就自动变成 js 代码了。该怎么写代码，就怎么写代码。 React 中没有新的概念，没有新的语法，完全就是在写 js 代码。\n\n在使用 vue 和 react 的过程中，不可避免的要使用到 vuex 和 redux。这种全局单一数据源的想法根深蒂固。 直到我接触到 angular。一开始我就在寻找 angular 中类似的单一数据源。但是我在项目中居然没有找到，接着我又去网上找到了 ngrx。 当然我还没有开始用上它，就发现了单一数据源完全不是必须的，我只需要定义好相应的 service，然后把该 service 注册到相应的组件上即可。 因为服务中是带有数据的。在组件中是可以直接获取到服务中的数据的。 所以如果我想要在全局所有组件中都使用该服务，那么就把该 service 注册到根组件； 如果是某个页面需要该 service，那么就注册到该路由组件即可； 如果只是某个表格组件需要该 service，那么就注册到该表格组件即可； 总之服务本身的定义是服务自己的事；至于服务具体的访问范围则完全取决于注册服务的位置。 而且服务也不一定就是单例的，在不同的地方多次注册，就意味着可以有多个实例。 更方便的是服务和服务之间也是可以互相注入的。\n\n再然后就是我想着能不能在 vue 和 react 中也实现一下依赖注入的能力，于是就有了 @kaokei/use-vue-service。至于 use-react-service 则还在开发中。\n\n类和函数\n\n我之前是非常喜欢函数，而不喜欢类的。有很多原因，比如函数在 js 中是第一位的。 没有什么是函数解决不了的，比如模块化 amd 和 commonjs 都依赖函数的闭包。 再一个就是函数可以很纯粹，没有副作用。 类的底层实现也不过是函数的语法糖。\n\n后来我发现某些场景还是类比较适合。甚至是唯一的选择。 比如我想要封装一些数据和方法。当然我可以采用工厂函数来生产新对象，该对象包含所有的数据和方法。 但是缺点是这些方法没有必要重复生产。 当然我们可以把这些方法提出来作为新生产的对象的原型，这样就可以复用这些方法了。 但是我们想要依赖装饰器的能力时，则只能使用类了。\n\nSOA\n\n先来看看什么是 soa，翻译过来就是面向服务的体系架构。关键的一个名词是服务。服务又是什么呢？\n\n服务是数据和方法的集合，并且数据和方法都是可选的。意味着可以是类，函数，字符串，数字，布尔值等等。\n\n但是在当前 ts 环境下，数据和方法的封装最好的方式还是类，再加上装饰器只支持类。所以在 ts 中类是服务最好的表现形式。 当然如果你只需要数据或者只需要方法，是不一定非得需要类。 关于函数装饰器，目前基本毫无希望了。\n\n类还有一个好处，在依赖注入中，我们需要 Key-Value，类可以既当作 Key，也可以当作 Value。 可以直接使用const countService = useService(CountService)获取服务。\n\n如果我们想要注入一个字符串http://test.com/，那么我们还要同时定义一个 Key，比如是const publicPath = 'PUBLIC_PATH'。 然后使用declareProviders([{provide: publicPath, useValue: 'http://test.com/'}])注册服务， 再使用const publicPathValue = useService(publicPath)获取服务\n\n领域驱动设计 可以参考这篇文章，非常有深度，虽然我也不能完全理解到位，但是我觉的非常有共鸣。\n\n注意一下数据驱动这个术语的不同含义，上面有提到 vue 是数据驱动的，我的理解是 vue 的组件是数据驱动模版的，数据变化了，模板会跟着更新。 而知乎文章里提到的数据驱动设计是相对于领域驱动设计的，说的不是一回事。 我的简单的理解是数据驱动设计是全局单一数据源，然后组件订阅该数据源部分数据。领域驱动设计重点区别在于不是全局的。而是聚焦于特定领域。 所谓特定领域则是特定的一些数据和方法的集合。比如学生服务 StudentService 是学生相关的数据和方法的集合。\n\n顺便再提一句我认为 angular 中 ngModule 绝对不是必需的。只不过是 angular 团队的一种选择而已，还是目前的一种选择。最新版的 angular11 已经开始支持可以不使用 ngModule 了。 只要分析一下 ngModule 的 3 个属性就能大概理解 ngModule 的作用了： declarations 声明当前 module 有哪些组件，指令，管道 exports 导出当前 module 的部分组件，指令，管道 imports 导入其它 module 导出的组件，指令，管道\n\n这些内容angular 官网上都有，每个字都能看的懂，但是却还是不太理解有什么用。 实际上可以简单的理解为 angular 在编译模板的时候，需要知道模板中出现的那些标签（准确的叫做选择器）到底对应哪个组件、指令或者管道。 只要参考一下 vue 中是怎么做的就更容易理解了，vue 中需要在组件中 components 属性注册当前组件依赖的其它组件。所以 vue 中的做法是在每一个组件上注册自己依赖的其他组件。\n\n但是在 angular 中则是在一个 module 中注册需要的组件。\n\n再来看看这篇文章，这里提供了一种思路可以做到自动化全局注册组件。全局注册也是有缺点的，比如没有使用到的组件也会被加载，组件重名问题。\n\n所以声明组件依赖有三种方式：组件本身，module，全局。只不过 angular 选择了 module 而已。然后 angular 又在 module 的基础上附加了其他功能，比如声明服务的 providers。回到问题本身，答案就是这是 angular 团队的选择而已，并不是必不可少的，也不是毫无缺点的。\n\n再对比一下 vue 和 react 中声明组件的区别，在 vue 中首先需要 import 组件，然后在 components 属性中注册组件。总共需要两步。 但是在 react 中则只需要 import 组件即可以使用了，这是因为 jsx 和 js 是作用域是一致的。所以我一直觉得 vue 中局部注册组件是毫无必要的，因为我都已经 import 了，为什么模板不能从当前作用域中寻找对应的组件呢？\n\n具体原因没有研究过，期待有人能告诉我一下。我个人猜测是和 vue 中组件名称比较混乱有关，有好几种格式。导致模板编译的时候不知道应该编译成那种形式的变量名？ 比如在 react 的 jsx 中遇到标签 UserInfo，那么组件名一定就是 UserInfo，而且 react 强制要求组件名首字母必须大写。但是在 vue 中则不一定了。导致编译成 render 函数时不能直接编译过来，现在还是通过标签名在 components 对象中去查找，而且会按照优先级依次判断各种格式的组件名，直到查找到组件为止。 createElement 源码链接 resolveAsset 源码链接\n\n但是都无所谓了，因为借助setup 提案，现在我们也不需要手动在 components 中注册组件了，只需要 import 相应的组件即可。\n\n当然在 vuex 中也是可以划分 module 的，此 module 和 angular 中的 module 不是一回事，它更像是 angular 中的 service。所以也可以说 vuex 也具有部分领域驱动的特性。 但是相比于 angular 中 service 的依赖注入的特点，显得不够灵活。\n\nvue 缺点\n\nvue 中注册局部 components 比较麻烦 vue 中 api 和语法比较多，总是记不住。=\n\ntemplate 和 jsx 区别？ 第一层：template 相比于拼接字符串有了很大的提升 第二层：jsx 是什么玩意？完全看不懂为啥能在模版里直接写 js 第三层：jsx 真香，template 显得太不灵活了 第四层：jsx 过于灵活了，导致代码逻辑混乱，完全没有做到 UI 和逻辑的分离。相反 template 只是做了它该做的事情。 第五层：jsx 和 template 都有它的优点。看个人喜好以及场景决定使用哪个。\n\ncomputed 和 watch 的区别\n\n这个在 mobx 中叫做 computed 和 reactions。 computed 是多个值计算出一个新的值，watch 则是观察一个值，然后触发一些副作用，这些副作用可以修改多个值。 说到这里不得不提的就是 rxjs 了，可以理解为 rxjs 就是 computed 和 reactions 的集合，但是更加强大。 比如 rxjs 中的流可以衍生出新的流，也可以多个流衍生出新的流。每个流都可以 subscribe 自己的副作用。\n\n\n# 常见库的实现对比\n\nreduxjs/redux\n\nredux 本身的概念比较简单，但是复杂的地方在于很难单独使用它，必须结合 react-redux 这样的连接库才能比较方便的工作。 这就意味着必须要同时掌握 redux 和 react-redux 才能顺利使用。\n\nconst store = createStore(someReducer);\nstore.subscribe(() => console.log(store.getState()));\nstore.dispatch({type: 'someType'});\n\n\n最核心的 api 就是这三个了，当然比较关键的还有一点是 reducer 的定义。reducer 本身是一个纯函数，是和 redux 无关的。但是函数签名必须满足： (previousState, action) => newState，其实这也是和类所表达的服务是一个东西。是数据和方法的封装。其中 state 部分就是数据。action 部分就是方法。只不过这里的 action 部分使用的是 type，类型是字符串而已。\n\n尤其要注意其中的 state 部分，虽然说 reducer 是一个纯函数，但其实并不够纯，以为 initalState 必然属于闭包中的一个变量值。\n\n如果不使用 react-redux，可以参考这个简单的例子。 这里还有 redux 官网其他例子。\n\n使用 reduce 表达服务 使用 combineReducers 来组合服务 可以读取 store 中的数据，以及通过 dispatch 修改数据，但是数据并不会自动更新模板\n\nreduxjs/react-redux\n\n基于 redux 的链接 react 和 redux 的库，基本特性和 redux 一致，主要是解决了 store 中数据变化时，模版也会自动更新。\n\n主要 api 是 connect 和 Provider。 Provider 通过 context 提供了全局的 store，是为了 conenct 服务的。在 connect 中可以随时通过 context 获取到 store。从而读取数据。 connect 本身是是一个函数，该函数返回值是一个高阶组件。注意高阶组件是一个函数，而不是组件。这个函数可以包裹我们自己的组件。 该高阶组件可以通过闭包拿到 connect 提供的 mapStateToProps 和 mapDispatchToProps，通过这两个函数再加上 context 中的 store，就可以获取到相应数据和方法了。 其中数据部分是：store+mapStateToProps=>newState，其中方法部分是：store.dispatch+mapDispatchToProps=>newActions。 目前为止还只能解决组件第一次渲染的时候获取数据的问题，关键还是要解决数据变化的时候，组件如何响应更新。\n\n实际上还是需要依赖 store.subscribe 这个 api，会在组建 mounted 时注册一个监听器，卸载组件时取消监听器。 该监听器每次会重新从 store 获取数据，并和缓存中的数据做对比，如果数据有变化，那么执行 setState 操作，从而更新组件。\n\n缺点是模版代码很多，而且在 reducer 中已经定义了数据和方法了，在 connect 中还是需要再次定义数据和方法。\n\nmobxjs/mobx mobxjs/mobx-react mobx 官方例子\n\nmobx 和 vue 非常像，可以说大部分能力 vue 已经天生支持了，剩下的就是如何组织代码而已。参考官方文档。\n\n 1. 第一步：定义可观察数据，可以是对象或者类。这里依赖 mobx 的 observable 这个 API。\n 2. 第二步：定义组件。这里依赖 mobx-react 的 observer 这个 API。\n 3. 第三步其实和 mobx 就没有关系了，我们只要改变了数据，组件就会自动更新。\n\n再对比 vue3 中的实现，第一步其实就是 reactive 这个 api，第二步中 vue 组件默认就是会观察 reactive 数据的，所以也不需要 observer 这个 API。\n\n参考这个demo\n\n 1. 采用类来定义服务，但是需要具体声明各个属性和方法的性质，比如@observable @computed @action\n 2. 然后导出一个类的实例，这里就能看出来至少在这个项目中服务都是单例的，如果需要多例，就需要自己手动 new 多个实例。\n 3. 然后在根组件使用 Provider\n 4. 然后在组件中就可以@inject('articlesStore')类似这样注入服务\n\n参考这个demo 这里没有使用 Provider，而是通过 props 从根组件一层层传递服务\n\nmobxjs/mobx-state-tree\n\nmobx-state-tree 虽然是基于 mobx 的，但是定位应该是和 mobx 是一样的，只不过在于组织代码方面有所区别。\n\n参考这个例子\n\n可以发现居然还可以和 redux 相结合，虽然我觉得有点脱裤子放屁了。这里面有很多的重复性工作。 依赖 redux 的 Provider 来提供全局单一数据源，然后依赖 connect 订阅数据源。 在定义 mobx-state-tree 的模型的 actions 时，需要 actions 常量作为方法名。 在 mapDispatchToProps 时也需要 actions 常量生成方法名，关键是组件中的 props 还是需要定义一摸一样的方法名来接受 props。 总之就是非常繁琐，而且耦合非常严重，但是确实可以工作，而且能非常明确的看出来 mobx-state-tree 具体做了什么工作，没有做什么工作。 还有一点就是 mobx-state-tree 首先是定义了模型（model），这里的 model 可以看作服务，数据和方法的集合。但是实际使用时，还是需要我们手动初始化的。 const someStore = SomeStore.create(initialState)\n\n参考这个例子 这个例子可以明显看出来 mobx-state-tree 是代替了 mobx，并且配合 mobx-react 来工作的。 上面有分析过，主要就是 Provider 和 inject 注入 store，并且 mobx-state-tree 是依赖 mobx 的，所以数据本身也是响应式的。 可以明显看出来，mobx-state-tree 和 mobx 的区别在于组织代码的区别。 mobx 是采用类来组织数据和方法。 mobx-state-tree 是基于自带的类型定义采用链式方法调用来定义数据和方法。并且 Model 本身就是类型，也就意味着 Model 是可以嵌套的，所以这也是 mobx-state-tree 名称的来源，因为 Model 就是 state，嵌套之后就会形成一颗树。但是 mobx 中的类则不能相互嵌套形成复杂的“类树”。\n\nreduxjs/redux-thunk redux-saga/redux-saga redux-observable/redux-observable\n\ndvajs/dva\n\nvuejs/composition-api concentjs/concent concent 知乎专栏 yisar/doux\n\nReactiveX/rxjs vuejs/vue-rx\n\nimmerjs/immer\n\n这个库不是做状态管理的，只是提供了 produce 这个函数来实现 immutable 特性。\n\n\n# 需要解决的问题\n\n单例和多例 服务的边界-数据和方法 类 reducer+connect 数据驱动模版/组件 Provider 服务如何管理/组合 依赖注入 combineReducers\n\n\n# vue 和 react 的数据驱动的区别",normalizedContent:"# vue、react 以及 angular 对比\n\n我第一个接触的框架是 vue，在 vue 之前我用的是 jquery。\n\n这里可以先对比一下 jquery 是如何写代码的。其实关键还是数据和视图的同步工作。\n\n比如某个变量的值改变了（先暂时不管是怎么改变的），现在要把这个数据反应到视图上，就必须首先使用 jquery 获取到相应的 dom，然后修改 dom 的属性。如果是大范围的视图变化，可能还需要相应的前端模版技术配合，比如 underscore 或者 handlebars。\n\n如果用户点击了某个按钮，我们需要响应用户的点击事件。 前提是我们先要使用 jquery 注册 click 事件。 然后在事件内部，我们先获取 input 的数据，然后按照业务逻辑更新内存中的变量。 更新完变量同时后可能还需要更新其他依赖这个变量的 dom。\n\n综上，可以看出来前端的主要工作一直都是保持数据和视图的一致性。\n\n后来我开始使用 vue 来开发页面。整个过程完全不一样了。 我们定义初始数据，然后开发模版，并把数据和模版绑定。 同时在模版上监听事件。在事件处理器内部我们还是只需要更新数据即可。 整个过程完全不需要操作 dom。只要我们更新了数据，视图会自动更新。\n\n人们常说 vue 是数据驱动的。这里非常明显的能感觉到和 jquery 不一样的地方，并且大大提升了开发效率。可以非常明显的感受到数据驱动的优势。\n\n后来我又接触了 react，刚开始接触 react，最难的莫过于 jsx，搞不懂 jsx 和 js 之间的关系。后来理解之后就逐渐喜欢上 react 了。\n\n可以这样理解 jsx react.createelement(type, props, children); 这是一个函数调用，返回一个对象，就是一个普通的 js 对象，了解到这些就够了。 之后我就发现 jsx 代码就自动变成 js 代码了。该怎么写代码，就怎么写代码。 react 中没有新的概念，没有新的语法，完全就是在写 js 代码。\n\n在使用 vue 和 react 的过程中，不可避免的要使用到 vuex 和 redux。这种全局单一数据源的想法根深蒂固。 直到我接触到 angular。一开始我就在寻找 angular 中类似的单一数据源。但是我在项目中居然没有找到，接着我又去网上找到了 ngrx。 当然我还没有开始用上它，就发现了单一数据源完全不是必须的，我只需要定义好相应的 service，然后把该 service 注册到相应的组件上即可。 因为服务中是带有数据的。在组件中是可以直接获取到服务中的数据的。 所以如果我想要在全局所有组件中都使用该服务，那么就把该 service 注册到根组件； 如果是某个页面需要该 service，那么就注册到该路由组件即可； 如果只是某个表格组件需要该 service，那么就注册到该表格组件即可； 总之服务本身的定义是服务自己的事；至于服务具体的访问范围则完全取决于注册服务的位置。 而且服务也不一定就是单例的，在不同的地方多次注册，就意味着可以有多个实例。 更方便的是服务和服务之间也是可以互相注入的。\n\n再然后就是我想着能不能在 vue 和 react 中也实现一下依赖注入的能力，于是就有了 @kaokei/use-vue-service。至于 use-react-service 则还在开发中。\n\n类和函数\n\n我之前是非常喜欢函数，而不喜欢类的。有很多原因，比如函数在 js 中是第一位的。 没有什么是函数解决不了的，比如模块化 amd 和 commonjs 都依赖函数的闭包。 再一个就是函数可以很纯粹，没有副作用。 类的底层实现也不过是函数的语法糖。\n\n后来我发现某些场景还是类比较适合。甚至是唯一的选择。 比如我想要封装一些数据和方法。当然我可以采用工厂函数来生产新对象，该对象包含所有的数据和方法。 但是缺点是这些方法没有必要重复生产。 当然我们可以把这些方法提出来作为新生产的对象的原型，这样就可以复用这些方法了。 但是我们想要依赖装饰器的能力时，则只能使用类了。\n\nsoa\n\n先来看看什么是 soa，翻译过来就是面向服务的体系架构。关键的一个名词是服务。服务又是什么呢？\n\n服务是数据和方法的集合，并且数据和方法都是可选的。意味着可以是类，函数，字符串，数字，布尔值等等。\n\n但是在当前 ts 环境下，数据和方法的封装最好的方式还是类，再加上装饰器只支持类。所以在 ts 中类是服务最好的表现形式。 当然如果你只需要数据或者只需要方法，是不一定非得需要类。 关于函数装饰器，目前基本毫无希望了。\n\n类还有一个好处，在依赖注入中，我们需要 key-value，类可以既当作 key，也可以当作 value。 可以直接使用const countservice = useservice(countservice)获取服务。\n\n如果我们想要注入一个字符串http://test.com/，那么我们还要同时定义一个 key，比如是const publicpath = 'public_path'。 然后使用declareproviders([{provide: publicpath, usevalue: 'http://test.com/'}])注册服务， 再使用const publicpathvalue = useservice(publicpath)获取服务\n\n领域驱动设计 可以参考这篇文章，非常有深度，虽然我也不能完全理解到位，但是我觉的非常有共鸣。\n\n注意一下数据驱动这个术语的不同含义，上面有提到 vue 是数据驱动的，我的理解是 vue 的组件是数据驱动模版的，数据变化了，模板会跟着更新。 而知乎文章里提到的数据驱动设计是相对于领域驱动设计的，说的不是一回事。 我的简单的理解是数据驱动设计是全局单一数据源，然后组件订阅该数据源部分数据。领域驱动设计重点区别在于不是全局的。而是聚焦于特定领域。 所谓特定领域则是特定的一些数据和方法的集合。比如学生服务 studentservice 是学生相关的数据和方法的集合。\n\n顺便再提一句我认为 angular 中 ngmodule 绝对不是必需的。只不过是 angular 团队的一种选择而已，还是目前的一种选择。最新版的 angular11 已经开始支持可以不使用 ngmodule 了。 只要分析一下 ngmodule 的 3 个属性就能大概理解 ngmodule 的作用了： declarations 声明当前 module 有哪些组件，指令，管道 exports 导出当前 module 的部分组件，指令，管道 imports 导入其它 module 导出的组件，指令，管道\n\n这些内容angular 官网上都有，每个字都能看的懂，但是却还是不太理解有什么用。 实际上可以简单的理解为 angular 在编译模板的时候，需要知道模板中出现的那些标签（准确的叫做选择器）到底对应哪个组件、指令或者管道。 只要参考一下 vue 中是怎么做的就更容易理解了，vue 中需要在组件中 components 属性注册当前组件依赖的其它组件。所以 vue 中的做法是在每一个组件上注册自己依赖的其他组件。\n\n但是在 angular 中则是在一个 module 中注册需要的组件。\n\n再来看看这篇文章，这里提供了一种思路可以做到自动化全局注册组件。全局注册也是有缺点的，比如没有使用到的组件也会被加载，组件重名问题。\n\n所以声明组件依赖有三种方式：组件本身，module，全局。只不过 angular 选择了 module 而已。然后 angular 又在 module 的基础上附加了其他功能，比如声明服务的 providers。回到问题本身，答案就是这是 angular 团队的选择而已，并不是必不可少的，也不是毫无缺点的。\n\n再对比一下 vue 和 react 中声明组件的区别，在 vue 中首先需要 import 组件，然后在 components 属性中注册组件。总共需要两步。 但是在 react 中则只需要 import 组件即可以使用了，这是因为 jsx 和 js 是作用域是一致的。所以我一直觉得 vue 中局部注册组件是毫无必要的，因为我都已经 import 了，为什么模板不能从当前作用域中寻找对应的组件呢？\n\n具体原因没有研究过，期待有人能告诉我一下。我个人猜测是和 vue 中组件名称比较混乱有关，有好几种格式。导致模板编译的时候不知道应该编译成那种形式的变量名？ 比如在 react 的 jsx 中遇到标签 userinfo，那么组件名一定就是 userinfo，而且 react 强制要求组件名首字母必须大写。但是在 vue 中则不一定了。导致编译成 render 函数时不能直接编译过来，现在还是通过标签名在 components 对象中去查找，而且会按照优先级依次判断各种格式的组件名，直到查找到组件为止。 createelement 源码链接 resolveasset 源码链接\n\n但是都无所谓了，因为借助setup 提案，现在我们也不需要手动在 components 中注册组件了，只需要 import 相应的组件即可。\n\n当然在 vuex 中也是可以划分 module 的，此 module 和 angular 中的 module 不是一回事，它更像是 angular 中的 service。所以也可以说 vuex 也具有部分领域驱动的特性。 但是相比于 angular 中 service 的依赖注入的特点，显得不够灵活。\n\nvue 缺点\n\nvue 中注册局部 components 比较麻烦 vue 中 api 和语法比较多，总是记不住。=\n\ntemplate 和 jsx 区别？ 第一层：template 相比于拼接字符串有了很大的提升 第二层：jsx 是什么玩意？完全看不懂为啥能在模版里直接写 js 第三层：jsx 真香，template 显得太不灵活了 第四层：jsx 过于灵活了，导致代码逻辑混乱，完全没有做到 ui 和逻辑的分离。相反 template 只是做了它该做的事情。 第五层：jsx 和 template 都有它的优点。看个人喜好以及场景决定使用哪个。\n\ncomputed 和 watch 的区别\n\n这个在 mobx 中叫做 computed 和 reactions。 computed 是多个值计算出一个新的值，watch 则是观察一个值，然后触发一些副作用，这些副作用可以修改多个值。 说到这里不得不提的就是 rxjs 了，可以理解为 rxjs 就是 computed 和 reactions 的集合，但是更加强大。 比如 rxjs 中的流可以衍生出新的流，也可以多个流衍生出新的流。每个流都可以 subscribe 自己的副作用。\n\n\n# 常见库的实现对比\n\nreduxjs/redux\n\nredux 本身的概念比较简单，但是复杂的地方在于很难单独使用它，必须结合 react-redux 这样的连接库才能比较方便的工作。 这就意味着必须要同时掌握 redux 和 react-redux 才能顺利使用。\n\nconst store = createstore(somereducer);\nstore.subscribe(() => console.log(store.getstate()));\nstore.dispatch({type: 'sometype'});\n\n\n最核心的 api 就是这三个了，当然比较关键的还有一点是 reducer 的定义。reducer 本身是一个纯函数，是和 redux 无关的。但是函数签名必须满足： (previousstate, action) => newstate，其实这也是和类所表达的服务是一个东西。是数据和方法的封装。其中 state 部分就是数据。action 部分就是方法。只不过这里的 action 部分使用的是 type，类型是字符串而已。\n\n尤其要注意其中的 state 部分，虽然说 reducer 是一个纯函数，但其实并不够纯，以为 initalstate 必然属于闭包中的一个变量值。\n\n如果不使用 react-redux，可以参考这个简单的例子。 这里还有 redux 官网其他例子。\n\n使用 reduce 表达服务 使用 combinereducers 来组合服务 可以读取 store 中的数据，以及通过 dispatch 修改数据，但是数据并不会自动更新模板\n\nreduxjs/react-redux\n\n基于 redux 的链接 react 和 redux 的库，基本特性和 redux 一致，主要是解决了 store 中数据变化时，模版也会自动更新。\n\n主要 api 是 connect 和 provider。 provider 通过 context 提供了全局的 store，是为了 conenct 服务的。在 connect 中可以随时通过 context 获取到 store。从而读取数据。 connect 本身是是一个函数，该函数返回值是一个高阶组件。注意高阶组件是一个函数，而不是组件。这个函数可以包裹我们自己的组件。 该高阶组件可以通过闭包拿到 connect 提供的 mapstatetoprops 和 mapdispatchtoprops，通过这两个函数再加上 context 中的 store，就可以获取到相应数据和方法了。 其中数据部分是：store+mapstatetoprops=>newstate，其中方法部分是：store.dispatch+mapdispatchtoprops=>newactions。 目前为止还只能解决组件第一次渲染的时候获取数据的问题，关键还是要解决数据变化的时候，组件如何响应更新。\n\n实际上还是需要依赖 store.subscribe 这个 api，会在组建 mounted 时注册一个监听器，卸载组件时取消监听器。 该监听器每次会重新从 store 获取数据，并和缓存中的数据做对比，如果数据有变化，那么执行 setstate 操作，从而更新组件。\n\n缺点是模版代码很多，而且在 reducer 中已经定义了数据和方法了，在 connect 中还是需要再次定义数据和方法。\n\nmobxjs/mobx mobxjs/mobx-react mobx 官方例子\n\nmobx 和 vue 非常像，可以说大部分能力 vue 已经天生支持了，剩下的就是如何组织代码而已。参考官方文档。\n\n 1. 第一步：定义可观察数据，可以是对象或者类。这里依赖 mobx 的 observable 这个 api。\n 2. 第二步：定义组件。这里依赖 mobx-react 的 observer 这个 api。\n 3. 第三步其实和 mobx 就没有关系了，我们只要改变了数据，组件就会自动更新。\n\n再对比 vue3 中的实现，第一步其实就是 reactive 这个 api，第二步中 vue 组件默认就是会观察 reactive 数据的，所以也不需要 observer 这个 api。\n\n参考这个demo\n\n 1. 采用类来定义服务，但是需要具体声明各个属性和方法的性质，比如@observable @computed @action\n 2. 然后导出一个类的实例，这里就能看出来至少在这个项目中服务都是单例的，如果需要多例，就需要自己手动 new 多个实例。\n 3. 然后在根组件使用 provider\n 4. 然后在组件中就可以@inject('articlesstore')类似这样注入服务\n\n参考这个demo 这里没有使用 provider，而是通过 props 从根组件一层层传递服务\n\nmobxjs/mobx-state-tree\n\nmobx-state-tree 虽然是基于 mobx 的，但是定位应该是和 mobx 是一样的，只不过在于组织代码方面有所区别。\n\n参考这个例子\n\n可以发现居然还可以和 redux 相结合，虽然我觉得有点脱裤子放屁了。这里面有很多的重复性工作。 依赖 redux 的 provider 来提供全局单一数据源，然后依赖 connect 订阅数据源。 在定义 mobx-state-tree 的模型的 actions 时，需要 actions 常量作为方法名。 在 mapdispatchtoprops 时也需要 actions 常量生成方法名，关键是组件中的 props 还是需要定义一摸一样的方法名来接受 props。 总之就是非常繁琐，而且耦合非常严重，但是确实可以工作，而且能非常明确的看出来 mobx-state-tree 具体做了什么工作，没有做什么工作。 还有一点就是 mobx-state-tree 首先是定义了模型（model），这里的 model 可以看作服务，数据和方法的集合。但是实际使用时，还是需要我们手动初始化的。 const somestore = somestore.create(initialstate)\n\n参考这个例子 这个例子可以明显看出来 mobx-state-tree 是代替了 mobx，并且配合 mobx-react 来工作的。 上面有分析过，主要就是 provider 和 inject 注入 store，并且 mobx-state-tree 是依赖 mobx 的，所以数据本身也是响应式的。 可以明显看出来，mobx-state-tree 和 mobx 的区别在于组织代码的区别。 mobx 是采用类来组织数据和方法。 mobx-state-tree 是基于自带的类型定义采用链式方法调用来定义数据和方法。并且 model 本身就是类型，也就意味着 model 是可以嵌套的，所以这也是 mobx-state-tree 名称的来源，因为 model 就是 state，嵌套之后就会形成一颗树。但是 mobx 中的类则不能相互嵌套形成复杂的“类树”。\n\nreduxjs/redux-thunk redux-saga/redux-saga redux-observable/redux-observable\n\ndvajs/dva\n\nvuejs/composition-api concentjs/concent concent 知乎专栏 yisar/doux\n\nreactivex/rxjs vuejs/vue-rx\n\nimmerjs/immer\n\n这个库不是做状态管理的，只是提供了 produce 这个函数来实现 immutable 特性。\n\n\n# 需要解决的问题\n\n单例和多例 服务的边界-数据和方法 类 reducer+connect 数据驱动模版/组件 provider 服务如何管理/组合 依赖注入 combinereducers\n\n\n# vue 和 react 的数据驱动的区别",charsets:{cjk:!0},lastUpdated:"2021/12/31, 23:17:28"},{title:"前端发展各个阶段",frontmatter:{author:"kaokei",title:"前端发展各个阶段",date:"2021-12-19T16:52:54.000Z",permalink:"/pages/37da4b/",sidebar:!1,categories:["技术"],tags:[null]},regularPath:"/_posts/%E6%8A%80%E6%9C%AF/frontend-stage.html",relativePath:"_posts/技术/frontend-stage.md",key:"v-528b907e",path:"/pages/37da4b/",headers:[{level:2,title:"前端的 4 个阶段",slug:"前端的-4-个阶段",normalizedTitle:"前端的 4 个阶段",charIndex:2},{level:2,title:"jquery 阶段",slug:"jquery-阶段",normalizedTitle:"jquery 阶段",charIndex:18},{level:2,title:"组件阶段",slug:"组件阶段",normalizedTitle:"组件阶段",charIndex:129},{level:2,title:"hooks 阶段",slug:"hooks-阶段",normalizedTitle:"hooks 阶段",charIndex:506},{level:2,title:"服务阶段",slug:"服务阶段",normalizedTitle:"服务阶段",charIndex:938}],headersStr:"前端的 4 个阶段 jquery 阶段 组件阶段 hooks 阶段 服务阶段",content:"# 前端的 4 个阶段\n\n\n\n\n# jquery 阶段\n\njquery 时代，以及 jquery 之前的时代，是完全命令式的编程。没有模块化，没有工程化，只不过可以通过 jquery 实现跨浏览器的兼容性，以及基于 jquery 生态的插件化开发。\n\n\n# 组件阶段\n\n由上图可知组件自带状态和逻辑，当然还有视图。当我们定义好一个组件时，该组件是可以在多个地方使用的，这是组件在代码复用层面的优势。\n\n组件的另一个优势则是响应式编程。这是与命令式编程相对应的另一种编程模式。响应式编程又可以理解为数据驱动式编程。\n\n在 jquery 时代，当用户点击了某个按钮，在监听事件中，我们需要自己做两件事，第一件事是根据用户点击行为修改内存中的某些数据。第二件事是根据修改后的数据，再次修改网页上的视图部分。目的是为了保证数据和视图的一致性。\n\n但是在组件时代，我们不需要自己来做这两件事了。我们只需要修改数据即可。前端框架会帮我们保证数据和视图的一致性。也就是当数据修改了，页面视图部分会自动更新。\n\n除了组件本身的优势以外，我们还可以借助 babel 来实现前端的模块化和工程化，从而提升开发体验以及效率。\n\n\n# hooks 阶段\n\n组件时代看起来已经很完美了。但是依然还是有缺陷的。就是组件和组件之间不能共享逻辑代码。\n\n比如在 A 组件中有一个功能是展示当前用户的 name，已经可以编辑该 name。在另一个 B 组件中也有类似的功能。\n\n在没有 hooks 之前，我们可能会把这个功能抽象成一个组件 NameComponent，然后分别在 A 组件和 B 组件中使用 NameComponent 即可。但是如果我们想要在 A 组件和 B 组件中的样式不一样。那么我们就需要给 NameComponent 增加 props，然后在 A 和 B 组件中分别传入不同的参数。\n\n现在这样做是不够解藕的。逻辑的归逻辑，视图的归视图。我们可以利用 hooks 函数做到逻辑和视图彻底的解藕。\n\n把状态和逻辑从组件中分离出来，主要依赖于 composition api，主要是封装成类似 react 中的 hooks 函数。这样的好处是，这个函数是可以在多个组件中复用的。\n\n\n# 服务阶段\n\n在 hooks 阶段 中，组件已经和逻辑分离了，但是，还是强耦合的。这里的强耦合是相对的。是需要一定的视角去理解的。\n\n那么如何理解服务呢？其实从大体上来理解是非常简单的。hooks 就是服务的实例化，服务是 hooks 的抽象。实例化和抽象可以参考类的实例和类的关系。\n\n从代码使用风格上来看，我们之前是直接在组件内调用 hooks 函数。现在我们是在组件内调用服务类来获取服务实例，也就是通过服务类来获取 hooks 实例。\n\n尤其要注意这里的差别，以前是直接就使用 hooks 了，现在是通过中间的服务才能使用 hooks。所以说以前是强依赖 hooks 的，现在则是面向抽象编程、面向接口编程。\n\n面向抽象编程、面向接口编程这些有逼格的文案其实没什么意思。如果只看以上的介绍，其实也看不出来直接调用 hooks 函数和通过服务获取 hooks 的差别是什么。其实真的没什么差别，如果我们什么也不做的话。\n\n最关键的地方在于直接调用 hooks 函数，我们没有办法干预这个 hooks 执行的过程。但是通过服务来获取 hooks 的过程我们是可以干预的。从而实现以下这样的效果。\n\n * 本来通过 AService 应该获取的是 AService 的实例，实际上通过配置可以对使用方透明的替换成 BService 的实例。\n * 在以前 hooks 时代，hooks 执行后，hooks 的状态是一定和当前组件强制绑定的。但是现在可以统一管理服务，服务的状态不是强制和当前组件绑定的，而是可以选择和某个组件绑定，并且在其他组件中也可以获取同一个服务实例，从而方便的实现跨组件通信。\n\n回过头来看，可以清楚的看到 hooks 时代，组件是强制依赖 hooks 的，但是服务时代，则需要通过服务这个概念来间接的使用 hooks，从而可以方便的实现跨组件通信以及状态管理。\n\n很久之前就看过一句话，react 和 vue 迟早有一天会变成 angular。",normalizedContent:"# 前端的 4 个阶段\n\n\n\n\n# jquery 阶段\n\njquery 时代，以及 jquery 之前的时代，是完全命令式的编程。没有模块化，没有工程化，只不过可以通过 jquery 实现跨浏览器的兼容性，以及基于 jquery 生态的插件化开发。\n\n\n# 组件阶段\n\n由上图可知组件自带状态和逻辑，当然还有视图。当我们定义好一个组件时，该组件是可以在多个地方使用的，这是组件在代码复用层面的优势。\n\n组件的另一个优势则是响应式编程。这是与命令式编程相对应的另一种编程模式。响应式编程又可以理解为数据驱动式编程。\n\n在 jquery 时代，当用户点击了某个按钮，在监听事件中，我们需要自己做两件事，第一件事是根据用户点击行为修改内存中的某些数据。第二件事是根据修改后的数据，再次修改网页上的视图部分。目的是为了保证数据和视图的一致性。\n\n但是在组件时代，我们不需要自己来做这两件事了。我们只需要修改数据即可。前端框架会帮我们保证数据和视图的一致性。也就是当数据修改了，页面视图部分会自动更新。\n\n除了组件本身的优势以外，我们还可以借助 babel 来实现前端的模块化和工程化，从而提升开发体验以及效率。\n\n\n# hooks 阶段\n\n组件时代看起来已经很完美了。但是依然还是有缺陷的。就是组件和组件之间不能共享逻辑代码。\n\n比如在 a 组件中有一个功能是展示当前用户的 name，已经可以编辑该 name。在另一个 b 组件中也有类似的功能。\n\n在没有 hooks 之前，我们可能会把这个功能抽象成一个组件 namecomponent，然后分别在 a 组件和 b 组件中使用 namecomponent 即可。但是如果我们想要在 a 组件和 b 组件中的样式不一样。那么我们就需要给 namecomponent 增加 props，然后在 a 和 b 组件中分别传入不同的参数。\n\n现在这样做是不够解藕的。逻辑的归逻辑，视图的归视图。我们可以利用 hooks 函数做到逻辑和视图彻底的解藕。\n\n把状态和逻辑从组件中分离出来，主要依赖于 composition api，主要是封装成类似 react 中的 hooks 函数。这样的好处是，这个函数是可以在多个组件中复用的。\n\n\n# 服务阶段\n\n在 hooks 阶段 中，组件已经和逻辑分离了，但是，还是强耦合的。这里的强耦合是相对的。是需要一定的视角去理解的。\n\n那么如何理解服务呢？其实从大体上来理解是非常简单的。hooks 就是服务的实例化，服务是 hooks 的抽象。实例化和抽象可以参考类的实例和类的关系。\n\n从代码使用风格上来看，我们之前是直接在组件内调用 hooks 函数。现在我们是在组件内调用服务类来获取服务实例，也就是通过服务类来获取 hooks 实例。\n\n尤其要注意这里的差别，以前是直接就使用 hooks 了，现在是通过中间的服务才能使用 hooks。所以说以前是强依赖 hooks 的，现在则是面向抽象编程、面向接口编程。\n\n面向抽象编程、面向接口编程这些有逼格的文案其实没什么意思。如果只看以上的介绍，其实也看不出来直接调用 hooks 函数和通过服务获取 hooks 的差别是什么。其实真的没什么差别，如果我们什么也不做的话。\n\n最关键的地方在于直接调用 hooks 函数，我们没有办法干预这个 hooks 执行的过程。但是通过服务来获取 hooks 的过程我们是可以干预的。从而实现以下这样的效果。\n\n * 本来通过 aservice 应该获取的是 aservice 的实例，实际上通过配置可以对使用方透明的替换成 bservice 的实例。\n * 在以前 hooks 时代，hooks 执行后，hooks 的状态是一定和当前组件强制绑定的。但是现在可以统一管理服务，服务的状态不是强制和当前组件绑定的，而是可以选择和某个组件绑定，并且在其他组件中也可以获取同一个服务实例，从而方便的实现跨组件通信。\n\n回过头来看，可以清楚的看到 hooks 时代，组件是强制依赖 hooks 的，但是服务时代，则需要通过服务这个概念来间接的使用 hooks，从而可以方便的实现跨组件通信以及状态管理。\n\n很久之前就看过一句话，react 和 vue 迟早有一天会变成 angular。",charsets:{cjk:!0},lastUpdated:"2021/12/31, 23:17:28"},{title:"gitee自动同步和部署",frontmatter:{title:"gitee自动同步和部署",date:"2021-12-21T18:45:32.000Z",permalink:"/pages/f9d7e8/",sidebar:!1,categories:["技术"],tags:[null]},regularPath:"/_posts/%E6%8A%80%E6%9C%AF/gitee%E8%87%AA%E5%8A%A8%E5%90%8C%E6%AD%A5%E5%92%8C%E9%83%A8%E7%BD%B2.html",relativePath:"_posts/技术/gitee自动同步和部署.md",key:"v-2f9f667a",path:"/pages/f9d7e8/",headers:[{level:2,title:"参考这里",slug:"参考这里",normalizedTitle:"参考这里",charIndex:192}],headersStr:"参考这里",content:"# gitee 自动同步和部署\n\n需要知道 gitee 的自动部署功能属于 gitee-pro 的特性。\n\n主要是借助 github 的 workflow 的能力。\n\n分别是 wearerequired/git-mirror-action@master 实现同步功能。\n\nyanglbme/gitee-pages-action@main 实现自动部署功能。\n\ntest005\n\n\n# 参考这里\n\n参考文档",normalizedContent:"# gitee 自动同步和部署\n\n需要知道 gitee 的自动部署功能属于 gitee-pro 的特性。\n\n主要是借助 github 的 workflow 的能力。\n\n分别是 wearerequired/git-mirror-action@master 实现同步功能。\n\nyanglbme/gitee-pages-action@main 实现自动部署功能。\n\ntest005\n\n\n# 参考这里\n\n参考文档",charsets:{cjk:!0},lastUpdated:"2021/12/31, 23:17:28"},{title:"json schema入门",frontmatter:{title:"json schema入门",date:"2021-12-30T14:58:16.000Z",permalink:"/pages/8ab175/",sidebar:"auto",categories:["随笔"],tags:[null]},regularPath:"/_posts/%E6%8A%80%E6%9C%AF/json%20schema%E5%85%A5%E9%97%A8.html",relativePath:"_posts/技术/json schema入门.md",key:"v-c669bffc",path:"/pages/8ab175/",headers:[{level:2,title:"一句话介绍 json schema 的作用",slug:"一句话介绍-json-schema-的作用",normalizedTitle:"一句话介绍 json schema 的作用",charIndex:21},{level:2,title:"一篇文章入门 json schema",slug:"一篇文章入门-json-schema",normalizedTitle:"一篇文章入门 json schema",charIndex:537},{level:2,title:"深入理解 json schema",slug:"深入理解-json-schema",normalizedTitle:"深入理解 json schema",charIndex:2934},{level:2,title:"schema 组合",slug:"schema-组合",normalizedTitle:"schema 组合",charIndex:3919},{level:2,title:"条件关键字",slug:"条件关键字",normalizedTitle:"条件关键字",charIndex:4340},{level:2,title:"引用 schema",slug:"引用-schema",normalizedTitle:"引用 schema",charIndex:4562},{level:2,title:"示例",slug:"示例",normalizedTitle:"示例",charIndex:5907},{level:2,title:"各种实现",slug:"各种实现",normalizedTitle:"各种实现",charIndex:5920},{level:2,title:"注意事项",slug:"注意事项",normalizedTitle:"注意事项",charIndex:5935}],headersStr:"一句话介绍 json schema 的作用 一篇文章入门 json schema 深入理解 json schema schema 组合 条件关键字 引用 schema 示例 各种实现 注意事项",content:'# json schema 入门\n\n\n# 一句话介绍 json schema 的作用\n\n校验输入的 json 是否符合预期的格式。\n\n可以考虑存在这样的一个函数 validate(inputJson, inputJsonSchema) => boolean;\n\n需要注意 json 的定义。json 包含以下这些类型。object array string integer number boolean null。\n\n关键是要意识到基本类型也属于 json 的定义。\n\n另一方面，json schema 的则一定是 object。当然 json schema 也是一个 json。\n\n比如描述字符串的 json schema 则是{"type": "string"}。 可以看出来描述基本类型的 json 已经需要一个 object 类型的 json schema 类描述了。\n\njson schema 同时也是一个 json 文件。这既是它的优势，也是它的劣势。因为 json 非常容易序列化，所以在跨语言方面表现的非常好。 但是 json 本身的逻辑表达能力非常欠缺，不能表达非常复杂的逻辑关系。\n\njson schema 主要用于验证 json 的类型结构。\n\n\n# 一篇文章入门 json schema\n\n原始入门文章\n\n{\n  // 可选字段，指定schema版本\n  "$schema": "https://json-schema.org/draft/2020-12/schema",\n  // 可选字段，指定当前schema文件的uri\n  "$id": "https://example.com/product.schema.json",\n  // 可选字段，指定当前schema文件的短描述\n  "title": "Product",\n  // 可选字段，指定当前schema文件的长描述\n  "description": "A product in the catalog",\n  // 必填字段，指定输入json的类型\n  "type": "object",\n  // 因为当前json是一个object，所以需要指定有哪些属性\n  "properties": {\n    // 声明字段名productId\n    "productId": {\n      // 描述字段含义\n      "description": "The unique identifier for a product",\n      // 描述字段类型\n      "type": "integer"\n    },\n    // 声明字段名productName\n    "productName": {\n      "description": "Name of the product",\n      "type": "string"\n    },\n    // 声明字段名price\n    "price": {\n      "description": "The price of the product",\n      "type": "number",\n      // 价格必须大于0\n      "exclusiveMinimum": 0\n    },\n    // 声明字段名tags，是一个数组\n    "tags": {\n      "description": "Tags for the product",\n      "type": "array",\n      // tags数组中的元素都是字符串\n      "items": {\n        "type": "string"\n      },\n      // tags数组最少有一个tag\n      "minItems": 1,\n      // tags数组中元素必须唯一\n      "uniqueItems": true\n    },\n    // 声明字段名dimensions，是一个对象\n    // 这里演示了嵌套对象的json schema\n    "dimensions": {\n      "type": "object",\n      "properties": {\n        "length": {\n          "type": "number"\n        },\n        "width": {\n          "type": "number"\n        },\n        "height": {\n          "type": "number"\n        }\n      },\n      "required": ["length", "width", "height"]\n    },\n    // 声明字段名dimensions，是一个对象\n    // 这里演示了使用$ref来引用一个外部json schema\n    "warehouseLocation": {\n      "description": "Coordinates of the warehouse where the product is located.",\n      "$ref": "https://example.com/geographical-location.schema.json"\n    }\n  },\n  // 指定哪些属性是必填字段\n  "required": ["productId", "productName", "price"]\n}\n\n\n以下是另一个 json schema 文件，被上面的 json schema 文件通过$ref指向$id引用\n\n{\n  "$id": "https://example.com/geographical-location.schema.json",\n  "$schema": "https://json-schema.org/draft/2020-12/schema",\n  "title": "Longitude and Latitude",\n  "description": "A geographical coordinate on a planet (most commonly Earth).",\n  "required": ["latitude", "longitude"],\n  "type": "object",\n  "properties": {\n    "latitude": {\n      "type": "number",\n      "minimum": -90,\n      "maximum": 90\n    },\n    "longitude": {\n      "type": "number",\n      "minimum": -180,\n      "maximum": 180\n    }\n  }\n}\n\n\n\n# 深入理解 json schema\n\n原始官方文章\n\n# 顶层关键字\n\n$schema $id title description type required properties\n\n$schema只能在顶层使用。而且一旦使用就不能被外部引用，这里有点疑问，因为上面的例子展示了外部引用???\n\n# string 类型的关键字\n\nminLength maxLength pattern format\n\n# number 类型的关键字\n\nmultipleOf minimum maximum exclusiveMinimum exclusiveMaximum\n\n# object 类型的关键字\n\n除了使用 type 指定属性类型，还可以使用 enum 来指定枚举类型\n\n除了使用 properties 来描述属性，还可以通过 patternProperties 来指定非特定的属性。\n\nadditionalProperties 控制是否可以有多余属性\n\nunevaluatedProperties ???\n\nif then\n\npropertyNames\n\nminProperties maxProperties\n\n# array 类型的关键字\n\nitems prefixItems minItems maxItems uniqueItems contains minContains maxContains\n\n# 通用关键字\n\ntitle description default examples deprecated readOnly writeOnly\n\n$comment 相当于代码注释，是给后续修改该 json schema 的人看的，而不是给使用 json schema 的工具使用的。\n\ntype enum const 指定属性类型的 3 种方式。\n\n# 媒体类型关键字\n\n相当于是 string 类型的子类型，更加详细的描述了 string 类型。\n\n{\n  "type": "string",\n  "contentMediaType": "text/html"\n}\n\n\n{\n  "type": "string",\n  "contentEncoding": "base64",\n  "contentMediaType": "image/png"\n}\n\n\n\n# schema 组合\n\nallOf anyOf oneOf not\n\n注意到 oneOf 是严格限制只能是满足其中一个 subschema，anyOf 则可以是 1 个或者多个 subschema\n\n# 组合错误\n\n// 不可能同时存在既是string又是number\n{\n  "allOf": [{ "type": "string" }, { "type": "number" }]\n}\n\n\n# 组合重构\n\n{\n  "oneOf": [\n    { "type": "number", "multipleOf": 5 },\n    { "type": "number", "multipleOf": 3 }\n  ]\n}\n\n\n// 上面的json schema可以重构成这样的\n{\n  "type": "number",\n  "oneOf": [{ "multipleOf": 5 }, { "multipleOf": 3 }]\n}\n\n\n\n# 条件关键字\n\ndependentRequired，默认是单向的，如果需要双向依赖，则需要手动维护依赖关系。含义是当输入的 json 数据包含某个字段 A，则必须包含对应的字段 B、C、D...\n\ndependentSchemas 功能类似，只是语法不一样。\n\nif-then-else，单纯的 if-then-else 只能判断一个条件，不能实现 else-if 的效果。可以配置 allOf 和多个 if-then 来达到这个效果。\n\n\n# 引用 schema\n\n首先需要注意区分$schema和$id的区别。\n\n参考这里介绍了$schema应该在顶层使用，类似于 html 中的 dtd 文件，是一种 meta-schema。\n\n参考这里介绍了$id不是必须的，如果不存在则代表是一个匿名 schema。虽然$id是一个 URI，但是不代表具体实现会通过这个 URI 来获取这个 schema，它只是一个 ID 而已。 虽然只是一个 ID，但是在计算相对路径时，还是和 URL 的计算规则时相似的。\n\n# Retrieval URI\n\n代表具体实现获取 schema 的 URI。如果具体实现并不是通过网络获取，而是直接访问的匿名 schema，那么就没有 Retrieval URI。\n\n# Base URI\n\nBase URI 是参考的rfc3986的概念。\n\n一般就是 Retrieval URI 或者 根据 $id 来计算生成。\n\nBase URI 是非常重要的概念，因为后续在计算外部 schema 的路径时，就是根据 Base URI 来计算的。\n\n# $id\n\n如果$id是一个绝对URI，那么Base URI就是$id。如果$id 是一个相对路径，那么需要根据 Retrieval URI 来生成一个 Base URI。\n\n# subschema\n\n可以使用 JSON Pointer 来指向 subschema。\n\n其实就是利用 URI 中的 fragment 来定位 json schema 中的片段。https://example.com/schemas/address#/properties/street_address\n\n另一种不常见的方式时使用$anchor关键字来定义一个命名 fragment。https://example.com/schemas/address#street_address\n\n# $defs\n\n可以在当前 schema 内部定义可以复用的 subschema。\n\n{\n  "$defs": {\n    "name": { "type": "string" }\n  }\n}\n\n\n# $ref\n\n上面都是在说定义 schema 和 subschema，这里说一下怎么引用外部 schema。\n\n$ref可以时绝对 URI，也可以时相对 URI，如果是相对 URI，那么就需要借助 Base URI 来计算出绝对 URI。\n\n当然，如果缺少 Base URI，同时$ref同时又是一个相对 URI，那么就会导致计算失败。\n\n$ref还可以引用$defs，比如"$ref": "#/$defs/name"\n\n$ref还可以递归引用自身 schema，语法是"$ref": "#"，当然需要避免循环引用。\n\n# 打包\n\n开发 schema 的时候，将多个 schema 分开到多个文件是一个最佳实践。但是发布一个 schema，最佳实践最好是打包成一个文件。\n\n主要还是利用的$defs来声明 embedded schema。然后利用$ref来指向 embedded schema 的$id。注意这里需要区分 embedded schema 和 subschema 的区别。\n\n\n# 示例\n\n参考这里\n\n\n# 各种实现\n\n参考这里\n\n\n# 注意事项\n\ntype 可以是数组，表示满足任意一个类型定义即可\n\n最简单的 json schema 是{}，可以接受任意合法 json\n\njson schema 可以区分整数和数字，integer 和 number\n\n如果输入属性在满足 json schema 的基础上还有多余的属性，默认是可以通过校验的。通过 additionalProperties 关键字来控制。\n\nobject 的属性默认不是必填的，需要在 required 数组中声明必填字段\n\njson schema 中出现了非关键字，不会有任何影响，也不会自动参与 validate 的过程，这是显然的，因为 validate 函数是别人实现的。除非我们自己实现自己的 validate 函数。\b 那么就可以处理新增加的关键字。',normalizedContent:'# json schema 入门\n\n\n# 一句话介绍 json schema 的作用\n\n校验输入的 json 是否符合预期的格式。\n\n可以考虑存在这样的一个函数 validate(inputjson, inputjsonschema) => boolean;\n\n需要注意 json 的定义。json 包含以下这些类型。object array string integer number boolean null。\n\n关键是要意识到基本类型也属于 json 的定义。\n\n另一方面，json schema 的则一定是 object。当然 json schema 也是一个 json。\n\n比如描述字符串的 json schema 则是{"type": "string"}。 可以看出来描述基本类型的 json 已经需要一个 object 类型的 json schema 类描述了。\n\njson schema 同时也是一个 json 文件。这既是它的优势，也是它的劣势。因为 json 非常容易序列化，所以在跨语言方面表现的非常好。 但是 json 本身的逻辑表达能力非常欠缺，不能表达非常复杂的逻辑关系。\n\njson schema 主要用于验证 json 的类型结构。\n\n\n# 一篇文章入门 json schema\n\n原始入门文章\n\n{\n  // 可选字段，指定schema版本\n  "$schema": "https://json-schema.org/draft/2020-12/schema",\n  // 可选字段，指定当前schema文件的uri\n  "$id": "https://example.com/product.schema.json",\n  // 可选字段，指定当前schema文件的短描述\n  "title": "product",\n  // 可选字段，指定当前schema文件的长描述\n  "description": "a product in the catalog",\n  // 必填字段，指定输入json的类型\n  "type": "object",\n  // 因为当前json是一个object，所以需要指定有哪些属性\n  "properties": {\n    // 声明字段名productid\n    "productid": {\n      // 描述字段含义\n      "description": "the unique identifier for a product",\n      // 描述字段类型\n      "type": "integer"\n    },\n    // 声明字段名productname\n    "productname": {\n      "description": "name of the product",\n      "type": "string"\n    },\n    // 声明字段名price\n    "price": {\n      "description": "the price of the product",\n      "type": "number",\n      // 价格必须大于0\n      "exclusiveminimum": 0\n    },\n    // 声明字段名tags，是一个数组\n    "tags": {\n      "description": "tags for the product",\n      "type": "array",\n      // tags数组中的元素都是字符串\n      "items": {\n        "type": "string"\n      },\n      // tags数组最少有一个tag\n      "minitems": 1,\n      // tags数组中元素必须唯一\n      "uniqueitems": true\n    },\n    // 声明字段名dimensions，是一个对象\n    // 这里演示了嵌套对象的json schema\n    "dimensions": {\n      "type": "object",\n      "properties": {\n        "length": {\n          "type": "number"\n        },\n        "width": {\n          "type": "number"\n        },\n        "height": {\n          "type": "number"\n        }\n      },\n      "required": ["length", "width", "height"]\n    },\n    // 声明字段名dimensions，是一个对象\n    // 这里演示了使用$ref来引用一个外部json schema\n    "warehouselocation": {\n      "description": "coordinates of the warehouse where the product is located.",\n      "$ref": "https://example.com/geographical-location.schema.json"\n    }\n  },\n  // 指定哪些属性是必填字段\n  "required": ["productid", "productname", "price"]\n}\n\n\n以下是另一个 json schema 文件，被上面的 json schema 文件通过$ref指向$id引用\n\n{\n  "$id": "https://example.com/geographical-location.schema.json",\n  "$schema": "https://json-schema.org/draft/2020-12/schema",\n  "title": "longitude and latitude",\n  "description": "a geographical coordinate on a planet (most commonly earth).",\n  "required": ["latitude", "longitude"],\n  "type": "object",\n  "properties": {\n    "latitude": {\n      "type": "number",\n      "minimum": -90,\n      "maximum": 90\n    },\n    "longitude": {\n      "type": "number",\n      "minimum": -180,\n      "maximum": 180\n    }\n  }\n}\n\n\n\n# 深入理解 json schema\n\n原始官方文章\n\n# 顶层关键字\n\n$schema $id title description type required properties\n\n$schema只能在顶层使用。而且一旦使用就不能被外部引用，这里有点疑问，因为上面的例子展示了外部引用???\n\n# string 类型的关键字\n\nminlength maxlength pattern format\n\n# number 类型的关键字\n\nmultipleof minimum maximum exclusiveminimum exclusivemaximum\n\n# object 类型的关键字\n\n除了使用 type 指定属性类型，还可以使用 enum 来指定枚举类型\n\n除了使用 properties 来描述属性，还可以通过 patternproperties 来指定非特定的属性。\n\nadditionalproperties 控制是否可以有多余属性\n\nunevaluatedproperties ???\n\nif then\n\npropertynames\n\nminproperties maxproperties\n\n# array 类型的关键字\n\nitems prefixitems minitems maxitems uniqueitems contains mincontains maxcontains\n\n# 通用关键字\n\ntitle description default examples deprecated readonly writeonly\n\n$comment 相当于代码注释，是给后续修改该 json schema 的人看的，而不是给使用 json schema 的工具使用的。\n\ntype enum const 指定属性类型的 3 种方式。\n\n# 媒体类型关键字\n\n相当于是 string 类型的子类型，更加详细的描述了 string 类型。\n\n{\n  "type": "string",\n  "contentmediatype": "text/html"\n}\n\n\n{\n  "type": "string",\n  "contentencoding": "base64",\n  "contentmediatype": "image/png"\n}\n\n\n\n# schema 组合\n\nallof anyof oneof not\n\n注意到 oneof 是严格限制只能是满足其中一个 subschema，anyof 则可以是 1 个或者多个 subschema\n\n# 组合错误\n\n// 不可能同时存在既是string又是number\n{\n  "allof": [{ "type": "string" }, { "type": "number" }]\n}\n\n\n# 组合重构\n\n{\n  "oneof": [\n    { "type": "number", "multipleof": 5 },\n    { "type": "number", "multipleof": 3 }\n  ]\n}\n\n\n// 上面的json schema可以重构成这样的\n{\n  "type": "number",\n  "oneof": [{ "multipleof": 5 }, { "multipleof": 3 }]\n}\n\n\n\n# 条件关键字\n\ndependentrequired，默认是单向的，如果需要双向依赖，则需要手动维护依赖关系。含义是当输入的 json 数据包含某个字段 a，则必须包含对应的字段 b、c、d...\n\ndependentschemas 功能类似，只是语法不一样。\n\nif-then-else，单纯的 if-then-else 只能判断一个条件，不能实现 else-if 的效果。可以配置 allof 和多个 if-then 来达到这个效果。\n\n\n# 引用 schema\n\n首先需要注意区分$schema和$id的区别。\n\n参考这里介绍了$schema应该在顶层使用，类似于 html 中的 dtd 文件，是一种 meta-schema。\n\n参考这里介绍了$id不是必须的，如果不存在则代表是一个匿名 schema。虽然$id是一个 uri，但是不代表具体实现会通过这个 uri 来获取这个 schema，它只是一个 id 而已。 虽然只是一个 id，但是在计算相对路径时，还是和 url 的计算规则时相似的。\n\n# retrieval uri\n\n代表具体实现获取 schema 的 uri。如果具体实现并不是通过网络获取，而是直接访问的匿名 schema，那么就没有 retrieval uri。\n\n# base uri\n\nbase uri 是参考的rfc3986的概念。\n\n一般就是 retrieval uri 或者 根据 $id 来计算生成。\n\nbase uri 是非常重要的概念，因为后续在计算外部 schema 的路径时，就是根据 base uri 来计算的。\n\n# $id\n\n如果$id是一个绝对uri，那么base uri就是$id。如果$id 是一个相对路径，那么需要根据 retrieval uri 来生成一个 base uri。\n\n# subschema\n\n可以使用 json pointer 来指向 subschema。\n\n其实就是利用 uri 中的 fragment 来定位 json schema 中的片段。https://example.com/schemas/address#/properties/street_address\n\n另一种不常见的方式时使用$anchor关键字来定义一个命名 fragment。https://example.com/schemas/address#street_address\n\n# $defs\n\n可以在当前 schema 内部定义可以复用的 subschema。\n\n{\n  "$defs": {\n    "name": { "type": "string" }\n  }\n}\n\n\n# $ref\n\n上面都是在说定义 schema 和 subschema，这里说一下怎么引用外部 schema。\n\n$ref可以时绝对 uri，也可以时相对 uri，如果是相对 uri，那么就需要借助 base uri 来计算出绝对 uri。\n\n当然，如果缺少 base uri，同时$ref同时又是一个相对 uri，那么就会导致计算失败。\n\n$ref还可以引用$defs，比如"$ref": "#/$defs/name"\n\n$ref还可以递归引用自身 schema，语法是"$ref": "#"，当然需要避免循环引用。\n\n# 打包\n\n开发 schema 的时候，将多个 schema 分开到多个文件是一个最佳实践。但是发布一个 schema，最佳实践最好是打包成一个文件。\n\n主要还是利用的$defs来声明 embedded schema。然后利用$ref来指向 embedded schema 的$id。注意这里需要区分 embedded schema 和 subschema 的区别。\n\n\n# 示例\n\n参考这里\n\n\n# 各种实现\n\n参考这里\n\n\n# 注意事项\n\ntype 可以是数组，表示满足任意一个类型定义即可\n\n最简单的 json schema 是{}，可以接受任意合法 json\n\njson schema 可以区分整数和数字，integer 和 number\n\n如果输入属性在满足 json schema 的基础上还有多余的属性，默认是可以通过校验的。通过 additionalproperties 关键字来控制。\n\nobject 的属性默认不是必填的，需要在 required 数组中声明必填字段\n\njson schema 中出现了非关键字，不会有任何影响，也不会自动参与 validate 的过程，这是显然的，因为 validate 函数是别人实现的。除非我们自己实现自己的 validate 函数。\b 那么就可以处理新增加的关键字。',charsets:{cjk:!0},lastUpdated:"2021/12/31, 23:17:28"},{title:"依赖注入",frontmatter:{author:"kaokei",title:"依赖注入",date:"2021-12-19T16:52:54.000Z",permalink:"/pages/8b786e/",sidebar:!1,categories:["技术"],tags:[null]},regularPath:"/_posts/%E6%8A%80%E6%9C%AF/reactive-analysis.html",relativePath:"_posts/技术/reactive-analysis.md",key:"v-2fe63128",path:"/pages/8b786e/",headers:[{level:2,title:"doux",slug:"doux",normalizedTitle:"doux",charIndex:2},{level:2,title:"dob",slug:"dob",normalizedTitle:"dob",charIndex:835},{level:2,title:"dob-react",slug:"dob-react",normalizedTitle:"dob-react",charIndex:1993},{level:2,title:"concent",slug:"concent",normalizedTitle:"concent",charIndex:2540},{level:2,title:"@nx-js/observer-util",slug:"nx-js-observer-util",normalizedTitle:"@nx-js/observer-util",charIndex:4725},{level:2,title:"preact-nx-observer",slug:"preact-nx-observer",normalizedTitle:"preact-nx-observer",charIndex:5027},{level:2,title:"react-easy-state",slug:"react-easy-state",normalizedTitle:"react-easy-state",charIndex:5248},{level:2,title:"mobx",slug:"mobx",normalizedTitle:"mobx",charIndex:5838},{level:2,title:"vue-next",slug:"vue-next",normalizedTitle:"vue-next",charIndex:1187},{level:2,title:"constate",slug:"constate",normalizedTitle:"constate",charIndex:7816},{level:2,title:"react 类组件 vs vue 类组件",slug:"react-类组件-vs-vue-类组件",normalizedTitle:"react 类组件 vs vue 类组件",charIndex:8023},{level:2,title:"总结",slug:"总结",normalizedTitle:"总结",charIndex:8212}],headersStr:"doux dob dob-react concent @nx-js/observer-util preact-nx-observer react-easy-state mobx vue-next constate react 类组件 vs vue 类组件 总结",content:'# doux\n\n该库似乎已经被删除了，但是历史代码还存在，代码实现比较简单，非常方便入门分析。\n\nobservable 相当于 reactive observe 相当于 watch observer 相当于 watchEffect\n\n其实 observable 和另外两个是比较独立的，可以独立分析。\n\nobservable 在 get/ownKeys/has 三个方法中会调用 track 方法来收集依赖。在 set/deleteProperty 这个两个方法中会调用 trigger 方法来触发副作用。\n\n对比 track 和 trigger 的参数部分，主要是通过 target+key 这两个参数作为链接的桥梁。简单的理解为在 track 时，把 activeEffect 存储到 target+key 对应的 map 中，当 trigger 发生时就可以通过 target+key 来获取曾经保存的 activeEffect，然后执行它。关键点在于 activeEffect 是一个运行时产生的，observable 本身是不依赖它的。\n\n提到 activeEffect，它是怎么产生的呢？其实就是由 observe 产生的。observe 的返回值就是 effect。 其中这段代码说明了 activeEffect 是怎么产生的：\n\neffectStack.push(effect);\nactiveEffect = effect;\nreturn Reflect.apply(fn, ctx, args);\n\n\n其中fn就是我们想要观察的代码，想要收集依赖的代码。所以在执行该代码之前，我们提前准备好 activeEffect。\n\nobserver 主要是实现了对组件的观察，主要是判断 effect 是否有 cb 属性。\n\neffects.forEach((e: Effect) => (isFn(e.cb) ? e.cb(e) : e()));\n\n\n\n# dob\n\n首先查看最简单的例子。\n\nimport { observable, observe } from "dob";\n\nconst obj = observable({ a: 1 });\n\nobserve(() => {\n  debugger;\n  console.log("obj.a has changed to", obj.a);\n}); // <· obj.a has changed to 1\n\nobj.a = 2; // <· obj.a has changed to 2\n\n\n首先 observable 会把一个普通对象转变为 Proxy 对象。主要是 get/set/deleteProperty 这三个属性。这种转变只是为了后续作服务的。\n\n当执行 observe 函数时，类似于 vue-next 中的 watchEffect，它是立即执行的。关键在于 Reaction 中有一段代码是这样的。\n\nglobal_state_1.globalState.currentReaction = this; // Clear bindings first.\n\nthis.clearBinding();\n\ntry {\n  callback({\n    debugId: global_state_1.globalState.currentDebugId\n  });\n} finally {\n  global_state_1.globalState.currentReaction = null;\n}\n\n\n这段代码是非常经典的，首先设置当前的依赖项 currentReaction，然后执行 callback，再清除 currentReaction。这样在执行 callback 的过程中，会触发 observable 中设置的 getter 函数。会把 currentReaction 当作所有数据的依赖。关键代码在bindCurrentReaction中实现。\n\n相应的当我们执行obj.a = 2时，会触发 Proxy 的 setter 函数，会调用 queueRunReactions 从而找到刚才保存下来的 currentReaction，然后就可以runReaction(currentReaction)。\n\n重点需要关注Reaction的实现，类似于 vue-next 中的effect的实现。\n\n另一个比较重要的点是这个库非常依赖全局状态管理，主要集中在 global-state.ts 文件中，尤其是其中的 objectReactionBindings 这个对象。它全局保存了数据和 Reaction 的依赖关系。\n\n依赖dependency-inject实现依赖注入的功能。\n\n\n# dob-react\n\n主要是提供了 Provider 和 Connect 这两个方法。可以在 Provider 这个组件上声明任意多个 props，这些 props 数据都会被注入到@Connect装饰的组件中。\n\n也就是说我们自己写的组件如果使用了@Connect装饰器，那么组件内this.props就会自动被注入一些属性，这些属性就是 Provider 上声明的属性。\n\n目前发现的唯一路径是这样的。observe调用new Reaction调用设置currentReaction，然后在访问 getter 时，就会把数据和 currentReaction 绑定起来，也就是bindCurrentReaction。\n\n在 dob 中只能通过observe才能实现依赖收集。在dob-react中，有以下流程： @connect调用mixinAndInject调用mixinLifecycleEvents调用patch调用reactiveMixin调用initialRender调用new Reaction，从而把组件的 render 函数和数据绑定起来。\n\n当然最终的实现部分还是需要注意baseRender和initialRender和reactiveRender之间的关系。\n\n\n# concent\n\n这是一个框架，而且功能非常强大，并且更新非常活跃。同时支持类组件和函数组件。唯一我不太喜欢的地方可能就是过于复杂了，上手成本有点高，再加上使用字符串来区分模块也是一个原罪。不过它仍然是一个非常优秀的框架。\n\n我这里重点关注一下 register 和 useConcent 是如何实现组件的响应式更新的。\n\n参考官方文档中最简单的例子\n\nfunction Demo() {\n  const { state, setState } = useConcent({ module: "foo" });\n  const changeName = e => setState({ name: e.target.value });\n}\n\n\n可以猜测到 useConcent 本身是不需要做依赖收集的。因为我们还是需要手动调用setState方法去更新数据，这时可以强制调用forseUpdate方法去更新组件。\n\n分析源码可知，useConcent 返回值是一个CcHook的实例对象。这个实例对象的 state 和 setState\b 就是React.useState的返回值。综上 useConcent 就是对React.useState的封装，说明我猜测的没有错。\n\n我还发现 useConcent 是不支持直接 mutable 修改 state 数据的，只能通过 setState 来修改数据。make-ob-state.js 中的 setter 中是没有 trigger 方法的，说明确实没有实现 mutable 响应式。\n\n当然 useConcent 是需要做到多个组件共享数据的，也就是一个组件修改了数据，可能会影响到别的组件。\n\nuseConcent 调用 buildRef 调用 buildRefCtx，其中 buildRefCtx 会修改 ref.state 属性，该属性会合并当前组件的 state 和 moduleState。这就是 useConcent 从全局获取 moduleState 的过程。\n\n至于 moduleState 状态的改变，是如何改变所有依赖这个 moduleState 所有组件的稍微复杂一些。\n\nbuild-ref-ctx.js 中使用了 makeObState 处理了 state\b 数据，\b 从而利用 Proxy 的 getter 收集依赖。收集依赖的逻辑在 updateDep 函数中。主要是以下代码。\n\n// 这个key代表着refCtx，从而可以利用这个refCtx来更新组件\nconst ccUniqueKey = refCtx.ccUniqueKey;\n// 这个key代表着数据foo/count\nconst waKey = makeWaKey(module, key);\n// 最终在wakey-ukey-map.js文件中把这两个key通过waKey2uKeyMap关联起来。\n\n\n当用户点击某个按钮，触发点击事件，然后调用 setState 去修改数据时，这个 setState 其实是在 build-ref-ctx.js 文件中定义的，最终会调用 changeState 调用 changeRefState。 changeRefState 会调用 triggerBroadcastState 会调用 broadcastState，其中有个重要的函数是 findUpdateRefs，这个函数会返回所有依赖了变更数据的 ref 的 key。有了这个 key，再加上我们还有全局的 ref 对象池。\n\n// 获取全局ref对象池，是一个Record<string, Ref>的对象\nconst ccUKey2ref = ccContext.ccUKey2ref;\n// 通过key和全局ref对象池，就能获取到ref对象\nconst ref = ccUKey2ref[refKey];\n// 有了ref对象，就能触发这个ref上的setState方法，从而\b更新组件\ntriggerReactSetState(ref);\n\n\n以上分析我是通过 debug 代码观察到 \b 的整个过程。当然我只是观察了最简单的两个组件依赖同一个 module 的过程。\n\n我观察到的最大的结论是 useConcent\b 没有实现 Proxy 中的 setter 的响应式触发，也就是不支持 mutable 更新数据。第二点就是 concent 在保存数据和视图的依赖关系时，是通过保存 key 与 key 之间的依赖关系，而且还保存了全局的 ref 对象池。从而实现当某个数据变化时，多个依赖该数据的视图都能得到更新。相对应的在很多别的 \b 库中，都是直接通过 map 来保存数据和 Dep 之间的依赖关系。\n\nregister 作为一个装饰器，会包装一个类组件，然后返回一个新的类组件。只需要知道这一行代码即可。\n\nbuildRefCtx(this, params, lite);\n\n\n上面有提到的 useConcent 的核心代码就是buildRefCtx(hookRef, params, lite);，这行代码内部会重新包装 state 和 setState，从而可以支持 module 等特性。\n\n\n# @nx-js/observer-util\n\nobservable 方法对应的是 reactive 方法，实现原理和 doux 比较一致，只是封装的更好一些。也是在不同的 handler 中处理 track 和 trigger。当然 track 和 trigger 需要处理的是 reaction，相当于 doux 中的 effect。\n\nobserve 和 unobserve 则分别对应的是 watch 和 stopWatch 方法。注意这里使用reaction.scheduler代替了reaction。从而实现了从组件收集依赖和更新组件的分离。这一点和 doux 的cb属性是比较相似的。\n\n\n# preact-nx-observer\n\nobserver 方法支持类组件，这里比较取巧的地方就是在 componentDidMount 中替换了 render 方法。\n\nthis.render = observe(this.render, {\n  scheduler: () => this.setState({}),\n  lazy: true\n});\n\n\n这一段代码还是比较巧妙的，但就是不知道兼容性如何。而且也没有支持函数组件。\n\n\n# react-easy-state\n\nstore，以及 createStore 都是对 observable 的封装。只是增加了对unstable_batchedUpdates的支持。参考这片文章\n\nview 则是对组件的封装。支持函数组件和类组件。\n\n注意类组件中是在构造函数中替换掉的 render 方法，对比preact-nx-observer是在 componentDidMount 中替换的。我认为在构造函数中替换更符合直觉。\n\n// 针对函数组件的封装\nconst render = useMemo(\n  () =>\n    observe(Comp, {\n      scheduler: () => setState({}),\n      lazy: true\n    }),\n  // Adding the original Comp here is necessary to make React Hot Reload work\n  // it does not affect behavior otherwise\n  [Comp]\n);\n\n\n// 针对类组件的封装\nthis.render = observe(this.render, {\n  scheduler: () => this.setState({}),\n  lazy: true\n});\n\n\n\n# mobx\n\n// 相当于vue-next中的reactive\nmakeObservable(target, annotations?, options?)\nmakeAutoObservable(target, overrides?, options?)\nobservable(source, overrides?, options?)\n\n\n需要指定@observable,@action,@computed等来指定各个属性的性质。\n\n// 相当于vue-next中的watch\nreaction(() => value, (value, previousValue, reaction) => { sideEffect }, options?).\n\n\n// 相当于vue-next中的watchEffect\nautorun(effect: (reaction) => void)\n\n\n// 对组件的封装\nimport { observer } from "mobx-react-lite"; // Or "mobx-react".\nconst MyComponent = observer(props => ReactElement);\n\n\n这里的 observer 功能非常强大，只要组件依赖了 observable 数据，不管这个数据的来源是什么，都能触发组件重新渲染。\n\n尤其是对各种情况都考虑的非常周全，值得学习。\n\n\n# vue-next\n\n整个流程比较像@nx-js/observer-util，reactive 也是借助的 Proxy 来实现的，关键是 baseHandler 的实现。然后利用 track 来收集依赖。依赖被转为 effect，又有 activeEffect 和 effectStack 这些概念。\n\n可惜我只想依赖其中的@vue/reactivity 这个库。但是 watch/watchEffect 这两个方法都不包含在内，因为 watch 和 watchEffect 都是和 vue 深度绑定的。\n\n所以如果想要在 react 中使用，则必须实现自己的 watch/watchEffect 方法。\n\n我理解广义 watch 的 api 形式有这 3 种场景：\n\n 1. 指定需要 watch 的数据，可以是对象、数组、函数形式指定依赖数据，当数据有变化时，执行 callback\n 2. 指定一个 effect，第一次立即执行时会收集依赖，后续当这些依赖数据有变化的时候，会再次执行这个 effect\n 3. 指定 effect 和 callback，当 effect 对应的依赖有变化的时候，会执行 callback\n\n很容易发现在 vue-next 中已经实现了watch和watchEffect方法，但是实际上在 dowatch 中，又一个细节实现：\n\nconst runner = effect(getter, {\n  lazy: true,\n  onTrack,\n  onTrigger,\n  scheduler\n});\n\n\n这段代码可以理解为观察 getter 返回的数据是否有变化，如果有变化就执行 scheduler。这就是上面提到的第 3 中 api。而且 1 和 2 就是依赖 3 来实现的。 当 watch 的数据本身看作是一个 getter 时，1 就变成 3 了。 当 effect 等于 callback 时，2 就是 3 的一种特殊形式。 需要注意这里的 3 中的 effect 和 callback 不是完全独立的。如果是完全独立的，应该采用 1 这种形式以 getter 的形式提供观察的数据，而不是以 effect 的形式提供依赖数据。观察如下代码：\n\n// 这里的本意是当state.count变化时，输出state.name\n// 但是这里不应该这么写\nwatch(\n  () => console.log(state.count),\n  () => console.log(state.name)\n);\n// 这里明确以getter的形式提供依赖数据\nwatch(\n  () => state.count,\n  () => console.log(state.name)\n);\n\n\n3 的场景可能是这样的。\n\n// renderView是渲染试图的函数，也是我们观察的effect，当其依赖的数据有变化时，我们可能没有办法直接调用renderView这个函数\n// 我们只能通过另一个函数forceUpdate来触发视图更新\nwatch(\n  () => renderView(someView),\n  () => forceUpdate(someView)\n);\n\n\n\n# constate\n\ngithub 网址\n\n我想实现的库可以看作是 constate 的升级版。现在 constate 只是把 hooks 都放到一个全局的空间中。然后达到所有组件可以共享这个 hooks 的状态。\n\n缺点是只有一个全局命名空间。而且服务的形式只能是 hooks，没有依赖注入，没有 mutable 响应式。\n\n优点是简单，而且只依赖 hooks 和 context，应该是兼容并发模式的。\n\n\n# react 类组件 vs vue 类组件\n\nreact 类组件是官方原生支持的，实例属性不是 reactive 的，只有通过 this.setState 修改 this.state 才会 re-render。\n\nvue 类组件必须借助 vue-class-component 才能工作，其原理也是转化为 Option 组件。其中所有实例属性都是 reactive 的。\n\n\n# 总结\n\ndoux 使用函数组件包裹业务组件，也可以看作是observe函数的返回值作为 this.render preact-nx-observer 是observe直接返回新的 render 函数替换 this.render react-easy-state 也是直接替换的 this.render dob-react 是需要自己构建新的 render 函数去替换 this.render concent 主要是对setState的封装，而且不支持 mutable 响应式 mobx 再看看 vue-next 中的 render 函数默认就会收集依赖的，而且会把 render 函数当作一个 watchEffect 来对待',normalizedContent:'# doux\n\n该库似乎已经被删除了，但是历史代码还存在，代码实现比较简单，非常方便入门分析。\n\nobservable 相当于 reactive observe 相当于 watch observer 相当于 watcheffect\n\n其实 observable 和另外两个是比较独立的，可以独立分析。\n\nobservable 在 get/ownkeys/has 三个方法中会调用 track 方法来收集依赖。在 set/deleteproperty 这个两个方法中会调用 trigger 方法来触发副作用。\n\n对比 track 和 trigger 的参数部分，主要是通过 target+key 这两个参数作为链接的桥梁。简单的理解为在 track 时，把 activeeffect 存储到 target+key 对应的 map 中，当 trigger 发生时就可以通过 target+key 来获取曾经保存的 activeeffect，然后执行它。关键点在于 activeeffect 是一个运行时产生的，observable 本身是不依赖它的。\n\n提到 activeeffect，它是怎么产生的呢？其实就是由 observe 产生的。observe 的返回值就是 effect。 其中这段代码说明了 activeeffect 是怎么产生的：\n\neffectstack.push(effect);\nactiveeffect = effect;\nreturn reflect.apply(fn, ctx, args);\n\n\n其中fn就是我们想要观察的代码，想要收集依赖的代码。所以在执行该代码之前，我们提前准备好 activeeffect。\n\nobserver 主要是实现了对组件的观察，主要是判断 effect 是否有 cb 属性。\n\neffects.foreach((e: effect) => (isfn(e.cb) ? e.cb(e) : e()));\n\n\n\n# dob\n\n首先查看最简单的例子。\n\nimport { observable, observe } from "dob";\n\nconst obj = observable({ a: 1 });\n\nobserve(() => {\n  debugger;\n  console.log("obj.a has changed to", obj.a);\n}); // <· obj.a has changed to 1\n\nobj.a = 2; // <· obj.a has changed to 2\n\n\n首先 observable 会把一个普通对象转变为 proxy 对象。主要是 get/set/deleteproperty 这三个属性。这种转变只是为了后续作服务的。\n\n当执行 observe 函数时，类似于 vue-next 中的 watcheffect，它是立即执行的。关键在于 reaction 中有一段代码是这样的。\n\nglobal_state_1.globalstate.currentreaction = this; // clear bindings first.\n\nthis.clearbinding();\n\ntry {\n  callback({\n    debugid: global_state_1.globalstate.currentdebugid\n  });\n} finally {\n  global_state_1.globalstate.currentreaction = null;\n}\n\n\n这段代码是非常经典的，首先设置当前的依赖项 currentreaction，然后执行 callback，再清除 currentreaction。这样在执行 callback 的过程中，会触发 observable 中设置的 getter 函数。会把 currentreaction 当作所有数据的依赖。关键代码在bindcurrentreaction中实现。\n\n相应的当我们执行obj.a = 2时，会触发 proxy 的 setter 函数，会调用 queuerunreactions 从而找到刚才保存下来的 currentreaction，然后就可以runreaction(currentreaction)。\n\n重点需要关注reaction的实现，类似于 vue-next 中的effect的实现。\n\n另一个比较重要的点是这个库非常依赖全局状态管理，主要集中在 global-state.ts 文件中，尤其是其中的 objectreactionbindings 这个对象。它全局保存了数据和 reaction 的依赖关系。\n\n依赖dependency-inject实现依赖注入的功能。\n\n\n# dob-react\n\n主要是提供了 provider 和 connect 这两个方法。可以在 provider 这个组件上声明任意多个 props，这些 props 数据都会被注入到@connect装饰的组件中。\n\n也就是说我们自己写的组件如果使用了@connect装饰器，那么组件内this.props就会自动被注入一些属性，这些属性就是 provider 上声明的属性。\n\n目前发现的唯一路径是这样的。observe调用new reaction调用设置currentreaction，然后在访问 getter 时，就会把数据和 currentreaction 绑定起来，也就是bindcurrentreaction。\n\n在 dob 中只能通过observe才能实现依赖收集。在dob-react中，有以下流程： @connect调用mixinandinject调用mixinlifecycleevents调用patch调用reactivemixin调用initialrender调用new reaction，从而把组件的 render 函数和数据绑定起来。\n\n当然最终的实现部分还是需要注意baserender和initialrender和reactiverender之间的关系。\n\n\n# concent\n\n这是一个框架，而且功能非常强大，并且更新非常活跃。同时支持类组件和函数组件。唯一我不太喜欢的地方可能就是过于复杂了，上手成本有点高，再加上使用字符串来区分模块也是一个原罪。不过它仍然是一个非常优秀的框架。\n\n我这里重点关注一下 register 和 useconcent 是如何实现组件的响应式更新的。\n\n参考官方文档中最简单的例子\n\nfunction demo() {\n  const { state, setstate } = useconcent({ module: "foo" });\n  const changename = e => setstate({ name: e.target.value });\n}\n\n\n可以猜测到 useconcent 本身是不需要做依赖收集的。因为我们还是需要手动调用setstate方法去更新数据，这时可以强制调用forseupdate方法去更新组件。\n\n分析源码可知，useconcent 返回值是一个cchook的实例对象。这个实例对象的 state 和 setstate\b 就是react.usestate的返回值。综上 useconcent 就是对react.usestate的封装，说明我猜测的没有错。\n\n我还发现 useconcent 是不支持直接 mutable 修改 state 数据的，只能通过 setstate 来修改数据。make-ob-state.js 中的 setter 中是没有 trigger 方法的，说明确实没有实现 mutable 响应式。\n\n当然 useconcent 是需要做到多个组件共享数据的，也就是一个组件修改了数据，可能会影响到别的组件。\n\nuseconcent 调用 buildref 调用 buildrefctx，其中 buildrefctx 会修改 ref.state 属性，该属性会合并当前组件的 state 和 modulestate。这就是 useconcent 从全局获取 modulestate 的过程。\n\n至于 modulestate 状态的改变，是如何改变所有依赖这个 modulestate 所有组件的稍微复杂一些。\n\nbuild-ref-ctx.js 中使用了 makeobstate 处理了 state\b 数据，\b 从而利用 proxy 的 getter 收集依赖。收集依赖的逻辑在 updatedep 函数中。主要是以下代码。\n\n// 这个key代表着refctx，从而可以利用这个refctx来更新组件\nconst ccuniquekey = refctx.ccuniquekey;\n// 这个key代表着数据foo/count\nconst wakey = makewakey(module, key);\n// 最终在wakey-ukey-map.js文件中把这两个key通过wakey2ukeymap关联起来。\n\n\n当用户点击某个按钮，触发点击事件，然后调用 setstate 去修改数据时，这个 setstate 其实是在 build-ref-ctx.js 文件中定义的，最终会调用 changestate 调用 changerefstate。 changerefstate 会调用 triggerbroadcaststate 会调用 broadcaststate，其中有个重要的函数是 findupdaterefs，这个函数会返回所有依赖了变更数据的 ref 的 key。有了这个 key，再加上我们还有全局的 ref 对象池。\n\n// 获取全局ref对象池，是一个record<string, ref>的对象\nconst ccukey2ref = cccontext.ccukey2ref;\n// 通过key和全局ref对象池，就能获取到ref对象\nconst ref = ccukey2ref[refkey];\n// 有了ref对象，就能触发这个ref上的setstate方法，从而\b更新组件\ntriggerreactsetstate(ref);\n\n\n以上分析我是通过 debug 代码观察到 \b 的整个过程。当然我只是观察了最简单的两个组件依赖同一个 module 的过程。\n\n我观察到的最大的结论是 useconcent\b 没有实现 proxy 中的 setter 的响应式触发，也就是不支持 mutable 更新数据。第二点就是 concent 在保存数据和视图的依赖关系时，是通过保存 key 与 key 之间的依赖关系，而且还保存了全局的 ref 对象池。从而实现当某个数据变化时，多个依赖该数据的视图都能得到更新。相对应的在很多别的 \b 库中，都是直接通过 map 来保存数据和 dep 之间的依赖关系。\n\nregister 作为一个装饰器，会包装一个类组件，然后返回一个新的类组件。只需要知道这一行代码即可。\n\nbuildrefctx(this, params, lite);\n\n\n上面有提到的 useconcent 的核心代码就是buildrefctx(hookref, params, lite);，这行代码内部会重新包装 state 和 setstate，从而可以支持 module 等特性。\n\n\n# @nx-js/observer-util\n\nobservable 方法对应的是 reactive 方法，实现原理和 doux 比较一致，只是封装的更好一些。也是在不同的 handler 中处理 track 和 trigger。当然 track 和 trigger 需要处理的是 reaction，相当于 doux 中的 effect。\n\nobserve 和 unobserve 则分别对应的是 watch 和 stopwatch 方法。注意这里使用reaction.scheduler代替了reaction。从而实现了从组件收集依赖和更新组件的分离。这一点和 doux 的cb属性是比较相似的。\n\n\n# preact-nx-observer\n\nobserver 方法支持类组件，这里比较取巧的地方就是在 componentdidmount 中替换了 render 方法。\n\nthis.render = observe(this.render, {\n  scheduler: () => this.setstate({}),\n  lazy: true\n});\n\n\n这一段代码还是比较巧妙的，但就是不知道兼容性如何。而且也没有支持函数组件。\n\n\n# react-easy-state\n\nstore，以及 createstore 都是对 observable 的封装。只是增加了对unstable_batchedupdates的支持。参考这片文章\n\nview 则是对组件的封装。支持函数组件和类组件。\n\n注意类组件中是在构造函数中替换掉的 render 方法，对比preact-nx-observer是在 componentdidmount 中替换的。我认为在构造函数中替换更符合直觉。\n\n// 针对函数组件的封装\nconst render = usememo(\n  () =>\n    observe(comp, {\n      scheduler: () => setstate({}),\n      lazy: true\n    }),\n  // adding the original comp here is necessary to make react hot reload work\n  // it does not affect behavior otherwise\n  [comp]\n);\n\n\n// 针对类组件的封装\nthis.render = observe(this.render, {\n  scheduler: () => this.setstate({}),\n  lazy: true\n});\n\n\n\n# mobx\n\n// 相当于vue-next中的reactive\nmakeobservable(target, annotations?, options?)\nmakeautoobservable(target, overrides?, options?)\nobservable(source, overrides?, options?)\n\n\n需要指定@observable,@action,@computed等来指定各个属性的性质。\n\n// 相当于vue-next中的watch\nreaction(() => value, (value, previousvalue, reaction) => { sideeffect }, options?).\n\n\n// 相当于vue-next中的watcheffect\nautorun(effect: (reaction) => void)\n\n\n// 对组件的封装\nimport { observer } from "mobx-react-lite"; // or "mobx-react".\nconst mycomponent = observer(props => reactelement);\n\n\n这里的 observer 功能非常强大，只要组件依赖了 observable 数据，不管这个数据的来源是什么，都能触发组件重新渲染。\n\n尤其是对各种情况都考虑的非常周全，值得学习。\n\n\n# vue-next\n\n整个流程比较像@nx-js/observer-util，reactive 也是借助的 proxy 来实现的，关键是 basehandler 的实现。然后利用 track 来收集依赖。依赖被转为 effect，又有 activeeffect 和 effectstack 这些概念。\n\n可惜我只想依赖其中的@vue/reactivity 这个库。但是 watch/watcheffect 这两个方法都不包含在内，因为 watch 和 watcheffect 都是和 vue 深度绑定的。\n\n所以如果想要在 react 中使用，则必须实现自己的 watch/watcheffect 方法。\n\n我理解广义 watch 的 api 形式有这 3 种场景：\n\n 1. 指定需要 watch 的数据，可以是对象、数组、函数形式指定依赖数据，当数据有变化时，执行 callback\n 2. 指定一个 effect，第一次立即执行时会收集依赖，后续当这些依赖数据有变化的时候，会再次执行这个 effect\n 3. 指定 effect 和 callback，当 effect 对应的依赖有变化的时候，会执行 callback\n\n很容易发现在 vue-next 中已经实现了watch和watcheffect方法，但是实际上在 dowatch 中，又一个细节实现：\n\nconst runner = effect(getter, {\n  lazy: true,\n  ontrack,\n  ontrigger,\n  scheduler\n});\n\n\n这段代码可以理解为观察 getter 返回的数据是否有变化，如果有变化就执行 scheduler。这就是上面提到的第 3 中 api。而且 1 和 2 就是依赖 3 来实现的。 当 watch 的数据本身看作是一个 getter 时，1 就变成 3 了。 当 effect 等于 callback 时，2 就是 3 的一种特殊形式。 需要注意这里的 3 中的 effect 和 callback 不是完全独立的。如果是完全独立的，应该采用 1 这种形式以 getter 的形式提供观察的数据，而不是以 effect 的形式提供依赖数据。观察如下代码：\n\n// 这里的本意是当state.count变化时，输出state.name\n// 但是这里不应该这么写\nwatch(\n  () => console.log(state.count),\n  () => console.log(state.name)\n);\n// 这里明确以getter的形式提供依赖数据\nwatch(\n  () => state.count,\n  () => console.log(state.name)\n);\n\n\n3 的场景可能是这样的。\n\n// renderview是渲染试图的函数，也是我们观察的effect，当其依赖的数据有变化时，我们可能没有办法直接调用renderview这个函数\n// 我们只能通过另一个函数forceupdate来触发视图更新\nwatch(\n  () => renderview(someview),\n  () => forceupdate(someview)\n);\n\n\n\n# constate\n\ngithub 网址\n\n我想实现的库可以看作是 constate 的升级版。现在 constate 只是把 hooks 都放到一个全局的空间中。然后达到所有组件可以共享这个 hooks 的状态。\n\n缺点是只有一个全局命名空间。而且服务的形式只能是 hooks，没有依赖注入，没有 mutable 响应式。\n\n优点是简单，而且只依赖 hooks 和 context，应该是兼容并发模式的。\n\n\n# react 类组件 vs vue 类组件\n\nreact 类组件是官方原生支持的，实例属性不是 reactive 的，只有通过 this.setstate 修改 this.state 才会 re-render。\n\nvue 类组件必须借助 vue-class-component 才能工作，其原理也是转化为 option 组件。其中所有实例属性都是 reactive 的。\n\n\n# 总结\n\ndoux 使用函数组件包裹业务组件，也可以看作是observe函数的返回值作为 this.render preact-nx-observer 是observe直接返回新的 render 函数替换 this.render react-easy-state 也是直接替换的 this.render dob-react 是需要自己构建新的 render 函数去替换 this.render concent 主要是对setstate的封装，而且不支持 mutable 响应式 mobx 再看看 vue-next 中的 render 函数默认就会收集依赖的，而且会把 render 函数当作一个 watcheffect 来对待',charsets:{cjk:!0},lastUpdated:"2021/12/31, 23:17:28"},{title:"参考文章",frontmatter:{author:"kaokei",title:"参考文章",date:"2021-12-19T16:52:54.000Z",permalink:"/pages/5b7b92/",sidebar:!1,categories:["技术"],tags:[null]},regularPath:"/_posts/%E6%8A%80%E6%9C%AF/",relativePath:"_posts/技术/readme.md",key:"v-1a9f2fa3",path:"/pages/5b7b92/",headersStr:null,content:"这里记录一些我对前端某些知识点的理解\n\nwatch在vue中是不需要返回render函数的，而是返回的stopWatchHandler，是因为vue能完全控制模版的更新。 但是在react中，我们不能直接调用react组件的render函数，只能通过setState来间接触发组件更新。\n\nsvelte无法解决this问题，svelte无法解决依赖注入问题，因为导入的是store。而不是原始对象。但是在vue中因为使用的是proxy，所以导入的还是原始对象",normalizedContent:"这里记录一些我对前端某些知识点的理解\n\nwatch在vue中是不需要返回render函数的，而是返回的stopwatchhandler，是因为vue能完全控制模版的更新。 但是在react中，我们不能直接调用react组件的render函数，只能通过setstate来间接触发组件更新。\n\nsvelte无法解决this问题，svelte无法解决依赖注入问题，因为导入的是store。而不是原始对象。但是在vue中因为使用的是proxy，所以导入的还是原始对象",charsets:{cjk:!0},lastUpdated:"2021/12/31, 23:17:28"},{title:"代理方案调研",frontmatter:{sidebar:!1,title:"代理方案调研",date:"2021-12-23T21:27:25.000Z",permalink:"/pages/7dfa32/",categories:["技术"],tags:[null]},regularPath:"/_posts/%E6%8A%80%E6%9C%AF/%E4%BB%A3%E7%90%86%E6%96%B9%E6%A1%88%E8%B0%83%E7%A0%94.html",relativePath:"_posts/技术/代理方案调研.md",key:"v-c9d1abd6",path:"/pages/7dfa32/",headers:[{level:2,title:"使用 charles 和 fiddle",slug:"使用-charles-和-fiddle",normalizedTitle:"使用 charles 和 fiddle",charIndex:15},{level:2,title:"建议使用 anyproxy",slug:"建议使用-anyproxy",normalizedTitle:"建议使用 anyproxy",charIndex:183}],headersStr:"使用 charles 和 fiddle 建议使用 anyproxy",content:"# 常用代理方案调研\n\n\n# 使用 charles 和 fiddle\n\nmacos 常用 charles，windows 常用 fiddle。\n\nmacos 支持断点功能，可以修改请求以及返回值。并且支持 map local 和 map remote。\n\n但是最大的缺陷是不能区分 options 请求和 GET/POST 请求。导致以上功能完全不能使用。\n\n\n# 建议使用 anyproxy\n\n因为 anyproxy 可以手动创建规则，可以通过编程来处理请求和返回值，这样就可以方便的区分 options 请求和 GET/POST 请求。\n\n警告\n\n实际情况比较复杂。\n\n比如在ios14，ios15的safari浏览器中都不能正常解析https请求。 另外一台ios13则可以正常解析https请求，使用的也是safari浏览器。\n\n比如在小米手机自带的浏览器中，就算手机已经安装了证书，该浏览器还是不信任证书，这个真是大无语事件。 但是在小米手机上的UC浏览器中就可以正常访问。所以建议不要使用自带的浏览器。\n\n总体上来看还是可以使用的。\n\n有想法做一个可视化界面来配置代理规则，而不用手动写代码了。",normalizedContent:"# 常用代理方案调研\n\n\n# 使用 charles 和 fiddle\n\nmacos 常用 charles，windows 常用 fiddle。\n\nmacos 支持断点功能，可以修改请求以及返回值。并且支持 map local 和 map remote。\n\n但是最大的缺陷是不能区分 options 请求和 get/post 请求。导致以上功能完全不能使用。\n\n\n# 建议使用 anyproxy\n\n因为 anyproxy 可以手动创建规则，可以通过编程来处理请求和返回值，这样就可以方便的区分 options 请求和 get/post 请求。\n\n警告\n\n实际情况比较复杂。\n\n比如在ios14，ios15的safari浏览器中都不能正常解析https请求。 另外一台ios13则可以正常解析https请求，使用的也是safari浏览器。\n\n比如在小米手机自带的浏览器中，就算手机已经安装了证书，该浏览器还是不信任证书，这个真是大无语事件。 但是在小米手机上的uc浏览器中就可以正常访问。所以建议不要使用自带的浏览器。\n\n总体上来看还是可以使用的。\n\n有想法做一个可视化界面来配置代理规则，而不用手动写代码了。",charsets:{cjk:!0},lastUpdated:"2021/12/31, 23:17:28"},{title:"代码托管服务总结",frontmatter:{sidebar:!1,title:"代码托管服务总结",date:"2021-12-22T10:59:21.000Z",permalink:"/pages/3d42c5/",categories:["技术"],tags:[null]},regularPath:"/_posts/%E6%8A%80%E6%9C%AF/%E4%BB%A3%E7%A0%81%E6%89%98%E7%AE%A1%E6%9C%8D%E5%8A%A1%E6%80%BB%E7%BB%93.html",relativePath:"_posts/技术/代码托管服务总结.md",key:"v-5b26d060",path:"/pages/3d42c5/",headers:[{level:2,title:"码云",slug:"码云",normalizedTitle:"码云",charIndex:18},{level:2,title:"码市",slug:"码市",normalizedTitle:"码市",charIndex:115},{level:2,title:"百度云",slug:"百度云",normalizedTitle:"百度云",charIndex:199},{level:2,title:"CSDN 代码托管平台（已关闭）",slug:"csdn-代码托管平台-已关闭",normalizedTitle:"csdn 代码托管平台（已关闭）",charIndex:314},{level:2,title:"github",slug:"github",normalizedTitle:"github",charIndex:359},{level:2,title:"gitlab",slug:"gitlab",normalizedTitle:"gitlab",charIndex:463},{level:2,title:"bitbucket",slug:"bitbucket",normalizedTitle:"bitbucket",charIndex:681},{level:2,title:"google code（已关闭）",slug:"google-code-已关闭",normalizedTitle:"google code（已关闭）",charIndex:776}],headersStr:"码云 码市 百度云 CSDN 代码托管平台（已关闭） github gitlab bitbucket google code（已关闭）",content:"# 国内外代码托管服务总结\n\n\n# 码云\n\n旧网址是 https://git.oschina.net/\n\n新网址是 https://gitee.com\n\n可以看出来背后的公司是开源中国，目前应该是国内最大的代码托管平台。\n\n\n# 码市\n\n背后公司是腾讯云。\n\n虽然本身已经是腾讯云的一个子产品，但是目前至少是有独立域名，而且独立提供服务。\n\n网址是 https://coding.net/\n\n\n# 百度云\n\n这里并不是在推官百度的产品，而是做一个对比。\n\n虽然大家都是代码托管平台，但是到百度云这里已经没有独立域名了。\n\n因为它只是百度云系列产品中普通的一个产品模块而已，只是为百度云提供服务的。\n\n百度云代码托管产品\n\n\n# CSDN 代码托管平台（已关闭）\n\n参考这篇文章，发现该服务已经关闭了。参考文章\n\n\n# github\n\n网址是 https://github.com\n\n这个不用多说，代码托管界的扛把子。\n\n虽然微软也会把 github 和 azure 做整合，但是并不会影响 github 本身的体验。\n\n\n# gitlab\n\n网址是 https://about.gitlab.com/\n\n这个在以前还是比较有用的，因为以前 github 对私有仓库是收费的。而 gitlab 是免费的。但是现在 github 对私有仓库也是免费的。\n\n还有一部分人可能是对微软的产品有抵触情绪，所以不愿意使用 github，可以使用 gitlab。\n\n关键 gitlab 是支持私有化部署的，国内大多数公司的内部代码管理系统应该都是 gitlab 吧。\n\n\n# bitbucket\n\n背后公司是 atlassian。就是开发 jira 和 confluence 的公司。\n\n网址是 https://bitbucket.org/product/\n\n\n# google code（已关闭）\n\n网址是 https://code.google.com/\n\n参考这篇文章",normalizedContent:"# 国内外代码托管服务总结\n\n\n# 码云\n\n旧网址是 https://git.oschina.net/\n\n新网址是 https://gitee.com\n\n可以看出来背后的公司是开源中国，目前应该是国内最大的代码托管平台。\n\n\n# 码市\n\n背后公司是腾讯云。\n\n虽然本身已经是腾讯云的一个子产品，但是目前至少是有独立域名，而且独立提供服务。\n\n网址是 https://coding.net/\n\n\n# 百度云\n\n这里并不是在推官百度的产品，而是做一个对比。\n\n虽然大家都是代码托管平台，但是到百度云这里已经没有独立域名了。\n\n因为它只是百度云系列产品中普通的一个产品模块而已，只是为百度云提供服务的。\n\n百度云代码托管产品\n\n\n# csdn 代码托管平台（已关闭）\n\n参考这篇文章，发现该服务已经关闭了。参考文章\n\n\n# github\n\n网址是 https://github.com\n\n这个不用多说，代码托管界的扛把子。\n\n虽然微软也会把 github 和 azure 做整合，但是并不会影响 github 本身的体验。\n\n\n# gitlab\n\n网址是 https://about.gitlab.com/\n\n这个在以前还是比较有用的，因为以前 github 对私有仓库是收费的。而 gitlab 是免费的。但是现在 github 对私有仓库也是免费的。\n\n还有一部分人可能是对微软的产品有抵触情绪，所以不愿意使用 github，可以使用 gitlab。\n\n关键 gitlab 是支持私有化部署的，国内大多数公司的内部代码管理系统应该都是 gitlab 吧。\n\n\n# bitbucket\n\n背后公司是 atlassian。就是开发 jira 和 confluence 的公司。\n\n网址是 https://bitbucket.org/product/\n\n\n# google code（已关闭）\n\n网址是 https://code.google.com/\n\n参考这篇文章",charsets:{cjk:!0},lastUpdated:"2021/12/31, 23:17:28"},{title:"公共服务",frontmatter:{title:"公共服务",date:"2021-12-21T11:39:26.000Z",permalink:"/pages/7426c9/",sidebar:!1,categories:["技术"],tags:[null]},regularPath:"/_posts/%E6%8A%80%E6%9C%AF/%E5%85%AC%E5%85%B1%E6%9C%8D%E5%8A%A1.html",relativePath:"_posts/技术/公共服务.md",key:"v-53dee3ba",path:"/pages/7426c9/",headers:[{level:2,title:"最小资源",slug:"最小资源",normalizedTitle:"最小资源",charIndex:2},{level:2,title:"查询 IP",slug:"查询-ip",normalizedTitle:"查询 ip",charIndex:92}],headersStr:"最小资源 查询 IP",content:"# 最小资源\n\n主要作用是用于测试代理是否可用，并且节省流量。\n\n国内某个 204 页面\n\n国内某个 204 页面\n\n国内某个 nginx 欢迎页面\n\n美国某个 204 页面\n\n\n# 查询 IP\n\n国内网站，所以如果本地是智能代理，是不会显示代理 IP，而是真实 IP\n\n国外网站，所以如果本地有代理会显示代理 IP\n\n免费代理 IP",normalizedContent:"# 最小资源\n\n主要作用是用于测试代理是否可用，并且节省流量。\n\n国内某个 204 页面\n\n国内某个 204 页面\n\n国内某个 nginx 欢迎页面\n\n美国某个 204 页面\n\n\n# 查询 ip\n\n国内网站，所以如果本地是智能代理，是不会显示代理 ip，而是真实 ip\n\n国外网站，所以如果本地有代理会显示代理 ip\n\n免费代理 ip",charsets:{cjk:!0},lastUpdated:"2021/12/31, 23:17:28"},{title:"技术内容",frontmatter:{sidebar:!1,title:"技术内容",date:"2021-12-30T13:45:40.000Z",permalink:"/pages/cd1a6e/",categories:["技术"],tags:[null]},regularPath:"/_posts/%E6%8A%80%E6%9C%AF/%E6%8A%80%E6%9C%AF%E5%86%85%E5%AE%B9.html",relativePath:"_posts/技术/技术内容.md",key:"v-05de217e",path:"/pages/cd1a6e/",headersStr:null,content:"# 技术内容\n\n一切技术文章，比如：git，shell，操作系统，编译器，计算机网络。",normalizedContent:"# 技术内容\n\n一切技术文章，比如：git，shell，操作系统，编译器，计算机网络。",charsets:{cjk:!0},lastUpdated:"2021/12/31, 23:17:28"},{title:"名言金句",frontmatter:{sidebar:!1,title:"名言金句",date:"2021-12-26T20:01:07.000Z",permalink:"/pages/de158a/",categories:["生活"],tags:[null]},regularPath:"/_posts/%E7%94%9F%E6%B4%BB/%E5%90%8D%E8%A8%80%E9%87%91%E5%8F%A5.html",relativePath:"_posts/生活/名言金句.md",key:"v-394ea8e1",path:"/pages/de158a/",headersStr:null,content:"我想起下乡插队时分配粮食的张队长。\n\n手气和脚气为什么差别那么大？\n\n外包的优势在于弹性扩容。",normalizedContent:"我想起下乡插队时分配粮食的张队长。\n\n手气和脚气为什么差别那么大？\n\n外包的优势在于弹性扩容。",charsets:{cjk:!0},lastUpdated:"2021/12/31, 23:17:28"},{title:"德州扑克之夜",frontmatter:{title:"德州扑克之夜",date:"2021-12-31T22:46:43.000Z",permalink:"/pages/1d6b00/",sidebar:"auto",categories:["随笔"],tags:[null]},regularPath:"/_posts/%E7%94%9F%E6%B4%BB/%E5%BE%B7%E5%B7%9E%E6%89%91%E5%85%8B%E4%B9%8B%E5%A4%9C.html",relativePath:"_posts/生活/德州扑克之夜.md",key:"v-506a742f",path:"/pages/1d6b00/",headersStr:null,content:"# 难忘的德州扑克之夜\n\n提示\n\n果然以后自信心爆棚的时候，就来一场德州扑克吧，然后就能清楚的认清自己了。\n\n今天是 2021 年 12 月 31 日，没想到在 2021 年的最后一天，参加了公司的德州扑克。\n\n今天玩的是 5/10 的局，一手是 50 个大盲，就是 500 块，总共输了 3 手，就是 1500 元。\n\n说实话还是挺心疼的。在回家的路上，媳妇跟我说想吃樱桃，但是不舍得吃，要 80 多一斤呢。内心就更加后悔了。\n\n回家吃着手里的猪蹄子，感叹 1500 块可以吃多少猪蹄子了，然后又喝了一大杯酸奶，又想到这 1500 块可以喝 100 多杯酸奶了。\n\n不过德州扑克确实是我一直心心念念想玩的游戏了。\n\n有一段时间，一直在手机上玩的德州扑克，然后还看了不少文章喝视频，确实非常迷这个。\n\n虽然在手机上玩这个游戏，总是输多赢少。总是在低端局慢慢攒钱，然后在高端局输得飞起。一直在重复这个过程，总结自己的缺点就是不能控制自己的行为。总是被游戏氛围带动，盲目的跟注以及 all in。\n\n我自我觉得自己洞察到了赌博的奥秘。赌博是非常容易上头的。\n\n当你拿到一手好牌的时候，当你堵到最后一张河牌时，当你是天同花时，当你是天顺时，你会心跳加速。\n\n当你投入了很多筹码，对手也一直跟注的时候。\n\n当你 bluf 对手，但是对手一直跟注时。\n\n所有的一切都是因为筹码再也不是真实的人民币，而只是达到输出形象的工具。\n\n2个大盲说明我有好牌，10个大盲说明我有非常好的牌。all in就是为了说明牌桌上我最大。\n\n至于10个大盲到底是多少人民币，当时的我是不会关心的。\n\n以前在手机上玩的都是虚拟币。所以一直想着能线下玩。但是陌生人组的局是万万不能参加的。和公司的同事玩一玩，心理上更加容易接受一些。\n\n虽然如此，今天在这里确实犯了 2 个错误。\n\n第一个错误是不能随意和陌生人玩德州扑克，虽然大家都是同事，但是并不了解大家的竞技水平。\n\n第二个错误是不应该参与自己不能承受的大额局，我还是适合 1/2 的局，这样算下来，一晚上的输赢应该不会超过 1000 元了。\n\n我一直深刻的知道玩德州扑克，一定不能上头，一旦上头了，就没有办法控制自己的行为，就会胡乱的 all in。再多的本金也会输掉。\n\n但是我还是不能控制住自己的行为，而且本身玩的非常紧，个人形象非常的单一。\n\n今天写下这篇总结，倒也不是说做自我反思。只是做一下纪念。\n\n虽然不至于以后都不再玩德州扑克了，但是至少最近几年是不会再碰这个了。\n\n我知道德州扑克很有意思，但是不适合我。",normalizedContent:"# 难忘的德州扑克之夜\n\n提示\n\n果然以后自信心爆棚的时候，就来一场德州扑克吧，然后就能清楚的认清自己了。\n\n今天是 2021 年 12 月 31 日，没想到在 2021 年的最后一天，参加了公司的德州扑克。\n\n今天玩的是 5/10 的局，一手是 50 个大盲，就是 500 块，总共输了 3 手，就是 1500 元。\n\n说实话还是挺心疼的。在回家的路上，媳妇跟我说想吃樱桃，但是不舍得吃，要 80 多一斤呢。内心就更加后悔了。\n\n回家吃着手里的猪蹄子，感叹 1500 块可以吃多少猪蹄子了，然后又喝了一大杯酸奶，又想到这 1500 块可以喝 100 多杯酸奶了。\n\n不过德州扑克确实是我一直心心念念想玩的游戏了。\n\n有一段时间，一直在手机上玩的德州扑克，然后还看了不少文章喝视频，确实非常迷这个。\n\n虽然在手机上玩这个游戏，总是输多赢少。总是在低端局慢慢攒钱，然后在高端局输得飞起。一直在重复这个过程，总结自己的缺点就是不能控制自己的行为。总是被游戏氛围带动，盲目的跟注以及 all in。\n\n我自我觉得自己洞察到了赌博的奥秘。赌博是非常容易上头的。\n\n当你拿到一手好牌的时候，当你堵到最后一张河牌时，当你是天同花时，当你是天顺时，你会心跳加速。\n\n当你投入了很多筹码，对手也一直跟注的时候。\n\n当你 bluf 对手，但是对手一直跟注时。\n\n所有的一切都是因为筹码再也不是真实的人民币，而只是达到输出形象的工具。\n\n2个大盲说明我有好牌，10个大盲说明我有非常好的牌。all in就是为了说明牌桌上我最大。\n\n至于10个大盲到底是多少人民币，当时的我是不会关心的。\n\n以前在手机上玩的都是虚拟币。所以一直想着能线下玩。但是陌生人组的局是万万不能参加的。和公司的同事玩一玩，心理上更加容易接受一些。\n\n虽然如此，今天在这里确实犯了 2 个错误。\n\n第一个错误是不能随意和陌生人玩德州扑克，虽然大家都是同事，但是并不了解大家的竞技水平。\n\n第二个错误是不应该参与自己不能承受的大额局，我还是适合 1/2 的局，这样算下来，一晚上的输赢应该不会超过 1000 元了。\n\n我一直深刻的知道玩德州扑克，一定不能上头，一旦上头了，就没有办法控制自己的行为，就会胡乱的 all in。再多的本金也会输掉。\n\n但是我还是不能控制住自己的行为，而且本身玩的非常紧，个人形象非常的单一。\n\n今天写下这篇总结，倒也不是说做自我反思。只是做一下纪念。\n\n虽然不至于以后都不再玩德州扑克了，但是至少最近几年是不会再碰这个了。\n\n我知道德州扑克很有意思，但是不适合我。",charsets:{cjk:!0},lastUpdated:"2021/12/31, 23:17:28"},{title:"生活内容",frontmatter:{sidebar:!1,title:"生活内容",date:"2021-12-30T13:44:07.000Z",permalink:"/pages/4c0878/",categories:["生活"],tags:[null]},regularPath:"/_posts/%E7%94%9F%E6%B4%BB/%E7%94%9F%E6%B4%BB%E5%86%85%E5%AE%B9.html",relativePath:"_posts/生活/生活内容.md",key:"v-614d7a7e",path:"/pages/4c0878/",headersStr:null,content:"# 生活内容\n\n鸡汤，吐槽，笑话，头脑风暴。\n\n只要不是技术分章，都是生活内容。",normalizedContent:"# 生活内容\n\n鸡汤，吐槽，笑话，头脑风暴。\n\n只要不是技术分章，都是生活内容。",charsets:{cjk:!0},lastUpdated:"2021/12/31, 23:17:28"},{title:"电影观看记录",frontmatter:{sidebar:!1,title:"电影观看记录",date:"2021-12-26T18:16:08.000Z",permalink:"/pages/67fd5e/",categories:["生活"],tags:[null]},regularPath:"/_posts/%E7%94%9F%E6%B4%BB/%E7%94%B5%E5%BD%B1%E8%A7%82%E7%9C%8B%E8%AE%B0%E5%BD%95.html",relativePath:"_posts/生活/电影观看记录.md",key:"v-c72e380a",path:"/pages/67fd5e/",headers:[{level:2,title:"寻梦环游记",slug:"寻梦环游记",normalizedTitle:"寻梦环游记",charIndex:16},{level:2,title:"哈尔的移动城堡",slug:"哈尔的移动城堡",normalizedTitle:"哈尔的移动城堡",charIndex:31}],headersStr:"寻梦环游记 哈尔的移动城堡",content:"# 记录所有观看的电影\n\n\n# 寻梦环游记\n\n动画片\n\n\n# 哈尔的移动城堡\n\n动画片",normalizedContent:"# 记录所有观看的电影\n\n\n# 寻梦环游记\n\n动画片\n\n\n# 哈尔的移动城堡\n\n动画片",charsets:{cjk:!0},lastUpdated:"2021/12/31, 23:17:28"},{title:"Home",frontmatter:{home:!0,heroText:"kaokei's blog",tagline:"项目文档，学习笔记，游戏，demo。"},regularPath:"/",relativePath:"index.md",key:"v-ebc99984",path:"/",headersStr:null,content:"",normalizedContent:"",charsets:{},lastUpdated:"2021/12/31, 23:17:28"}],themeConfig:{nav:[{text:"项目文档",link:"/project/",items:[{text:"di",link:"/project/di/"},{text:"use-vue-service",link:"/project/use-vue-service/"},{text:"use-react-service",link:"/project/use-react-service/"},{text:"use-solid-service",link:"/project/use-solid-service/"}]},{text:"索引",link:"/archives/",items:[{text:"分类",link:"/categories/"},{text:"标签",link:"/tags/"},{text:"归档",link:"/archives/"}]}],sidebarDepth:2,logo:"/img/logo.svg",repo:"kaokei/kaokei.github.io",searchMaxSuggestions:10,lastUpdated:"上次更新",docsDir:"docs",docsBranch:"docs",editLinks:!0,editLinkText:"编辑",bodyBgImg:"https://picture.zwc365.com/getbing.jpg",sidebar:{"/30.项目文档/":[{title:"di",collapsable:!0,children:[["00.di/00.快速开始.md","快速开始DI","/pages/358991/"],["00.di/01.API参考.md","API参考","/pages/64784b/"],["00.di/02.教程.md","教程","/pages/44ea26/"]]},{title:"use-vue-service",collapsable:!0,children:[["01.use-vue-service/00.快速开始.md","快速开始use-vue-service","/pages/46481f/"],["01.use-vue-service/90.接口文档.md","接口文档","/pages/36ae88/"]]},{title:"use-react-service",collapsable:!0,children:[["02.use-react-service/000.快速入门.md","快速入门","/pages/ac9306/"]]},{title:"use-solid-service",collapsable:!0,children:[["03.use-solid-service/000.快速入门.md","快速入门","/pages/550423/"]]}],catalogue:{}},author:{name:"kaokei",link:"https://github.com/kaokei"},blogger:{avatar:"https://cdn.jsdelivr.net/gh/kaokei/static-cdn/logo/white/logo@512.png"},social:{icons:[]},footer:{createYear:2019,copyrightInfo:'kaokei | <a href="https://github.com/kaokei/kaokei.github.io/blob/docs/LICENSE" target="_blank">MIT License</a>'},htmlModules:{}}},ac=(t(75),t(204),t(138),t(213)),sc=t(214),cc=(t(362),t(229),t(41));var uc={computed:{$filterPosts:function(){return this.$site.pages.filter((function(e){var n=e.frontmatter,t=n.pageComponent,r=n.article,o=n.home;return!(t||!1===r||!0===o)}))},$sortPosts:function(){return(e=this.$filterPosts).sort((function(e,n){var t=e.frontmatter.sticky,r=n.frontmatter.sticky;return t&&r?t==r?Object(cc.a)(e,n):t-r:t&&!r?-1:!t&&r?1:Object(cc.a)(e,n)})),e;var e},$sortPostsByDate:function(){return(e=this.$filterPosts).sort((function(e,n){return Object(cc.a)(e,n)})),e;var e},$groupPosts:function(){return function(e){for(var n={},t={},r=function(r,o){var i=e[r].frontmatter,a=i.categories,s=i.tags;"array"===Object(cc.n)(a)&&a.forEach((function(t){t&&(n[t]||(n[t]=[]),n[t].push(e[r]))})),"array"===Object(cc.n)(s)&&s.forEach((function(n){n&&(t[n]||(t[n]=[]),t[n].push(e[r]))}))},o=0,i=e.length;o<i;o++)r(o);return{categories:n,tags:t}}(this.$sortPosts)},$categoriesAndTags:function(){return function(e){var n=[],t=[];for(var r in e.categories)n.push({key:r,length:e.categories[r].length});for(var o in e.tags)t.push({key:o,length:e.tags[o].length});return{categories:n,tags:t}}(this.$groupPosts)}}};Lo.component(ac.default),Lo.component(sc.default);function lc(e){return e.toString().padStart(2,"0")}t(366);Lo.component("Badge",(function(){return Promise.all([t.e(0),t.e(3)]).then(t.bind(null,511))})),Lo.component("CodeBlock",(function(){return Promise.resolve().then(t.bind(null,213))})),Lo.component("CodeGroup",(function(){return Promise.resolve().then(t.bind(null,214))}));t(367);var pc,dc,fc=t(47),vc=(t(370),t(133),t(212)),hc=t.n(vc),mc=t(100);"valine"===(dc="gitalk")?t.e(47).then(t.t.bind(null,466,7)).then((function(e){return e.default})):"gitalk"===dc&&Promise.all([t.e(0),t.e(46)]).then(t.t.bind(null,467,7)).then((function(){return t.e(45).then(t.t.bind(null,468,7))})).then((function(e){return pc=e.default}));function gc(e,n){var t={};return Reflect.ownKeys(e).forEach((function(r){if("string"==typeof e[r])try{t[r]=hc.a.render(e[r],n)}catch(n){console.warn('Comment config option error at key named "'.concat(r,'"')),console.warn("More info: ".concat(n.message)),t[r]=e[r]}else t[r]=e[r]})),t}console.log('How to use "'.concat("gitalk",'" in ').concat(mc.name,"@v").concat(mc.version,":"),mc.homepage);var bc={render:function(e,n){var t=document.createElement("div");t.id=n,document.querySelector("main.page").appendChild(t),new pc(gc({clientID:"642d3441487709af2c66",clientSecret:"3f1acfc48e7042fce4204021f6068beeb47fb374",repo:"blog-gitalk-comment",owner:"kaokei",admin:["kaokei"],pagerDirection:"last",id:"<%- (frontmatter.permalink || frontmatter.to.path).slice(-16) %>",title:"「评论」<%- frontmatter.title %>",labels:["Gitalk","Comment"],body:"页面：<%- window.location.origin + (frontmatter.to.path || window.location.pathname) %>"},{frontmatter:e})).render(n)},clear:function(e){var n=document.querySelector("#".concat(e));return n&&n.remove(),!0}},yc=null;function xc(e){return bc.clear("vuepress-plugin-comment")}function jc(e){return!1!==e.comment&&!1!==e.comments}function kc(e){if(clearTimeout(yc),document.querySelector("main.page"))return bc.render(e,"vuepress-plugin-comment");yc=setTimeout((function(){return kc(e)}),200)}var wc={mounted:function(){var e=this;yc=setTimeout((function(){var n=Object(fc.a)({to:{},from:{}},e.$frontmatter);xc()&&jc(n)&&kc(n)}),1e3),this.$router.afterEach((function(n,t){if(!n||!t||n.path!==t.path){var r=Object(fc.a)({to:n,from:t},e.$frontmatter);xc()&&jc(r)&&kc(r)}}))}},_c=Object(tc.a)(wc,(function(){var e=this.$createElement;return(this._self._c||e)("div")}),[],!1,null,null,null).exports,Sc=[function(e){e.Vue,e.options,e.router,e.siteData},function(e){var n=e.Vue,t=(e.options,e.router,e.siteData);t.pages.map((function(e){var n=e.frontmatter,r=n.date,o=n.author;"string"==typeof r&&"Z"===r.charAt(r.length-1)&&(e.frontmatter.date=function(e){e instanceof Date||(e=new Date(e));return"".concat(e.getUTCFullYear(),"-").concat(lc(e.getUTCMonth()+1),"-").concat(lc(e.getUTCDate())," ").concat(lc(e.getUTCHours()),":").concat(lc(e.getUTCMinutes()),":").concat(lc(e.getUTCSeconds()))}(r)),o?e.author=o:t.themeConfig.author&&(e.author=t.themeConfig.author)})),n.mixin(uc)},{},function(e){e.Vue.mixin({computed:{$dataBlock:function(){return this.$options.__data__block__}}})},{},{},function(e){e.router;"undefined"!=typeof window&&function(){var e=document.createElement("script"),n=window.location.protocol.split(":")[0];e.src="https"===n?"https://zz.bdstatic.com/linksubmit/push.js":"http://push.zhanzhang.baidu.com/push.js";var t=document.getElementsByTagName("script")[0];t.parentNode.insertBefore(e,t)}()},function(e){e.Vue.component("Comment",_c)},function(e){var n=e.router;"undefined"!=typeof window&&(function(e,n){window.dataLayer=window.dataLayer||[],window.gtag=function(){dataLayer.push(arguments)},gtag("js",new Date),gtag("config",n,{anonymize_ip:!0}),function(){var e=document.createElement("script");e.async=1,e.src="https://www.googletagmanager.com/gtag/js?id="+n;var t=document.getElementsByTagName("script")[0];t.parentNode.insertBefore(e,t)}(),e.afterEach((function(n){var t=e.app.$withBase(n.fullPath);t&&(gtag("set","page_path",t),gtag("event","page_view"))}))}(n,"G-EYD6NYPT3M"),function(e,n){window._hmt=window._hmt||[],function(){var e=document.createElement("script");e.async=1,e.src="https://hm.baidu.com/hm.js?"+n;var t=document.getElementsByTagName("script")[0];t.parentNode.insertBefore(e,t)}(),e.afterEach((function(n){var t=e.app.$withBase(n.fullPath);t&&_hmt.push(["_trackPageview",t])}))}(n,"9f9f1c76099d607f81d70747b83af59f"),function(e,n,t){!function(){var e=document.createElement("script");e.async=1,e.src="https://s9.cnzz.com/z_stat.php?id="+n+"&web_id="+t;var r=document.getElementsByTagName("script")[0];r.parentNode.insertBefore(e,r)}(),e.afterEach((function(n){if("undefined"!=typeof _czc){var t=e.app.$withBase(n.fullPath);t&&_czc.push(["_trackPageview",t])}}))}(n,"1280697181","1280697181"))}],Ec=["Comment"];t(207);function Cc(e,n){return(Cc=Object.setPrototypeOf||function(e,n){return e.__proto__=n,e})(e,n)}t(208);function Ic(e){return(Ic=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function Oc(e,n){if(n&&("object"===Ea(n)||"function"==typeof n))return n;if(void 0!==n)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}function Ac(e){var n=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var t,r=Ic(e);if(n){var o=Ic(this).constructor;t=Reflect.construct(r,arguments,o)}else t=r.apply(this,arguments);return Oc(this,t)}}var Tc=function(e){!function(e,n){if("function"!=typeof n&&null!==n)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(n&&n.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),n&&Cc(e,n)}(t,e);var n=Ac(t);function t(){return ss(this,t),n.apply(this,arguments)}return us(t)}(function(){function e(){ss(this,e),this.store=new Lo({data:{state:{}}})}return us(e,[{key:"$get",value:function(e){return this.store.state[e]}},{key:"$set",value:function(e,n){Lo.set(this.store.state,e,n)}},{key:"$emit",value:function(){var e;(e=this.store).$emit.apply(e,arguments)}},{key:"$on",value:function(){var e;(e=this.store).$on.apply(e,arguments)}}]),e}());Object.assign(Tc.prototype,{getPageAsyncComponent:Fa,getLayoutAsyncComponent:Va,getAsyncComponent:qa,getVueComponent:Ha});var Pc={install:function(e){var n=new Tc;e.$vuepress=n,e.prototype.$vuepress=n}};function $c(e){e.beforeEach((function(n,t,r){if(Lc(e,n.path))r();else if(/(\/|\.html)$/.test(n.path))if(/\/$/.test(n.path)){var o=n.path.replace(/\/$/,"")+".html";Lc(e,o)?r(o):r()}else r();else{var i=n.path+"/",a=n.path+".html";Lc(e,a)?r(a):Lc(e,i)?r(i):r()}}))}function Lc(e,n){return e.options.routes.filter((function(e){return e.path.toLowerCase()===n.toLowerCase()})).length>0}var Rc={props:{pageKey:String,slotKey:{type:String,default:"default"}},render:function(e){var n=this.pageKey||this.$parent.$page.key;return Wa("pageKey",n),Lo.component(n)||Lo.component(n,Fa(n)),Lo.component(n)?e(n):e("")}},zc={functional:!0,props:{slotKey:String,required:!0},render:function(e,n){var t=n.props,r=n.slots;return e("div",{class:["content__".concat(t.slotKey)]},r()[t.slotKey])}},Bc={computed:{openInNewWindowTitle:function(){return this.$themeLocaleConfig.openNewWindowText||"(opens new window)"}}},Dc=(t(375),t(376),Object(tc.a)(Bc,(function(){var e=this.$createElement,n=this._self._c||e;return n("span",[n("svg",{staticClass:"icon outbound",attrs:{xmlns:"http://www.w3.org/2000/svg","aria-hidden":"true",focusable:"false",x:"0px",y:"0px",viewBox:"0 0 100 100",width:"15",height:"15"}},[n("path",{attrs:{fill:"currentColor",d:"M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"}}),this._v(" "),n("polygon",{attrs:{fill:"currentColor",points:"45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"}})]),this._v(" "),n("span",{staticClass:"sr-only"},[this._v(this._s(this.openInNewWindowTitle))])])}),[],!1,null,null,null).exports);function Nc(){return(Nc=Object(r.a)(regeneratorRuntime.mark((function e(n){var t,r,o,i;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t="undefined"!=typeof window&&window.__VUEPRESS_ROUTER_BASE__?window.__VUEPRESS_ROUTER_BASE__:ic.routerBase||ic.base,$c(r=new _a({base:t,mode:"history",fallback:!1,routes:oc,scrollBehavior:function(e,n,t){return t||(e.hash?!Lo.$vuepress.$get("disableScrollBehavior")&&{selector:decodeURIComponent(e.hash)}:{x:0,y:0})}})),o={},e.prev=4,e.next=7,Promise.all(Sc.filter((function(e){return"function"==typeof e})).map((function(e){return e({Vue:Lo,options:o,router:r,siteData:ic,isServer:n})})));case 7:e.next=12;break;case 9:e.prev=9,e.t0=e.catch(4),console.error(e.t0);case 12:return i=new Lo(Object.assign(o,{router:r,render:function(e){return e("div",{attrs:{id:"app"}},[e("RouterView",{ref:"layout"}),e("div",{class:"global-ui"},Ec.map((function(n){return e(n)})))])}})),e.abrupt("return",{app:i,router:r});case 14:case"end":return e.stop()}}),e,null,[[4,9]])})))).apply(this,arguments)}Lo.config.productionTip=!1,Lo.use(_a),Lo.use(Pc),Lo.mixin(function(e,n){var t=arguments.length>2&&void 0!==arguments[2]?arguments[2]:Lo;Sa(n),t.$vuepress.$set("siteData",n);var r=e(t.$vuepress.$get("siteData")),o=new r,i=Object.getOwnPropertyDescriptors(Object.getPrototypeOf(o)),a={};return Object.keys(i).reduce((function(e,n){return n.startsWith("$")&&(e[n]=i[n].get),e}),a),{computed:a}}((function(e){return function(){function n(){ss(this,n)}return us(n,[{key:"setPage",value:function(e){this.__page=e}},{key:"$site",get:function(){return e}},{key:"$themeConfig",get:function(){return this.$site.themeConfig}},{key:"$frontmatter",get:function(){return this.$page.frontmatter}},{key:"$localeConfig",get:function(){var e,n,t=this.$site.locales,r=void 0===t?{}:t;for(var o in r)"/"===o?n=r[o]:0===this.$page.path.indexOf(o)&&(e=r[o]);return e||n||{}}},{key:"$siteTitle",get:function(){return this.$localeConfig.title||this.$site.title||""}},{key:"$canonicalUrl",get:function(){var e=this.$page.frontmatter.canonicalUrl;return"string"==typeof e&&e}},{key:"$title",get:function(){var e=this.$page,n=this.$page.frontmatter.metaTitle;if("string"==typeof n)return n;var t=this.$siteTitle,r=e.frontmatter.home?null:e.frontmatter.title||e.title;return t?r?r+" | "+t:t:r||"VuePress"}},{key:"$description",get:function(){var e=function(e){if(e){var n=e.filter((function(e){return"description"===e.name}))[0];if(n)return n.content}}(this.$page.frontmatter.meta);return e||(this.$page.frontmatter.description||this.$localeConfig.description||this.$site.description||"")}},{key:"$lang",get:function(){return this.$page.frontmatter.lang||this.$localeConfig.lang||"en-US"}},{key:"$localePath",get:function(){return this.$localeConfig.path||"/"}},{key:"$themeLocaleConfig",get:function(){return(this.$site.themeConfig.locales||{})[this.$localePath]||{}}},{key:"$page",get:function(){return this.__page?this.__page:function(e,n){for(var t=0;t<e.length;t++){var r=e[t];if(r.path.toLowerCase()===n.toLowerCase())return r}return{path:"",frontmatter:{}}}(this.$site.pages,this.$route.path)}}]),n}()}),ic)),Lo.component("Content",Rc),Lo.component("ContentSlotsDistributor",zc),Lo.component("OutboundLink",Dc),Lo.component("ClientOnly",{functional:!0,render:function(e,n){var t=n.parent,r=n.children;if(t._isMounted)return r;t.$once("hook:mounted",(function(){t.$forceUpdate()}))}}),Lo.component("Layout",Va("Layout")),Lo.component("NotFound",Va("NotFound")),Lo.prototype.$withBase=function(e){var n=this.$site.base;return"/"===e.charAt(0)?n+e.slice(1):e},window.__VUEPRESS__={version:"1.8.0",hash:"734cf7f"},function(e){return Nc.apply(this,arguments)}(!1).then((function(e){var n=e.app;e.router.onReady((function(){n.$mount("#app")}))}))}]);