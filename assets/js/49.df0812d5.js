(window.webpackJsonp=window.webpackJsonp||[]).push([[49],{516:function(t,v,s){"use strict";s.r(v);var a=s(20),_=Object(a.a)({},(function(){var t=this,v=t.$createElement,s=t._self._c||v;return s("ContentSlotsDistributor",{attrs:{"slot-key":t.$parent.slotKey}},[s("h1",{attrs:{id:"预渲染原理"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#预渲染原理"}},[t._v("#")]),t._v(" 预渲染原理")]),t._v(" "),s("p",[t._v("在网络上搜索预渲染的原理，基本都是在说 webpack 构建完成之后，使用 puppeteer 抓取页面，然后在特定时机保存 html 结果。倒也不是说它不正确。但是我比较关心的是预渲染是怎么提升页面性能的？")]),t._v(" "),s("h2",{attrs:{id:"没有想象中的完美"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#没有想象中的完美"}},[t._v("#")]),t._v(" 没有想象中的完美")]),t._v(" "),s("p",[t._v("一句话解释就是预渲染只能解决 html 和 css 的问题，不能解决 js 的问题。")]),t._v(" "),s("p",[t._v("实际运行过程是这样的。当用户访问网址时，服务器返回的是带有 html 和 css 内容的 html 文件，这样浏览器就能立即渲染页面了，所以看上去页面加载会很快。")]),t._v(" "),s("p",[t._v("但实际上此时的按钮是没有事件响应的。它必须等到 html 文件中引用的 js 文件加载成功之后，作为一个 SPA 应用，在"),s("code",[t._v("mount('#app')")]),t._v("之后，会完全替换掉"),s("code",[t._v('<div id="app"></div>')]),t._v("中的所有内容。此时相应的按钮才会响应点击事件。")]),t._v(" "),s("p",[t._v("总之就是页面实际上渲染了两次。第一次是服务器端返回的完整的 html 内容。第二次是作为普通的 SPA 应用再次渲染。只有第二次渲染之后页面上的按钮才能响应响应的点击事件。")]),t._v(" "),s("h2",{attrs:{id:"vue-有没有针对-mount-做优化"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#vue-有没有针对-mount-做优化"}},[t._v("#")]),t._v(" vue 有没有针对 mount 做优化")]),t._v(" "),s("p",[t._v("我比较好奇就是当"),s("code",[t._v("el")]),t._v("元素中含有内容时，在"),s("code",[t._v("mount('#app')")]),t._v("时有没有复用 dom，还是直接替换的。")]),t._v(" "),s("p",[t._v("目前来看是没有这种优化的，应该就是直接替换。")]),t._v(" "),s("h2",{attrs:{id:"对比普通-html-网页"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#对比普通-html-网页"}},[t._v("#")]),t._v(" 对比普通 html 网页")]),t._v(" "),s("p",[t._v("服务器返回 html 内容后，浏览器开始渲染，同时开始下载 js 文件，当 js 文件下载成功后。然后 js 会查找 dom 元素，然后在 dom 上注册事件。")]),t._v(" "),s("p",[t._v("对比来说，这里并不会导致页面重新渲染。")]),t._v(" "),s("h2",{attrs:{id:"对比-spa-网页"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#对比-spa-网页"}},[t._v("#")]),t._v(" 对比 SPA 网页")]),t._v(" "),s("p",[t._v("服务器返回 html 内容后，一般这里的 html 内容是一个空壳 html，需要等待 js 下载完成后，js 将动态生成的 dom 写入到"),s("code",[t._v('<div id="app"></div>')]),t._v("。")]),t._v(" "),s("p",[t._v("对比来说，这里也是只会渲染一次，但是需要等待 js 下载完成之后才能渲染内容。导致页面白屏的时间较长。")])])}),[],!1,null,null,null);v.default=_.exports}}]);