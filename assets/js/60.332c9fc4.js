(window.webpackJsonp=window.webpackJsonp||[]).push([[60],{389:function(e,t,r){"use strict";r.r(t);var a=r(1),o=Object(a.a)({},(function(){var e=this,t=e._self._c;return t("ContentSlotsDistributor",{attrs:{"slot-key":e.$parent.slotKey}},[t("h2",{attrs:{id:"官方态度"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#官方态度"}},[e._v("#")]),e._v(" 官方态度")]),e._v(" "),t("p",[e._v("因为 vite 是强依赖 esbuild 的，而 esbuild 的最大特性就是速度快，所以也不愿意支持完整的 typescript type checker。")]),e._v(" "),t("p",[e._v("导致 vite 不能和 reflect-metadata 一起使用，比较有名的框架包括 typeorm，nestjs 等都不能很好的结合。")]),e._v(" "),t("h2",{attrs:{id:"walkaround"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#walkaround"}},[e._v("#")]),e._v(" walkaround")]),e._v(" "),t("p",[e._v("因为 vite 是依赖 esbuild 和 rollup 的，所以可以寻找相应的 esbuild 插件和 rollup 插件。")]),e._v(" "),t("p",[e._v("基本思路就是完全使用 swc/tsc 代替 esbuild。或者使用了装饰器的文件让 swc/tsc 处理，其他文件让 esbuild 来处理，这样速度更快。")]),e._v(" "),t("h2",{attrs:{id:"遗憾"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#遗憾"}},[e._v("#")]),e._v(" 遗憾")]),e._v(" "),t("p",[e._v("目前的在线 demo 网站，比如 codesandbox 和 stackblitz 基本都支持 vite 了，但是都还不支持 decorator。")]),e._v(" "),t("h2",{attrs:{id:"参考文章"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#参考文章"}},[e._v("#")]),e._v(" 参考文章")]),e._v(" "),t("p",[t("a",{attrs:{href:"https://zhuanlan.zhihu.com/p/388168464",target:"_blank",rel:"noopener noreferrer"}},[e._v("极速 DX: Vite + Electron + esbuild"),t("OutboundLink")],1),e._v(" "),t("a",{attrs:{href:"https://my.oschina.net/linsk1998/blog/5135188",target:"_blank",rel:"noopener noreferrer"}},[e._v("vite 项目支持 typescript 的 emitDecoratorMetadata 和 experimentalDecorators"),t("OutboundLink")],1),e._v(" "),t("a",{attrs:{href:"https://github.com/evanw/esbuild/issues/257",target:"_blank",rel:"noopener noreferrer"}},[e._v("Support emitting typescript decorator metadata"),t("OutboundLink")],1),e._v(" "),t("a",{attrs:{href:"https://github.com/vitejs/vite/issues/2349",target:"_blank",rel:"noopener noreferrer"}},[e._v("decorators not support in js for prebuild"),t("OutboundLink")],1),e._v(" "),t("a",{attrs:{href:"https://github.com/evanw/esbuild/issues/1392",target:"_blank",rel:"noopener noreferrer"}},[e._v("Ask for support of decortors in jsx! "),t("OutboundLink")],1),e._v(" "),t("a",{attrs:{href:"https://stackoverflow.com/questions/66395054/how-do-i-enable-babel-plugin-proposal-decorators-with-vite",target:"_blank",rel:"noopener noreferrer"}},[e._v('How do i enable "@babel/plugin-proposal-decorators" with vite'),t("OutboundLink")],1),e._v(" "),t("a",{attrs:{href:"https://zhuanlan.zhihu.com/p/417263788",target:"_blank",rel:"noopener noreferrer"}},[e._v("vite react 项目中使用装饰器 开启 decorators-legacy"),t("OutboundLink")],1),e._v(" "),t("a",{attrs:{href:"https://stackoverflow.com/questions/68570519/why-cant-reflect-metadata-be-used-in-vite",target:"_blank",rel:"noopener noreferrer"}},[e._v("Why can't reflect-metadata be used in vite"),t("OutboundLink")],1),e._v(" "),t("a",{attrs:{href:"https://github.com/vitejs/vite/issues/788",target:"_blank",rel:"noopener noreferrer"}},[e._v("Reconsider about using swc as JS/TS transformer"),t("OutboundLink")],1)])])}),[],!1,null,null,null);t.default=o.exports}}]);